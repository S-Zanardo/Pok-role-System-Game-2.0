(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function dw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r0={exports:{}},Zl={},s0={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=Symbol.for("react.element"),hw=Symbol.for("react.portal"),fw=Symbol.for("react.fragment"),pw=Symbol.for("react.strict_mode"),mw=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),yw=Symbol.for("react.context"),vw=Symbol.for("react.forward_ref"),xw=Symbol.for("react.suspense"),_w=Symbol.for("react.memo"),ww=Symbol.for("react.lazy"),jp=Symbol.iterator;function kw(t){return t===null||typeof t!="object"?null:(t=jp&&t[jp]||t["@@iterator"],typeof t=="function"?t:null)}var i0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o0=Object.assign,a0={};function mi(t,e,n){this.props=t,this.context=e,this.refs=a0,this.updater=n||i0}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l0(){}l0.prototype=mi.prototype;function th(t,e,n){this.props=t,this.context=e,this.refs=a0,this.updater=n||i0}var nh=th.prototype=new l0;nh.constructor=th;o0(nh,mi.prototype);nh.isPureReactComponent=!0;var Dp=Array.isArray,c0=Object.prototype.hasOwnProperty,rh={current:null},u0={key:!0,ref:!0,__self:!0,__source:!0};function d0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)c0.call(e,r)&&!u0.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Go,type:t,key:i,ref:o,props:s,_owner:rh.current}}function bw(t,e){return{$$typeof:Go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Go}function Ew(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vp=/\/+/g;function Wc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ew(""+t.key):e.toString(36)}function Ga(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Go:case hw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wc(o,0):r,Dp(s)?(n="",t!=null&&(n=t.replace(Vp,"$&/")+"/"),Ga(s,e,n,"",function(d){return d})):s!=null&&(sh(s)&&(s=bw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Vp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Dp(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Wc(i,c);o+=Ga(i,e,n,u,s)}else if(u=kw(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Wc(i,c++),o+=Ga(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],s=0;return Ga(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Sw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Wa={transition:null},Tw={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:rh};function h0(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!sh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=mi;ve.Fragment=fw;ve.Profiler=mw;ve.PureComponent=th;ve.StrictMode=pw;ve.Suspense=xw;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tw;ve.act=h0;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=o0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)c0.call(e,u)&&!u0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Go,type:t.type,key:s,ref:i,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:yw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gw,_context:t},t.Consumer=t};ve.createElement=d0;ve.createFactory=function(t){var e=d0.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:vw,render:t}};ve.isValidElement=sh;ve.lazy=function(t){return{$$typeof:ww,_payload:{_status:-1,_result:t},_init:Sw}};ve.memo=function(t,e){return{$$typeof:_w,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Wa.transition;Wa.transition={};try{t()}finally{Wa.transition=e}};ve.unstable_act=h0;ve.useCallback=function(t,e){return Ft.current.useCallback(t,e)};ve.useContext=function(t){return Ft.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Ft.current.useEffect(t,e)};ve.useId=function(){return Ft.current.useId()};ve.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Ft.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};ve.useRef=function(t){return Ft.current.useRef(t)};ve.useState=function(t){return Ft.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Ft.current.useTransition()};ve.version="18.3.1";s0.exports=ve;var G=s0.exports;const Wi=dw(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw=G,Nw=Symbol.for("react.element"),Cw=Symbol.for("react.fragment"),Aw=Object.prototype.hasOwnProperty,Pw=Iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rw={key:!0,ref:!0,__self:!0,__source:!0};function f0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Aw.call(e,r)&&!Rw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Nw,type:t,key:i,ref:o,props:s,_owner:Pw.current}}Zl.Fragment=Cw;Zl.jsx=f0;Zl.jsxs=f0;r0.exports=Zl;var l=r0.exports,ju={},p0={exports:{}},en={},m0={exports:{}},g0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,J){var oe=K.length;K.push(J);e:for(;0<oe;){var ye=oe-1>>>1,ge=K[ye];if(0<s(ge,J))K[ye]=J,K[oe]=ge,oe=ye;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],oe=K.pop();if(oe!==J){K[0]=oe;e:for(var ye=0,ge=K.length,ke=ge>>>1;ye<ke;){var et=2*(ye+1)-1,tt=K[et],ft=et+1,Le=K[ft];if(0>s(tt,oe))ft<ge&&0>s(Le,tt)?(K[ye]=Le,K[ft]=oe,ye=ft):(K[ye]=tt,K[et]=oe,ye=et);else if(ft<ge&&0>s(Le,oe))K[ye]=Le,K[ft]=oe,ye=ft;else break e}}return J}function s(K,J){var oe=K.sortIndex-J.sortIndex;return oe!==0?oe:K.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,m=null,x=3,I=!1,T=!1,P=!1,M=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=K)r(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(d)}}function C(K){if(P=!1,S(K),!T)if(n(u)!==null)T=!0,qe(z);else{var J=n(d);J!==null&&Me(C,J.startTime-K)}}function z(K,J){T=!1,P&&(P=!1,E(g),g=-1),I=!0;var oe=x;try{for(S(J),m=n(u);m!==null&&(!(m.expirationTime>J)||K&&!N());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,x=m.priorityLevel;var ge=ye(m.expirationTime<=J);J=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(u)&&r(u),S(J)}else r(u);m=n(u)}if(m!==null)var ke=!0;else{var et=n(d);et!==null&&Me(C,et.startTime-J),ke=!1}return ke}finally{m=null,x=oe,I=!1}}var L=!1,_=null,g=-1,k=5,b=-1;function N(){return!(t.unstable_now()-b<k)}function R(){if(_!==null){var K=t.unstable_now();b=K;var J=!0;try{J=_(!0,K)}finally{J?v():(L=!1,_=null)}}else L=!1}var v;if(typeof w=="function")v=function(){w(R)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ce=se.port2;se.port1.onmessage=R,v=function(){ce.postMessage(null)}}else v=function(){M(R,0)};function qe(K){_=K,L||(L=!0,v())}function Me(K,J){g=M(function(){K(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){T||I||(T=!0,qe(z))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var oe=x;x=J;try{return K()}finally{x=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var oe=x;x=K;try{return J()}finally{x=oe}},t.unstable_scheduleCallback=function(K,J,oe){var ye=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ye+oe:ye):oe=ye,K){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=oe+ge,K={id:p++,callback:J,priorityLevel:K,startTime:oe,expirationTime:ge,sortIndex:-1},oe>ye?(K.sortIndex=oe,e(d,K),n(u)===null&&K===n(d)&&(P?(E(g),g=-1):P=!0,Me(C,oe-ye))):(K.sortIndex=ge,e(u,K),T||I||(T=!0,qe(z))),K},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(K){var J=x;return function(){var oe=x;x=J;try{return K.apply(this,arguments)}finally{x=oe}}}})(g0);m0.exports=g0;var jw=m0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=G,Zt=jw;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y0=new Set,go={};function xs(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(go[t]=e,t=0;t<e.length;t++)y0.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=Object.prototype.hasOwnProperty,Vw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mp={},Lp={};function Mw(t){return Du.call(Lp,t)?!0:Du.call(Mp,t)?!1:Vw.test(t)?Lp[t]=!0:(Mp[t]=!0,!1)}function Lw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ow(t,e,n,r){if(e===null||typeof e>"u"||Lw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ih=/[\-:]([a-z])/g;function oh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ih,oh);kt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ih,oh);kt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ih,oh);kt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ah(t,e,n,r){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ow(e,n,s,r)&&(n=null),r||s===null?Mw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var or=Dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ea=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),lh=Symbol.for("react.strict_mode"),Vu=Symbol.for("react.profiler"),v0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),uh=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),_0=Symbol.for("react.offscreen"),Op=Symbol.iterator;function Li(t){return t===null||typeof t!="object"?null:(t=Op&&t[Op]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,qc;function qi(t){if(qc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qc=e&&e[1]||""}return`
`+qc+t}var Kc=!1;function Qc(t,e){if(!t||Kc)return"";Kc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Kc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qi(t):""}function Fw(t){switch(t.tag){case 5:return qi(t.type);case 16:return qi("Lazy");case 13:return qi("Suspense");case 19:return qi("SuspenseList");case 0:case 2:case 15:return t=Qc(t.type,!1),t;case 11:return t=Qc(t.type.render,!1),t;case 1:return t=Qc(t.type,!0),t;default:return""}}function Ou(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ps:return"Portal";case Vu:return"Profiler";case lh:return"StrictMode";case Mu:return"Suspense";case Lu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x0:return(t.displayName||"Context")+".Consumer";case v0:return(t._context.displayName||"Context")+".Provider";case ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uh:return e=t.displayName||null,e!==null?e:Ou(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return Ou(t(e))}catch{}}return null}function zw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ou(e);case 8:return e===lh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function w0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Uw(t){var e=w0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sa(t){t._valueTracker||(t._valueTracker=Uw(t))}function k0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=w0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fu(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b0(t,e){e=e.checked,e!=null&&ah(t,"checked",e,!1)}function zu(t,e){b0(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uu(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uu(t,e,n){(e!=="number"||dl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ki=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Up(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Ki(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function E0(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function S0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $u(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?S0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ta,T0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ta=Ta||document.createElement("div"),Ta.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ta.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bw=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(t){Bw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),to[e]=to[t]})});function I0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||to.hasOwnProperty(t)&&to[t]?(""+e).trim():e+"px"}function N0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=I0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $w=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hu(t,e){if(e){if($w[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Gu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=null;function dh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qu=null,Hs=null,Gs=null;function $p(t){if(t=Ko(t)){if(typeof qu!="function")throw Error(q(280));var e=t.stateNode;e&&(e=sc(e),qu(t.stateNode,t.type,e))}}function C0(t){Hs?Gs?Gs.push(t):Gs=[t]:Hs=t}function A0(){if(Hs){var t=Hs,e=Gs;if(Gs=Hs=null,$p(t),e)for(t=0;t<e.length;t++)$p(e[t])}}function P0(t,e){return t(e)}function R0(){}var Yc=!1;function j0(t,e,n){if(Yc)return t(e,n);Yc=!0;try{return P0(t,e,n)}finally{Yc=!1,(Hs!==null||Gs!==null)&&(R0(),A0())}}function vo(t,e){var n=t.stateNode;if(n===null)return null;var r=sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Ku=!1;if(Xn)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){Ku=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{Ku=!1}function Hw(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var no=!1,hl=null,fl=!1,Qu=null,Gw={onError:function(t){no=!0,hl=t}};function Ww(t,e,n,r,s,i,o,c,u){no=!1,hl=null,Hw.apply(Gw,arguments)}function qw(t,e,n,r,s,i,o,c,u){if(Ww.apply(this,arguments),no){if(no){var d=hl;no=!1,hl=null}else throw Error(q(198));fl||(fl=!0,Qu=d)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function D0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hp(t){if(_s(t)!==t)throw Error(q(188))}function Kw(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Hp(s),t;if(i===r)return Hp(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function V0(t){return t=Kw(t),t!==null?M0(t):null}function M0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M0(t);if(e!==null)return e;t=t.sibling}return null}var L0=Zt.unstable_scheduleCallback,Gp=Zt.unstable_cancelCallback,Qw=Zt.unstable_shouldYield,Yw=Zt.unstable_requestPaint,Ze=Zt.unstable_now,Xw=Zt.unstable_getCurrentPriorityLevel,hh=Zt.unstable_ImmediatePriority,O0=Zt.unstable_UserBlockingPriority,pl=Zt.unstable_NormalPriority,Jw=Zt.unstable_LowPriority,F0=Zt.unstable_IdlePriority,ec=null,Nn=null;function Zw(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:n1,e1=Math.log,t1=Math.LN2;function n1(t){return t>>>=0,t===0?32:31-(e1(t)/t1|0)|0}var Ia=64,Na=4194304;function Qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ml(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Qi(c):(i&=o,i!==0&&(r=Qi(i)))}else o=n&~s,o!==0?r=Qi(o):i!==0&&(r=Qi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),s=1<<n,r|=t[n],e&=~s;return r}function r1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_n(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=r1(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Yu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z0(){var t=Ia;return Ia<<=1,!(Ia&4194240)&&(Ia=64),t}function Xc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function i1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_n(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ae=0;function U0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B0,ph,$0,H0,G0,Xu=!1,Ca=[],br=null,Er=null,Sr=null,xo=new Map,_o=new Map,mr=[],o1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function Fi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ko(e),e!==null&&ph(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function a1(t,e,n,r,s){switch(e){case"focusin":return br=Fi(br,t,e,n,r,s),!0;case"dragenter":return Er=Fi(Er,t,e,n,r,s),!0;case"mouseover":return Sr=Fi(Sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xo.set(i,Fi(xo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_o.set(i,Fi(_o.get(i)||null,t,e,n,r,s)),!0}return!1}function W0(t){var e=Zr(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=D0(n),e!==null){t.blockedOn=e,G0(t.priority,function(){$0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ju(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wu=r,n.target.dispatchEvent(r),Wu=null}else return e=Ko(n),e!==null&&ph(e),t.blockedOn=n,!1;e.shift()}return!0}function qp(t,e,n){qa(t)&&n.delete(e)}function l1(){Xu=!1,br!==null&&qa(br)&&(br=null),Er!==null&&qa(Er)&&(Er=null),Sr!==null&&qa(Sr)&&(Sr=null),xo.forEach(qp),_o.forEach(qp)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,Xu||(Xu=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,l1)))}function wo(t){function e(s){return zi(s,t)}if(0<Ca.length){zi(Ca[0],t);for(var n=1;n<Ca.length;n++){var r=Ca[n];r.blockedOn===t&&(r.blockedOn=null)}}for(br!==null&&zi(br,t),Er!==null&&zi(Er,t),Sr!==null&&zi(Sr,t),xo.forEach(e),_o.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)W0(n),n.blockedOn===null&&mr.shift()}var Ws=or.ReactCurrentBatchConfig,gl=!0;function c1(t,e,n,r){var s=Ae,i=Ws.transition;Ws.transition=null;try{Ae=1,mh(t,e,n,r)}finally{Ae=s,Ws.transition=i}}function u1(t,e,n,r){var s=Ae,i=Ws.transition;Ws.transition=null;try{Ae=4,mh(t,e,n,r)}finally{Ae=s,Ws.transition=i}}function mh(t,e,n,r){if(gl){var s=Ju(t,e,n,r);if(s===null)au(t,e,r,yl,n),Wp(t,r);else if(a1(s,t,e,n,r))r.stopPropagation();else if(Wp(t,r),e&4&&-1<o1.indexOf(t)){for(;s!==null;){var i=Ko(s);if(i!==null&&B0(i),i=Ju(t,e,n,r),i===null&&au(t,e,r,yl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else au(t,e,r,null,n)}}var yl=null;function Ju(t,e,n,r){if(yl=null,t=dh(r),t=Zr(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=D0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yl=t,null}function q0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xw()){case hh:return 1;case O0:return 4;case pl:case Jw:return 16;case F0:return 536870912;default:return 16}default:return 16}}var _r=null,gh=null,Ka=null;function K0(){if(Ka)return Ka;var t,e=gh,n=e.length,r,s="value"in _r?_r.value:_r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ka=s.slice(t,1<r?1-r:void 0)}function Qa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function Kp(){return!1}function tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:Kp,this.isPropagationStopped=Kp,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yh=tn(gi),qo=Ge({},gi,{view:0,detail:0}),d1=tn(qo),Jc,Zc,Ui,tc=Ge({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(Jc=t.screenX-Ui.screenX,Zc=t.screenY-Ui.screenY):Zc=Jc=0,Ui=t),Jc)},movementY:function(t){return"movementY"in t?t.movementY:Zc}}),Qp=tn(tc),h1=Ge({},tc,{dataTransfer:0}),f1=tn(h1),p1=Ge({},qo,{relatedTarget:0}),eu=tn(p1),m1=Ge({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),g1=tn(m1),y1=Ge({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v1=tn(y1),x1=Ge({},gi,{data:0}),Yp=tn(x1),_1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k1[t])?!!e[t]:!1}function vh(){return b1}var E1=Ge({},qo,{key:function(t){if(t.key){var e=_1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?w1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(t){return t.type==="keypress"?Qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S1=tn(E1),T1=Ge({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xp=tn(T1),I1=Ge({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),N1=tn(I1),C1=Ge({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A1=tn(C1),P1=Ge({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R1=tn(P1),j1=[9,13,27,32],xh=Xn&&"CompositionEvent"in window,ro=null;Xn&&"documentMode"in document&&(ro=document.documentMode);var D1=Xn&&"TextEvent"in window&&!ro,Q0=Xn&&(!xh||ro&&8<ro&&11>=ro),Jp=" ",Zp=!1;function Y0(t,e){switch(t){case"keyup":return j1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function V1(t,e){switch(t){case"compositionend":return X0(e);case"keypress":return e.which!==32?null:(Zp=!0,Jp);case"textInput":return t=e.data,t===Jp&&Zp?null:t;default:return null}}function M1(t,e){if(js)return t==="compositionend"||!xh&&Y0(t,e)?(t=K0(),Ka=gh=_r=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q0&&e.locale!=="ko"?null:e.data;default:return null}}var L1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!L1[t.type]:e==="textarea"}function J0(t,e,n,r){C0(r),e=vl(e,"onChange"),0<e.length&&(n=new yh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var so=null,ko=null;function O1(t){cy(t,0)}function nc(t){var e=Ms(t);if(k0(e))return t}function F1(t,e){if(t==="change")return e}var Z0=!1;if(Xn){var tu;if(Xn){var nu="oninput"in document;if(!nu){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),nu=typeof tm.oninput=="function"}tu=nu}else tu=!1;Z0=tu&&(!document.documentMode||9<document.documentMode)}function nm(){so&&(so.detachEvent("onpropertychange",ey),ko=so=null)}function ey(t){if(t.propertyName==="value"&&nc(ko)){var e=[];J0(e,ko,t,dh(t)),j0(O1,e)}}function z1(t,e,n){t==="focusin"?(nm(),so=e,ko=n,so.attachEvent("onpropertychange",ey)):t==="focusout"&&nm()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(ko)}function B1(t,e){if(t==="click")return nc(e)}function $1(t,e){if(t==="input"||t==="change")return nc(e)}function H1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:H1;function bo(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Du.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function rm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sm(t,e){var n=rm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rm(n)}}function ty(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ty(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ny(){for(var t=window,e=dl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dl(t.document)}return e}function _h(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G1(t){var e=ny(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ty(n.ownerDocument.documentElement,n)){if(r!==null&&_h(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=sm(n,i);var o=sm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W1=Xn&&"documentMode"in document&&11>=document.documentMode,Ds=null,Zu=null,io=null,ed=!1;function im(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ed||Ds==null||Ds!==dl(r)||(r=Ds,"selectionStart"in r&&_h(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&bo(io,r)||(io=r,r=vl(Zu,"onSelect"),0<r.length&&(e=new yh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function Pa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vs={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},ru={},ry={};Xn&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function rc(t){if(ru[t])return ru[t];if(!Vs[t])return t;var e=Vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ry)return ru[t]=e[n];return t}var sy=rc("animationend"),iy=rc("animationiteration"),oy=rc("animationstart"),ay=rc("transitionend"),ly=new Map,om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){ly.set(t,e),xs(e,[t])}for(var su=0;su<om.length;su++){var iu=om[su],q1=iu.toLowerCase(),K1=iu[0].toUpperCase()+iu.slice(1);Br(q1,"on"+K1)}Br(sy,"onAnimationEnd");Br(iy,"onAnimationIteration");Br(oy,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(ay,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function am(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qw(r,e,void 0,t),t.currentTarget=null}function cy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;am(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;am(s,c,d),i=u}}}if(fl)throw t=Qu,fl=!1,Qu=null,t}function Fe(t,e){var n=e[id];n===void 0&&(n=e[id]=new Set);var r=t+"__bubble";n.has(r)||(uy(e,t,2,!1),n.add(r))}function ou(t,e,n){var r=0;e&&(r|=4),uy(n,t,r,e)}var Ra="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[Ra]){t[Ra]=!0,y0.forEach(function(n){n!=="selectionchange"&&(Q1.has(n)||ou(n,!1,t),ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ra]||(e[Ra]=!0,ou("selectionchange",!1,e))}}function uy(t,e,n,r){switch(q0(e)){case 1:var s=c1;break;case 4:s=u1;break;default:s=mh}n=s.bind(null,e,n,t),s=void 0,!Ku||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function au(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Zr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}j0(function(){var d=i,p=dh(n),m=[];e:{var x=ly.get(t);if(x!==void 0){var I=yh,T=t;switch(t){case"keypress":if(Qa(n)===0)break e;case"keydown":case"keyup":I=S1;break;case"focusin":T="focus",I=eu;break;case"focusout":T="blur",I=eu;break;case"beforeblur":case"afterblur":I=eu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=f1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=N1;break;case sy:case iy:case oy:I=g1;break;case ay:I=A1;break;case"scroll":I=d1;break;case"wheel":I=R1;break;case"copy":case"cut":case"paste":I=v1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Xp}var P=(e&4)!==0,M=!P&&t==="scroll",E=P?x!==null?x+"Capture":null:x;P=[];for(var w=d,S;w!==null;){S=w;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,E!==null&&(C=vo(w,E),C!=null&&P.push(So(w,C,S)))),M)break;w=w.return}0<P.length&&(x=new I(x,T,null,n,p),m.push({event:x,listeners:P}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",x&&n!==Wu&&(T=n.relatedTarget||n.fromElement)&&(Zr(T)||T[Jn]))break e;if((I||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,I?(T=n.relatedTarget||n.toElement,I=d,T=T?Zr(T):null,T!==null&&(M=_s(T),T!==M||T.tag!==5&&T.tag!==6)&&(T=null)):(I=null,T=d),I!==T)){if(P=Qp,C="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=Xp,C="onPointerLeave",E="onPointerEnter",w="pointer"),M=I==null?x:Ms(I),S=T==null?x:Ms(T),x=new P(C,w+"leave",I,n,p),x.target=M,x.relatedTarget=S,C=null,Zr(p)===d&&(P=new P(E,w+"enter",T,n,p),P.target=S,P.relatedTarget=M,C=P),M=C,I&&T)t:{for(P=I,E=T,w=0,S=P;S;S=Is(S))w++;for(S=0,C=E;C;C=Is(C))S++;for(;0<w-S;)P=Is(P),w--;for(;0<S-w;)E=Is(E),S--;for(;w--;){if(P===E||E!==null&&P===E.alternate)break t;P=Is(P),E=Is(E)}P=null}else P=null;I!==null&&lm(m,x,I,P,!1),T!==null&&M!==null&&lm(m,M,T,P,!0)}}e:{if(x=d?Ms(d):window,I=x.nodeName&&x.nodeName.toLowerCase(),I==="select"||I==="input"&&x.type==="file")var z=F1;else if(em(x))if(Z0)z=$1;else{z=U1;var L=z1}else(I=x.nodeName)&&I.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(z=B1);if(z&&(z=z(t,d))){J0(m,z,n,p);break e}L&&L(t,x,d),t==="focusout"&&(L=x._wrapperState)&&L.controlled&&x.type==="number"&&Uu(x,"number",x.value)}switch(L=d?Ms(d):window,t){case"focusin":(em(L)||L.contentEditable==="true")&&(Ds=L,Zu=d,io=null);break;case"focusout":io=Zu=Ds=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,im(m,n,p);break;case"selectionchange":if(W1)break;case"keydown":case"keyup":im(m,n,p)}var _;if(xh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else js?Y0(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Q0&&n.locale!=="ko"&&(js||g!=="onCompositionStart"?g==="onCompositionEnd"&&js&&(_=K0()):(_r=p,gh="value"in _r?_r.value:_r.textContent,js=!0)),L=vl(d,g),0<L.length&&(g=new Yp(g,t,null,n,p),m.push({event:g,listeners:L}),_?g.data=_:(_=X0(n),_!==null&&(g.data=_)))),(_=D1?V1(t,n):M1(t,n))&&(d=vl(d,"onBeforeInput"),0<d.length&&(p=new Yp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=_))}cy(m,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vo(t,n),i!=null&&r.unshift(So(t,i,s)),i=vo(t,e),i!=null&&r.push(So(t,i,s))),t=t.return}return r}function Is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=vo(n,i),u!=null&&o.unshift(So(n,u,c))):s||(u=vo(n,i),u!=null&&o.push(So(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Y1=/\r\n?/g,X1=/\u0000|\uFFFD/g;function cm(t){return(typeof t=="string"?t:""+t).replace(Y1,`
`).replace(X1,"")}function ja(t,e,n){if(e=cm(e),cm(t)!==e&&n)throw Error(q(425))}function xl(){}var td=null,nd=null;function rd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sd=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(t){return um.resolve(null).then(t).catch(ek)}:sd;function ek(t){setTimeout(function(){throw t})}function lu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wo(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),In="__reactFiber$"+yi,To="__reactProps$"+yi,Jn="__reactContainer$"+yi,id="__reactEvents$"+yi,tk="__reactListeners$"+yi,nk="__reactHandles$"+yi;function Zr(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dm(t);t!==null;){if(n=t[In])return n;t=dm(t)}return e}t=n,n=t.parentNode}return null}function Ko(t){return t=t[In]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function sc(t){return t[To]||null}var od=[],Ls=-1;function $r(t){return{current:t}}function ze(t){0>Ls||(t.current=od[Ls],od[Ls]=null,Ls--)}function Ve(t,e){Ls++,od[Ls]=t.current,t.current=e}var Mr={},jt=$r(Mr),Gt=$r(!1),cs=Mr;function ei(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wt(t){return t=t.childContextTypes,t!=null}function _l(){ze(Gt),ze(jt)}function hm(t,e,n){if(jt.current!==Mr)throw Error(q(168));Ve(jt,e),Ve(Gt,n)}function dy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,zw(t)||"Unknown",s));return Ge({},n,r)}function wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,cs=jt.current,Ve(jt,t),Ve(Gt,Gt.current),!0}function fm(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=dy(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,ze(Gt),ze(jt),Ve(jt,t)):ze(Gt),Ve(Gt,n)}var zn=null,ic=!1,cu=!1;function hy(t){zn===null?zn=[t]:zn.push(t)}function rk(t){ic=!0,hy(t)}function Hr(){if(!cu&&zn!==null){cu=!0;var t=0,e=Ae;try{var n=zn;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,ic=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),L0(hh,Hr),s}finally{Ae=e,cu=!1}}return null}var Os=[],Fs=0,kl=null,bl=0,nn=[],rn=0,us=null,$n=1,Hn="";function Qr(t,e){Os[Fs++]=bl,Os[Fs++]=kl,kl=t,bl=e}function fy(t,e,n){nn[rn++]=$n,nn[rn++]=Hn,nn[rn++]=us,us=t;var r=$n;t=Hn;var s=32-_n(r)-1;r&=~(1<<s),n+=1;var i=32-_n(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$n=1<<32-_n(e)+s|n<<s|r,Hn=i+t}else $n=1<<i|n<<s|r,Hn=t}function wh(t){t.return!==null&&(Qr(t,1),fy(t,1,0))}function kh(t){for(;t===kl;)kl=Os[--Fs],Os[Fs]=null,bl=Os[--Fs],Os[Fs]=null;for(;t===us;)us=nn[--rn],nn[rn]=null,Hn=nn[--rn],nn[rn]=null,$n=nn[--rn],nn[rn]=null}var Jt=null,Xt=null,Ue=!1,vn=null;function py(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:$n,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Xt=null,!0):!1;default:return!1}}function ad(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ld(t){if(Ue){var e=Xt;if(e){var n=e;if(!pm(t,e)){if(ad(t))throw Error(q(418));e=Tr(n.nextSibling);var r=Jt;e&&pm(t,e)?py(r,n):(t.flags=t.flags&-4097|2,Ue=!1,Jt=t)}}else{if(ad(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ue=!1,Jt=t}}}function mm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Da(t){if(t!==Jt)return!1;if(!Ue)return mm(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rd(t.type,t.memoizedProps)),e&&(e=Xt)){if(ad(t))throw my(),Error(q(418));for(;e;)py(t,e),e=Tr(e.nextSibling)}if(mm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Jt?Tr(t.stateNode.nextSibling):null;return!0}function my(){for(var t=Xt;t;)t=Tr(t.nextSibling)}function ti(){Xt=Jt=null,Ue=!1}function bh(t){vn===null?vn=[t]:vn.push(t)}var sk=or.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Va(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gm(t){var e=t._init;return e(t._payload)}function gy(t){function e(E,w){if(t){var S=E.deletions;S===null?(E.deletions=[w],E.flags|=16):S.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Ar(E,w),E.index=0,E.sibling=null,E}function i(E,w,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<w?(E.flags|=2,w):S):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,w,S,C){return w===null||w.tag!==6?(w=gu(S,E.mode,C),w.return=E,w):(w=s(w,S),w.return=E,w)}function u(E,w,S,C){var z=S.type;return z===Rs?p(E,w,S.props.children,C,S.key):w!==null&&(w.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===fr&&gm(z)===w.type)?(C=s(w,S.props),C.ref=Bi(E,w,S),C.return=E,C):(C=nl(S.type,S.key,S.props,null,E.mode,C),C.ref=Bi(E,w,S),C.return=E,C)}function d(E,w,S,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=yu(S,E.mode,C),w.return=E,w):(w=s(w,S.children||[]),w.return=E,w)}function p(E,w,S,C,z){return w===null||w.tag!==7?(w=is(S,E.mode,C,z),w.return=E,w):(w=s(w,S),w.return=E,w)}function m(E,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gu(""+w,E.mode,S),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ea:return S=nl(w.type,w.key,w.props,null,E.mode,S),S.ref=Bi(E,null,w),S.return=E,S;case Ps:return w=yu(w,E.mode,S),w.return=E,w;case fr:var C=w._init;return m(E,C(w._payload),S)}if(Ki(w)||Li(w))return w=is(w,E.mode,S,null),w.return=E,w;Va(E,w)}return null}function x(E,w,S,C){var z=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return z!==null?null:c(E,w,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ea:return S.key===z?u(E,w,S,C):null;case Ps:return S.key===z?d(E,w,S,C):null;case fr:return z=S._init,x(E,w,z(S._payload),C)}if(Ki(S)||Li(S))return z!==null?null:p(E,w,S,C,null);Va(E,S)}return null}function I(E,w,S,C,z){if(typeof C=="string"&&C!==""||typeof C=="number")return E=E.get(S)||null,c(w,E,""+C,z);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ea:return E=E.get(C.key===null?S:C.key)||null,u(w,E,C,z);case Ps:return E=E.get(C.key===null?S:C.key)||null,d(w,E,C,z);case fr:var L=C._init;return I(E,w,S,L(C._payload),z)}if(Ki(C)||Li(C))return E=E.get(S)||null,p(w,E,C,z,null);Va(w,C)}return null}function T(E,w,S,C){for(var z=null,L=null,_=w,g=w=0,k=null;_!==null&&g<S.length;g++){_.index>g?(k=_,_=null):k=_.sibling;var b=x(E,_,S[g],C);if(b===null){_===null&&(_=k);break}t&&_&&b.alternate===null&&e(E,_),w=i(b,w,g),L===null?z=b:L.sibling=b,L=b,_=k}if(g===S.length)return n(E,_),Ue&&Qr(E,g),z;if(_===null){for(;g<S.length;g++)_=m(E,S[g],C),_!==null&&(w=i(_,w,g),L===null?z=_:L.sibling=_,L=_);return Ue&&Qr(E,g),z}for(_=r(E,_);g<S.length;g++)k=I(_,E,g,S[g],C),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?g:k.key),w=i(k,w,g),L===null?z=k:L.sibling=k,L=k);return t&&_.forEach(function(N){return e(E,N)}),Ue&&Qr(E,g),z}function P(E,w,S,C){var z=Li(S);if(typeof z!="function")throw Error(q(150));if(S=z.call(S),S==null)throw Error(q(151));for(var L=z=null,_=w,g=w=0,k=null,b=S.next();_!==null&&!b.done;g++,b=S.next()){_.index>g?(k=_,_=null):k=_.sibling;var N=x(E,_,b.value,C);if(N===null){_===null&&(_=k);break}t&&_&&N.alternate===null&&e(E,_),w=i(N,w,g),L===null?z=N:L.sibling=N,L=N,_=k}if(b.done)return n(E,_),Ue&&Qr(E,g),z;if(_===null){for(;!b.done;g++,b=S.next())b=m(E,b.value,C),b!==null&&(w=i(b,w,g),L===null?z=b:L.sibling=b,L=b);return Ue&&Qr(E,g),z}for(_=r(E,_);!b.done;g++,b=S.next())b=I(_,E,g,b.value,C),b!==null&&(t&&b.alternate!==null&&_.delete(b.key===null?g:b.key),w=i(b,w,g),L===null?z=b:L.sibling=b,L=b);return t&&_.forEach(function(R){return e(E,R)}),Ue&&Qr(E,g),z}function M(E,w,S,C){if(typeof S=="object"&&S!==null&&S.type===Rs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ea:e:{for(var z=S.key,L=w;L!==null;){if(L.key===z){if(z=S.type,z===Rs){if(L.tag===7){n(E,L.sibling),w=s(L,S.props.children),w.return=E,E=w;break e}}else if(L.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===fr&&gm(z)===L.type){n(E,L.sibling),w=s(L,S.props),w.ref=Bi(E,L,S),w.return=E,E=w;break e}n(E,L);break}else e(E,L);L=L.sibling}S.type===Rs?(w=is(S.props.children,E.mode,C,S.key),w.return=E,E=w):(C=nl(S.type,S.key,S.props,null,E.mode,C),C.ref=Bi(E,w,S),C.return=E,E=C)}return o(E);case Ps:e:{for(L=S.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(E,w.sibling),w=s(w,S.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=yu(S,E.mode,C),w.return=E,E=w}return o(E);case fr:return L=S._init,M(E,w,L(S._payload),C)}if(Ki(S))return T(E,w,S,C);if(Li(S))return P(E,w,S,C);Va(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,S),w.return=E,E=w):(n(E,w),w=gu(S,E.mode,C),w.return=E,E=w),o(E)):n(E,w)}return M}var ni=gy(!0),yy=gy(!1),El=$r(null),Sl=null,zs=null,Eh=null;function Sh(){Eh=zs=Sl=null}function Th(t){var e=El.current;ze(El),t._currentValue=e}function cd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){Sl=t,Eh=zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(Eh!==t)if(t={context:t,memoizedValue:e,next:null},zs===null){if(Sl===null)throw Error(q(308));zs=t,Sl.dependencies={lanes:0,firstContext:t}}else zs=zs.next=t;return e}var es=null;function Ih(t){es===null?es=[t]:es.push(t)}function vy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ih(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pr=!1;function Nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Zn(t,n)}return s=r.interleaved,s===null?(e.next=e,Ih(r)):(e.next=s.next,s.next=e),r.interleaved=e,Zn(t,n)}function Ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fh(t,n)}}function ym(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tl(t,e,n,r){var s=t.updateQueue;pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,c=i;do{var x=c.lane,I=c.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:I,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var T=t,P=c;switch(x=e,I=n,P.tag){case 1:if(T=P.payload,typeof T=="function"){m=T.call(I,m,x);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=P.payload,x=typeof T=="function"?T.call(I,m,x):T,x==null)break e;m=Ge({},m,x);break e;case 2:pr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[c]:x.push(c))}else I={eventTime:I,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=I,u=m):p=p.next=I,o|=x;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;x=c,c=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=m}}function vm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Qo={},Cn=$r(Qo),Io=$r(Qo),No=$r(Qo);function ts(t){if(t===Qo)throw Error(q(174));return t}function Ch(t,e){switch(Ve(No,e),Ve(Io,t),Ve(Cn,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$u(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$u(e,t)}ze(Cn),Ve(Cn,e)}function ri(){ze(Cn),ze(Io),ze(No)}function _y(t){ts(No.current);var e=ts(Cn.current),n=$u(e,t.type);e!==n&&(Ve(Io,t),Ve(Cn,n))}function Ah(t){Io.current===t&&(ze(Cn),ze(Io))}var $e=$r(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uu=[];function Ph(){for(var t=0;t<uu.length;t++)uu[t]._workInProgressVersionPrimary=null;uu.length=0}var Xa=or.ReactCurrentDispatcher,du=or.ReactCurrentBatchConfig,ds=0,He=null,it=null,dt=null,Nl=!1,oo=!1,Co=0,ik=0;function It(){throw Error(q(321))}function Rh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function jh(t,e,n,r,s,i){if(ds=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xa.current=t===null||t.memoizedState===null?ck:uk,t=n(r,s),oo){i=0;do{if(oo=!1,Co=0,25<=i)throw Error(q(301));i+=1,dt=it=null,e.updateQueue=null,Xa.current=dk,t=n(r,s)}while(oo)}if(Xa.current=Cl,e=it!==null&&it.next!==null,ds=0,dt=it=He=null,Nl=!1,e)throw Error(q(300));return t}function Dh(){var t=Co!==0;return Co=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?He.memoizedState=dt=t:dt=dt.next=t,dt}function un(){if(it===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=dt===null?He.memoizedState:dt.next;if(e!==null)dt=e,it=t;else{if(t===null)throw Error(q(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},dt===null?He.memoizedState=dt=t:dt=dt.next=t}return dt}function Ao(t,e){return typeof e=="function"?e(t):e}function hu(t){var e=un(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var p=d.lane;if((ds&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,He.lanes|=p,hs|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,bn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,He.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fu(t){var e=un(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bn(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function wy(){}function ky(t,e){var n=He,r=un(),s=e(),i=!bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ht=!0),r=r.queue,Vh(Sy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Po(9,Ey.bind(null,n,r,s,e),void 0,null),ht===null)throw Error(q(349));ds&30||by(n,e,s)}return s}function by(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ey(t,e,n,r){e.value=n,e.getSnapshot=r,Ty(e)&&Iy(t)}function Sy(t,e,n){return n(function(){Ty(e)&&Iy(t)})}function Ty(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function Iy(t){var e=Zn(t,1);e!==null&&wn(e,t,1,-1)}function xm(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:t},e.queue=t,t=t.dispatch=lk.bind(null,He,t),[e.memoizedState,t]}function Po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ny(){return un().memoizedState}function Ja(t,e,n,r){var s=Tn();He.flags|=t,s.memoizedState=Po(1|e,n,void 0,r===void 0?null:r)}function oc(t,e,n,r){var s=un();r=r===void 0?null:r;var i=void 0;if(it!==null){var o=it.memoizedState;if(i=o.destroy,r!==null&&Rh(r,o.deps)){s.memoizedState=Po(e,n,i,r);return}}He.flags|=t,s.memoizedState=Po(1|e,n,i,r)}function _m(t,e){return Ja(8390656,8,t,e)}function Vh(t,e){return oc(2048,8,t,e)}function Cy(t,e){return oc(4,2,t,e)}function Ay(t,e){return oc(4,4,t,e)}function Py(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ry(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,Py.bind(null,e,t),n)}function Mh(){}function jy(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dy(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vy(t,e,n){return ds&21?(bn(n,e)||(n=z0(),He.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function ok(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=du.transition;du.transition={};try{t(!1),e()}finally{Ae=n,du.transition=r}}function My(){return un().memoizedState}function ak(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ly(t))Oy(e,n);else if(n=vy(t,e,n,r),n!==null){var s=Ot();wn(n,t,r,s),Fy(n,e,r)}}function lk(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ly(t))Oy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,bn(c,o)){var u=e.interleaved;u===null?(s.next=s,Ih(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=vy(t,e,s,r),n!==null&&(s=Ot(),wn(n,t,r,s),Fy(n,e,r))}}function Ly(t){var e=t.alternate;return t===He||e!==null&&e===He}function Oy(t,e){oo=Nl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fh(t,n)}}var Cl={readContext:cn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},ck={readContext:cn,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:_m,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ja(4194308,4,Py.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ja(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ak.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:xm,useDebugValue:Mh,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=xm(!1),e=t[0];return t=ok.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=Tn();if(Ue){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),ht===null)throw Error(q(349));ds&30||by(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_m(Sy.bind(null,r,i,t),[t]),r.flags|=2048,Po(9,Ey.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Tn(),e=ht.identifierPrefix;if(Ue){var n=Hn,r=$n;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ik++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uk={readContext:cn,useCallback:jy,useContext:cn,useEffect:Vh,useImperativeHandle:Ry,useInsertionEffect:Cy,useLayoutEffect:Ay,useMemo:Dy,useReducer:hu,useRef:Ny,useState:function(){return hu(Ao)},useDebugValue:Mh,useDeferredValue:function(t){var e=un();return Vy(e,it.memoizedState,t)},useTransition:function(){var t=hu(Ao)[0],e=un().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:ky,useId:My,unstable_isNewReconciler:!1},dk={readContext:cn,useCallback:jy,useContext:cn,useEffect:Vh,useImperativeHandle:Ry,useInsertionEffect:Cy,useLayoutEffect:Ay,useMemo:Dy,useReducer:fu,useRef:Ny,useState:function(){return fu(Ao)},useDebugValue:Mh,useDeferredValue:function(t){var e=un();return it===null?e.memoizedState=t:Vy(e,it.memoizedState,t)},useTransition:function(){var t=fu(Ao)[0],e=un().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:ky,useId:My,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ud(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=Cr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(wn(e,t,s,r),Ya(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),s=Cr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(wn(e,t,s,r),Ya(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Cr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(wn(e,t,r,n),Ya(e,t,r))}};function wm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!bo(n,r)||!bo(s,i):!0}function zy(t,e,n){var r=!1,s=Mr,i=e.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Wt(e)?cs:jt.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function dd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Nh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Wt(e)?cs:jt.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ud(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ac.enqueueReplaceState(s,s.state,null),Tl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=Fw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hk=typeof WeakMap=="function"?WeakMap:Map;function Uy(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pl||(Pl=!0,kd=r),hd(t,e)},n}function By(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hd(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Tk.bind(null,t,e,n),e.then(t,t))}function Em(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var fk=or.ReactCurrentOwner,Ht=!1;function Lt(t,e,n,r){e.child=t===null?yy(e,null,n,r):ni(e,t.child,n,r)}function Tm(t,e,n,r,s){n=n.render;var i=e.ref;return qs(e,s),r=jh(t,e,n,r,i,s),n=Dh(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(Ue&&n&&wh(e),e.flags|=1,Lt(t,e,r,s),e.child)}function Im(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$y(t,e,i,r,s)):(t=nl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(o,r)&&t.ref===e.ref)return er(t,e,s)}return e.flags|=1,t=Ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function $y(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bo(i,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,er(t,e,s)}return fd(t,e,n,r,s)}function Hy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Bs,Yt),Yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Bs,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ve(Bs,Yt),Yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ve(Bs,Yt),Yt|=r;return Lt(t,e,s,n),e.child}function Gy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fd(t,e,n,r,s){var i=Wt(n)?cs:jt.current;return i=ei(e,i),qs(e,s),n=jh(t,e,n,r,i,s),r=Dh(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(Ue&&r&&wh(e),e.flags|=1,Lt(t,e,n,s),e.child)}function Nm(t,e,n,r,s){if(Wt(n)){var i=!0;wl(e)}else i=!1;if(qs(e,s),e.stateNode===null)Za(t,e),zy(e,n,r),dd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=cn(d):(d=Wt(n)?cs:jt.current,d=ei(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&km(e,o,r,d),pr=!1;var x=e.memoizedState;o.state=x,Tl(e,r,o,s),u=e.memoizedState,c!==r||x!==u||Gt.current||pr?(typeof p=="function"&&(ud(e,n,p,r),u=e.memoizedState),(c=pr||wm(e,n,c,r,x,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xy(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:mn(e.type,c),o.props=d,m=e.pendingProps,x=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Wt(n)?cs:jt.current,u=ei(e,u));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||x!==u)&&km(e,o,r,u),pr=!1,x=e.memoizedState,o.state=x,Tl(e,r,o,s);var T=e.memoizedState;c!==m||x!==T||Gt.current||pr?(typeof I=="function"&&(ud(e,n,I,r),T=e.memoizedState),(d=pr||wm(e,n,d,r,x,T,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return pd(t,e,n,r,i,s)}function pd(t,e,n,r,s,i){Gy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&fm(e,n,!1),er(t,e,i);r=e.stateNode,fk.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,c,i)):Lt(t,e,c,i),e.memoizedState=r.state,s&&fm(e,n,!0),e.child}function Wy(t){var e=t.stateNode;e.pendingContext?hm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hm(t,e.context,!1),Ch(t,e.containerInfo)}function Cm(t,e,n,r,s){return ti(),bh(s),e.flags|=256,Lt(t,e,n,r),e.child}var md={dehydrated:null,treeContext:null,retryLane:0};function gd(t){return{baseLanes:t,cachePool:null,transitions:null}}function qy(t,e,n){var r=e.pendingProps,s=$e.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ve($e,s&1),t===null)return ld(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=uc(o,r,0,null),t=is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gd(n),e.memoizedState=md,t):Lh(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return pk(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Ar(c,i):(i=is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?gd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=md,r}return i=t.child,t=i.sibling,r=Ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lh(t,e){return e=uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ma(t,e,n,r){return r!==null&&bh(r),ni(e,t.child,null,n),t=Lh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=pu(Error(q(422))),Ma(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=uc({mode:"visible",children:r.children},s,0,null),i=is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=gd(o),e.memoizedState=md,i);if(!(e.mode&1))return Ma(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(q(419)),r=pu(i,r,void 0),Ma(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ht||c){if(r=ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Zn(t,s),wn(r,t,s,-1))}return $h(),r=pu(Error(q(421))),Ma(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ik.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xt=Tr(s.nextSibling),Jt=e,Ue=!0,vn=null,t!==null&&(nn[rn++]=$n,nn[rn++]=Hn,nn[rn++]=us,$n=t.id,Hn=t.overflow,us=e),e=Lh(e,r.children),e.flags|=4096,e)}function Am(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cd(t.return,e,n)}function mu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ky(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Lt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Am(t,n,e);else if(t.tag===19)Am(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve($e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mu(e,!0,n,null,i);break;case"together":mu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Za(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mk(t,e,n){switch(e.tag){case 3:Wy(e),ti();break;case 5:_y(e);break;case 1:Wt(e.type)&&wl(e);break;case 4:Ch(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ve(El,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?qy(t,e,n):(Ve($e,$e.current&1),t=er(t,e,n),t!==null?t.sibling:null);Ve($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ky(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,Hy(t,e,n)}return er(t,e,n)}var Qy,yd,Yy,Xy;Qy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yd=function(){};Yy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ts(Cn.current);var i=null;switch(n){case"input":s=Fu(t,s),r=Fu(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=Bu(t,s),r=Bu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xl)}Hu(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(go.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(go.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Fe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Xy=function(t,e,n,r){n!==r&&(e.flags|=4)};function $i(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gk(t,e,n){var r=e.pendingProps;switch(kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Wt(e.type)&&_l(),Nt(e),null;case 3:return r=e.stateNode,ri(),ze(Gt),ze(jt),Ph(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(Sd(vn),vn=null))),yd(t,e),Nt(e),null;case 5:Ah(e);var s=ts(No.current);if(n=e.type,t!==null&&e.stateNode!=null)Yy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Nt(e),null}if(t=ts(Cn.current),Da(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[In]=e,r[To]=i,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<Yi.length;s++)Fe(Yi[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fp(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":Up(r,i),Fe("invalid",r)}Hu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,c,t),s=["children",""+c]):go.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Sa(r),zp(r,i,!0);break;case"textarea":Sa(r),Bp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=S0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[In]=e,t[To]=r,Qy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gu(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),s=r;break;case"iframe":case"object":case"embed":Fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Yi.length;s++)Fe(Yi[s],t);s=r;break;case"source":Fe("error",t),s=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=r;break;case"details":Fe("toggle",t),s=r;break;case"input":Fp(t,r),s=Fu(t,r),Fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":Up(t,r),s=Bu(t,r),Fe("invalid",t);break;default:s=r}Hu(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?N0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&T0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&yo(t,u):typeof u=="number"&&yo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(go.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Fe("scroll",t):u!=null&&ah(t,i,u,o))}switch(n){case"input":Sa(t),zp(t,r,!1);break;case"textarea":Sa(t),Bp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$s(t,!!r.multiple,i,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Xy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=ts(No.current),ts(Cn.current),Da(e)){if(r=e.stateNode,n=e.memoizedProps,r[In]=e,(i=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=e,e.stateNode=r}return Nt(e),null;case 13:if(ze($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Xt!==null&&e.mode&1&&!(e.flags&128))my(),ti(),e.flags|=98560,i=!1;else if(i=Da(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[In]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),i=!1}else vn!==null&&(Sd(vn),vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?at===0&&(at=3):$h())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return ri(),yd(t,e),t===null&&Eo(e.stateNode.containerInfo),Nt(e),null;case 10:return Th(e.type._context),Nt(e),null;case 17:return Wt(e.type)&&_l(),Nt(e),null;case 19:if(ze($e),i=e.memoizedState,i===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$i(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,$i(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve($e,$e.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>ii&&(e.flags|=128,r=!0,$i(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ue)return Nt(e),null}else 2*Ze()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,$i(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=$e.current,Ve($e,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Bh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function yk(t,e){switch(kh(e),e.tag){case 1:return Wt(e.type)&&_l(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),ze(Gt),ze(jt),Ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ah(e),null;case 13:if(ze($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze($e),null;case 4:return ri(),null;case 10:return Th(e.type._context),null;case 22:case 23:return Bh(),null;case 24:return null;default:return null}}var La=!1,Pt=!1,vk=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function vd(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var Pm=!1;function xk(t,e){if(td=gl,t=ny(),_h(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,m=t,x=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)x=m,m=I;for(;;){if(m===t)break t;if(x===n&&++d===s&&(c=o),x===i&&++p===r&&(u=o),(I=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=I}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:t,selectionRange:n},gl=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var P=T.memoizedProps,M=T.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:mn(e.type,P),M);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(C){Ye(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return T=Pm,Pm=!1,T}function ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vd(e,n,i)}s=s.next}while(s!==r)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jy(t){var e=t.alternate;e!==null&&(t.alternate=null,Jy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[To],delete e[id],delete e[tk],delete e[nk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zy(t){return t.tag===5||t.tag===3||t.tag===4}function Rm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xl));else if(r!==4&&(t=t.child,t!==null))for(_d(t,e,n),t=t.sibling;t!==null;)_d(t,e,n),t=t.sibling}function wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wd(t,e,n),t=t.sibling;t!==null;)wd(t,e,n),t=t.sibling}var yt=null,gn=!1;function dr(t,e,n){for(n=n.child;n!==null;)ev(t,e,n),n=n.sibling}function ev(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:Pt||Us(n,e);case 6:var r=yt,s=gn;yt=null,dr(t,e,n),yt=r,gn=s,yt!==null&&(gn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(gn?(t=yt,n=n.stateNode,t.nodeType===8?lu(t.parentNode,n):t.nodeType===1&&lu(t,n),wo(t)):lu(yt,n.stateNode));break;case 4:r=yt,s=gn,yt=n.stateNode.containerInfo,gn=!0,dr(t,e,n),yt=r,gn=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vd(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!Pt&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ye(n,e,c)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,dr(t,e,n),Pt=r):dr(t,e,n);break;default:dr(t,e,n)}}function jm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vk),e.forEach(function(r){var s=Nk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:yt=c.stateNode,gn=!1;break e;case 3:yt=c.stateNode.containerInfo,gn=!0;break e;case 4:yt=c.stateNode.containerInfo,gn=!0;break e}c=c.return}if(yt===null)throw Error(q(160));ev(i,o,s),yt=null,gn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ye(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tv(e,t),e=e.sibling}function tv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),Sn(t),r&4){try{ao(3,t,t.return),lc(3,t)}catch(P){Ye(t,t.return,P)}try{ao(5,t,t.return)}catch(P){Ye(t,t.return,P)}}break;case 1:pn(e,t),Sn(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(pn(e,t),Sn(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var s=t.stateNode;try{yo(s,"")}catch(P){Ye(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&b0(s,i),Gu(c,o);var d=Gu(c,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?N0(s,m):p==="dangerouslySetInnerHTML"?T0(s,m):p==="children"?yo(s,m):ah(s,p,m,d)}switch(c){case"input":zu(s,i);break;case"textarea":E0(s,i);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?$s(s,!!i.multiple,I,!1):x!==!!i.multiple&&(i.defaultValue!=null?$s(s,!!i.multiple,i.defaultValue,!0):$s(s,!!i.multiple,i.multiple?[]:"",!1))}s[To]=i}catch(P){Ye(t,t.return,P)}}break;case 6:if(pn(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Ye(t,t.return,P)}}break;case 3:if(pn(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(P){Ye(t,t.return,P)}break;case 4:pn(e,t),Sn(t);break;case 13:pn(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zh=Ze())),r&4&&jm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(d=Pt)||p,pn(e,t),Pt=d):pn(e,t),Sn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Z=t,p=t.child;p!==null;){for(m=Z=p;Z!==null;){switch(x=Z,I=x.child,x.tag){case 0:case 11:case 14:case 15:ao(4,x,x.return);break;case 1:Us(x,x.return);var T=x.stateNode;if(typeof T.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(P){Ye(r,n,P)}}break;case 5:Us(x,x.return);break;case 22:if(x.memoizedState!==null){Vm(m);continue}}I!==null?(I.return=x,Z=I):Vm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=I0("display",o))}catch(P){Ye(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){Ye(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:pn(e,t),Sn(t),r&4&&jm(t);break;case 21:break;default:pn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zy(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yo(s,""),r.flags&=-33);var i=Rm(t);wd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Rm(t);_d(t,c,o);break;default:throw Error(q(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _k(t,e,n){Z=t,nv(t)}function nv(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||La;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Pt;c=La;var d=Pt;if(La=o,(Pt=u)&&!d)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Mm(s):u!==null?(u.return=o,Z=u):Mm(s);for(;i!==null;)Z=i,nv(i),i=i.sibling;Z=s,La=c,Pt=d}Dm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Dm(t)}}function Dm(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&vm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vm(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&wo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Pt||e.flags&512&&xd(e)}catch(x){Ye(e,e.return,x)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Vm(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Mm(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(u){Ye(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ye(e,s,u)}}var i=e.return;try{xd(e)}catch(u){Ye(e,i,u)}break;case 5:var o=e.return;try{xd(e)}catch(u){Ye(e,o,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){Z=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Z=c;break}Z=e.return}}var wk=Math.ceil,Al=or.ReactCurrentDispatcher,Oh=or.ReactCurrentOwner,an=or.ReactCurrentBatchConfig,Ee=0,ht=null,rt=null,_t=0,Yt=0,Bs=$r(0),at=0,Ro=null,hs=0,cc=0,Fh=0,lo=null,$t=null,zh=0,ii=1/0,Fn=null,Pl=!1,kd=null,Nr=null,Oa=!1,wr=null,Rl=0,co=0,bd=null,el=-1,tl=0;function Ot(){return Ee&6?Ze():el!==-1?el:el=Ze()}function Cr(t){return t.mode&1?Ee&2&&_t!==0?_t&-_t:sk.transition!==null?(tl===0&&(tl=z0()),tl):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:q0(t.type)),t):1}function wn(t,e,n,r){if(50<co)throw co=0,bd=null,Error(q(185));Wo(t,n,r),(!(Ee&2)||t!==ht)&&(t===ht&&(!(Ee&2)&&(cc|=n),at===4&&gr(t,_t)),qt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(ii=Ze()+500,ic&&Hr()))}function qt(t,e){var n=t.callbackNode;s1(t,e);var r=ml(t,t===ht?_t:0);if(r===0)n!==null&&Gp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gp(n),e===1)t.tag===0?rk(Lm.bind(null,t)):hy(Lm.bind(null,t)),Z1(function(){!(Ee&6)&&Hr()}),n=null;else{switch(U0(r)){case 1:n=hh;break;case 4:n=O0;break;case 16:n=pl;break;case 536870912:n=F0;break;default:n=pl}n=uv(n,rv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rv(t,e){if(el=-1,tl=0,Ee&6)throw Error(q(327));var n=t.callbackNode;if(Ks()&&t.callbackNode!==n)return null;var r=ml(t,t===ht?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jl(t,r);else{e=r;var s=Ee;Ee|=2;var i=iv();(ht!==t||_t!==e)&&(Fn=null,ii=Ze()+500,ss(t,e));do try{Ek();break}catch(c){sv(t,c)}while(!0);Sh(),Al.current=i,Ee=s,rt!==null?e=0:(ht=null,_t=0,e=at)}if(e!==0){if(e===2&&(s=Yu(t),s!==0&&(r=s,e=Ed(t,s))),e===1)throw n=Ro,ss(t,0),gr(t,r),qt(t,Ze()),n;if(e===6)gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!kk(s)&&(e=jl(t,r),e===2&&(i=Yu(t),i!==0&&(r=i,e=Ed(t,i))),e===1))throw n=Ro,ss(t,0),gr(t,r),qt(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Yr(t,$t,Fn);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=zh+500-Ze(),10<e)){if(ml(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sd(Yr.bind(null,t,$t,Fn),e);break}Yr(t,$t,Fn);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_n(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wk(r/1960))-r,10<r){t.timeoutHandle=sd(Yr.bind(null,t,$t,Fn),r);break}Yr(t,$t,Fn);break;case 5:Yr(t,$t,Fn);break;default:throw Error(q(329))}}}return qt(t,Ze()),t.callbackNode===n?rv.bind(null,t):null}function Ed(t,e){var n=lo;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=jl(t,e),t!==2&&(e=$t,$t=n,e!==null&&Sd(e)),t}function Sd(t){$t===null?$t=t:$t.push.apply($t,t)}function kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~Fh,e&=~cc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function Lm(t){if(Ee&6)throw Error(q(327));Ks();var e=ml(t,0);if(!(e&1))return qt(t,Ze()),null;var n=jl(t,e);if(t.tag!==0&&n===2){var r=Yu(t);r!==0&&(e=r,n=Ed(t,r))}if(n===1)throw n=Ro,ss(t,0),gr(t,e),qt(t,Ze()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,$t,Fn),qt(t,Ze()),null}function Uh(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(ii=Ze()+500,ic&&Hr())}}function fs(t){wr!==null&&wr.tag===0&&!(Ee&6)&&Ks();var e=Ee;Ee|=1;var n=an.transition,r=Ae;try{if(an.transition=null,Ae=1,t)return t()}finally{Ae=r,an.transition=n,Ee=e,!(Ee&6)&&Hr()}}function Bh(){Yt=Bs.current,ze(Bs)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J1(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:ri(),ze(Gt),ze(jt),Ph();break;case 5:Ah(r);break;case 4:ri();break;case 13:ze($e);break;case 19:ze($e);break;case 10:Th(r.type._context);break;case 22:case 23:Bh()}n=n.return}if(ht=t,rt=t=Ar(t.current,null),_t=Yt=e,at=0,Ro=null,Fh=cc=hs=0,$t=lo=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}es=null}return t}function sv(t,e){do{var n=rt;try{if(Sh(),Xa.current=Cl,Nl){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nl=!1}if(ds=0,dt=it=He=null,oo=!1,Co=0,Oh.current=null,n===null||n.return===null){at=1,Ro=e,rt=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=_t,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=Em(o);if(I!==null){I.flags&=-257,Sm(I,o,c,i,e),I.mode&1&&bm(i,d,e),e=I,u=d;var T=e.updateQueue;if(T===null){var P=new Set;P.add(u),e.updateQueue=P}else T.add(u);break e}else{if(!(e&1)){bm(i,d,e),$h();break e}u=Error(q(426))}}else if(Ue&&c.mode&1){var M=Em(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Sm(M,o,c,i,e),bh(si(u,c));break e}}i=u=si(u,c),at!==4&&(at=2),lo===null?lo=[i]:lo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Uy(i,u,e);ym(i,E);break e;case 1:c=u;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Nr===null||!Nr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=By(i,c,e);ym(i,C);break e}}i=i.return}while(i!==null)}av(n)}catch(z){e=z,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function iv(){var t=Al.current;return Al.current=Cl,t===null?Cl:t}function $h(){(at===0||at===3||at===2)&&(at=4),ht===null||!(hs&268435455)&&!(cc&268435455)||gr(ht,_t)}function jl(t,e){var n=Ee;Ee|=2;var r=iv();(ht!==t||_t!==e)&&(Fn=null,ss(t,e));do try{bk();break}catch(s){sv(t,s)}while(!0);if(Sh(),Ee=n,Al.current=r,rt!==null)throw Error(q(261));return ht=null,_t=0,at}function bk(){for(;rt!==null;)ov(rt)}function Ek(){for(;rt!==null&&!Qw();)ov(rt)}function ov(t){var e=cv(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?av(t):rt=e,Oh.current=null}function av(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yk(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,rt=null;return}}else if(n=gk(n,e,Yt),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);at===0&&(at=5)}function Yr(t,e,n){var r=Ae,s=an.transition;try{an.transition=null,Ae=1,Sk(t,e,n,r)}finally{an.transition=s,Ae=r}return null}function Sk(t,e,n,r){do Ks();while(wr!==null);if(Ee&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(i1(t,i),t===ht&&(rt=ht=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,uv(pl,function(){return Ks(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=Ae;Ae=1;var c=Ee;Ee|=4,Oh.current=null,xk(t,n),tv(n,t),G1(nd),gl=!!td,nd=td=null,t.current=n,_k(n),Yw(),Ee=c,Ae=o,an.transition=i}else t.current=n;if(Oa&&(Oa=!1,wr=t,Rl=s),i=t.pendingLanes,i===0&&(Nr=null),Zw(n.stateNode),qt(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pl)throw Pl=!1,t=kd,kd=null,t;return Rl&1&&t.tag!==0&&Ks(),i=t.pendingLanes,i&1?t===bd?co++:(co=0,bd=t):co=0,Hr(),null}function Ks(){if(wr!==null){var t=U0(Rl),e=an.transition,n=Ae;try{if(an.transition=null,Ae=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,Rl=0,Ee&6)throw Error(q(331));var s=Ee;for(Ee|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Z=d;Z!==null;){var p=Z;switch(p.tag){case 0:case 11:case 15:ao(8,p,i)}var m=p.child;if(m!==null)m.return=p,Z=m;else for(;Z!==null;){p=Z;var x=p.sibling,I=p.return;if(Jy(p),p===d){Z=null;break}if(x!==null){x.return=I,Z=x;break}Z=I}}}var T=i.alternate;if(T!==null){var P=T.child;if(P!==null){T.child=null;do{var M=P.sibling;P.sibling=null,P=M}while(P!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ao(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Z=E;break e}Z=i.return}}var w=t.current;for(Z=w;Z!==null;){o=Z;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Z=S;else e:for(o=w;Z!==null;){if(c=Z,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:lc(9,c)}}catch(z){Ye(c,c.return,z)}if(c===o){Z=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,Z=C;break e}Z=c.return}}if(Ee=s,Hr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(ec,t)}catch{}r=!0}return r}finally{Ae=n,an.transition=e}}return!1}function Om(t,e,n){e=si(n,e),e=Uy(t,e,1),t=Ir(t,e,1),e=Ot(),t!==null&&(Wo(t,1,e),qt(t,e))}function Ye(t,e,n){if(t.tag===3)Om(t,t,n);else for(;e!==null;){if(e.tag===3){Om(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=si(n,t),t=By(e,t,1),e=Ir(e,t,1),t=Ot(),e!==null&&(Wo(e,1,t),qt(e,t));break}}e=e.return}}function Tk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(_t&n)===n&&(at===4||at===3&&(_t&130023424)===_t&&500>Ze()-zh?ss(t,0):Fh|=n),qt(t,e)}function lv(t,e){e===0&&(t.mode&1?(e=Na,Na<<=1,!(Na&130023424)&&(Na=4194304)):e=1);var n=Ot();t=Zn(t,e),t!==null&&(Wo(t,e,n),qt(t,n))}function Ik(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lv(t,n)}function Nk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),lv(t,n)}var cv;cv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,mk(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,Ue&&e.flags&1048576&&fy(e,bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Za(t,e),t=e.pendingProps;var s=ei(e,jt.current);qs(e,n),s=jh(null,e,r,t,s,n);var i=Dh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(i=!0,wl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nh(e),s.updater=ac,e.stateNode=s,s._reactInternals=e,dd(e,r,t,n),e=pd(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&wh(e),Lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Za(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ak(r),t=mn(r,t),s){case 0:e=fd(null,e,r,t,n);break e;case 1:e=Nm(null,e,r,t,n);break e;case 11:e=Tm(null,e,r,t,n);break e;case 14:e=Im(null,e,r,mn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),fd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Nm(t,e,r,s,n);case 3:e:{if(Wy(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xy(t,e),Tl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(q(423)),e),e=Cm(t,e,r,n,s);break e}else if(r!==s){s=si(Error(q(424)),e),e=Cm(t,e,r,n,s);break e}else for(Xt=Tr(e.stateNode.containerInfo.firstChild),Jt=e,Ue=!0,vn=null,n=yy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=er(t,e,n);break e}Lt(t,e,r,n)}e=e.child}return e;case 5:return _y(e),t===null&&ld(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rd(r,s)?o=null:i!==null&&rd(r,i)&&(e.flags|=32),Gy(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&ld(e),null;case 13:return qy(t,e,n);case 4:return Ch(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):Lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Tm(t,e,r,s,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ve(El,r._currentValue),r._currentValue=o,i!==null)if(bn(i.value,o)){if(i.children===s.children&&!Gt.current){e=er(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),cd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),cd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qs(e,n),s=cn(s),r=r(s),e.flags|=1,Lt(t,e,r,n),e.child;case 14:return r=e.type,s=mn(r,e.pendingProps),s=mn(r.type,s),Im(t,e,r,s,n);case 15:return $y(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Za(t,e),e.tag=1,Wt(r)?(t=!0,wl(e)):t=!1,qs(e,n),zy(e,r,s),dd(e,r,s,n),pd(null,e,r,!0,t,n);case 19:return Ky(t,e,n);case 22:return Hy(t,e,n)}throw Error(q(156,e.tag))};function uv(t,e){return L0(t,e)}function Ck(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new Ck(t,e,n,r)}function Hh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ak(t){if(typeof t=="function")return Hh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ch)return 11;if(t===uh)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return is(n.children,s,i,e);case lh:o=8,s|=8;break;case Vu:return t=on(12,n,e,s|2),t.elementType=Vu,t.lanes=i,t;case Mu:return t=on(13,n,e,s),t.elementType=Mu,t.lanes=i,t;case Lu:return t=on(19,n,e,s),t.elementType=Lu,t.lanes=i,t;case _0:return uc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case v0:o=10;break e;case x0:o=9;break e;case ch:o=11;break e;case uh:o=14;break e;case fr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function is(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function uc(t,e,n,r){return t=on(22,t,r,e),t.elementType=_0,t.lanes=n,t.stateNode={isHidden:!1},t}function gu(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function yu(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xc(0),this.expirationTimes=Xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,s,i,o,c,u){return t=new Pk(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=on(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(i),t}function Rk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dv(t){if(!t)return Mr;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Wt(n))return dy(t,n,e)}return e}function hv(t,e,n,r,s,i,o,c,u){return t=Gh(n,r,!0,t,s,i,o,c,u),t.context=dv(null),n=t.current,r=Ot(),s=Cr(n),i=Qn(r,s),i.callback=e??null,Ir(n,i,s),t.current.lanes=s,Wo(t,s,r),qt(t,r),t}function dc(t,e,n,r){var s=e.current,i=Ot(),o=Cr(s);return n=dv(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(wn(t,s,o,i),Ya(t,s,o)),o}function Dl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wh(t,e){Fm(t,e),(t=t.alternate)&&Fm(t,e)}function jk(){return null}var fv=typeof reportError=="function"?reportError:function(t){console.error(t)};function qh(t){this._internalRoot=t}hc.prototype.render=qh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));dc(t,e,null,null)};hc.prototype.unmount=qh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){dc(null,t,null,null)}),e[Jn]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=H0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&W0(t)}};function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zm(){}function Dk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Dl(o);i.call(d)}}var o=hv(e,r,t,0,null,!1,!1,"",zm);return t._reactRootContainer=o,t[Jn]=o.current,Eo(t.nodeType===8?t.parentNode:t),fs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Dl(u);c.call(d)}}var u=Gh(t,0,!1,null,null,!1,!1,"",zm);return t._reactRootContainer=u,t[Jn]=u.current,Eo(t.nodeType===8?t.parentNode:t),fs(function(){dc(e,u,n,r)}),u}function pc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Dl(o);c.call(u)}}dc(e,o,t,s)}else o=Dk(n,e,t,s,r);return Dl(o)}B0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qi(e.pendingLanes);n!==0&&(fh(e,n|1),qt(e,Ze()),!(Ee&6)&&(ii=Ze()+500,Hr()))}break;case 13:fs(function(){var r=Zn(t,1);if(r!==null){var s=Ot();wn(r,t,1,s)}}),Wh(t,1)}};ph=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=Ot();wn(e,t,134217728,n)}Wh(t,134217728)}};$0=function(t){if(t.tag===13){var e=Cr(t),n=Zn(t,e);if(n!==null){var r=Ot();wn(n,t,e,r)}Wh(t,e)}};H0=function(){return Ae};G0=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};qu=function(t,e,n){switch(e){case"input":if(zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sc(r);if(!s)throw Error(q(90));k0(r),zu(r,s)}}}break;case"textarea":E0(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};P0=Uh;R0=fs;var Vk={usingClientEntryPoint:!1,Events:[Ko,Ms,sc,C0,A0,Uh]},Hi={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mk={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:or.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V0(t),t===null?null:t.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||jk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fa.isDisabled&&Fa.supportsFiber)try{ec=Fa.inject(Mk),Nn=Fa}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kh(e))throw Error(q(200));return Rk(t,e,null,n)};en.createRoot=function(t,e){if(!Kh(t))throw Error(q(299));var n=!1,r="",s=fv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,s),t[Jn]=e.current,Eo(t.nodeType===8?t.parentNode:t),new qh(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=V0(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return fs(t)};en.hydrate=function(t,e,n){if(!fc(e))throw Error(q(200));return pc(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Kh(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=fv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hv(e,null,t,1,n??null,s,!1,i,o),t[Jn]=e.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hc(e)};en.render=function(t,e,n){if(!fc(e))throw Error(q(200));return pc(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!fc(t))throw Error(q(40));return t._reactRootContainer?(fs(function(){pc(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};en.unstable_batchedUpdates=Uh;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fc(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return pc(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function pv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pv)}catch(t){console.error(t)}}pv(),p0.exports=en;var Lk=p0.exports,Um=Lk;ju.createRoot=Um.createRoot,ju.hydrateRoot=Um.hydrateRoot;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ok={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=G.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...d},p)=>G.createElement("svg",{ref:p,...Ok,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Fk(t)}`,c].join(" "),...d},[...e.map(([m,x])=>G.createElement(m,x)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=ie("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ie("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=ie("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=ie("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=ie("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ie("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=ie("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ie("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ie("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ie("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ie("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ie("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},db=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let x=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(x=64)),r.push(n[p],n[m],n[x],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):db(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new hb;const x=i<<2|c>>4;if(r.push(x),d!==64){const I=c<<4&240|d>>2;if(r.push(I),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fb=function(t){const e=Sv(t);return Tv.encodeByteArray(e,!0)},Ml=function(t){return fb(t).replace(/\./g,"")},Iv=function(t){try{return Tv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=()=>pb().__FIREBASE_DEFAULTS__,gb=()=>{if(typeof process>"u"||typeof Wm>"u")return;const t=Wm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Iv(t[1]);return e&&JSON.parse(e)},yc=()=>{try{return mb()||gb()||yb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nv=t=>{var e,n;return(n=(e=yc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vb=t=>{const e=Nv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cv=()=>{var t;return(t=yc())===null||t===void 0?void 0:t.config},Av=t=>{var e;return(e=yc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ml(JSON.stringify(n)),Ml(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function kb(){var t;const e=(t=yc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Eb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tb(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ib(){return!kb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nb(){try{return typeof indexedDB=="object"}catch{return!1}}function Cb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ab,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Pb(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new ar(s,c,r)}}function Pb(t,e){return t.replace(Rb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Rb=/\{\$([^}]+)}/g;function jb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ll(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qm(i)&&qm(o)){if(!Ll(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Db(t,e){const n=new Vb(t,e);return n.subscribe.bind(n)}class Vb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Mb(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_u),s.error===void 0&&(s.error=_u),s.complete===void 0&&(s.complete=_u);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _u(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t&&t._delegate?t._delegate:t}class ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fb(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ob(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ob(t){return t===Xr?void 0:t}function Fb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Ub={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Bb=_e.INFO,$b={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Hb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$b[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yh{constructor(e){this.name=e,this._logLevel=Bb,this._logHandler=Hb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ub[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Gb=(t,e)=>e.some(n=>t instanceof n);let Km,Qm;function Wb(){return Km||(Km=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qb(){return Qm||(Qm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pv=new WeakMap,Ad=new WeakMap,Rv=new WeakMap,wu=new WeakMap,Xh=new WeakMap;function Kb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pv.set(n,t)}).catch(()=>{}),Xh.set(e,t),e}function Qb(t){if(Ad.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ad.set(t,e)}let Pd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ad.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yb(t){Pd=t(Pd)}function Xb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ku(this),e,...n);return Rv.set(r,e.sort?e.sort():[e]),Pr(r)}:qb().includes(t)?function(...e){return t.apply(ku(this),e),Pr(Pv.get(this))}:function(...e){return Pr(t.apply(ku(this),e))}}function Jb(t){return typeof t=="function"?Xb(t):(t instanceof IDBTransaction&&Qb(t),Gb(t,Wb())?new Proxy(t,Pd):t)}function Pr(t){if(t instanceof IDBRequest)return Kb(t);if(wu.has(t))return wu.get(t);const e=Jb(t);return e!==t&&(wu.set(t,e),Xh.set(e,t)),e}const ku=t=>Xh.get(t);function Zb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Pr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Pr(o.result),u.oldVersion,u.newVersion,Pr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const eE=["get","getKey","getAll","getAllKeys","count"],tE=["put","add","delete","clear"],bu=new Map;function Ym(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eE.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return bu.set(e,i),i}Yb(t=>({...t,get:(e,n,r)=>Ym(e,n)||t.get(e,n,r),has:(e,n)=>!!Ym(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rd="@firebase/app",Xm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Yh("@firebase/app"),sE="@firebase/app-compat",iE="@firebase/analytics-compat",oE="@firebase/analytics",aE="@firebase/app-check-compat",lE="@firebase/app-check",cE="@firebase/auth",uE="@firebase/auth-compat",dE="@firebase/database",hE="@firebase/data-connect",fE="@firebase/database-compat",pE="@firebase/functions",mE="@firebase/functions-compat",gE="@firebase/installations",yE="@firebase/installations-compat",vE="@firebase/messaging",xE="@firebase/messaging-compat",_E="@firebase/performance",wE="@firebase/performance-compat",kE="@firebase/remote-config",bE="@firebase/remote-config-compat",EE="@firebase/storage",SE="@firebase/storage-compat",TE="@firebase/firestore",IE="@firebase/vertexai-preview",NE="@firebase/firestore-compat",CE="firebase",AE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]",PE={[Rd]:"fire-core",[sE]:"fire-core-compat",[oE]:"fire-analytics",[iE]:"fire-analytics-compat",[lE]:"fire-app-check",[aE]:"fire-app-check-compat",[cE]:"fire-auth",[uE]:"fire-auth-compat",[dE]:"fire-rtdb",[hE]:"fire-data-connect",[fE]:"fire-rtdb-compat",[pE]:"fire-fn",[mE]:"fire-fn-compat",[gE]:"fire-iid",[yE]:"fire-iid-compat",[vE]:"fire-fcm",[xE]:"fire-fcm-compat",[_E]:"fire-perf",[wE]:"fire-perf-compat",[kE]:"fire-rc",[bE]:"fire-rc-compat",[EE]:"fire-gcs",[SE]:"fire-gcs-compat",[TE]:"fire-fst",[NE]:"fire-fst-compat",[IE]:"fire-vertex","fire-js":"fire-js",[CE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map,RE=new Map,Dd=new Map;function Jm(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oi(t){const e=t.name;if(Dd.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,t);for(const n of Ol.values())Jm(n,t);for(const n of RE.values())Jm(n,t);return!0}function Jh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Yo("app","Firebase",jE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=AE;function jv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=Cv()),!n)throw Rr.create("no-options");const i=Ol.get(s);if(i){if(Ll(n,i.options)&&Ll(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new zb(s);for(const u of Dd.values())o.addComponent(u);const c=new DE(n,r,o);return Ol.set(s,c),c}function Dv(t=jd){const e=Ol.get(t);if(!e&&t===jd&&Cv())return jv();if(!e)throw Rr.create("no-app",{appName:t});return e}function jr(t,e,n){var r;let s=(r=PE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(c.join(" "));return}oi(new ps(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebase-heartbeat-database",ME=1,Do="firebase-heartbeat-store";let Eu=null;function Vv(){return Eu||(Eu=Zb(VE,ME,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Do)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Eu}async function LE(t){try{const n=(await Vv()).transaction(Do),r=await n.objectStore(Do).get(Mv(t));return await n.done,r}catch(e){if(e instanceof ar)nr.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function Zm(t,e){try{const r=(await Vv()).transaction(Do,"readwrite");await r.objectStore(Do).put(e,Mv(t)),await r.done}catch(n){if(n instanceof ar)nr.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function Mv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=1024,FE=30*24*60*60*1e3;class zE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=eg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=FE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eg(),{heartbeatsToSend:r,unsentEntries:s}=UE(this._heartbeatsCache.heartbeats),i=Ml(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nr.warn(n),""}}}function eg(){return new Date().toISOString().substring(0,10)}function UE(t,e=OE){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),tg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),tg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nb()?Cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function tg(t){return Ml(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){oi(new ps("platform-logger",e=>new nE(e),"PRIVATE")),oi(new ps("heartbeat",e=>new zE(e),"PRIVATE")),jr(Rd,Xm,t),jr(Rd,Xm,"esm2017"),jr("fire-js","")}$E("");var HE="firebase",GE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(HE,GE,"app");function Zh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Lv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WE=Lv,Ov=new Yo("auth","Firebase",Lv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Yh("@firebase/auth");function qE(t,...e){Fl.logLevel<=_e.WARN&&Fl.warn(`Auth (${xi}): ${t}`,...e)}function rl(t,...e){Fl.logLevel<=_e.ERROR&&Fl.error(`Auth (${xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw tf(t,...e)}function kn(t,...e){return tf(t,...e)}function ef(t,e,n){const r=Object.assign(Object.assign({},WE()),{[e]:n});return new Yo("auth","Firebase",r).create(e,{appName:t.name})}function os(t){return ef(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&jn(t,"argument-error"),ef(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ov.create(t,...e)}function ue(t,e,...n){if(!t)throw tf(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rl(e),new Error(e)}function rr(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QE(){return ng()==="http:"||ng()==="https:"}function ng(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QE()||Eb()||"connection"in navigator)?navigator.onLine:!0}function XE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.shortDelay=e,this.longDelay=n,rr(n>e,"Short delay should be less than long delay!"),this.isMobile=wb()||Sb()}get(){return YE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t,e){rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Jo(3e4,6e4);function rf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _i(t,e,n,r,s={}){return zv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Xo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return bb()||(d.referrerPolicy="no-referrer"),Fv.fetch()(Uv(t,t.config.apiHost,n,c),d)})}async function zv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JE),e);try{const s=new t2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw za(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw za(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw za(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ef(t,p,d);jn(t,p)}}catch(s){if(s instanceof ar)throw s;jn(t,"network-request-failed",{message:String(s)})}}async function e2(t,e,n,r,s={}){const i=await _i(t,e,n,r,s);return"mfaPendingCredential"in i&&jn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Uv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?nf(t.config,s):`${t.config.apiScheme}://${s}`}class t2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),ZE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=kn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e){return _i(t,"POST","/v1/accounts:delete",e)}async function Bv(t,e){return _i(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r2(t,e=!1){const n=dn(t),r=await n.getIdToken(e),s=sf(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:uo(Su(s.auth_time)),issuedAtTime:uo(Su(s.iat)),expirationTime:uo(Su(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Su(t){return Number(t)*1e3}function sf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Iv(n);return s?JSON.parse(s):(rl("Failed to decode base64 JWT payload"),null)}catch(s){return rl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rg(t){const e=sf(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&s2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function s2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vo(t,Bv(n,{idToken:r}));ue(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?$v(i.providerUserInfo):[],c=a2(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Md(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function o2(t){const e=dn(t);await zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $v(t){return t.map(e=>{var{providerId:n}=e,r=Zh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){const n=await zv(t,{},async()=>{const r=Xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Uv(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Fv.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function c2(t,e){return _i(t,"POST","/v2/accounts:revokeToken",rf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=rg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await l2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Qs;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qs,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Zh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Md(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return r2(this,e)}reload(){return o2(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Vo(this,n2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:C,isAnonymous:z,providerData:L,stsTokenManager:_}=n;ue(S&&_,e,"internal-error");const g=Qs.fromJSON(this.name,_);ue(typeof S=="string",e,"internal-error"),hr(m,e.name),hr(x,e.name),ue(typeof C=="boolean",e,"internal-error"),ue(typeof z=="boolean",e,"internal-error"),hr(I,e.name),hr(T,e.name),hr(P,e.name),hr(M,e.name),hr(E,e.name),hr(w,e.name);const k=new qn({uid:S,auth:e,email:x,emailVerified:C,displayName:m,isAnonymous:z,photoURL:T,phoneNumber:I,tenantId:P,stsTokenManager:g,createdAt:E,lastLoginAt:w});return L&&Array.isArray(L)&&(k.providerData=L.map(b=>Object.assign({},b))),M&&(k._redirectEventId=M),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qs;s.updateFromServerResponse(n);const i=new qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await zl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?$v(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Qs;c.updateFromIdToken(r);const u=new qn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Md(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Map;function Kn(t){rr(t instanceof Function,"Expected a class definition");let e=sg.get(t);return e?(rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hv.type="NONE";const ig=Hv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ys(Kn(ig),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Kn(ig);const o=sl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(o);if(p){const m=qn._fromJSON(e,p);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ys(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ys(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yv(e))return"Blackberry";if(Xv(e))return"Webos";if(Wv(e))return"Safari";if((e.includes("chrome/")||qv(e))&&!e.includes("edge/"))return"Chrome";if(Qv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gv(t=Dt()){return/firefox\//i.test(t)}function Wv(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qv(t=Dt()){return/crios\//i.test(t)}function Kv(t=Dt()){return/iemobile/i.test(t)}function Qv(t=Dt()){return/android/i.test(t)}function Yv(t=Dt()){return/blackberry/i.test(t)}function Xv(t=Dt()){return/webos/i.test(t)}function of(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u2(t=Dt()){var e;return of(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d2(){return Tb()&&document.documentMode===10}function Jv(t=Dt()){return of(t)||Qv(t)||Xv(t)||Yv(t)||/windows phone/i.test(t)||Kv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e=[]){let n;switch(t){case"Browser":n=og(Dt());break;case"Worker":n=`${og(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t,e={}){return _i(t,"GET","/v2/passwordPolicy",rf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=6;class m2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:p2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ag(this),this.idTokenSubscription=new ag(this),this.beforeStateQueue=new h2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ov,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bv(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(os(this));const n=e?dn(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f2(this),n=new m2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await c2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&qE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vc(t){return dn(t)}class ag{constructor(e){this.auth=e,this.observer=null,this.addObserver=Db(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y2(t){af=t}function v2(t){return af.loadJS(t)}function x2(){return af.gapiScript}function _2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t,e){const n=Jh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ll(i,e??{}))return s;jn(s,"already-initialized")}return n.initialize({options:e})}function k2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function b2(t,e,n){const r=vc(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ex(e),{host:o,port:c}=E2(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),S2()}function ex(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function E2(t){const e=ex(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:lg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:lg(o)}}}function lg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return e2(t,"POST","/v1/accounts:signInWithIdp",rf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="http://localhost";class ms extends tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Zh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:T2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends lf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Zo{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Zo{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Zo{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qn._fromIdTokenResponse(e,r,s),o=cg(r);return new ai({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cg(r);return new ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends ar{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ul.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ul(e,n,r,s)}}function nx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ul._fromErrorAndOperation(t,i,e,r):i})}async function I2(t,e,n=!1){const r=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e,n=!1){const{auth:r}=t;if(Gn(r.app))return Promise.reject(os(r));const s="reauthenticate";try{const i=await Vo(t,nx(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=sf(i.idToken);ue(o,r,"internal-error");const{sub:c}=o;return ue(t.uid===c,r,"user-mismatch"),ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e,n=!1){if(Gn(t.app))return Promise.reject(os(t));const r="signIn",s=await nx(t,r,e),i=await ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function A2(t,e,n,r){return dn(t).onIdTokenChanged(e,n,r)}function P2(t,e,n){return dn(t).beforeAuthStateChanged(e,n)}function R2(t,e,n,r){return dn(t).onAuthStateChanged(e,n,r)}function j2(t){return dn(t).signOut()}const Bl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bl,"1"),this.storage.removeItem(Bl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=1e3,V2=10;class sx extends rx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);d2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,V2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},D2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sx.type="LOCAL";const M2=sx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends rx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ix.type="SESSION";const ox=ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await L2(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=cf("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const x=m;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function F2(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function z2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function B2(){return ax()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="firebaseLocalStorageDb",$2=1,$l="firebaseLocalStorage",cx="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _c(t,e){return t.transaction([$l],e?"readwrite":"readonly").objectStore($l)}function H2(){const t=indexedDB.deleteDatabase(lx);return new ea(t).toPromise()}function Ld(){const t=indexedDB.open(lx,$2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($l,{keyPath:cx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($l)?e(r):(r.close(),await H2(),e(await Ld()))})})}async function ug(t,e,n){const r=_c(t,!0).put({[cx]:e,value:n});return new ea(r).toPromise()}async function G2(t,e){const n=_c(t,!1).get(e),r=await new ea(n).toPromise();return r===void 0?null:r.value}function dg(t,e){const n=_c(t,!0).delete(e);return new ea(n).toPromise()}const W2=800,q2=3;class ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>q2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ax()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(B2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await z2(),!this.activeServiceWorker)return;this.sender=new O2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ld();return await ug(e,Bl,"1"),await dg(e,Bl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ug(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_c(s,!1).getAll();return new ea(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ux.type="LOCAL";const K2=ux;new Jo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e){return e?Kn(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q2(t){return C2(t.auth,new uf(t),t.bypassAuthState)}function Y2(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),N2(n,new uf(t),t.bypassAuthState)}async function X2(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),I2(n,new uf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q2;case"linkViaPopup":case"linkViaRedirect":return X2;case"reauthViaPopup":case"reauthViaRedirect":return Y2;default:jn(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Jo(2e3,1e4);async function Z2(t,e,n){if(Gn(t.app))return Promise.reject(kn(t,"operation-not-supported-in-this-environment"));const r=vc(t);KE(t,e,lf);const s=dx(r,n);return new ns(r,"signInViaPopup",e,s).executeNotNull()}class ns extends hx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,J2.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="pendingRedirect",il=new Map;class tS extends hx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=il.get(this.auth._key());if(!e){try{const r=await nS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}il.set(this.auth._key(),e)}return this.bypassAuthState||il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nS(t,e){const n=iS(e),r=sS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function rS(t,e){il.set(t._key(),e)}function sS(t){return Kn(t._redirectPersistence)}function iS(t){return sl(eS,t.config.apiKey,t.name)}async function oS(t,e,n=!1){if(Gn(t.app))return Promise.reject(os(t));const r=vc(t),s=dx(r,e),o=await new tS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=10*60*1e3;class lS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aS&&this.cachedEventUids.clear(),this.cachedEventUids.has(hg(e))}saveEventToCache(e){this.cachedEventUids.add(hg(e)),this.lastProcessedEventTime=Date.now()}}function hg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(t,e={}){return _i(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hS=/^https?/;async function fS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uS(t);for(const n of e)try{if(pS(n))return}catch{}jn(t,"unauthorized-domain")}function pS(t){const e=Vd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hS.test(n))return!1;if(dS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new Jo(3e4,6e4);function fg(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gS(t){return new Promise((e,n)=>{var r,s,i;function o(){fg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fg(),n(kn(t,"network-request-failed"))},timeout:mS.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const c=_2("iframefcb");return An()[c]=()=>{gapi.load?o():n(kn(t,"network-request-failed"))},v2(`${x2()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw ol=null,e})}let ol=null;function yS(t){return ol=ol||gS(t),ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Jo(5e3,15e3),xS="__/auth/iframe",_S="emulator/auth/iframe",wS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bS(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nf(e,_S):`https://${t.config.authDomain}/${xS}`,r={apiKey:e.apiKey,appName:t.name,v:xi},s=kS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xo(r).slice(1)}`}async function ES(t){const e=await yS(t),n=An().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:bS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=kn(t,"network-request-failed"),c=An().setTimeout(()=>{i(o)},vS.get());function u(){An().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TS=500,IS=600,NS="_blank",CS="http://localhost";class pg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AS(t,e,n,r=TS,s=IS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},SS),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Dt().toLowerCase();n&&(c=qv(d)?NS:n),Gv(d)&&(e=e||CS,u.scrollbars="yes");const p=Object.entries(u).reduce((x,[I,T])=>`${x}${I}=${T},`,"");if(u2(d)&&c!=="_self")return PS(e||"",c),new pg(null);const m=window.open(e||"",c,p);ue(m,t,"popup-blocked");try{m.focus()}catch{}return new pg(m)}function PS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="__/auth/handler",jS="emulator/auth/handler",DS=encodeURIComponent("fac");async function mg(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:s};if(e instanceof lf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Zo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${DS}=${encodeURIComponent(u)}`:"";return`${VS(t)}?${Xo(c).slice(1)}${d}`}function VS({config:t}){return t.emulator?nf(t,jS):`https://${t.authDomain}/${RS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="webStorageSupport";class MS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ox,this._completeRedirectFn=oS,this._overrideRedirectResult=rS}async _openPopup(e,n,r,s){var i;rr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await mg(e,n,r,Vd(),s);return AS(e,o,cf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await mg(e,n,r,Vd(),s);return F2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(rr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ES(e),r=new lS(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tu,{type:Tu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Tu];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Jv()||Wv()||of()}}const LS=MS;var gg="@firebase/auth",yg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zS(t){oi(new ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zv(t)},d=new g2(r,s,i,u);return k2(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),oi(new ps("auth-internal",e=>{const n=vc(e.getProvider("auth").getImmediate());return(r=>new OS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(gg,yg,FS(t)),jr(gg,yg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=5*60,BS=Av("authIdTokenMaxAge")||US;let vg=null;const $S=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BS)return;const s=n==null?void 0:n.token;vg!==s&&(vg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HS(t=Dv()){const e=Jh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=w2(t,{popupRedirectResolver:LS,persistence:[K2,M2,ox]}),r=Av("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=$S(i.toString());P2(n,o,()=>o(n.currentUser)),A2(n,c=>o(c))}}const s=Nv("auth");return s&&b2(n,`http://${s}`),n}function GS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}y2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=kn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",GS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zS("Browser");var xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,px;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function k(){}k.prototype=g.prototype,_.D=g.prototype,_.prototype=new k,_.prototype.constructor=_,_.C=function(b,N,R){for(var v=Array(arguments.length-2),se=2;se<arguments.length;se++)v[se-2]=arguments[se];return g.prototype[N].apply(b,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,g,k){k||(k=0);var b=Array(16);if(typeof g=="string")for(var N=0;16>N;++N)b[N]=g.charCodeAt(k++)|g.charCodeAt(k++)<<8|g.charCodeAt(k++)<<16|g.charCodeAt(k++)<<24;else for(N=0;16>N;++N)b[N]=g[k++]|g[k++]<<8|g[k++]<<16|g[k++]<<24;g=_.g[0],k=_.g[1],N=_.g[2];var R=_.g[3],v=g+(R^k&(N^R))+b[0]+3614090360&4294967295;g=k+(v<<7&4294967295|v>>>25),v=R+(N^g&(k^N))+b[1]+3905402710&4294967295,R=g+(v<<12&4294967295|v>>>20),v=N+(k^R&(g^k))+b[2]+606105819&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(g^N&(R^g))+b[3]+3250441966&4294967295,k=N+(v<<22&4294967295|v>>>10),v=g+(R^k&(N^R))+b[4]+4118548399&4294967295,g=k+(v<<7&4294967295|v>>>25),v=R+(N^g&(k^N))+b[5]+1200080426&4294967295,R=g+(v<<12&4294967295|v>>>20),v=N+(k^R&(g^k))+b[6]+2821735955&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(g^N&(R^g))+b[7]+4249261313&4294967295,k=N+(v<<22&4294967295|v>>>10),v=g+(R^k&(N^R))+b[8]+1770035416&4294967295,g=k+(v<<7&4294967295|v>>>25),v=R+(N^g&(k^N))+b[9]+2336552879&4294967295,R=g+(v<<12&4294967295|v>>>20),v=N+(k^R&(g^k))+b[10]+4294925233&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(g^N&(R^g))+b[11]+2304563134&4294967295,k=N+(v<<22&4294967295|v>>>10),v=g+(R^k&(N^R))+b[12]+1804603682&4294967295,g=k+(v<<7&4294967295|v>>>25),v=R+(N^g&(k^N))+b[13]+4254626195&4294967295,R=g+(v<<12&4294967295|v>>>20),v=N+(k^R&(g^k))+b[14]+2792965006&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(g^N&(R^g))+b[15]+1236535329&4294967295,k=N+(v<<22&4294967295|v>>>10),v=g+(N^R&(k^N))+b[1]+4129170786&4294967295,g=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(g^k))+b[6]+3225465664&4294967295,R=g+(v<<9&4294967295|v>>>23),v=N+(g^k&(R^g))+b[11]+643717713&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^g&(N^R))+b[0]+3921069994&4294967295,k=N+(v<<20&4294967295|v>>>12),v=g+(N^R&(k^N))+b[5]+3593408605&4294967295,g=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(g^k))+b[10]+38016083&4294967295,R=g+(v<<9&4294967295|v>>>23),v=N+(g^k&(R^g))+b[15]+3634488961&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^g&(N^R))+b[4]+3889429448&4294967295,k=N+(v<<20&4294967295|v>>>12),v=g+(N^R&(k^N))+b[9]+568446438&4294967295,g=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(g^k))+b[14]+3275163606&4294967295,R=g+(v<<9&4294967295|v>>>23),v=N+(g^k&(R^g))+b[3]+4107603335&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^g&(N^R))+b[8]+1163531501&4294967295,k=N+(v<<20&4294967295|v>>>12),v=g+(N^R&(k^N))+b[13]+2850285829&4294967295,g=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(g^k))+b[2]+4243563512&4294967295,R=g+(v<<9&4294967295|v>>>23),v=N+(g^k&(R^g))+b[7]+1735328473&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^g&(N^R))+b[12]+2368359562&4294967295,k=N+(v<<20&4294967295|v>>>12),v=g+(k^N^R)+b[5]+4294588738&4294967295,g=k+(v<<4&4294967295|v>>>28),v=R+(g^k^N)+b[8]+2272392833&4294967295,R=g+(v<<11&4294967295|v>>>21),v=N+(R^g^k)+b[11]+1839030562&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^g)+b[14]+4259657740&4294967295,k=N+(v<<23&4294967295|v>>>9),v=g+(k^N^R)+b[1]+2763975236&4294967295,g=k+(v<<4&4294967295|v>>>28),v=R+(g^k^N)+b[4]+1272893353&4294967295,R=g+(v<<11&4294967295|v>>>21),v=N+(R^g^k)+b[7]+4139469664&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^g)+b[10]+3200236656&4294967295,k=N+(v<<23&4294967295|v>>>9),v=g+(k^N^R)+b[13]+681279174&4294967295,g=k+(v<<4&4294967295|v>>>28),v=R+(g^k^N)+b[0]+3936430074&4294967295,R=g+(v<<11&4294967295|v>>>21),v=N+(R^g^k)+b[3]+3572445317&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^g)+b[6]+76029189&4294967295,k=N+(v<<23&4294967295|v>>>9),v=g+(k^N^R)+b[9]+3654602809&4294967295,g=k+(v<<4&4294967295|v>>>28),v=R+(g^k^N)+b[12]+3873151461&4294967295,R=g+(v<<11&4294967295|v>>>21),v=N+(R^g^k)+b[15]+530742520&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^g)+b[2]+3299628645&4294967295,k=N+(v<<23&4294967295|v>>>9),v=g+(N^(k|~R))+b[0]+4096336452&4294967295,g=k+(v<<6&4294967295|v>>>26),v=R+(k^(g|~N))+b[7]+1126891415&4294967295,R=g+(v<<10&4294967295|v>>>22),v=N+(g^(R|~k))+b[14]+2878612391&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~g))+b[5]+4237533241&4294967295,k=N+(v<<21&4294967295|v>>>11),v=g+(N^(k|~R))+b[12]+1700485571&4294967295,g=k+(v<<6&4294967295|v>>>26),v=R+(k^(g|~N))+b[3]+2399980690&4294967295,R=g+(v<<10&4294967295|v>>>22),v=N+(g^(R|~k))+b[10]+4293915773&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~g))+b[1]+2240044497&4294967295,k=N+(v<<21&4294967295|v>>>11),v=g+(N^(k|~R))+b[8]+1873313359&4294967295,g=k+(v<<6&4294967295|v>>>26),v=R+(k^(g|~N))+b[15]+4264355552&4294967295,R=g+(v<<10&4294967295|v>>>22),v=N+(g^(R|~k))+b[6]+2734768916&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~g))+b[13]+1309151649&4294967295,k=N+(v<<21&4294967295|v>>>11),v=g+(N^(k|~R))+b[4]+4149444226&4294967295,g=k+(v<<6&4294967295|v>>>26),v=R+(k^(g|~N))+b[11]+3174756917&4294967295,R=g+(v<<10&4294967295|v>>>22),v=N+(g^(R|~k))+b[2]+718787259&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~g))+b[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(N+(v<<21&4294967295|v>>>11))&4294967295,_.g[2]=_.g[2]+N&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.u=function(_,g){g===void 0&&(g=_.length);for(var k=g-this.blockSize,b=this.B,N=this.h,R=0;R<g;){if(N==0)for(;R<=k;)s(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<g;)if(b[N++]=_.charCodeAt(R++),N==this.blockSize){s(this,b),N=0;break}}else for(;R<g;)if(b[N++]=_[R++],N==this.blockSize){s(this,b),N=0;break}}this.h=N,this.o+=g},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;var k=8*this.o;for(g=_.length-8;g<_.length;++g)_[g]=k&255,k/=256;for(this.u(_),_=Array(16),g=k=0;4>g;++g)for(var b=0;32>b;b+=8)_[k++]=this.g[g]>>>b&255;return _};function i(_,g){var k=c;return Object.prototype.hasOwnProperty.call(k,_)?k[_]:k[_]=g(_)}function o(_,g){this.h=g;for(var k=[],b=!0,N=_.length-1;0<=N;N--){var R=_[N]|0;b&&R==g||(k[N]=R,b=!1)}this.g=k}var c={};function u(_){return-128<=_&&128>_?i(_,function(g){return new o([g|0],0>g?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return M(d(-_));for(var g=[],k=1,b=0;_>=k;b++)g[b]=_/k|0,k*=4294967296;return new o(g,0)}function p(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return M(p(_.substring(1),g));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(g,8)),b=m,N=0;N<_.length;N+=8){var R=Math.min(8,_.length-N),v=parseInt(_.substring(N,N+R),g);8>R?(R=d(Math.pow(g,R)),b=b.j(R).add(d(v))):(b=b.j(k),b=b.add(d(v)))}return b}var m=u(0),x=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-M(this).m();for(var _=0,g=1,k=0;k<this.g.length;k++){var b=this.i(k);_+=(0<=b?b:4294967296+b)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T(this))return"0";if(P(this))return"-"+M(this).toString(_);for(var g=d(Math.pow(_,6)),k=this,b="";;){var N=C(k,g).g;k=E(k,N.j(g));var R=((0<k.g.length?k.g[0]:k.h)>>>0).toString(_);if(k=N,T(k))return R+b;for(;6>R.length;)R="0"+R;b=R+b}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function T(_){if(_.h!=0)return!1;for(var g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function P(_){return _.h==-1}t.l=function(_){return _=E(this,_),P(_)?-1:T(_)?0:1};function M(_){for(var g=_.g.length,k=[],b=0;b<g;b++)k[b]=~_.g[b];return new o(k,~_.h).add(x)}t.abs=function(){return P(this)?M(this):this},t.add=function(_){for(var g=Math.max(this.g.length,_.g.length),k=[],b=0,N=0;N<=g;N++){var R=b+(this.i(N)&65535)+(_.i(N)&65535),v=(R>>>16)+(this.i(N)>>>16)+(_.i(N)>>>16);b=v>>>16,R&=65535,v&=65535,k[N]=v<<16|R}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(_,g){return _.add(M(g))}t.j=function(_){if(T(this)||T(_))return m;if(P(this))return P(_)?M(this).j(M(_)):M(M(this).j(_));if(P(_))return M(this.j(M(_)));if(0>this.l(I)&&0>_.l(I))return d(this.m()*_.m());for(var g=this.g.length+_.g.length,k=[],b=0;b<2*g;b++)k[b]=0;for(b=0;b<this.g.length;b++)for(var N=0;N<_.g.length;N++){var R=this.i(b)>>>16,v=this.i(b)&65535,se=_.i(N)>>>16,ce=_.i(N)&65535;k[2*b+2*N]+=v*ce,w(k,2*b+2*N),k[2*b+2*N+1]+=R*ce,w(k,2*b+2*N+1),k[2*b+2*N+1]+=v*se,w(k,2*b+2*N+1),k[2*b+2*N+2]+=R*se,w(k,2*b+2*N+2)}for(b=0;b<g;b++)k[b]=k[2*b+1]<<16|k[2*b];for(b=g;b<2*g;b++)k[b]=0;return new o(k,0)};function w(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function S(_,g){this.g=_,this.h=g}function C(_,g){if(T(g))throw Error("division by zero");if(T(_))return new S(m,m);if(P(_))return g=C(M(_),g),new S(M(g.g),M(g.h));if(P(g))return g=C(_,M(g)),new S(M(g.g),g.h);if(30<_.g.length){if(P(_)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var k=x,b=g;0>=b.l(_);)k=z(k),b=z(b);var N=L(k,1),R=L(b,1);for(b=L(b,2),k=L(k,2);!T(b);){var v=R.add(b);0>=v.l(_)&&(N=N.add(k),R=v),b=L(b,1),k=L(k,1)}return g=E(_,N.j(g)),new S(N,g)}for(N=m;0<=_.l(g);){for(k=Math.max(1,Math.floor(_.m()/g.m())),b=Math.ceil(Math.log(k)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),R=d(k),v=R.j(g);P(v)||0<v.l(_);)k-=b,R=d(k),v=R.j(g);T(R)&&(R=x),N=N.add(R),_=E(_,v)}return new S(N,_)}t.A=function(_){return C(this,_).h},t.and=function(_){for(var g=Math.max(this.g.length,_.g.length),k=[],b=0;b<g;b++)k[b]=this.i(b)&_.i(b);return new o(k,this.h&_.h)},t.or=function(_){for(var g=Math.max(this.g.length,_.g.length),k=[],b=0;b<g;b++)k[b]=this.i(b)|_.i(b);return new o(k,this.h|_.h)},t.xor=function(_){for(var g=Math.max(this.g.length,_.g.length),k=[],b=0;b<g;b++)k[b]=this.i(b)^_.i(b);return new o(k,this.h^_.h)};function z(_){for(var g=_.g.length+1,k=[],b=0;b<g;b++)k[b]=_.i(b)<<1|_.i(b-1)>>>31;return new o(k,_.h)}function L(_,g){var k=g>>5;g%=32;for(var b=_.g.length-k,N=[],R=0;R<b;R++)N[R]=0<g?_.i(R+k)>>>g|_.i(R+k+1)<<32-g:_.i(R+k);return new o(N,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,px=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,as=o}).apply(typeof xg<"u"?xg:typeof self<"u"?self:typeof window<"u"?window:{});var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mx,Xi,gx,al,Od,yx,vx,xx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ua=="object"&&Ua];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var D=a[y];if(!(D in f))break e;f=f[D]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,y=!1,D={next:function(){if(!y&&f<a.length){var O=f++;return{value:h(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function x(a,h,f){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function I(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function T(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,D,O){for(var Y=Array(arguments.length-2),De=2;De<arguments.length;De++)Y[De-2]=arguments[De];return h.prototype[D].apply(y,Y)}}function P(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function M(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const D=a.length||0,O=y.length||0;a.length=D+O;for(let Y=0;Y<O;Y++)a[D+Y]=y[Y]}else a.push(y)}}class E{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function C(a){return C[" "](a),a}C[" "]=function(){};var z=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function _(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function g(a){const h={};for(const f in a)h[f]=a[f];return h}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let f,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(f in y)a[f]=y[f];for(let O=0;O<k.length;O++)f=k[O],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function N(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function R(a){c.setTimeout(()=>{throw a},0)}function v(){var a=J;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class se{constructor(){this.h=this.g=null}add(h,f){const y=ce.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var ce=new E(()=>new qe,a=>a.reset());class qe{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,K=!1,J=new se,oe=()=>{const a=c.Promise.resolve(void 0);Me=()=>{a.then(ye)}};var ye=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(f){R(f)}var h=ce;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}K=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var et=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function tt(a,h){if(ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(z){e:{try{C(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ft[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&tt.aa.h.call(this)}}T(tt,ke);var ft={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Ke(a,h,f,y,D){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=D,this.key=++Vt,this.da=this.fa=!1}function ct(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function pt(a){this.src=a,this.g={},this.h=0}pt.prototype.add=function(a,h,f,y,D){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var Y=ee(a,h,y,D);return-1<Y?(h=a[Y],f||(h.fa=!1)):(h=new Ke(h,this.src,O,!!y,D),h.fa=f,a.push(h)),h};function j(a,h){var f=h.type;if(f in a.g){var y=a.g[f],D=Array.prototype.indexOf.call(y,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(y,D,1),O&&(ct(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ee(a,h,f,y){for(var D=0;D<a.length;++D){var O=a[D];if(!O.da&&O.listener==h&&O.capture==!!f&&O.ha==y)return D}return-1}var V="closure_lm_"+(1e6*Math.random()|0),$={};function Q(a,h,f,y,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Q(a,h[O],f,y,D);return null}return f=Ut(f),a&&a[Le]?a.K(h,f,d(y)?!!y.capture:!1,D):U(a,h,f,!1,y,D)}function U(a,h,f,y,D,O){if(!h)throw Error("Invalid event type");var Y=d(D)?!!D.capture:!!D,De=mt(a);if(De||(a[V]=De=new pt(a)),f=De.add(h,f,y,Y,O),f.proxy)return f;if(y=ne(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)et||(D=Y),D===void 0&&(D=!1),a.addEventListener(h.toString(),y,D);else if(a.attachEvent)a.attachEvent(Ne(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ne(){function a(f){return h.call(a.src,a.listener,f)}const h=Re;return a}function he(a,h,f,y,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)he(a,h[O],f,y,D);else y=d(y)?!!y.capture:!!y,f=Ut(f),a&&a[Le]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],f=ee(O,f,y,D),-1<f&&(ct(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=mt(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ee(h,f,y,D)),(f=-1<a?h[a]:null)&&Ie(f))}function Ie(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Le])j(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Ne(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=mt(h))?(j(f,a),f.h==0&&(f.src=null,h[V]=null)):ct(a)}}}function Ne(a){return a in $?$[a]:$[a]="on"+a}function Re(a,h){if(a.da)a=!0;else{h=new tt(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&Ie(a),a=f.call(y,h)}return a}function mt(a){return a=a[V],a instanceof pt?a:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(a){return typeof a=="function"?a:(a[hn]||(a[hn]=function(h){return a.handleEvent(h)}),a[hn])}function Ce(){ge.call(this),this.i=new pt(this),this.M=this,this.F=null}T(Ce,ge),Ce.prototype[Le]=!0,Ce.prototype.removeEventListener=function(a,h,f,y){he(this,a,h,f,y)};function Be(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new ke(h,a);else if(h instanceof ke)h.target=h.target||a;else{var D=h;h=new ke(y,a),b(h,D)}if(D=!0,f)for(var O=f.length-1;0<=O;O--){var Y=h.g=f[O];D=A(Y,y,!0,h)&&D}if(Y=h.g=a,D=A(Y,y,!0,h)&&D,D=A(Y,y,!1,h)&&D,f)for(O=0;O<f.length;O++)Y=h.g=f[O],D=A(Y,y,!1,h)&&D}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)ct(f[y]);delete a.g[h],a.h--}}this.F=null},Ce.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},Ce.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function A(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var Y=h[O];if(Y&&!Y.da&&Y.capture==f){var De=Y.listener,gt=Y.ha||Y.src;Y.fa&&j(a.i,Y),D=De.call(gt,y)!==!1&&D}}return D&&!y.defaultPrevented}function F(a,h,f){if(typeof a=="function")f&&(a=x(a,f));else if(a&&typeof a.handleEvent=="function")a=x(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function B(a){a.g=F(()=>{a.g=null,a.i&&(a.i=!1,B(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class X extends ge{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:B(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(a){ge.call(this),this.h=a,this.g={}}T(te,ge);var me=[];function be(a){L(a.g,function(h,f){this.g.hasOwnProperty(f)&&Ie(h)},a),a.g={}}te.prototype.N=function(){te.aa.N.call(this),be(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var je=c.JSON.stringify,Bt=c.JSON.parse,Et=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function st(){}st.prototype.h=null;function En(a){return a.h||(a.h=a.i())}function aa(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rc(){ke.call(this,"d")}T(Rc,ke);function jc(){ke.call(this,"c")}T(jc,ke);var Gr={},Hf=null;function la(){return Hf=Hf||new Ce}Gr.La="serverreachability";function Gf(a){ke.call(this,Gr.La,a)}T(Gf,ke);function Ti(a){const h=la();Be(h,new Gf(h))}Gr.STAT_EVENT="statevent";function Wf(a,h){ke.call(this,Gr.STAT_EVENT,a),this.stat=h}T(Wf,ke);function Mt(a){const h=la();Be(h,new Wf(h,a))}Gr.Ma="timingevent";function qf(a,h){ke.call(this,Gr.Ma,a),this.size=h}T(qf,ke);function Ii(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function B_(a,h,f,y,D,O){a.info(function(){if(a.g)if(O)for(var Y="",De=O.split("&"),gt=0;gt<De.length;gt++){var Se=De[gt].split("=");if(1<Se.length){var St=Se[0];Se=Se[1];var Tt=St.split("_");Y=2<=Tt.length&&Tt[1]=="type"?Y+(St+"="+Se+"&"):Y+(St+"=redacted&")}}else Y=null;else Y=O;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+h+`
`+f+`
`+Y})}function $_(a,h,f,y,D,O,Y){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+h+`
`+f+`
`+O+" "+Y})}function bs(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+G_(a,f)+(y?" "+y:"")})}function H_(a,h){a.info(function(){return"TIMEOUT: "+h})}Ni.prototype.info=function(){};function G_(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var Y=1;Y<D.length;Y++)D[Y]=""}}}}return je(f)}catch{return h}}var ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dc;function ua(){}T(ua,st),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},Dc=new ua;function lr(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qf}function Qf(){this.i=null,this.g="",this.h=!1}var Yf={},Vc={};function Mc(a,h,f){a.L=1,a.v=pa(Ln(h)),a.m=f,a.P=!0,Xf(a,null)}function Xf(a,h){a.F=Date.now(),da(a),a.A=Ln(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),dp(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Qf,a.g=Cp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new X(x(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(me[0]=D.toString()),D=me);for(var O=0;O<D.length;O++){var Y=Q(f,D[O],y||h.handleEvent,!1,h.h||h);if(!Y)break;h.g[Y.key]=Y}h=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ti(),B_(a.i,a.u,a.A,a.l,a.R,a.m)}lr.prototype.ca=function(a){a=a.target;const h=this.M;h&&On(a)==3?h.j():this.Y(a)},lr.prototype.Y=function(a){try{if(a==this.g)e:{const Tt=On(this.g);var h=this.g.Ba();const Ts=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||vp(this.g)))){this.J||Tt!=4||h==7||(h==8||0>=Ts?Ti(3):Ti(2)),Lc(this);var f=this.g.Z();this.X=f;t:if(Jf(this)){var y=vp(this.g);a="";var D=y.length,O=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Ci(this);var Y="";break t}this.h.i=new c.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(O&&h==D-1)});y.length=0,this.h.g+=a,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=f==200,$_(this.i,this.u,this.A,this.l,this.R,Tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var De,gt=this.g;if((De=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(De)){var Se=De;break t}}Se=null}if(f=Se)bs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oc(this,f);else{this.o=!1,this.s=3,Mt(12),Wr(this),Ci(this);break e}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<Y.length;)if(fn=W_(this,Y),fn==Vc){Tt==4&&(this.s=4,Mt(14),f=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Yf){this.s=4,Mt(15),bs(this.i,this.l,Y,"[Invalid Chunk]"),f=!1;break}else bs(this.i,this.l,fn,null),Oc(this,fn);if(Jf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||Y.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)bs(this.i,this.l,Y,"[Invalid Chunked Response]"),Wr(this),Ci(this);else if(0<Y.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Hc(St),St.M=!0,Mt(11))}}else bs(this.i,this.l,Y,null),Oc(this,Y);Tt==4&&Wr(this),this.o&&!this.J&&(Tt==4?Sp(this.j,this):(this.o=!1,da(this)))}else cw(this.g),f==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Wr(this),Ci(this)}}}catch{}finally{}};function Jf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function W_(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?Vc:(f=Number(h.substring(f,y)),isNaN(f)?Yf:(y+=1,y+f>h.length?Vc:(h=h.slice(y,y+f),a.C=y+f,h)))}lr.prototype.cancel=function(){this.J=!0,Wr(this)};function da(a){a.S=Date.now()+a.I,Zf(a,a.I)}function Zf(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ii(x(a.ba,a),h)}function Lc(a){a.B&&(c.clearTimeout(a.B),a.B=null)}lr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(H_(this.i,this.A),this.L!=2&&(Ti(),Mt(17)),Wr(this),this.s=2,Ci(this)):Zf(this,this.S-a)};function Ci(a){a.j.G==0||a.J||Sp(a.j,a)}function Wr(a){Lc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,be(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Oc(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Fc(f.h,a))){if(!a.K&&Fc(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)_a(f),va(f);else break e;$c(f),Mt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ii(x(f.Za,f),6e3));if(1>=np(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kr(f,11)}else if((a.K||f.g==a)&&_a(f),!w(h))for(D=f.Da.g.parse(h),h=0;h<D.length;h++){let Se=D[h];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];const St=Se[3];St!=null&&(f.la=St,f.j.info("VER="+f.la));const Tt=Se[4];Tt!=null&&(f.Aa=Tt,f.j.info("SVER="+f.Aa));const Ts=Se[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(y=1.5*Ts,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const fn=a.g;if(fn){const ka=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var O=y.h;O.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(zc(O,O.h),O.h=null))}if(y.D){const Gc=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gc&&(y.ya=Gc,Oe(y.I,y.D,Gc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var Y=a;if(y.qa=Np(y,y.J?y.ia:null,y.W),Y.K){rp(y.h,Y);var De=Y,gt=y.L;gt&&(De.I=gt),De.B&&(Lc(De),da(De)),y.g=Y}else bp(y);0<f.i.length&&xa(f)}else Se[0]!="stop"&&Se[0]!="close"||Kr(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Kr(f,7):Bc(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}Ti(4)}catch{}}var q_=class{constructor(a,h){this.g=a,this.map=h}};function ep(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function np(a){return a.h?1:a.g?a.g.size:0}function Fc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function zc(a,h){a.g?a.g.add(h):a.h=h}function rp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}ep.prototype.cancel=function(){if(this.i=sp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function sp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return P(a.i)}function K_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function Q_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function ip(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=Q_(a),y=K_(a),D=y.length,O=0;O<D;O++)h.call(void 0,y[O],f&&f[O],a)}var op=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y_(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),D=null;if(0<=y){var O=a[f].substring(0,y);D=a[f].substring(y+1)}else O=a[f];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof qr){this.h=a.h,ha(this,a.j),this.o=a.o,this.g=a.g,fa(this,a.s),this.l=a.l;var h=a.i,f=new Ri;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),ap(this,f),this.m=a.m}else a&&(h=String(a).match(op))?(this.h=!1,ha(this,h[1]||"",!0),this.o=Ai(h[2]||""),this.g=Ai(h[3]||"",!0),fa(this,h[4]),this.l=Ai(h[5]||"",!0),ap(this,h[6]||"",!0),this.m=Ai(h[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}qr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Pi(h,lp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Pi(h,lp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Pi(f,f.charAt(0)=="/"?Z_:J_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Pi(f,tw)),a.join("")};function Ln(a){return new qr(a)}function ha(a,h,f){a.j=f?Ai(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function fa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ap(a,h,f){h instanceof Ri?(a.i=h,nw(a.i,a.h)):(f||(h=Pi(h,ew)),a.i=new Ri(h,a.h))}function Oe(a,h,f){a.i.set(h,f)}function pa(a){return Oe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ai(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Pi(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,X_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function X_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lp=/[#\/\?@]/g,J_=/[#\?:]/g,Z_=/[#\?]/g,ew=/[#\?@]/g,tw=/#/g;function Ri(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function cr(a){a.g||(a.g=new Map,a.h=0,a.i&&Y_(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ri.prototype,t.add=function(a,h){cr(this),this.i=null,a=Es(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function cp(a,h){cr(a),h=Es(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function up(a,h){return cr(a),h=Es(a,h),a.g.has(h)}t.forEach=function(a,h){cr(this),this.g.forEach(function(f,y){f.forEach(function(D){a.call(h,D,y,this)},this)},this)},t.na=function(){cr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const D=a[y];for(let O=0;O<D.length;O++)f.push(h[y])}return f},t.V=function(a){cr(this);let h=[];if(typeof a=="string")up(this,a)&&(h=h.concat(this.g.get(Es(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return cr(this),this.i=null,a=Es(this,a),up(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function dp(a,h,f){cp(a,h),0<f.length&&(a.i=null,a.g.set(Es(a,h),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const O=encodeURIComponent(String(y)),Y=this.V(y);for(y=0;y<Y.length;y++){var D=O;Y[y]!==""&&(D+="="+encodeURIComponent(String(Y[y]))),a.push(D)}}return this.i=a.join("&")};function Es(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function nw(a,h){h&&!a.j&&(cr(a),a.i=null,a.g.forEach(function(f,y){var D=y.toLowerCase();y!=D&&(cp(this,y),dp(this,D,f))},a)),a.j=h}function rw(a,h){const f=new Ni;if(c.Image){const y=new Image;y.onload=I(ur,f,"TestLoadImage: loaded",!0,h,y),y.onerror=I(ur,f,"TestLoadImage: error",!1,h,y),y.onabort=I(ur,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=I(ur,f,"TestLoadImage: timeout",!1,h,y),c.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function sw(a,h){const f=new Ni,y=new AbortController,D=setTimeout(()=>{y.abort(),ur(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(D),O.ok?ur(f,"TestPingServer: ok",!0,h):ur(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ur(f,"TestPingServer: error",!1,h)})}function ur(a,h,f,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(f)}catch{}}function iw(){this.g=new Et}function ow(a,h,f){const y=f||"";try{ip(a,function(D,O){let Y=D;d(D)&&(Y=je(D)),h.push(y+O+"="+encodeURIComponent(Y))})}catch(D){throw h.push(y+"type="+encodeURIComponent("_badmap")),D}}function ma(a){this.l=a.Ub||null,this.j=a.eb||!1}T(ma,st),ma.prototype.g=function(){return new ga(this.l,this.j)},ma.prototype.i=function(a){return function(){return a}}({});function ga(a,h){Ce.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ga,Ce),t=ga.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Di(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function hp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ji(this):Di(this),this.readyState==3&&hp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ji(this))},t.Qa=function(a){this.g&&(this.response=a,ji(this))},t.ga=function(){this.g&&ji(this)};function ji(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Di(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Di(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fp(a){let h="";return L(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function Uc(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=fp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Oe(a,h,f))}function Qe(a){Ce.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Qe,Ce);var aw=/^https?$/i,lw=["POST","PUT"];t=Qe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dc.g(),this.v=this.o?En(this.o):En(Dc),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){pp(this,O);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)f.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())f.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),D=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(lw,h,void 0))||y||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,Y]of f)this.g.setRequestHeader(O,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){pp(this,O)}};function pp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,mp(a),ya(a)}function mp(a){a.A||(a.A=!0,Be(a,"complete"),Be(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Be(this,"complete"),Be(this,"abort"),ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ya(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gp(this):this.bb())},t.bb=function(){gp(this)};function gp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)F(a.Ea,0,a);else if(Be(a,"readystatechange"),On(a)==4){a.h=!1;try{const Y=a.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=Y===0){var D=String(a.D).match(op)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),y=!aw.test(D?D.toLowerCase():"")}f=y}if(f)Be(a,"complete"),Be(a,"success");else{a.m=6;try{var O=2<On(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",mp(a)}}finally{ya(a)}}}}function ya(a,h){if(a.g){yp(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Be(a,"ready");try{f.onreadystatechange=y}catch{}}}function yp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Bt(h)}};function vp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cw(a){const h={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var f=N(a[y]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=h[D]||[];h[D]=O,O.push(f)}_(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function xp(a){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vi("baseRetryDelayMs",5e3,a),this.cb=Vi("retryDelaySeedMs",1e4,a),this.Wa=Vi("forwardChannelMaxRetries",2,a),this.wa=Vi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ep(a&&a.concurrentRequestLimit),this.Da=new iw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xp.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,y){Mt(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Np(this,null,this.W),xa(this)};function Bc(a){if(_p(a),a.G==3){var h=a.U++,f=Ln(a.I);if(Oe(f,"SID",a.K),Oe(f,"RID",h),Oe(f,"TYPE","terminate"),Mi(a,f),h=new lr(a,a.j,h),h.L=2,h.v=pa(Ln(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=Cp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),da(h)}Ip(a)}function va(a){a.g&&(Hc(a),a.g.cancel(),a.g=null)}function _p(a){va(a),a.u&&(c.clearTimeout(a.u),a.u=null),_a(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function xa(a){if(!tp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Me||oe(),K||(Me(),K=!0),J.add(h,a),a.B=0}}function uw(a,h){return np(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ii(x(a.Ga,a,h),Tp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new lr(this,this.j,a);let O=this.o;if(this.S&&(O?(O=g(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=kp(this,D,h),f=Ln(this.I),Oe(f,"RID",a),Oe(f,"CVER",22),this.D&&Oe(f,"X-HTTP-Session-Id",this.D),Mi(this,f),O&&(this.O?h="headers="+encodeURIComponent(String(fp(O)))+"&"+h:this.m&&Uc(f,this.m,O)),zc(this.h,D),this.Ua&&Oe(f,"TYPE","init"),this.P?(Oe(f,"$req",h),Oe(f,"SID","null"),D.T=!0,Mc(D,f,null)):Mc(D,f,h),this.G=2}}else this.G==3&&(a?wp(this,a):this.i.length==0||tp(this.h)||wp(this))};function wp(a,h){var f;h?f=h.l:f=a.U++;const y=Ln(a.I);Oe(y,"SID",a.K),Oe(y,"RID",f),Oe(y,"AID",a.T),Mi(a,y),a.m&&a.o&&Uc(y,a.m,a.o),f=new lr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=kp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),zc(a.h,f),Mc(f,y,h)}function Mi(a,h){a.H&&L(a.H,function(f,y){Oe(h,y,f)}),a.l&&ip({},function(f,y){Oe(h,y,f)})}function kp(a,h,f){f=Math.min(a.i.length,f);var y=a.l?x(a.l.Na,a.l,a):null;e:{var D=a.i;let O=-1;for(;;){const Y=["count="+f];O==-1?0<f?(O=D[0].g,Y.push("ofs="+O)):O=0:Y.push("ofs="+O);let De=!0;for(let gt=0;gt<f;gt++){let Se=D[gt].g;const St=D[gt].map;if(Se-=O,0>Se)O=Math.max(0,D[gt].g-100),De=!1;else try{ow(St,Y,"req"+Se+"_")}catch{y&&y(St)}}if(De){y=Y.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function bp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Me||oe(),K||(Me(),K=!0),J.add(h,a),a.v=0}}function $c(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ii(x(a.Fa,a),Tp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ep(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ii(x(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),va(this),Ep(this))};function Hc(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Ep(a){a.g=new lr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Ln(a.qa);Oe(h,"RID","rpc"),Oe(h,"SID",a.K),Oe(h,"AID",a.T),Oe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Oe(h,"TO",a.ja),Oe(h,"TYPE","xmlhttp"),Mi(a,h),a.m&&a.o&&Uc(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=pa(Ln(h)),f.m=null,f.P=!0,Xf(f,a)}t.Za=function(){this.C!=null&&(this.C=null,va(this),$c(this),Mt(19))};function _a(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Sp(a,h){var f=null;if(a.g==h){_a(a),Hc(a),a.g=null;var y=2}else if(Fc(a.h,h))f=h.D,rp(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;y=la(),Be(y,new qf(y,f)),xa(a)}else bp(a);else if(D=h.s,D==3||D==0&&0<h.X||!(y==1&&uw(a,h)||y==2&&$c(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),D){case 1:Kr(a,5);break;case 4:Kr(a,10);break;case 3:Kr(a,6);break;default:Kr(a,2)}}}function Tp(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Kr(a,h){if(a.j.info("Error code "+h),h==2){var f=x(a.fb,a),y=a.Xa;const D=!y;y=new qr(y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ha(y,"https"),pa(y),D?rw(y.toString(),f):sw(y.toString(),f)}else Mt(2);a.G=0,a.l&&a.l.sa(h),Ip(a),_p(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Ip(a){if(a.G=0,a.ka=[],a.l){const h=sp(a.h);(h.length!=0||a.i.length!=0)&&(M(a.ka,h),M(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Np(a,h,f){var y=f instanceof qr?Ln(f):new qr(f);if(y.g!="")h&&(y.g=h+"."+y.g),fa(y,y.s);else{var D=c.location;y=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new qr(null);y&&ha(O,y),h&&(O.g=h),D&&fa(O,D),f&&(O.l=f),y=O}return f=a.D,h=a.ya,f&&h&&Oe(y,f,h),Oe(y,"VER",a.la),Mi(a,y),y}function Cp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Qe(new ma({eb:f})):new Qe(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ap(){}t=Ap.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wa(){}wa.prototype.g=function(a,h){return new Kt(a,h)};function Kt(a,h){Ce.call(this),this.g=new xp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ss(this)}T(Kt,Ce),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Bc(this.g)},Kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=je(a),a=f);h.i.push(new q_(h.Ya++,a)),h.G==3&&xa(h)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,Kt.aa.N.call(this)};function Pp(a){Rc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}T(Pp,Rc);function Rp(){jc.call(this),this.status=1}T(Rp,jc);function Ss(a){this.g=a}T(Ss,Ap),Ss.prototype.ua=function(){Be(this.g,"a")},Ss.prototype.ta=function(a){Be(this.g,new Pp(a))},Ss.prototype.sa=function(a){Be(this.g,new Rp)},Ss.prototype.ra=function(){Be(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,xx=function(){return new wa},vx=function(){return la()},yx=Gr,Od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,al=ca,Kf.COMPLETE="complete",gx=Kf,aa.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Xi=aa,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,mx=Qe}).apply(typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{});const _g="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Yh("@firebase/firestore");function Gi(){return gs.logLevel}function re(t,...e){if(gs.logLevel<=_e.DEBUG){const n=e.map(df);gs.debug(`Firestore (${wi}): ${t}`,...n)}}function sr(t,...e){if(gs.logLevel<=_e.ERROR){const n=e.map(df);gs.error(`Firestore (${wi}): ${t}`,...n)}}function li(t,...e){if(gs.logLevel<=_e.WARN){const n=e.map(df);gs.warn(`Firestore (${wi}): ${t}`,...n)}}function df(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${wi}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function Pe(t,e){t||de()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class qS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KS{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new _x(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new At(e)}}class QS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new QS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new XS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ZS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function ci(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new lt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new lt(0,0))}static max(){return new fe(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(),r===void 0?r=e.length-n:r>e.length-n&&de(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xe extends Mo{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const eT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends Mo{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return eT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ae(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ae(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ae(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Xe.fromString(e))}static fromName(e){return new le(Xe.fromString(e).popFirst(5))}static empty(){return new le(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Xe(e.slice()))}}function tT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new Lr(s,le.empty(),e)}function nT(t){return new Lr(t.readTime,t.key,-1)}class Lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lr(fe.min(),le.empty(),-1)}static max(){return new Lr(fe.max(),le.empty(),-1)}}function rT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==sT)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++c,c===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function oT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function na(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hf.oe=-1;function wc(t){return t==null}function Hl(t){return t===0&&1/t==-1/0}function aT(t){return typeof t=="number"&&Number.isInteger(t)&&!Hl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}}class Ba{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??vt.RED,this.left=s??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,r,s,i){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kg(this.data.getIterator())}getIteratorFrom(e){return new kg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class kg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new wt(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bx("Invalid base64 string: "+i):i}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const lT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=lT.exec(t);if(Pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pf(t){const e=t.mapValue.fields.__previous_value__;return ff(e)?pf(e):e}function Lo(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,s,i,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a={mapValue:{}};function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ff(t)?4:dT(t)?9007199254740991:uT(t)?10:11:de()}function Dn(t,e){if(t===e)return!0;const n=vs(t);if(n!==vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lo(t).isEqual(Lo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),c=Or(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ys(s.bytesValue).isEqual(ys(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Je(s.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Je(s.integerValue)===Je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Je(s.doubleValue),c=Je(i.doubleValue);return o===c?Hl(o)===Hl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ci(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(wg(o)!==wg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Dn(o[u],c[u])))return!1;return!0}(t,e);default:return de()}}function Fo(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function ui(t,e){if(t===e)return 0;const n=vs(t),r=vs(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Je(i.integerValue||i.doubleValue),u=Je(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return bg(t.timestampValue,e.timestampValue);case 4:return bg(Lo(t),Lo(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const c=ys(i),u=ys(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=Te(c[d],u[d]);if(p!==0)return p}return Te(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Te(Je(i.latitude),Je(o.latitude));return c!==0?c:Te(Je(i.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Eg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,p;const m=i.fields||{},x=o.fields||{},I=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(u=x.value)===null||u===void 0?void 0:u.arrayValue,P=Te(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:Eg(I,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$a.mapValue&&o===$a.mapValue)return 0;if(i===$a.mapValue)return 1;if(o===$a.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const x=Te(u[m],p[m]);if(x!==0)return x;const I=ui(c[u[m]],d[p[m]]);if(I!==0)return I}return Te(u.length,p.length)}(t.mapValue,e.mapValue);default:throw de()}}function bg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Or(t),r=Or(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function Eg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ui(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function di(t){return Fd(t)}function Fd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Fd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Fd(n.fields[o])}`;return s+"}"}(t.mapValue):de()}function zd(t){return!!t&&"integerValue"in t}function mf(t){return!!t&&"arrayValue"in t}function Sg(t){return!!t&&"nullValue"in t}function Tg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ll(t){return!!t&&"mapValue"in t}function uT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ho(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ho(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ho(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ll(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ho(n)}setAll(e){let n=xt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ho(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ll(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ll(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new sn(ho(this.value))}}function Ex(t){const e=[];return ki(t.fields,(n,r)=>{const s=new xt([n]);if(ll(r)){const i=Ex(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Rt(e,0,fe.min(),fe.min(),fe.min(),sn.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,fe.min(),fe.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,fe.min(),fe.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.position=e,this.inclusive=n}}function Ig(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ng(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function hT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{}class ot extends Sx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pT(e,n,r):n==="array-contains"?new yT(e,r):n==="in"?new vT(e,r):n==="not-in"?new xT(e,r):n==="array-contains-any"?new _T(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mT(e,r):new gT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&vs(this.value)===vs(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends Sx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vn(e,n)}matches(e){return Tx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tx(t){return t.op==="and"}function Ix(t){return fT(t)&&Tx(t)}function fT(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Ud(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+di(t.value);if(Ix(t))return t.filters.map(e=>Ud(e)).join(",");{const e=t.filters.map(n=>Ud(n)).join(",");return`${t.op}(${e})`}}function Nx(t,e){return t instanceof ot?function(r,s){return s instanceof ot&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)}(t,e):t instanceof Vn?function(r,s){return s instanceof Vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Nx(o,s.filters[c]),!0):!1}(t,e):void de()}function Cx(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${di(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(Cx).join(" ,")+"}"}(t):"Filter"}class pT extends ot{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class mT extends ot{constructor(e,n){super(e,"in",n),this.keys=Ax("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gT extends ot{constructor(e,n){super(e,"not-in",n),this.keys=Ax("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ax(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class yT extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mf(n)&&Fo(n.arrayValue,this.value)}}class vT extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fo(this.value.arrayValue,n)}}class xT extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fo(this.value.arrayValue,n)}}class _T extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function Cg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wT(t,e,n,r,s,i,o)}function gf(t){const e=pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>di(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>di(r)).join(",")),e.ue=n}return e.ue}function yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Nx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ng(t.startAt,e.startAt)&&Ng(t.endAt,e.endAt)}function Bd(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function kT(t,e,n,r,s,i,o,c){return new kc(t,e,n,r,s,i,o,c)}function vf(t){return new kc(t)}function Ag(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bT(t){return t.collectionGroup!==null}function fo(t){const e=pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new wt(xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Wl(i,r))}),n.has(xt.keyField().canonicalString())||e.ce.push(new Wl(xt.keyField(),r))}return e.ce}function Pn(t){const e=pe(t);return e.le||(e.le=ET(e,fo(t))),e.le}function ET(t,e){if(t.limitType==="F")return Cg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wl(s.field,i)});const n=t.endAt?new Gl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gl(t.startAt.position,t.startAt.inclusive):null;return Cg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $d(t,e,n){return new kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bc(t,e){return yf(Pn(t),Pn(e))&&t.limitType===e.limitType}function Px(t){return`${gf(Pn(t))}|lt:${t.limitType}`}function Ns(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Cx(s)).join(", ")}]`),wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>di(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>di(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function Ec(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):le.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Ig(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,fo(r),s)||r.endAt&&!function(o,c,u){const d=Ig(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,fo(r),s))}(t,e)}function ST(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rx(t){return(e,n)=>{let r=!1;for(const s of fo(t)){const i=TT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TT(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?ui(u,d):de()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new We(le.comparator);function ir(){return IT}const jx=new We(le.comparator);function Ji(...t){let e=jx;for(const n of t)e=e.insert(n.key,n);return e}function Dx(t){let e=jx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return po()}function Vx(){return po()}function po(){return new bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const NT=new We(le.comparator),CT=new wt(le.comparator);function xe(...t){let e=CT;for(const n of t)e=e.add(n);return e}const AT=new wt(Te);function PT(){return AT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hl(e)?"-0":e}}function Mx(t){return{integerValue:""+t}}function RT(t,e){return aT(e)?Mx(e):xf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this._=void 0}}function jT(t,e,n){return t instanceof ql?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ff(i)&&(i=pf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof zo?Ox(t,e):t instanceof Uo?Fx(t,e):function(s,i){const o=Lx(s,i),c=Pg(o)+Pg(s.Pe);return zd(o)&&zd(s.Pe)?Mx(c):xf(s.serializer,c)}(t,e)}function DT(t,e,n){return t instanceof zo?Ox(t,e):t instanceof Uo?Fx(t,e):n}function Lx(t,e){return t instanceof Kl?function(r){return zd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ql extends Sc{}class zo extends Sc{constructor(e){super(),this.elements=e}}function Ox(t,e){const n=zx(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Uo extends Sc{constructor(e){super(),this.elements=e}}function Fx(t,e){let n=zx(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class Kl extends Sc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Pg(t){return Je(t.integerValue||t.doubleValue)}function zx(t){return mf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function VT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof zo&&s instanceof zo||r instanceof Uo&&s instanceof Uo?ci(r.elements,s.elements,Dn):r instanceof Kl&&s instanceof Kl?Dn(r.Pe,s.Pe):r instanceof ql&&s instanceof ql}(t.transform,e.transform)}class MT{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tc{}function Ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $x(t.key,Yn.none()):new ra(t.key,t.data,Yn.none());{const n=t.data,r=sn.empty();let s=new wt(xt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ws(t.key,r,new xn(s.toArray()),Yn.none())}}function LT(t,e,n){t instanceof ra?function(s,i,o){const c=s.value.clone(),u=jg(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ws?function(s,i,o){if(!cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=jg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Bx(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mo(t,e,n,r){return t instanceof ra?function(i,o,c,u){if(!cl(i.precondition,o))return c;const d=i.value.clone(),p=Dg(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ws?function(i,o,c,u){if(!cl(i.precondition,o))return c;const d=Dg(i.fieldTransforms,u,o),p=o.data;return p.setAll(Bx(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function OT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Lx(r.transform,s||null);i!=null&&(n===null&&(n=sn.empty()),n.set(r.field,i))}return n||null}function Rg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ci(r,s,(i,o)=>VT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ra extends Tc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ws extends Tc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Bx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jg(t,e,n){const r=new Map;Pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,DT(o,c,n[s]))}return r}function Dg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,jT(i,o,e))}return r}class $x extends Tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FT extends Tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Vx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=Ux(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,(n,r)=>Rg(n,r))&&ci(this.baseMutations,e.baseMutations,(n,r)=>Rg(n,r))}}class _f{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length);let s=function(){return NT}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new _f(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,we;function $T(t){switch(t){default:return de();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function Hx(t){if(t===void 0)return sr("GRPC error has no .code"),W.UNKNOWN;switch(t){case nt.OK:return W.OK;case nt.CANCELLED:return W.CANCELLED;case nt.UNKNOWN:return W.UNKNOWN;case nt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case nt.INTERNAL:return W.INTERNAL;case nt.UNAVAILABLE:return W.UNAVAILABLE;case nt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case nt.NOT_FOUND:return W.NOT_FOUND;case nt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case nt.ABORTED:return W.ABORTED;case nt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case nt.DATA_LOSS:return W.DATA_LOSS;default:return de()}}(we=nt||(nt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=new as([4294967295,4294967295],0);function Vg(t){const e=HT().encode(t),n=new px;return n.update(e),new Uint8Array(n.digest())}function Mg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new as([n,r],0),new as([s,i],0)]}class wf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zi(`Invalid padding: ${n}`);if(r<0)throw new Zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(as.fromNumber(r)));return s.compare(GT)===1&&(s=new as([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vg(e),[r,s]=Mg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Vg(e),[r,s]=Mg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ic(fe.min(),s,new We(Te),ir(),xe())}}class sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sa(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Gx{constructor(e,n){this.targetId=e,this.me=n}}class Wx{constructor(e,n,r=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lg{constructor(){this.fe=0,this.ge=Fg(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),r=xe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:de()}}),new sa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Fg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class WT{constructor(e){this.Le=e,this.Be=new Map,this.ke=ir(),this.qe=Og(),this.Qe=new We(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Bd(i))if(r===0){const o=new le(i.path);this.Ue(n,o,Rt.newNoDocument(o,fe.min()))}else Pe(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=ys(r).toUint8Array()}catch(u){if(u instanceof bx)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new wf(o,s,i)}catch(u){return li(u instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Bd(c.target)){const u=new le(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=xe();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ic(e,n,this.Qe,this.ke,r);return this.ke=ir(),this.qe=Og(),this.Qe=new We(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Lg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Og(){return new We(le.comparator)}function Fg(){return new We(le.comparator)}const qT={asc:"ASCENDING",desc:"DESCENDING"},KT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QT={and:"AND",or:"OR"};class YT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hd(t,e){return t.useProto3Json||wc(e)?e:{value:e}}function Ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XT(t,e){return Ql(t,e.toTimestamp())}function Rn(t){return Pe(!!t),fe.fromTimestamp(function(n){const r=Or(n);return new lt(r.seconds,r.nanos)}(t))}function kf(t,e){return Gd(t,e).canonicalString()}function Gd(t,e){const n=function(s){return new Xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kx(t){const e=Xe.fromString(t);return Pe(Zx(e)),e}function Wd(t,e){return kf(t.databaseId,e.path)}function Iu(t,e){const n=Kx(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(Yx(n))}function Qx(t,e){return kf(t.databaseId,e)}function JT(t){const e=Kx(t);return e.length===4?Xe.emptyPath():Yx(e)}function qd(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yx(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zg(t,e,n){return{name:Wd(t,e),fields:n.value.mapValue.fields}}function ZT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(Pe(p===void 0||typeof p=="string"),bt.fromBase64String(p||"")):(Pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),bt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const p=d.code===void 0?W.UNKNOWN:Hx(d.code);return new ae(p,d.message||"")}(o);n=new Wx(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Iu(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):fe.min(),c=new sn({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(s,i,o,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new ul(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Iu(t,r.document),i=r.readTime?Rn(r.readTime):fe.min(),o=Rt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new ul([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Iu(t,r.document),i=r.removedTargetIds||[];n=new ul([],i,s,null)}else{if(!("filter"in e))return de();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new BT(s,i),c=r.targetId;n=new Gx(c,o)}}return n}function eI(t,e){let n;if(e instanceof ra)n={update:zg(t,e.key,e.value)};else if(e instanceof $x)n={delete:Wd(t,e.key)};else if(e instanceof ws)n={update:zg(t,e.key,e.data),updateMask:cI(e.fieldMask)};else{if(!(e instanceof FT))return de();n={verify:Wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof ql)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Uo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Kl)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw de()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:XT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de()}(t,e.precondition)),n}function tI(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(fe.min())&&(o=Rn(i)),new MT(o,s.transformResults||[])}(n,e))):[]}function nI(t,e){return{documents:[Qx(t,e.path)]}}function rI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qx(t,s);const i=function(d){if(d.length!==0)return Jx(Vn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(x){return{field:Cs(x.field),direction:oI(x.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Hd(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function sI(t){let e=JT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const x=Xx(m);return x instanceof Vn&&Ix(x)?x.getFilters():[x]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(x=>function(T){return new Wl(As(T.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(x))}(n.orderBy));let c=null;n.limit&&(c=function(m){let x;return x=typeof m=="object"?m.value:m,wc(x)?null:x}(n.limit));let u=null;n.startAt&&(u=function(m){const x=!!m.before,I=m.values||[];return new Gl(I,x)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const x=!m.before,I=m.values||[];return new Gl(I,x)}(n.endAt)),kT(e,s,o,i,c,"F",u,d)}function iI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=As(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(As(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(r=>Xx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function oI(t){return qT[t]}function aI(t){return KT[t]}function lI(t){return QT[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function As(t){return xt.fromServerFormat(t.fieldPath)}function Jx(t){return t instanceof ot?function(n){if(n.op==="=="){if(Tg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(Sg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(Sg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:aI(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const r=n.getFilters().map(s=>Jx(s));return r.length===1?r[0]:{compositeFilter:{op:lI(n.op),filters:r}}}(t):de()}function cI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,s,i=fe.min(),o=fe.min(),c=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.ct=e}}function dI(t){const e=sI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.un=new fI}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Lr.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class fI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new wt(Xe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new wt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hi(0)}static kn(){return new hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.changes=new bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&mo(r.mutation,s,xn.empty(),lt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const s=rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ji();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=ir();const o=po(),c=function(){return po()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof ws)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),mo(p.mutation,d,p.mutation.getFieldMask(),lt.now())):o.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return c.set(d,new mI(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=po();let s=new We((o,c)=>o-c),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||xn.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(s.get(c.batchId)||xe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=Vx();p.forEach(x=>{if(!i.has(x)){const I=Ux(n.get(x),r.get(x));I!==null&&m.set(x,I),i=i.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve(rs());let c=-1,u=i;return o.next(d=>H.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?H.resolve():this.remoteDocumentCache.getEntry(e,p).next(x=>{u=u.insert(p,x)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,xe())).next(p=>({batchId:c,changes:Dx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let s=Ji();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ji();return this.indexManager.getCollectionParents(e,i).next(c=>H.forEach(c,u=>{const d=function(m,x){return new kc(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,x)=>{o=o.insert(m,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,Rt.newInvalidDocument(p)))});let c=Ji();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&mo(p.mutation,d,xn.empty(),lt.now()),Ec(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:dI(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new We(le.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rs();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=rs(),i=n.length+1,o=new le(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=rs(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=rs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return H.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UT(n,r));let i=this.Ir.get(n);i===void 0&&(i=xe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this.Tr=new wt(ut.Er),this.dr=new wt(ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Xe([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Xe([])),r=new ut(n,e),s=new ut(n,e+1);let i=xe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(ut.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zT(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new ut(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(Te);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;le.isDocumentKey(i)||(i=i.child(""));const o=new ut(new le(i),0);let c=new wt(Te);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),H.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ut(n,0),s=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.Mr=e,this.docs=function(){return new We(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ir();const o=n.path,c=new le(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||rT(nT(p),r)<=0||(s.has(p.key)||Ec(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){de()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kI(this)}getSize(e){return H.resolve(this.size)}}class kI extends pI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.persistence=e,this.Nr=new bi(n=>gf(n),yf),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bf,this.targetCount=0,this.kr=hi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hf(0),this.Kr=!1,this.Kr=!0,this.$r=new xI,this.referenceDelegate=e(this),this.Ur=new bI(this),this.indexManager=new hI,this.remoteDocumentCache=function(s){return new wI(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uI(n),this.Gr=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _I(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new SI(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class SI extends iT{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Jr=new bf,this.Yr=null}static Zr(e){return new Ef(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const s=le.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=xe(),s=xe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ib()?8:oT(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new TI;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Gi()<=_e.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Gi()<=_e.DEBUG&&re("QueryEngine","Query:",Ns(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Gi()<=_e.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):H.resolve())}Yi(e,n){if(Ag(n))return H.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=$d(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=xe(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,$d(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Ag(n)||s.isEqual(fe.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?H.resolve(null):(Gi()<=_e.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ns(n)),this.rs(e,o,n,tT(s,-1)).next(c=>c))})}ts(e,n){let r=new wt(Rx(e));return n.forEach((s,i)=>{Ec(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Gi()<=_e.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ns(n)),this.Ji.getDocumentsMatchingQuery(e,n,Lr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new We(Te),this._s=new bi(i=>gf(i),yf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function CI(t,e,n,r){return new NI(t,e,n,r)}async function e_(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=xe();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function AI(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,x=m.keys();let I=H.resolve();return x.forEach(T=>{I=I.next(()=>p.getEntry(u,T)).next(P=>{const M=d.docVersions.get(T);Pe(M!==null),P.version.compareTo(M)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=xe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function t_(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function PI(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((p,m)=>{const x=s.get(m);if(!x)return;c.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(bt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(P,M,E){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(x,I,p)&&c.push(n.Ur.updateTargetData(i,I))});let u=ir(),d=xe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(RI(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(fe.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return H.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function RI(t,e,n){let r=xe(),s=xe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):re("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function jI(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DI(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kd(t,e,n){const r=pe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!na(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ug(t,e,n){const r=pe(t);let s=fe.min(),i=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=pe(u),x=m._s.get(p);return x!==void 0?H.resolve(m.os.get(x)):m.Ur.getTargetData(d,p)}(r,o,Pn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:xe())).next(c=>(VI(r,ST(e),c),{documents:c,Ts:i})))}function VI(t,e,n){let r=t.us.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Bg{constructor(){this.activeTargetIds=PT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MI{constructor(){this.so=new Bg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha=null;function Nu(){return Ha===null?Ha=function(){return 268435456+Math.round(2147483648*Math.random())}():Ha++,"0x"+Ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class zI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=Nu(),u=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(re("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw li("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=OI[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Nu();return new Promise((o,c)=>{const u=new mx;u.setWithCredentials(!0),u.listenOnce(gx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case al.NO_ERROR:const p=u.getResponseJson();re(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case al.TIMEOUT:re(Ct,`RPC '${e}' ${i} timed out`),c(new ae(W.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:const m=u.getStatus();if(re(Ct,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const I=x==null?void 0:x.error;if(I&&I.status&&I.message){const T=function(M){const E=M.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(E)>=0?E:W.UNKNOWN}(I.status);c(new ae(T,I.message))}else c(new ae(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ae(W.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{re(Ct,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);re(Ct,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Nu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xx(),c=vx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");re(Ct,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let x=!1,I=!1;const T=new FI({Io:M=>{I?re(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(x||(re(Ct,`Opening RPC '${e}' stream ${s} transport.`),m.open(),x=!0),re(Ct,`RPC '${e}' stream ${s} sending:`,M),m.send(M))},To:()=>m.close()}),P=(M,E,w)=>{M.listen(E,S=>{try{w(S)}catch(C){setTimeout(()=>{throw C},0)}})};return P(m,Xi.EventType.OPEN,()=>{I||(re(Ct,`RPC '${e}' stream ${s} transport opened.`),T.yo())}),P(m,Xi.EventType.CLOSE,()=>{I||(I=!0,re(Ct,`RPC '${e}' stream ${s} transport closed`),T.So())}),P(m,Xi.EventType.ERROR,M=>{I||(I=!0,li(Ct,`RPC '${e}' stream ${s} transport errored:`,M),T.So(new ae(W.UNAVAILABLE,"The operation could not be completed")))}),P(m,Xi.EventType.MESSAGE,M=>{var E;if(!I){const w=M.data[0];Pe(!!w);const S=w,C=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(C){re(Ct,`RPC '${e}' stream ${s} received error:`,C);const z=C.status;let L=function(k){const b=nt[k];if(b!==void 0)return Hx(b)}(z),_=C.message;L===void 0&&(L=W.INTERNAL,_="Unknown error status: "+z+" with message "+C.message),I=!0,T.So(new ae(L,_)),m.close()}else re(Ct,`RPC '${e}' stream ${s} received:`,w),T.bo(w)}}),P(c,yx.STAT_EVENT,M=>{M.stat===Od.PROXY?re(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===Od.NOPROXY&&re(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Cu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t){return new YT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new n_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ae(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UI extends r_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ZT(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?Rn(o.readTime):fe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=qd(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Bd(u)?{documents:nI(i,u)}:{query:rI(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=qx(i,o.resumeToken);const d=Hd(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(fe.min())>0){c.readTime=Ql(i,o.snapshotVersion.toTimestamp());const d=Hd(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=iI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=qd(this.serializer),n.removeTarget=e,this.a_(n)}}class BI extends r_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=tI(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=qd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Gd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(W.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Gd(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class HI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ks(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=pe(u);d.L_.add(4),await ia(d),d.q_.set("Unknown"),d.L_.delete(4),await Cc(d)}(this))})}),this.q_=new HI(r,s)}}async function Cc(t){if(ks(t))for(const e of t.B_)await e(!0)}async function ia(t){for(const e of t.B_)await e(!1)}function s_(t,e){const n=pe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Cf(n)?Nf(n):Ei(n).r_()&&If(n,e))}function Tf(t,e){const n=pe(t),r=Ei(n);n.N_.delete(e),r.r_()&&i_(n,e),n.N_.size===0&&(r.r_()?r.o_():ks(n)&&n.q_.set("Unknown"))}function If(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ei(t).A_(e)}function i_(t,e){t.Q_.xe(e),Ei(t).R_(e)}function Nf(t){t.Q_=new WT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ei(t).start(),t.q_.v_()}function Cf(t){return ks(t)&&!Ei(t).n_()&&t.N_.size>0}function ks(t){return pe(t).L_.size===0}function o_(t){t.Q_=void 0}async function WI(t){t.q_.set("Online")}async function qI(t){t.N_.forEach((e,n)=>{If(t,e)})}async function KI(t,e){o_(t),Cf(t)?(t.q_.M_(e),Nf(t)):t.q_.set("Unknown")}async function QI(t,e,n){if(t.q_.set("Online"),e instanceof Wx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yl(t,r)}else if(e instanceof ul?t.Q_.Ke(e):e instanceof Gx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const r=await t_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(bt.EMPTY_BYTE_STRING,p.snapshotVersion)),i_(i,u);const m=new kr(p.target,u,d,p.sequenceNumber);If(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await Yl(t,r)}}async function Yl(t,e,n){if(!na(e))throw e;t.L_.add(1),await ia(t),t.q_.set("Offline"),n||(n=()=>t_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Cc(t)})}function a_(t,e){return e().catch(n=>Yl(t,n,e))}async function Ac(t){const e=pe(t),n=Fr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;YI(e);)try{const s=await jI(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,XI(e,s)}catch(s){await Yl(e,s)}l_(e)&&c_(e)}function YI(t){return ks(t)&&t.O_.length<10}function XI(t,e){t.O_.push(e);const n=Fr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function l_(t){return ks(t)&&!Fr(t).n_()&&t.O_.length>0}function c_(t){Fr(t).start()}async function JI(t){Fr(t).p_()}async function ZI(t){const e=Fr(t);for(const n of t.O_)e.m_(n.mutations)}async function eN(t,e,n){const r=t.O_.shift(),s=_f.from(r,e,n);await a_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ac(t)}async function tN(t,e){e&&Fr(t).V_&&await async function(r,s){if(function(o){return $T(o)&&o!==W.ABORTED}(s.code)){const i=r.O_.shift();Fr(r).s_(),await a_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ac(r)}}(t,e),l_(t)&&c_(t)}async function Hg(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=ks(n);n.L_.add(3),await ia(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Cc(n)}async function nN(t,e){const n=pe(t);e?(n.L_.delete(2),await Cc(n)):e||(n.L_.add(2),await ia(n),n.q_.set("Unknown"))}function Ei(t){return t.K_||(t.K_=function(n,r,s){const i=pe(n);return i.w_(),new UI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:WI.bind(null,t),Ro:qI.bind(null,t),mo:KI.bind(null,t),d_:QI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cf(t)?Nf(t):t.q_.set("Unknown")):(await t.K_.stop(),o_(t))})),t.K_}function Fr(t){return t.U_||(t.U_=function(n,r,s){const i=pe(n);return i.w_(),new BI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JI.bind(null,t),mo:tN.bind(null,t),f_:ZI.bind(null,t),g_:eN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ac(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Af(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pf(t,e){if(sr("AsyncQueue",`${e}: ${t}`),na(t))return new ae(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Ji(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this.W_=new We(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new fi(e,n,Js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sN{constructor(){this.queries=Wg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=Wg(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ae(W.ABORTED,"Firestore shutting down"))}}function Wg(){return new bi(t=>Px(t),bc)}async function iN(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new rN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Pf(o,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Rf(n)}async function oN(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aN(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Rf(n)}function lN(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Rf(t){t.Y_.forEach(e=>{e.next()})}var Qd,qg;(qg=Qd||(Qd={})).ea="default",qg.Cache="cache";class cN{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.key=e}}class d_{constructor(e){this.key=e}}class uN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=Rx(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Gg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const x=s.get(p),I=Ec(this.query,m)?m:null,T=!!x&&this.mutatedKeys.has(x.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let M=!1;x&&I?x.data.isEqual(I.data)?T!==P&&(r.track({type:3,doc:I}),M=!0):this.ga(x,I)||(r.track({type:2,doc:I}),M=!0,(u&&this.Aa(I,u)>0||d&&this.Aa(I,d)<0)&&(c=!0)):!x&&I?(r.track({type:0,doc:I}),M=!0):x&&!I&&(r.track({type:1,doc:x}),M=!0,(u||d)&&(c=!0)),M&&(I?(o=o.add(I),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,T){const P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return P(I)-P(T)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new fi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new d_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new u_(r))}),n}ba(e){this.Ta=e.Ts,this.da=xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hN{constructor(e){this.key=e,this.va=!1}}class fN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bi(c=>Px(c),bc),this.Ma=new Map,this.xa=new Set,this.Oa=new We(le.comparator),this.Na=new Map,this.La=new bf,this.Ba={},this.ka=new Map,this.qa=hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pN(t,e,n=!0){const r=y_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await h_(r,e,n,!0),s}async function mN(t,e){const n=y_(t);await h_(n,e,!0,!1)}async function h_(t,e,n,r){const s=await DI(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await gN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&s_(t.remoteStore,s),c}async function gN(t,e,n,r,s){t.Ka=(m,x,I)=>async function(P,M,E,w){let S=M.view.ma(E);S.ns&&(S=await Ug(P.localStore,M.query,!1).then(({documents:_})=>M.view.ma(_,S)));const C=w&&w.targetChanges.get(M.targetId),z=w&&w.targetMismatches.get(M.targetId)!=null,L=M.view.applyChanges(S,P.isPrimaryClient,C,z);return Qg(P,M.targetId,L.wa),L.snapshot}(t,m,x,I);const i=await Ug(t.localStore,e,!0),o=new uN(e,i.Ts),c=o.ma(i.documents),u=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Qg(t,n,d.wa);const p=new dN(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function yN(t,e,n){const r=pe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!bc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tf(r.remoteStore,s.targetId),Yd(r,s.targetId)}).catch(ta)):(Yd(r,s.targetId),await Kd(r.localStore,s.targetId,!0))}async function vN(t,e){const n=pe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tf(n.remoteStore,r.targetId))}async function xN(t,e,n){const r=TN(t);try{const s=await function(o,c){const u=pe(o),d=lt.now(),p=c.reduce((I,T)=>I.add(T.key),xe());let m,x;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=ir(),P=xe();return u.cs.getEntries(I,p).next(M=>{T=M,T.forEach((E,w)=>{w.isValidDocument()||(P=P.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,T)).next(M=>{m=M;const E=[];for(const w of c){const S=OT(w,m.get(w.key).overlayedDocument);S!=null&&E.push(new ws(w.key,S,Ex(S.value.mapValue),Yn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,E,c)}).next(M=>{x=M;const E=M.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(I,M.batchId,E)})}).then(()=>({batchId:x.batchId,changes:Dx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new We(Te)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await oa(r,s.changes),await Ac(r.remoteStore)}catch(s){const i=Pf(s,"Failed to persist write");n.reject(i)}}async function f_(t,e){const n=pe(t);try{const r=await PI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Pe(o.va):s.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await oa(n,r,e)}catch(r){await ta(r)}}function Kg(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=pe(o);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const x of m.j_)x.Z_(c)&&(d=!0)}),d&&Rf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _N(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new We(le.comparator);o=o.insert(i,Rt.newNoDocument(i,fe.min()));const c=xe().add(i),u=new Ic(fe.min(),new Map,new We(Te),o,c);await f_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),jf(r)}else await Kd(r.localStore,e,!1).then(()=>Yd(r,e,n)).catch(ta)}async function wN(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await AI(n.localStore,e);m_(n,r,null),p_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oa(n,s)}catch(s){await ta(s)}}async function kN(t,e,n){const r=pe(t);try{const s=await function(o,c){const u=pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Pe(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);m_(r,e,n),p_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oa(r,s)}catch(s){await ta(s)}}function p_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function m_(t,e,n){const r=pe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Yd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||g_(t,r)})}function g_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Tf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),jf(t))}function Qg(t,e,n){for(const r of n)r instanceof u_?(t.La.addReference(r.key,e),bN(t,r)):r instanceof d_?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||g_(t,r.key)):de()}function bN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),jf(t))}function jf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Xe.fromString(e)),r=t.qa.next();t.Na.set(r,new hN(n)),t.Oa=t.Oa.insert(n,r),s_(t.remoteStore,new kr(Pn(vf(n.path)),r,"TargetPurposeLimboResolution",hf.oe))}}async function oa(t,e,n){const r=pe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Sf.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=pe(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(d,x=>H.forEach(x.$i,I=>p.persistence.referenceDelegate.addReference(m,x.targetId,I)).next(()=>H.forEach(x.Ui,I=>p.persistence.referenceDelegate.removeReference(m,x.targetId,I)))))}catch(m){if(!na(m))throw m;re("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const x=m.targetId;if(!m.fromCache){const I=p.os.get(x),T=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(x,P)}}}(r.localStore,i))}async function EN(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await e_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new ae(W.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oa(n,r.hs)}}function SN(t,e){const n=pe(t),r=n.Na.get(e);if(r&&r.va)return xe().add(r.key);{let s=xe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function y_(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_N.bind(null,e),e.Ca.d_=aN.bind(null,e.eventManager),e.Ca.$a=lN.bind(null,e.eventManager),e}function TN(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kN.bind(null,e),e}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return CI(this.persistence,new II,e.initialUser,this.serializer)}Ga(e){return new EI(Ef.Zr,this.serializer)}Wa(e){return new MI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class Xd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EN.bind(null,this.syncEngine),await nN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sN}()}createDatastore(e){const n=Nc(e.databaseInfo.databaseId),r=function(i){return new zI(i)}(e.databaseInfo);return function(i,o,c,u){return new $I(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new GI(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Kg(this.syncEngine,n,0),function(){return $g.D()?new $g:new LI}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,p){const m=new fN(s,i,o,c,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=pe(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ia(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=At.UNAUTHENTICATED,this.clientId=wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Au(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await e_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CN(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Hg(e.remoteStore,s)),t._onlineComponents=e}async function CN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Au(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await Au(t,new Xl)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await Au(t,new Xl);return t._offlineComponents}async function v_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Yg(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Yg(t,new Xd))),t._onlineComponents}function AN(t){return v_(t).then(e=>e.syncEngine)}async function PN(t){const e=await v_(t),n=e.eventManager;return n.onListen=pN.bind(null,e.syncEngine),n.onUnlisten=yN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vN.bind(null,e.syncEngine),n}function RN(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const p=new IN({next:x=>{p.Za(),o.enqueueAndForget(()=>oN(i,m));const I=x.docs.has(c);!I&&x.fromCache?d.reject(new ae(W.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&x.fromCache&&u&&u.source==="server"?d.reject(new ae(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(x)},error:x=>d.reject(x)}),m=new cN(vf(c.path),p,{includeMetadataChanges:!0,_a:!0});return iN(i,m)}(await PN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e,n){if(!n)throw new ae(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DN(t,e,n,r){if(e===!0&&r===!0)throw new ae(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jg(t){if(!le.isDocumentKey(t))throw new ae(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function Bo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Df(t);throw new ae(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WS;switch(r.type){case"firstParty":return new YS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xg.get(n);r&&(re("ComponentProvider","Removing Datastore"),Xg.delete(n),r.terminate())}(this),Promise.resolve()}}function VN(t,e,n,r={}){var s;const i=(t=Bo(t,Vf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=At.MOCK_USER;else{c=_b(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ae(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(d)}t._authCredentials=new qS(new _x(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mf(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class $o extends Mf{constructor(e,n,r){super(e,n,vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new le(e))}withConverter(e){return new $o(this.firestore,e,this._path)}}function __(t,e,...n){if(t=dn(t),arguments.length===1&&(e=wx.newId()),jN("doc","path",e),t instanceof Vf){const r=Xe.fromString(e,...n);return Jg(r),new ln(t,null,new le(r))}{if(!(t instanceof ln||t instanceof $o))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return Jg(r),new ln(t.firestore,t instanceof $o?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new n_(this,"async_queue_retry"),this.Vu=()=>{const r=Cu();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Cu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!na(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw sr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Af.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Lf extends Vf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e0(e),this._firestoreClient=void 0,await e}}}function MN(t,e){const n=typeof t=="object"?t:Dv(),r=typeof t=="string"?t:"(default)",s=Jh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vb("firestore");i&&VN(s,...i)}return s}function w_(t){if(t._terminated)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LN(t),t._firestoreClient}function LN(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,p){return new cT(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new NN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(bt.fromBase64String(e))}catch(n){throw new ae(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pi(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=/^__.*__$/;class FN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new ra(e,this.data,n,this.fieldTransforms)}}function b_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Uf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(b_(this.Cu)&&ON.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nc(e)}Qu(e,n,r,s=!1){return new Uf({Cu:e,methodName:n,qu:r,path:xt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UN(t){const e=t._freezeSettings(),n=Nc(t._databaseId);return new zN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);I_("Data must be an object, but it was:",o,r);const c=S_(r,o);let u,d;if(i.merge)u=new xn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=$N(e,m,n);if(!o.contains(x))throw new ae(W.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);GN(p,x)||p.push(x)}u=new xn(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new FN(new sn(c),u,d)}function E_(t,e){if(T_(t=dn(t)))return I_("Unsupported field value:",e,t),S_(t,e);if(t instanceof k_)return function(r,s){if(!b_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=E_(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=lt.fromDate(r);return{timestampValue:Ql(s.serializer,i)}}if(r instanceof lt){const i=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ql(s.serializer,i)}}if(r instanceof Ff)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pi)return{bytesValue:qx(s.serializer,r._byteString)};if(r instanceof ln){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:kf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zf)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return xf(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Df(r)}`)}(t,e)}function S_(t,e){const n={};return kx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,s)=>{const i=E_(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function T_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Ff||t instanceof pi||t instanceof ln||t instanceof k_||t instanceof zf)}function I_(t,e,n){if(!T_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Df(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $N(t,e,n){if((e=dn(e))instanceof Of)return e._internalPath;if(typeof e=="string")return N_(t,e);throw Jl("Field path arguments must be of type string or ",t,!1,void 0,n)}const HN=new RegExp("[~\\*/\\[\\]]");function N_(t,e,n){if(e.search(HN)>=0)throw Jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Of(...e.split("."))._internalPath}catch{throw Jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ae(W.INVALID_ARGUMENT,c+t+u)}function GN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(A_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WN extends C_{data(){return super.data()}}function A_(t,e){return typeof e=="string"?N_(t,e):e instanceof Of?e._internalPath:e._delegate._internalPath}class qN{convertValue(e,n="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ki(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Je(o.doubleValue));return new zf(i)}convertGeoPoint(e){return new Ff(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lo(e));default:return null}}convertTimestamp(e){const n=Or(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xe.fromString(e);Pe(Zx(r));const s=new Oo(r.get(1),r.get(3)),i=new le(r.popFirst(5));return s.isEqual(n)||sr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class P_ extends C_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new YN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(A_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class YN extends P_{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t){t=Bo(t,ln);const e=Bo(t.firestore,Lf);return RN(w_(e),t._key).then(n=>tC(e,t,n))}class JN extends qN{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function ZN(t,e,n){t=Bo(t,ln);const r=Bo(t.firestore,Lf),s=KN(t.converter,e,n);return eC(r,[BN(UN(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yn.none())])}function eC(t,e){return function(r,s){const i=new Dr;return r.asyncQueue.enqueueAndForget(async()=>xN(await AN(r),s,i)),i.promise}(w_(t),e)}function tC(t,e,n){const r=n.docs.get(e._key),s=new JN(t);return new P_(t,s,e._key,r,new QN(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){wi=s})(xi),oi(new ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Lf(new KS(r.getProvider("auth-internal")),new JS(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ae(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),jr(_g,"4.7.3",e),jr(_g,"4.7.3","esm2017")})();const nC={apiKey:"AIzaSyDq3lmHDACIejkIMshrYk5cd8nF5zGnA_A",authDomain:"pokerole-system-game.firebaseapp.com",projectId:"pokerole-system-game",storageBucket:"pokerole-system-game.firebasestorage.app",messagingSenderId:"1003513148425",appId:"1:1003513148425:web:2fb5b9ce999637c3c674d8",measurementId:"G-K1V0DY6Z5G"},R_=jv(nC),Pu=HS(R_),j_=MN(R_),D_=G.createContext(void 0),rC=({children:t})=>{const[e,n]=G.useState(null),[r,s]=G.useState(!0),[i,o]=G.useState(null);G.useEffect(()=>{const p=R2(Pu,m=>{n(m),s(!1)});return()=>p()},[]);const c=()=>o(null),u=async()=>{o(null);const p=new Bn;try{await Z2(Pu,p)}catch(m){console.error("Error signing in with Google",m);const x=m;if(x.code==="auth/unauthorized-domain"){let I=window.location.hostname;I||(I=window.location.host),I||(I=window.location.origin),o(` Dominio Non Autorizzato: "${I||"Sconosciuto"}"

Devi autorizzare questo dominio su Firebase:
1. Vai su Firebase Console -> Authentication -> Settings -> Authorized Domains
2. Aggiungi il dominio: ${I||"localhost"}
3. Ricarica la pagina.`)}else x.code==="auth/popup-closed-by-user"?o("Login annullato dall'utente."):x.code==="auth/popup-blocked"?o("Popup bloccato. Per favore consenti i popup per questo sito nelle impostazioni del browser."):x.code==="auth/cancelled-popup-request"||o(`Login Fallito: ${x.message}`)}},d=async()=>{try{await j2(Pu),o(null)}catch(p){console.error("Error signing out",p),o(p.message)}};return l.jsx(D_.Provider,{value:{user:e,loading:r,signInWithGoogle:u,logout:d,error:i,clearError:c},children:t})},Pc=()=>{const t=G.useContext(D_);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},sC=["Bug","Dark","Dragon","Electric","Fairy","Fighting","Fire","Flying","Ghost","Grass","Ground","Ice","Normal","Poison","Psychic","Rock","Steel","Water"],Jr=["Starter","Beginner","Amateur","Ace","Pro","Master","Champion"],iC=["Hardy","Lonely","Brave","Adamant","Naughty","Bold","Docile","Relaxed","Impish","Lax","Timid","Hasty","Serious","Jolly","Naive","Modest","Mild","Quiet","Bashful","Rash","Calm","Gentle","Sassy","Careful","Quirky"],oC=["Neutral","Burn","Freeze","Paralysis","Poison","Bad Poison","Sleep","Confused","Infatuated","Fainted"],aC={Bug:{en:"Bug",it:"Coleottero",es:"Bicho",de:"Kfer",fr:"Insecte"},Dark:{en:"Dark",it:"Buio",es:"Siniestro",de:"Unlicht",fr:"Tnbres"},Dragon:{en:"Dragon",it:"Drago",es:"Dragn",de:"Drache",fr:"Dragon"},Electric:{en:"Electric",it:"Elettro",es:"Elctrico",de:"Elektro",fr:"lectrik"},Fairy:{en:"Fairy",it:"Folletto",es:"Hada",de:"Fee",fr:"Fe"},Fighting:{en:"Fighting",it:"Lotta",es:"Lucha",de:"Kampf",fr:"Combat"},Fire:{en:"Fire",it:"Fuoco",es:"Fuego",de:"Feuer",fr:"Feu"},Flying:{en:"Flying",it:"Volante",es:"Volador",de:"Flug",fr:"Vol"},Ghost:{en:"Ghost",it:"Spettro",es:"Fantasma",de:"Geist",fr:"Spectre"},Grass:{en:"Grass",it:"Erba",es:"Planta",de:"Pflanze",fr:"Plante"},Ground:{en:"Ground",it:"Terra",es:"Tierra",de:"Boden",fr:"Sol"},Ice:{en:"Ice",it:"Ghiaccio",es:"Hielo",de:"Eis",fr:"Glace"},Normal:{en:"Normal",it:"Normale",es:"Normal",de:"Normal",fr:"Normal"},Poison:{en:"Poison",it:"Veleno",es:"Veneno",de:"Gift",fr:"Poison"},Psychic:{en:"Psychic",it:"Psico",es:"Psquico",de:"Psycho",fr:"Psy"},Rock:{en:"Rock",it:"Roccia",es:"Roca",de:"Gestein",fr:"Roche"},Steel:{en:"Steel",it:"Acciaio",es:"Acero",de:"Stahl",fr:"Acier"},Water:{en:"Water",it:"Acqua",es:"Agua",de:"Wasser",fr:"Eau"}},lC={Starter:{en:"Starter",it:"Base",es:"Inicial",de:"Starter",fr:"Dpart"},Beginner:{en:"Beginner",it:"Principiante",es:"Principiante",de:"Anfnger",fr:"Dbutant"},Amateur:{en:"Amateur",it:"Dilettante",es:"Aficionado",de:"Amateur",fr:"Amateur"},Ace:{en:"Ace",it:"Asso",es:"As",de:"Ass",fr:"As"},Pro:{en:"Pro",it:"Pro",es:"Pro",de:"Profi",fr:"Pro"},Master:{en:"Master",it:"Maestro",es:"Maestro",de:"Meister",fr:"Matre"},Champion:{en:"Champion",it:"Campione",es:"Campen",de:"Champ",fr:"Champion"}},cC={Overgrow:{en:"Overgrow",it:"Erbaiuto",es:"Espesura",de:"Notdnger",fr:"Engrais"},Blaze:{en:"Blaze",it:"Aiutofuoco",es:"Mar Llamas",de:"Grobrand",fr:"Brasier"},Torrent:{en:"Torrent",it:"Acquaiuto",es:"Torrente",de:"Sturzbach",fr:"Torrent"},"Shield Dust":{en:"Shield Dust",it:"Polvoscudo",es:"Polvo Escudo",de:"Puderabwehr",fr:"cran Poudre"},"Shed Skin":{en:"Shed Skin",it:"Muta",es:"Mudar",de:"Hutung",fr:"Mue"},"Compound Eyes":{en:"Compound Eyes",it:"Insettocchi",es:"Ojo Compuesto",de:"Facettenauge",fr:"Oeil Compos"},Swarm:{en:"Swarm",it:"Aiutinsetto",es:"Enjambre",de:"Hexaplaga",fr:"Essaim"},"Keen Eye":{en:"Keen Eye",it:"Sguardofermo",es:"Vista Lince",de:"Adlerauge",fr:"Regard Vif"},"Run Away":{en:"Run Away",it:"Fugafacile",es:"Fuga",de:"Angsthase",fr:"Fuite"},Intimidate:{en:"Intimidate",it:"Prepotenza",es:"Intimidacin",de:"Bedroher",fr:"Intimidation"},Static:{en:"Static",it:"Statico",es:"Elec. Esttica",de:"Statik",fr:"Statik"},"Sand Veil":{en:"Sand Veil",it:"Sabbiavelo",es:"Velo Arena",de:"Sandschleier",fr:"Voile Sable"},"Poison Point":{en:"Poison Point",it:"Velenopunto",es:"Punto Txico",de:"Giftdorn",fr:"Point Poison"},"Cute Charm":{en:"Cute Charm",it:"Incantevole",es:"Gran Encanto",de:"Charmebolzen",fr:"Joli Sourire"},"Flash Fire":{en:"Flash Fire",it:"Fuocardore",es:"Absorbe Fuego",de:"Feuerfnger",fr:"Torche"},Pressure:{en:"Pressure",it:"Pressione",es:"Presin",de:"Erzwinger",fr:"Pression"},Levitate:{en:"Levitate",it:"Levitazione",es:"Levitacin",de:"Schwebe",fr:"Lvitation"},Synchronize:{en:"Synchronize",it:"Sincronismo",es:"Sincrona",de:"Synchro",fr:"Synchro"},Guts:{en:"Guts",it:"Dentistretti",es:"Agallas",de:"Adrenalin",fr:"Cran"},"Huge Power":{en:"Huge Power",it:"Macroforza",es:"Potencia",de:"Kraftkoloss",fr:"Coloforce"},Chlorophyll:{en:"Chlorophyll",it:"Clorofilla",es:"Clorofila",de:"Chlorophyll",fr:"Chlorophylle"},"Swift Swim":{en:"Swift Swim",it:"Nuotovelox",es:"Nado Rpido",de:"Wassertempo",fr:"Glissade"},"Solar Power":{en:"Solar Power",it:"Solarpotere",es:"Poder Solar",de:"Solarkraft",fr:"Force Soleil"},"Inner Focus":{en:"Inner Focus",it:"Fuocodentro",es:"Foco Interno",de:"Konzentrator",fr:"Attention"},Stench:{en:"Stench",it:"Tanfo",es:"Hedor",de:"Duftnote",fr:"Puanteur"},"Effect Spore":{en:"Effect Spore",it:"Spargispora",es:"Efec. Espora",de:"Sporenwirt",fr:"Pose Spore"},Damp:{en:"Damp",it:"Umidit",es:"Humedad",de:"Feuchtigkeit",fr:"Moiteur"},Limber:{en:"Limber",it:"Scioltezza",es:"Flexibilidad",de:"Flexibilitt",fr:"chauffement"},"Rock Head":{en:"Rock Head",it:"Testadura",es:"Cabeza Roca",de:"Steinhaupt",fr:"Tte de Roc"},Insomnia:{en:"Insomnia",it:"Insonnia",es:"Insomnio",de:"Insomnia",fr:"Insomnia"},Oblivious:{en:"Oblivious",it:"Indifferenza",es:"Despiste",de:"Dsigkeit",fr:"Bent"},"Magnet Pull":{en:"Magnet Pull",it:"Magnetismo",es:"Imn",de:"Magnetfalle",fr:"Magnpige"},"Early Bird":{en:"Early Bird",it:"Sveglialampo",es:"Madrugar",de:"Frhwecker",fr:"Matinal"},Hydration:{en:"Hydration",it:"Idratazione",es:"Hidratacin",de:"Hydration",fr:"Hydratation"},Gluttony:{en:"Gluttony",it:"Voracit",es:"Gula",de:"Vllerei",fr:"Gloutonnerie"},"Ice Body":{en:"Ice Body",it:"Corpogelo",es:"Glido",de:"Eishaut",fr:"Corps Gel"}},uC={Tackle:{en:"Tackle",it:"Azione",es:"Placaje",de:"Tackle",fr:"Charge"},Scratch:{en:"Scratch",it:"Graffio",es:"Araazo",de:"Kratzer",fr:"Griffe"},Growl:{en:"Growl",it:"Ruggito",es:"Gruido",de:"Heuler",fr:"Rugissement"},"Tail Whip":{en:"Tail Whip",it:"Colpocoda",es:"Ltigo",de:"Rutenschlag",fr:"Mimi-Queue"},Ember:{en:"Ember",it:"Braciere",es:"Ascuas",de:"Glut",fr:"Flammche"},"Water Gun":{en:"Water Gun",it:"Pistolacqua",es:"Pistola Agua",de:"Aquaknarre",fr:"Pistolet  O"},"Vine Whip":{en:"Vine Whip",it:"Frustata",es:"Ltigo Cepa",de:"Rankenhieb",fr:"Fouet Lianes"},"Leech Seed":{en:"Leech Seed",it:"Parassiseme",es:"Drenadoras",de:"Egelsamen",fr:"Vampigraine"},"Thunder Shock":{en:"Thunder Shock",it:"Tuonoshock",es:"Impactrueno",de:"Donnerschock",fr:"clair"},"Quick Attack":{en:"Quick Attack",it:"Attacco Rapido",es:"Ataque Rpido",de:"Ruckzuckhieb",fr:"Vive-Attaque"},Bite:{en:"Bite",it:"Morso",es:"Mordisco",de:"Biss",fr:"Morsure"},"Wing Attack":{en:"Wing Attack",it:"Attacco d'Ala",es:"Ataque Ala",de:"Flgelschlag",fr:"Cru-Ailes"},Gust:{en:"Gust",it:"Raffica",es:"Tornado",de:"Windsto",fr:"Tornade"},Peck:{en:"Peck",it:"Beccata",es:"Picotazo",de:"Schnabel",fr:"Picpic"},"Sand Attack":{en:"Sand Attack",it:"Turbosabbia",es:"Ataque Arena",de:"Sandwirbel",fr:"Jet de Sable"},"Double Kick":{en:"Double Kick",it:"Doppiocalcio",es:"Doble Patada",de:"Doppelkick",fr:"Double Pied"},"Razor Leaf":{en:"Razor Leaf",it:"Foglielama",es:"Hoja Afilada",de:"Rasierblatt",fr:"Tranch'Herbe"},Flamethrower:{en:"Flamethrower",it:"Lanciafiamme",es:"Lanzallamas",de:"Flammenwurf",fr:"Lance-Flammes"},"Hydro Pump":{en:"Hydro Pump",it:"Idropompa",es:"Hidrobomba",de:"Hydropumpe",fr:"Hydrocanon"},"Solar Beam":{en:"Solar Beam",it:"Solarraggio",es:"Rayo Solar",de:"Solarstrahl",fr:"Lance-Soleil"},Psychic:{en:"Psychic",it:"Psichico",es:"Psquico",de:"Psychokinese",fr:"Psyko"},Earthquake:{en:"Earthquake",it:"Terremoto",es:"Terremoto",de:"Erdbeben",fr:"Sisme"},Thunderbolt:{en:"Thunderbolt",it:"Fulmine",es:"Rayo",de:"Donnerblitz",fr:"Tonnerre"},"Ice Beam":{en:"Ice Beam",it:"Geloraggio",es:"Rayo Hielo",de:"Eisstrahl",fr:"Laser Glace"},"Hyper Beam":{en:"Hyper Beam",it:"Iperraggio",es:"Hiperrayo",de:"Hyperstrahl",fr:"Ultralaser"},Leer:{en:"Leer",it:"Fulmisguardo",es:"Malicioso",de:"Silberblick",fr:"Gros Yeux"},Pound:{en:"Pound",it:"Botta",es:"Destructor",de:"Pfund",fr:"cras'Face"},Supersonic:{en:"Supersonic",it:"Supersuono",es:"Supersnico",de:"Superschall",fr:"Ultrason"},Disable:{en:"Disable",it:"Inibitore",es:"Anulacin",de:"Aussetzer",fr:"Entrave"},Confusion:{en:"Confusion",it:"Confusione",es:"Confusin",de:"Konfusion",fr:"Choc Mental"},Hypnosis:{en:"Hypnosis",it:"Ipnosi",es:"Hipnosis",de:"Hypnose",fr:"Hypnose"},"String Shot":{en:"String Shot",it:"Millebave",es:"Disparo Demora",de:"Fadenschuss",fr:"Scrtion"},"Poison Sting":{en:"Poison Sting",it:"Velenospina",es:"Picotazo Ven",de:"Giftstachel",fr:"Dard-Venin"},Harden:{en:"Harden",it:"Rafforzatore",es:"Fortaleza",de:"Hrtner",fr:"Armure"},"Focus Energy":{en:"Focus Energy",it:"Focalenergia",es:"Foco Energa",de:"Energiefokus",fr:"Puissance"},Spark:{en:"Spark",it:"Scintilla",es:"Chispa",de:"Funkenflug",fr:"tincelle"},Crunch:{en:"Crunch",it:"Sgranocchio",es:"Triturar",de:"Knirscher",fr:"Mchouille"},Bubble:{en:"Bubble",it:"Bolla",es:"Burbuja",de:"Blubber",fr:"cume"},Withdraw:{en:"Withdraw",it:"Ritirata",es:"Refugio",de:"Panzerschutz",fr:"Repli"},"Sleep Powder":{en:"Sleep Powder",it:"Sonnifero",es:"Somnfero",de:"Schlafpuder",fr:"Poudre Dodo"},"Stun Spore":{en:"Stun Spore",it:"Paralizzante",es:"Paralizador",de:"Stachelspore",fr:"Para-Spore"},"Poison Powder":{en:"Poison Powder",it:"Velenpolvere",es:"Polvo Veneno",de:"Giftpuder",fr:"Poudre Toxik"},"Will-O-Wisp":{en:"Will-O-Wisp",it:"Fuocofatuo",es:"Fuego Fatuo",de:"Irrlicht",fr:"Feu Follet"},Protect:{en:"Protect",it:"Protezione",es:"Proteccin",de:"Schutzschild",fr:"Abri"},Surf:{en:"Surf",it:"Surf",es:"Surf",de:"Surfer",fr:"Surf"},Fly:{en:"Fly",it:"Volo",es:"Vuelo",de:"Fliegen",fr:"Vol"},Cut:{en:"Cut",it:"Taglio",es:"Corte",de:"Zerschneider",fr:"Coupe"}},Bf=(t,e)=>{var r;if(!t)return"";const n=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();return((r=aC[n])==null?void 0:r[e])||t},V_=(t,e)=>{var n;return t?((n=lC[t])==null?void 0:n[e])||t:"Standard"},ls=(t,e)=>{var n;return t?((n=cC[t])==null?void 0:n[e])||t:""},Ho=(t,e)=>{var n;return t?((n=uC[t])==null?void 0:n[e])||t:""},zr=t=>{if(!t)return"bg-slate-500";switch(t.toLowerCase()){case"bug":return"bg-lime-600";case"dark":return"bg-slate-800";case"dragon":return"bg-violet-600";case"electric":return"bg-yellow-500";case"fairy":return"bg-pink-400";case"fighting":return"bg-orange-700";case"fire":return"bg-red-500";case"flying":return"bg-sky-400";case"ghost":return"bg-purple-700";case"grass":return"bg-green-500";case"ground":return"bg-amber-600";case"ice":return"bg-cyan-400";case"normal":return"bg-slate-400";case"poison":return"bg-fuchsia-600";case"psychic":return"bg-pink-600";case"rock":return"bg-stone-500";case"steel":return"bg-slate-500";case"water":return"bg-blue-500";default:return"bg-slate-500"}},Mn={en:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Select a region to view the database.",appSubtitle:"Choose a tool to begin your adventure.",searchPlaceholder:"Search...",filters:"Filters",close:"Close",clear:"Clear",cancel:"Cancel",apply:"Apply",nameSearch:"Name Search",type:"Type",allTypes:"All Types",minStats:"Min Stats",noResults:"No results found.",entriesFound:"Entries found",about:"About",height:"Height",weight:"Weight",rank:"Rank",role:"Role",baseStats:"Base Stats",hp:"Base HP",abilities:"Abilities",primary:"Primary",secondary:"Secondary",hidden:"Hidden",moveset:"Moveset",consulting:"Consulting Archives...",power:"Power",target:"Target",dicePools:"Dice Pools",accuracy:"Accuracy",damage:"Damage",effect:"Effect",starter:"Starter",wild:"Wild",strength:"Strength",dexterity:"Dexterity",vitality:"Vitality",special:"Special",insight:"Insight",rankFilter:"Rank",onlyStarter:"Only Starter",home:"Home",characterSheet:"Character Sheet",pokemonSheet:"Pokmon Sheet",pokedex:"Pokdex",comingSoon:"Coming Soon",comingSoonDesc:"This feature is currently under development. Please check back later!",backToHome:"Back to Home",party:"Belt",pc:"Bill's PC",box:"Box",emptySlot:"Empty",addToParty:"Add to Belt",removeFromParty:"Remove",selectPokemon:"Select Pokmon",nickname:"Nickname",money:"Money",caught:"Caught",seen:"Seen",trainerSheet:"Trainer Sheet",playerName:"Player Name",sheet:{nature:"Nature",age:"Age",confidence:"Confidence",happiness:"Happiness",loyalty:"Loyalty",battles:"No of Battles",victories:"Victories",item:"Item",status:"Status",accessory:"Accessory",weakness:"Weakness",hp:"HP",will:"Will",fight:"Fight",survival:"Survival",social:"Social",brawl:"Brawl",channel:"Channel",clash:"Clash",evasion:"Evasion",alert:"Alert",athletic:"Athletic",stealth:"Stealth",allure:"Allure",etiquette:"Etiquette",intimidate:"Intimidate",perform:"Perform",tough:"Tough",cool:"Cool",beauty:"Beauty",cute:"Cute",clever:"Clever",quickRefs:"Quick References",initiative:"Initiative",def:"Def/S.Def",damageReception:"Damage Reception",damageInflicted:"Damage Inflicted",physical:"Physical",special:"Special",damageTaken:"Damage Taken",newHp:"New HP",statuses:{Neutral:"Neutral",Burn:"Burn",Freeze:"Freeze",Paralysis:"Paralysis",Poison:"Poison","Bad Poison":"Bad Poison",Sleep:"Sleep",Confused:"Confused",Infatuated:"Infatuated",Fainted:"Fainted"}},regions:{National:"All Data",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},it:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Seleziona una regione per vedere il database.",appSubtitle:"Scegli uno strumento per iniziare l'avventura.",searchPlaceholder:"Cerca...",filters:"Filtri",close:"Chiudi",clear:"Pulisci",cancel:"Annulla",apply:"Applica",nameSearch:"Cerca Nome",type:"Tipo",allTypes:"Tutti i Tipi",minStats:"Stat. Minime",noResults:"Nessun risultato trovato.",entriesFound:"Voci trovate",about:"Info",height:"Altezza",weight:"Peso",rank:"Rango",role:"Ruolo",baseStats:"Statistiche Base",hp:"PV Base",abilities:"Abilit",primary:"Primaria",secondary:"Secondaria",hidden:"Nascosta",moveset:"Mosse",consulting:"Consultando gli Archivi...",power:"Potenza",target:"Bersaglio",dicePools:"Dadi",accuracy:"Precisione",damage:"Danno",effect:"Effetto",starter:"Starter",wild:"Selvatico",strength:"Forza",dexterity:"Destrezza",vitality:"Vitalit",special:"Speciale",insight:"Intuito",rankFilter:"Rango",onlyStarter:"Solo Starter",home:"Home",characterSheet:"Scheda Personaggio",pokemonSheet:"Scheda Pokmon",pokedex:"Pokdex",comingSoon:"Prossimamente",comingSoonDesc:"Questa funzionalit  in fase di sviluppo. Torna pi tardi!",backToHome:"Torna alla Home",party:"Cintura",pc:"PC di Bill",box:"Box",emptySlot:"Vuoto",addToParty:"Aggiungi",removeFromParty:"Rimuovi",selectPokemon:"Seleziona Pokmon",nickname:"Soprannome",money:"Soldi",caught:"Catturati",seen:"Visti",trainerSheet:"Scheda Allenatore",playerName:"Nome Giocatore",sheet:{nature:"Natura",age:"Et",confidence:"Sicurezza",happiness:"Felicit",loyalty:"Lealt",battles:"N Battaglie",victories:"Vittorie",item:"Oggetto",status:"Stato",accessory:"Accessorio",weakness:"Debolezza",hp:"PV",will:"Volont",fight:"Lotta",survival:"Sopravvivenza",social:"Sociale",brawl:"Rissa",channel:"Incanalare",clash:"Scontro",evasion:"Evasione",alert:"Allerta",athletic:"Atletica",stealth:"Furtivit",allure:"Fascino",etiquette:"Etichetta",intimidate:"Intimidire",perform:"Esibirsi",tough:"Grinta",cool:"Classe",beauty:"Bellezza",cute:"Grazia",clever:"Acume",quickRefs:"Riferimenti Rapidi",initiative:"Iniziativa",def:"Dif/Dif.Sp",damageReception:"Ricezione Danni",damageInflicted:"Danni Inflitti",physical:"Fisico",special:"Speciale",damageTaken:"Danni Subiti",newHp:"Nuovi PV",statuses:{Neutral:"Neutro",Burn:"Scottatura",Freeze:"Congelamento",Paralysis:"Paralisi",Poison:"Veleno","Bad Poison":"Iperveleno",Sleep:"Sonno",Confused:"Confusione",Infatuated:"Infatuazione",Fainted:"Esausto"}},regions:{National:"Tutti i Dati",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},es:{title:"Pokrole Dex",appTitle:"Herramientas Pokrole",subtitle:"Selecciona una regin para ver la base de datos.",appSubtitle:"Elige una herramienta para comenzar tu aventura.",searchPlaceholder:"Buscar...",filters:"Filtros",close:"Cerrar",clear:"Limpiar",cancel:"Cancelar",apply:"Aplicar",nameSearch:"Buscar Nombre",type:"Tipo",allTypes:"Todos los Tipos",minStats:"Estad. Mnimas",noResults:"No se encontraron resultados.",entriesFound:"Entradas encontradas",about:"Info",height:"Altura",weight:"Peso",rank:"Rango",role:"Rol",baseStats:"Estadsticas Base",hp:"PS Base",abilities:"Habilidades",primary:"Primaria",secondary:"Secundaria",hidden:"Oculta",moveset:"Movimientos",consulting:"Consultando Archivos...",power:"Potencia",target:"Objetivo",dicePools:"Dados",accuracy:"Precisin",damage:"Dao",effect:"Efecto",starter:"Inicial",wild:"Salvaje",strength:"Fuerza",dexterity:"Destreza",vitality:"Vitalidad",special:"Especial",insight:"Intuicin",rankFilter:"Rango",onlyStarter:"Solo Inicial",home:"Inicio",characterSheet:"Hoja de Personaje",pokemonSheet:"Hoja de Pokmon",pokedex:"Pokdex",comingSoon:"Prximamente",comingSoonDesc:"Esta funcin est en desarrollo. Vuelve ms tarde!",backToHome:"Volver al Inicio",party:"Cinturn",pc:"PC de Bill",box:"Caja",emptySlot:"Vaco",addToParty:"Aadir",removeFromParty:"Quitar",selectPokemon:"Seleccionar Pokmon",nickname:"Apodo",money:"Dinero",caught:"Capturados",seen:"Vistos",trainerSheet:"Ficha de Entrenador",playerName:"Nombre Jugador",sheet:{nature:"Naturaleza",age:"Edad",confidence:"Confianza",happiness:"Felicidad",loyalty:"Lealtad",battles:"N Batallas",victories:"Victorias",item:"Objeto",status:"Estado",accessory:"Accesorio",weakness:"Debilidad",hp:"PS",will:"Voluntad",fight:"Pelea",survival:"Supervivencia",social:"Social",brawl:"Reyerta",channel:"Canalizar",clash:"Choque",evasion:"Evasin",alert:"Alerta",athletic:"Atletismo",stealth:"Sigilo",allure:"Seduccin",etiquette:"Etiqueta",intimidate:"Intimidar",perform:"Actuar",tough:"Dureza",cool:"Carisma",beauty:"Belleza",cute:"Dulzura",clever:"Ingenio",quickRefs:"Referencias Rpidas",initiative:"Iniciativa",def:"Def/Def.Esp",damageReception:"Recepcin de Dao",damageInflicted:"Dao Infligido",physical:"Fsico",special:"Especial",damageTaken:"Dao Recibido",newHp:"Nuevos PS",statuses:{Neutral:"Neutral",Burn:"Quemado",Freeze:"Congelado",Paralysis:"Parlisis",Poison:"Veneno","Bad Poison":"Gravemente Env.",Sleep:"Dormido",Confused:"Confuso",Infatuated:"Enamoramiento",Fainted:"Debilitado"}},regions:{National:"Todos los Datos",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},de:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Whle eine Region, um die Datenbank anzuzeigen.",appSubtitle:"Whle ein Werkzeug, um dein Abenteuer zu beginnen.",searchPlaceholder:"Suchen...",filters:"Filter",close:"Schlieen",clear:"Leeren",cancel:"Abbrechen",apply:"Anwenden",nameSearch:"Namenssuche",type:"Typ",allTypes:"Alle Typen",minStats:"Min. Werte",noResults:"Keine Ergebnisse gefunden.",entriesFound:"Eintrge gefunden",about:"ber",height:"Gre",weight:"Gewicht",rank:"Rang",role:"Rolle",baseStats:"Basiswerte",hp:"Basis KP",abilities:"Fhigkeiten",primary:"Primr",secondary:"Sekundr",hidden:"Versteckt",moveset:"Attacken",consulting:"Archive werden durchsucht...",power:"Strke",target:"Ziel",dicePools:"Wrfelpools",accuracy:"Genauigkeit",damage:"Schaden",effect:"Effekt",starter:"Starter",wild:"Wild",strength:"Strke",dexterity:"Geschick",vitality:"Vitalitt",special:"Spezial",insight:"Einsicht",rankFilter:"Rang",onlyStarter:"Nur Starter",home:"Startseite",characterSheet:"Charakterbogen",pokemonSheet:"Pokmon-Bogen",pokedex:"Pokdex",comingSoon:"Demnchst",comingSoonDesc:"Diese Funktion wird derzeit entwickelt. Schau spter wieder vorbei!",backToHome:"Zurck zur Startseite",party:"Grtel",pc:"Bills PC",box:"Box",emptySlot:"Leer",addToParty:"Hinzufgen",removeFromParty:"Entfernen",selectPokemon:"Pokmon auswhlen",nickname:"Spitzname",money:"Geld",caught:"Gefangen",seen:"Gesehen",trainerSheet:"Trainerblatt",playerName:"Spielername",sheet:{nature:"Wesen",age:"Alter",confidence:"Selbstvertr.",happiness:"Freundschaft",loyalty:"Loyalitt",battles:"Kmpfe",victories:"Siege",item:"Item",status:"Status",accessory:"Accessoire",weakness:"Schwche",hp:"KP",will:"Wille",fight:"Kampf",survival:"berleben",social:"Sozial",brawl:"Handgemenge",channel:"Kanalisieren",clash:"Zusammensto",evasion:"Ausweichen",alert:"Wachsamkeit",athletic:"Athletik",stealth:"Heimlichkeit",allure:"Anziehung",etiquette:"Etikette",intimidate:"Einschchtern",perform:"Auftritt",tough:"Strke",cool:"Coolness",beauty:"Schnheit",cute:"Anmut",clever:"Klugheit",quickRefs:"Schnellreferenz",initiative:"Initiative",def:"Vert/Sp.Vert",damageReception:"Schadensempfang",damageInflicted:"Zugefgter Schaden",physical:"Physisch",special:"Spezial",damageTaken:"Erlittener Schaden",newHp:"Neue KP",statuses:{Neutral:"Neutral",Burn:"Verbrennung",Freeze:"Frost",Paralysis:"Paralyse",Poison:"Vergiftung","Bad Poison":"Schwer vergiftet",Sleep:"Schlaf",Confused:"Verwirrt",Infatuated:"Anziehung",Fainted:"Besiegt"}},regions:{National:"Alle Daten",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},fr:{title:"Pokrole Dex",appTitle:"Outils Pokrole",subtitle:"Slectionnez une rgion pour voir la base de donnes.",appSubtitle:"Choisissez un outil pour commencer votre aventure.",searchPlaceholder:"Rechercher...",filters:"Filtres",close:"Fermer",clear:"Effacer",cancel:"Annuler",apply:"Appliquer",nameSearch:"Recherche par nom",type:"Type",allTypes:"Tous les Types",minStats:"Stats Min.",noResults:"Aucun rsultat trouv.",entriesFound:"Entres trouves",about:" propos",height:"Taille",weight:"Poids",rank:"Rang",role:"Rle",baseStats:"Stats de Base",hp:"PV de Base",abilities:"Talents",primary:"Primaire",secondary:"Secondaire",hidden:"Cach",moveset:"Capacits",consulting:"Consultation des archives...",power:"Puissance",target:"Cible",dicePools:"Ds",accuracy:"Prcision",damage:"Dgts",effect:"Effet",starter:"Starter",wild:"Sauvage",strength:"Force",dexterity:"Dextrit",vitality:"Vitalit",special:"Spcial",insight:"Intuition",rankFilter:"Rang",onlyStarter:"Seulement Starter",home:"Accueil",characterSheet:"Fiche Personnage",pokemonSheet:"Fiche Pokmon",pokedex:"Pokdex",comingSoon:"Bientt",comingSoonDesc:"Cette fonctionnalit est en cours de dveloppement. Revenez plus tard !",backToHome:"Retour  l'accueil",party:"Ceinture",pc:"PC de Lo",box:"Bote",emptySlot:"Vide",addToParty:"Ajouter",removeFromParty:"Retirer",selectPokemon:"Slectionner Pokmon",nickname:"Surnom",money:"Argent",caught:"Attraps",seen:"Vus",trainerSheet:"Fiche Dresseur",playerName:"Nom Joueur",sheet:{nature:"Nature",age:"ge",confidence:"Confiance",happiness:"Bonheur",loyalty:"Loyaut",battles:"Nb Combats",victories:"Victoires",item:"Objet",status:"Statut",accessory:"Accessoire",weakness:"Faiblesse",hp:"PV",will:"Volont",fight:"Combat",survival:"Survie",social:"Social",brawl:"Bagarre",channel:"Canaliser",clash:"Affrontement",evasion:"vasion",alert:"Vigilance",athletic:"Athltisme",stealth:"Discrtion",allure:"Charme",etiquette:"tiquette",intimidate:"Intimidation",perform:"Performance",tough:"Robuste",cool:"Sang-froid",beauty:"Beaut",cute:"Mignon",clever:"Intelligence",quickRefs:"Rf. Rapides",initiative:"Initiative",def:"Df/Df.Sp",damageReception:"Rception de Dgts",damageInflicted:"Dgts Infligs",physical:"Physique",special:"Spcial",damageTaken:"Dgts Subis",newHp:"Nouveaux PV",statuses:{Neutral:"Neutre",Burn:"Brlure",Freeze:"Gel",Paralysis:"Paralysie",Poison:"Poison","Bad Poison":"Gravement Empois.",Sleep:"Sommeil",Confused:"Confusion",Infatuated:"Attraction",Fainted:"K.O."}},regions:{National:"Toutes les donnes",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}}},dC="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ShuffleTokens",hC="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/BookSprites",fC="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites",$f=t=>{const e=t.Image||`${t.Name}.png`;return`${dC}/${e}`},M_=t=>{const e=t.Image||`${t.Name}.png`;return`${hC}/${e}`},Jd=t=>`${fC}/${t._id}.png`,pC=(t,e)=>{const n=[];for(let r=0;r<e;r++)n.push(l.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r<t?"bg-slate-800 dark:bg-slate-200":"bg-slate-300 dark:bg-slate-700"}`},r));return l.jsx("div",{className:"flex items-center",children:n})},eo=()=>({name:"New Trainer",age:10,image:null,money:1500,pokedex:{seen:0,caught:0},nature:"Hardy",confidence:2,attributes:{strength:{current:2,max:5},dexterity:{current:2,max:5},vitality:{current:2,max:5},special:{current:2,max:5},insight:{current:2,max:5}},skills:{fight:{brawl:0,channel:0,clash:0,evasion:0},survival:{alert:0,athletic:0,nature:0,stealth:0},social:{allure:0,etiquette:0,intimidate:0,perform:0}},hp:{current:4,max:4},will:{current:4,max:4},inventory:[]}),mC=async(t,e)=>{if(t)try{const n=JSON.parse(JSON.stringify(e)),r=n.pcBoxes.reduce((i,o,c)=>(i[c.toString()]=o,i),{}),s={party:n.party,pcBoxes:r,trainer:n.trainer};console.log("Dati inviati a Firebase:",s),await ZN(__(j_,"users",t),s,{merge:!0}),console.log("Dati salvati con successo!")}catch(n){throw console.error("Errore durante il salvataggio:",n),n}},t0=async t=>{if(!t)return null;try{const e=__(j_,"users",t),n=await XN(e);if(n.exists()){const r=n.data();let s;return r.pcBoxes&&!Array.isArray(r.pcBoxes)?s=Array.from({length:20},(i,o)=>r.pcBoxes[o.toString()]||Array(30).fill(null)):s=Array(20).fill(null).map(()=>Array(30).fill(null)),{party:r.party||Array(6).fill(null),pcBoxes:s,trainer:r.trainer||eo()}}else return console.log("Nessun dato trovato per questo utente (nuovo utente?)."),null}catch(e){return console.error("Errore durante il caricamento:",e),null}},gC=({region:t})=>{const e={width:120,height:120,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};switch(t){case"National":return l.jsx(Kk,{...e});case"Kanto":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M2 17h20L19 9H5L2 17Z"}),l.jsx("path",{d:"M6 9V5h3v4"}),l.jsx("path",{d:"M15 9V4h3v5"}),l.jsx("path",{d:"M4 17v4"}),l.jsx("path",{d:"M20 17v4"}),l.jsx("path",{d:"M2 21h20"}),l.jsx("path",{d:"M9 13h6"})]});case"Johto":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2l-8 4h16l-8-4z"}),l.jsx("path",{d:"M4 6v4h16V6"}),l.jsx("path",{d:"M2 14l2-4h16l2 4H2z"}),l.jsx("path",{d:"M6 14v6h12v-6"}),l.jsx("path",{d:"M12 14v6"})]});case"Hoenn":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2c0 0-3 3-3 8v6c0 1.5 1 3 3 3s3-1.5 3-3v-6c0-5-3-8-3-8z"}),l.jsx("path",{d:"M9 16c-3 0-5 3-5 5h16c0-2-2-5-5-5"}),l.jsx("path",{d:"M12 6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})]});case"Sinnoh":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2L2 22h20L12 2z"}),l.jsx("path",{d:"M12 2l4 10-4 4-4-4 4-10z"}),l.jsx("path",{d:"M8 22l4-8 4 8"})]});case"Unova":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M4 21V9"}),l.jsx("path",{d:"M20 21V9"}),l.jsx("path",{d:"M4 9c8 6 8 6 16 0"}),l.jsx("path",{d:"M2 21h20"}),l.jsx("path",{d:"M7 12l2 2"}),l.jsx("path",{d:"M17 12l-2 2"})]});case"Kalos":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2L4 22h16L12 2z"}),l.jsx("path",{d:"M12 2v20"}),l.jsx("path",{d:"M8 12h8"}),l.jsx("path",{d:"M6 17h12"}),l.jsx("path",{d:"M10 7h4"})]});case"Alola":return l.jsxs("svg",{...e,children:[l.jsx("circle",{cx:"18",cy:"6",r:"4"}),l.jsx("path",{d:"M12 22s-6-8-6-14c0-2 2-3 4-3"}),l.jsx("path",{d:"M12 22s6-8 6-14c0-2-2-3-4-3"}),l.jsx("path",{d:"M12 22v-8"})]});case"Galar":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M4 22V8l4-4 4 4 4-4 4 4v14H4z"}),l.jsx("path",{d:"M12 8v14"}),l.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),l.jsx("path",{d:"M12 4v4"})]});case"Paldea":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 4l-8 6v12h16v-12z"}),l.jsx("circle",{cx:"12",cy:"13",r:"4"}),l.jsx("path",{d:"M12 9v4"}),l.jsx("path",{d:"M12 13l3 2"}),l.jsx("path",{d:"M2 22h20"})]});default:return l.jsx(eb,{...e})}},Zd=t=>l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[l.jsx("path",{d:"M5 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v18a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V3z"}),l.jsx("path",{d:"M5 9h14"}),l.jsx("circle",{cx:"9",cy:"5",r:"2",fill:"currentColor"}),l.jsx("path",{d:"M16 4h1"}),l.jsx("path",{d:"M16 6h1"}),l.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),l.jsx("path",{d:"M8 20h2"}),l.jsx("path",{d:"M14 20h2"})]}),eh=()=>l.jsxs("svg",{viewBox:"0 0 24 24",className:"w-full h-full text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M2 12h7"}),l.jsx("path",{d:"M15 12h7"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"})]}),Ru={en:"",it:"",es:"",de:"",fr:""},yC={en:"English",it:"Italiano",es:"Espaol",de:"Deutsch",fr:"Franais"},L_=({currentLanguage:t,onChange:e})=>{const[n,r]=G.useState(!1),s=G.useRef(null);G.useEffect(()=>{const o=c=>{s.current&&!s.current.contains(c.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=o=>{e(o),r(!1)};return l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("button",{onClick:()=>r(!n),className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-2xl hover:scale-110 transition-transform shadow-md","aria-label":"Select Language",children:Ru[t]}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in",children:l.jsx("div",{className:"py-1",children:Object.keys(Ru).map(o=>l.jsxs("button",{onClick:()=>i(o),className:`w-full px-4 py-2 text-left flex items-center gap-3 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors ${t===o?"bg-slate-50 dark:bg-slate-700/50 font-bold":""}`,children:[l.jsx("span",{className:"text-xl",children:Ru[o]}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:yC[o]})]},o))})})]})},vC=({onNavigate:t,isDark:e,toggleTheme:n,language:r,setLanguage:s})=>{const i=Mn[r],{user:o,signInWithGoogle:c,logout:u,error:d,clearError:p}=Pc();return l.jsxs("div",{className:"p-6 max-w-6xl mx-auto min-h-screen flex flex-col animate-fade-in",children:[d&&l.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] w-full max-w-lg px-4",children:l.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-xl shadow-2xl flex items-start gap-3 animate-bounce-in border-2 border-red-600",children:[l.jsx(Uk,{className:"shrink-0 mt-0.5",size:20}),l.jsx("div",{className:"flex-1 text-sm font-bold whitespace-pre-line leading-relaxed",children:d}),l.jsx("button",{onClick:p,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:l.jsx(tr,{size:20})})]})}),l.jsxs("header",{className:"mb-12 mt-4 flex flex-col md:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"text-center md:text-left",children:[l.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center justify-center md:justify-start gap-3",children:[l.jsx(Zd,{className:"w-10 h-10 text-red-500"}),i.appTitle]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:i.appSubtitle})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[l.jsx(L_,{currentLanguage:r,onChange:s}),l.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:e?l.jsx(Ev,{size:24}):l.jsx(xv,{size:24})}),o?l.jsxs("div",{className:"flex items-center gap-2 pl-2 bg-white dark:bg-slate-800 rounded-full pr-1 py-1 shadow-md border border-slate-200 dark:border-slate-700",children:[o.photoURL?l.jsx("img",{src:o.photoURL,alt:"User",className:"w-10 h-10 rounded-full border-2 border-green-500"}):l.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold text-lg",children:o.displayName?o.displayName[0].toUpperCase():"U"}),l.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 hidden sm:block px-2",children:o.displayName}),l.jsx("button",{onClick:()=>u(),className:"w-10 h-10 flex items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 hover:bg-red-500 hover:text-white transition-colors",title:"Logout",children:l.jsx(Zk,{size:18})})]}):l.jsxs("button",{onClick:()=>c(),className:"flex items-center gap-2 px-5 py-3 rounded-full bg-slate-800 dark:bg-white text-white dark:text-slate-900 font-bold shadow-md hover:scale-105 transition-transform",children:[l.jsx(Jk,{size:20}),l.jsx("span",{children:"Login"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:[l.jsxs("button",{onClick:()=>t("character"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.characterSheet})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-blue-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(cb,{size:120,strokeWidth:1.5})})]}),l.jsxs("button",{onClick:()=>t("pokemon"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.pokemonSheet})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-amber-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(qk,{size:120,strokeWidth:1.5})})]}),l.jsxs("button",{onClick:()=>t("items"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:[i.sheet.item,"s"]})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-green-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(Vl,{size:120,strokeWidth:1.5})})]}),l.jsxs("button",{onClick:()=>t("pokedex"),className:"group relative h-40 bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 text-white hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsx("h2",{className:"text-2xl font-bold mb-2",children:i.pokedex})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-white opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(Zd,{className:"w-[120px] h-[120px]"})})]})]})]})},xC=({onSelect:t,onHome:e,isDark:n,toggleTheme:r,language:s,setLanguage:i})=>{const o=Mn[s],c=[{id:"National",color:"bg-indigo-500 dark:bg-indigo-700",desc:o.regions.National,range:"All"},{id:"Kanto",color:"bg-green-600 dark:bg-green-800",desc:o.regions.Kanto,range:"001-151"},{id:"Johto",color:"bg-yellow-600 dark:bg-yellow-800",desc:o.regions.Johto,range:"152-251"},{id:"Hoenn",color:"bg-red-600 dark:bg-red-800",desc:o.regions.Hoenn,range:"252-386"},{id:"Sinnoh",color:"bg-cyan-600 dark:bg-cyan-800",desc:o.regions.Sinnoh,range:"387-493"},{id:"Unova",color:"bg-stone-600 dark:bg-stone-800",desc:o.regions.Unova,range:"494-649"},{id:"Kalos",color:"bg-blue-600 dark:bg-blue-800",desc:o.regions.Kalos,range:"650-721"},{id:"Alola",color:"bg-orange-500 dark:bg-orange-700",desc:o.regions.Alola,range:"722-809"},{id:"Galar",color:"bg-pink-600 dark:bg-pink-800",desc:o.regions.Galar,range:"810-905"},{id:"Paldea",color:"bg-purple-600 dark:bg-purple-800",desc:o.regions.Paldea,range:"906+"}];return l.jsxs("div",{className:"p-6 max-w-6xl mx-auto animate-fade-in",children:[l.jsxs("header",{className:"mb-10 mt-4 flex flex-col md:flex-row items-center md:items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white transition-colors mb-2 font-medium",children:[l.jsx(Qk,{size:18})," ",o.backToHome]}),l.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center gap-3",children:[l.jsx(Zd,{className:"w-10 h-10 text-red-500"}),o.title]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:o.subtitle})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(L_,{currentLanguage:s,onChange:i}),l.jsx("button",{onClick:r,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:n?l.jsx(Ev,{size:24}):l.jsx(xv,{size:24})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>l.jsxs("button",{onClick:()=>t(u.id),className:`${u.color} text-white p-6 rounded-3xl shadow-xl hover:scale-[1.02] hover:shadow-2xl transition-all duration-300 text-left relative overflow-hidden group h-40`,children:[l.jsx("div",{className:"absolute -right-6 -bottom-6 opacity-20 group-hover:opacity-30 transition-opacity",children:l.jsx(gC,{region:u.id})}),l.jsxs("h2",{className:"text-2xl font-bold relative z-10",children:[u.id," Dex"]}),l.jsxs("div",{className:"flex flex-col mt-1 relative z-10",children:[l.jsx("span",{className:"text-white/90 font-medium",children:u.desc}),l.jsx("span",{className:"text-white/60 text-sm",children:u.range})]})]},u.id))})]})},Ur=({type:t,language:e})=>t?l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold text-white bg-white/25 rounded-full backdrop-blur-sm mb-2 capitalize w-max shadow-sm",children:Bf(t,e)}):null,_C=({progress:t,total:e,status:n})=>{const r=e>0?Math.min(100,Math.round(t/e*100)):0;return l.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/90 backdrop-blur-sm text-white p-8",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between mb-2 items-end",children:[l.jsx("span",{className:"font-bold text-lg",children:n}),l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:"block font-mono text-2xl font-bold text-red-400",children:[r,"%"]}),l.jsxs("span",{className:"block text-xs text-slate-400 font-mono mt-1",children:[t," / ",e," files"]})]})]}),l.jsx("div",{className:"h-4 w-full bg-slate-700 rounded-full overflow-hidden border border-slate-600",children:l.jsx("div",{className:"h-full bg-red-500 transition-all duration-200 ease-out shadow-[0_0_10px_rgba(239,68,68,0.5)]",style:{width:`${r}%`}})}),l.jsx("p",{className:"text-slate-400 mt-4 text-center text-sm animate-pulse",children:"Retrieving data from GitHub..."})]})})},wC=({region:t,onBack:e,onSelectPokemon:n,data:r,language:s})=>{const i=Mn[s],[o,c]=G.useState(!1),[u,d]=G.useState({types:!0,ranks:!1,stats:!1}),[p,m]=G.useState(""),[x,I]=G.useState([]),[T,P]=G.useState([]),[M,E]=G.useState(!1),[w,S]=G.useState({strength:"",dexterity:"",vitality:"",special:"",insight:""}),[C,z]=G.useState({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}}),L=v=>{d(se=>({...se,[v]:!se[v]}))},_=()=>{m(""),I([]),P([]),E(!1),S({strength:"",dexterity:"",vitality:"",special:"",insight:""}),z({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}})},g=()=>{z({name:p,type:x,ranks:T,isStarter:M,stats:{...w}})},k=(v,se)=>{S(ce=>({...ce,[v]:se}))},b=v=>{P(se=>se.includes(v)?se.filter(ce=>ce!==v):[...se,v])},N=v=>{I(se=>se.includes(v)?se.filter(ce=>ce!==v):[...se,v])},R=G.useMemo(()=>{let v=r;if(t!=="National"){const qe={Kanto:[1,151],Johto:[152,251],Hoenn:[252,386],Sinnoh:[387,493],Unova:[494,649],Kalos:[650,721],Alola:[722,809],Galar:[810,905],Paldea:[906,2e3]}[t];qe&&(v=v.filter(Me=>{const K=Me.Name.toLowerCase(),J=K.includes("alolan"),oe=K.includes("galarian"),ye=K.includes("paldean"),ge=K.includes("hisuian");return J?t==="Alola":oe?t==="Galar":ye?t==="Paldea":ge?t==="Sinnoh":Me.Number>=qe[0]&&Me.Number<=qe[1]}))}if(C.name.trim()){const ce=C.name.toLowerCase();v=v.filter(qe=>qe.Name.toLowerCase().includes(ce))}C.type.length>0&&(v=v.filter(ce=>C.type.includes(ce.Type1)||ce.Type2&&C.type.includes(ce.Type2))),C.ranks.length>0&&(v=v.filter(ce=>C.ranks.includes(ce.RecommendedRank))),C.isStarter&&(v=v.filter(ce=>ce.GoodStarter));const se=C.stats;return se.strength&&(v=v.filter(ce=>ce.Strength>=Number(se.strength))),se.dexterity&&(v=v.filter(ce=>ce.Dexterity>=Number(se.dexterity))),se.vitality&&(v=v.filter(ce=>ce.Vitality>=Number(se.vitality))),se.special&&(v=v.filter(ce=>ce.Special>=Number(se.special))),se.insight&&(v=v.filter(ce=>ce.Insight>=Number(se.insight))),v},[t,r,C]);return l.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen",children:[l.jsxs("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:l.jsx(vi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white",children:[t," Dex"]}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:[R.length," ",i.entriesFound]})]})]}),l.jsxs("button",{onClick:()=>c(!o),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${o?"bg-red-500 text-white":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"}`,children:[o?l.jsx(tr,{size:20}):l.jsx(Id,{size:20}),l.jsx("span",{className:"hidden md:inline",children:o?i.close:i.filters})]})]}),o&&l.jsxs("div",{className:"p-4 md:p-6 border-t border-slate-200 dark:border-slate-800 animate-fade-in bg-slate-50 dark:bg-slate-900/50 flex flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(jo,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:i.searchPlaceholder,value:p,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),l.jsxs("button",{onClick:_,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg flex items-center justify-center gap-2 transition-colors font-medium whitespace-nowrap",children:[l.jsx(_v,{size:18})," ",i.clear]})]}),l.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[l.jsxs("button",{onClick:()=>L("types"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[l.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.type}),u.types?l.jsx(xu,{size:18,className:"text-slate-400"}):l.jsx(vu,{size:18,className:"text-slate-400"})]}),u.types&&l.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:l.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:sC.map(v=>{const se=x.includes(v);return l.jsx("button",{onClick:()=>N(v),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${se?`${zr(v)} text-white font-semibold shadow-md border-transparent`:"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Bf(v,s)},v)})})})]}),l.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[l.jsxs("button",{onClick:()=>L("ranks"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[l.jsxs("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:[i.rank," & ",i.role]}),u.ranks?l.jsx(xu,{size:18,className:"text-slate-400"}):l.jsx(vu,{size:18,className:"text-slate-400"})]}),u.ranks&&l.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.rankFilter}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Jr.map(v=>{const se=T.includes(v);return l.jsx("button",{onClick:()=>b(v),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${se?"bg-red-500 border-red-500 text-white font-semibold shadow-md":"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:V_(v,s)},v)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.role}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors w-max border border-transparent hover:border-slate-200 dark:hover:border-slate-700",children:[l.jsx("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-colors ${M?"bg-red-500 border-red-500":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 group-hover:border-red-400"}`,children:M&&l.jsx($m,{size:16,className:"text-white"})}),l.jsx("input",{type:"checkbox",checked:M,onChange:()=>E(!M),className:"hidden"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium select-none",children:i.onlyStarter})]})]})]})})]}),l.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[l.jsxs("button",{onClick:()=>L("stats"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[l.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.minStats}),u.stats?l.jsx(xu,{size:18,className:"text-slate-400"}):l.jsx(vu,{size:18,className:"text-slate-400"})]}),u.stats&&l.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mt-4",children:["strength","dexterity","vitality","special","insight"].map(v=>l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:i[v]}),l.jsx("input",{type:"number",min:"0",max:"10",placeholder:"0",value:w[v],onChange:se=>k(v,se.target.value),className:"w-full px-3 py-2 text-center rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]},v))})})]}),l.jsx("div",{className:"mt-2 flex justify-end",children:l.jsxs("button",{onClick:g,className:"w-full md:w-auto px-8 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg shadow-red-500/20 font-bold text-lg flex items-center justify-center gap-2 transition-all transform hover:scale-105",children:[l.jsx($m,{size:24})," ",i.apply]})})]})]}),R.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[l.jsx(mc,{size:48,className:"mb-4"}),l.jsx("p",{className:"text-xl",children:i.noResults}),l.jsx("button",{onClick:_,className:"mt-4 text-red-500 hover:underline",children:i.clear})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20 mt-8",children:R.map(v=>l.jsxs("div",{onClick:()=>n(v),className:`relative h-40 rounded-3xl p-5 shadow-lg cursor-pointer transform hover:-translate-y-1 transition-all duration-300 overflow-hidden ${zr(v.Type1)}`,children:[l.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:l.jsx(eh,{})}),l.jsxs("div",{className:"flex justify-between h-full relative z-10",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:v.Name}),l.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[l.jsx(Ur,{type:v.Type1,language:s}),v.Type2&&l.jsx(Ur,{type:v.Type2,language:s})]})]}),l.jsxs("div",{className:"flex flex-col items-end justify-between",children:[l.jsxs("span",{className:"text-white/80 font-bold text-lg drop-shadow-sm",children:["#",v.Number.toString().padStart(3,"0")]}),l.jsx("img",{loading:"lazy",src:$f(v),alt:v.Name,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg",onError:se=>{se.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})]})]})]},`${v.Number}-${v.Name}`))})]})},O_=({moveName:t,filePath:e,onClose:n,language:r,onRoll:s})=>{const i=Mn[r],[o,c]=G.useState(null),[u,d]=G.useState(!0),[p,m]=G.useState(null);G.useEffect(()=>{e&&(async()=>{try{d(!0);const P=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(w=>encodeURIComponent(w)).join("/")}`,M=await fetch(P);if(!M.ok)throw new Error("Could not fetch move data");const E=await M.json();c(E)}catch{m("Failed to load move details.")}finally{d(!1)}})()},[e]),G.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const x=I=>{I.target===I.currentTarget&&n()};return e?l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:x,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up",children:[l.jsxs("div",{className:`p-6 ${o?zr(o.Type):"bg-slate-500"} text-white relative transition-colors duration-300`,children:[l.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:l.jsx(tr,{size:20})}),o?l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-3xl font-extrabold tracking-tight pr-8",children:Ho(o.Name,r)}),"                 ",l.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold bg-white/25 rounded-full backdrop-blur-md uppercase tracking-wider",children:Bf(o.Type,r)}),o.Category&&l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold bg-white/25 rounded-full backdrop-blur-md uppercase tracking-wider",children:o.Category})]})]}):l.jsx("h2",{className:"text-2xl font-bold",children:Ho(t,r)})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:u?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[l.jsx(Qh,{className:"w-10 h-10 animate-spin mb-3 text-red-500"}),l.jsx("p",{children:i.consulting})]}):p||!o?l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[l.jsx(mv,{className:"w-12 h-12 mb-3 text-red-400"}),l.jsx("p",{children:p||"Move data not found."})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:l.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',o.Description,'"']})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 rounded-2xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 flex flex-col items-center justify-center text-center",children:[l.jsxs("span",{className:"text-xs font-bold text-red-400 uppercase mb-1 flex items-center gap-1",children:[l.jsx(ib,{size:14})," ",i.power]}),l.jsx("span",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:o.Power})]}),l.jsxs("div",{className:"p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 flex flex-col items-center justify-center text-center",children:[l.jsxs("span",{className:"text-xs font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[l.jsx(ab,{size:14})," ",i.target]}),l.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:o.Target})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[l.jsx(yn,{className:"w-4 h-4"})," ",i.dicePools,s&&l.jsx("span",{className:"text-[10px] bg-green-500 text-white px-2 py-0.5 rounded-full ml-auto",children:"Click to Roll"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("button",{disabled:!s||!o.Accuracy1,onClick:()=>{if(s&&o.Accuracy1){const I=o.Accuracy2?`${o.Accuracy1} + ${o.Accuracy2}`:o.Accuracy1;s(I,o)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[l.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.accuracy,s&&l.jsx(Hm,{size:14,className:"text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[l.jsx("span",{className:"capitalize",children:o.Accuracy1}),o.Accuracy2&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-300",children:"+"}),l.jsx("span",{className:"capitalize",children:o.Accuracy2})]})]})]}),l.jsxs("button",{disabled:!s||!o.Damage1,onClick:()=>{if(s&&o.Damage1){const I=o.Damage2?`${o.Damage1} + ${o.Damage2}`:o.Damage1;s(I)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-red-50 dark:hover:bg-red-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[l.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.damage,s&&l.jsx(Hm,{size:14,className:"text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[l.jsx("span",{className:"capitalize",children:o.Damage1||"None"}),o.Damage2&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-300",children:"+"}),l.jsx("span",{className:"capitalize",children:o.Damage2})]})]})]})]})]}),o.Effect&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[l.jsx(gc,{className:"w-4 h-4"})," ",i.effect]}),l.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-xl text-slate-700 dark:text-slate-300 text-sm leading-relaxed",children:o.Effect})]})]})})]})}):null},F_=({abilityName:t,filePath:e,onClose:n,language:r})=>{const s=Mn[r],[i,o]=G.useState(null),[c,u]=G.useState(!0),[d,p]=G.useState(null);G.useEffect(()=>{e&&(async()=>{try{u(!0);const P=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(w=>encodeURIComponent(w)).join("/")}`,M=await fetch(P);if(!M.ok)throw new Error("Could not fetch ability data");const E=await M.json();o(E)}catch{p("Failed to load ability details.")}finally{u(!1)}})()},[e]),G.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const m=I=>{I.target===I.currentTarget&&n()};if(!e)return null;const x=ls((i==null?void 0:i.Name)||t,r);return l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:m,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up border border-slate-200 dark:border-slate-800",children:[l.jsxs("div",{className:"p-6 bg-indigo-600 dark:bg-indigo-800 text-white relative transition-colors duration-300",children:[l.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:l.jsx(tr,{size:20})}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(sb,{className:"text-indigo-200",size:28}),l.jsx("h2",{className:"text-3xl font-extrabold tracking-tight",children:x})]}),l.jsx("span",{className:"inline-block mt-2 text-xs font-bold text-indigo-100 uppercase tracking-wider opacity-80",children:s.abilities})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:c?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[l.jsx(Qh,{className:"w-10 h-10 animate-spin mb-3 text-indigo-500"}),l.jsx("p",{children:s.consulting})]}):d||!i?l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[l.jsx(mv,{className:"w-12 h-12 mb-3 text-red-400"}),l.jsx("p",{children:d||"Ability data not found."})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2",children:[l.jsx(mc,{size:14})," ",s.about]}),l.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',i.Description,'"']})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[l.jsx(gc,{className:"w-4 h-4"})," ",s.effect]}),l.jsx("div",{className:"p-5 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-900/30 rounded-xl text-slate-800 dark:text-slate-200 text-sm leading-relaxed shadow-sm",children:i.Effect})]})]})})]})})},kC=({pokemon:t,onBack:e,moveMap:n,abilityMap:r,language:s})=>{var I,T;const i=Mn[s],o=zr(t.Type1),[c,u]=G.useState(null),[d,p]=G.useState(null);G.useEffect(()=>{window.scrollTo(0,0)},[]);const m=P=>{let M=n[P];if(!M){const E=P.replace(/[\s-]/g,""),w=Object.keys(n).find(S=>S.toLowerCase()===E.toLowerCase()||S.toLowerCase()===P.toLowerCase());w&&(M=n[w])}M?u({name:P,path:M}):(console.warn(`Move path not found for: ${P}`),u({name:P,path:""}))},x=P=>{if(!P)return;let M=r[P];if(!M){const E=P.replace(/[\s-]/g,""),w=Object.keys(r).find(S=>S.toLowerCase()===E.toLowerCase()||S.toLowerCase()===P.toLowerCase());w&&(M=r[w])}M?p({name:P,path:M}):console.warn(`Ability path not found for: ${P}`)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`min-h-screen ${o} transition-colors duration-500 overflow-x-hidden`,children:[l.jsxs("div",{className:"p-6 pt-8 pb-48 relative",children:[l.jsxs("div",{className:"flex justify-between items-center text-white max-w-4xl mx-auto z-50 relative",children:[l.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors backdrop-blur-md",children:l.jsx(vi,{size:32})}),l.jsxs("span",{className:"font-bold text-2xl",children:["#",t.Number.toString().padStart(3,"0")]})]}),l.jsxs("div",{className:"max-w-4xl mx-auto mt-6 flex justify-between items-center px-4 relative z-30",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white tracking-tight drop-shadow-md",children:t.Name}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx(Ur,{type:t.Type1,language:s}),t.Type2&&l.jsx(Ur,{type:t.Type2,language:s})]})]}),l.jsx("div",{className:"text-white/90 font-semibold text-lg hidden md:block backdrop-blur-sm bg-white/10 px-4 py-2 rounded-lg",children:t.DexCategory})]}),l.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-12 z-40 pointer-events-none",children:l.jsx("img",{src:M_(t),alt:t.Name,className:"w-64 h-64 md:w-80 md:h-80 object-contain drop-shadow-2xl",onError:P=>{const M=P.target,E=$f(t);M.src!==E?M.src=E:M.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})}),l.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 pointer-events-none translate-y-1/4 translate-x-1/4 z-10",children:l.jsx("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-96 h-96 filter invert",alt:"bg"})})]}),l.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-t-[3rem] min-h-[calc(100vh-300px)] p-6 pt-16 md:px-12 pb-20 relative z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] transition-colors duration-300",children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-10",children:[l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(mc,{className:"w-5 h-5"})," ",i.about]}),l.jsxs("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-lg italic",children:['"',t.DexDescription||"No description available.",'"']}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.height}),l.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((I=t.Height)==null?void 0:I.Meters)||"?","m"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.weight}),l.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((T=t.Weight)==null?void 0:T.Kilograms)||"?","kg"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.rank}),l.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.RecommendedRank||"Unknown"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.role}),l.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.GoodStarter?i.starter:i.wild})]})]})]}),l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(zk,{className:"w-5 h-5"})," ",i.baseStats]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4",children:[l.jsxs("div",{className:"col-span-1 md:col-span-2 flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:i.hp}),l.jsxs("div",{className:"flex-1 flex items-center",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 mr-4 w-8",children:t.BaseHP}),l.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${Math.min(100,t.BaseHP/15*100)}%`}})})]})]}),[{label:i.strength,val:t.Strength,max:t.MaxStrength},{label:i.dexterity,val:t.Dexterity,max:t.MaxDexterity},{label:i.vitality,val:t.Vitality,max:t.MaxVitality},{label:i.special,val:t.Special,max:t.MaxSpecial},{label:i.insight,val:t.Insight,max:t.MaxInsight}].map(P=>l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:P.label}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[P.val,"/",P.max]}),pC(P.val,P.max)]})]},P.label))]})]}),l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(bv,{className:"w-5 h-5"})," ",i.abilities]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.Ability1&&l.jsxs("button",{onClick:()=>x(t.Ability1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[l.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.primary}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:ls(t.Ability1,s)})]}),t.Ability2&&l.jsxs("button",{onClick:()=>x(t.Ability2),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[l.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.secondary}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:ls(t.Ability2,s)})]}),t.HiddenAbility&&l.jsxs("button",{onClick:()=>x(t.HiddenAbility),className:"px-4 py-2 bg-purple-50 dark:bg-purple-900/30 rounded-lg border border-purple-100 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors text-left",children:[l.jsx("span",{className:"text-xs text-purple-400 dark:text-purple-300 block uppercase font-bold",children:i.hidden}),l.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-200",children:ls(t.HiddenAbility,s)})]})]})]}),l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(gc,{className:"w-5 h-5"})," ",i.moveset]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-4 overflow-hidden border border-slate-100 dark:border-slate-700",children:t.Moves&&t.Moves.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:t.Moves.map((P,M)=>{let E="text-slate-500 dark:text-slate-400",w="bg-white dark:bg-slate-800",S="hover:bg-slate-100 dark:hover:bg-slate-700";const C=P.Learned||"Standard",z=V_(C,s),L=Ho(P.Name,s);return C==="Starter"&&(E="text-green-600 dark:text-green-400",w="bg-green-50 dark:bg-green-900/20",S="hover:bg-green-100 dark:hover:bg-green-900/30"),(C==="Expert"||C==="Ace"||C==="Master")&&(E="text-orange-600 dark:text-orange-400",w="bg-orange-50 dark:bg-orange-900/20",S="hover:bg-orange-100 dark:hover:bg-orange-900/30"),l.jsxs("button",{onClick:()=>m(P.Name),className:`${w} ${S} p-3 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm flex flex-col text-left transition-all duration-200 active:scale-95`,children:[l.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${E} mb-1`,children:z}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm truncate w-full",children:L})]},M)})}):l.jsx("p",{className:"text-slate-400 text-center italic",children:"No moves data available."})})]})]})})]}),c&&l.jsx(O_,{moveName:c.name,filePath:c.path,onClose:()=>u(null),language:s}),d&&l.jsx(F_,{abilityName:d.name,filePath:d.path,onClose:()=>p(null),language:s})]})},bC=({trainer:t,setTrainer:e,language:n,onBack:r,onSave:s,natureMap:i,party:o,items:c,onManagePokemon:u,onEditPokemon:d,onUpdatePokemon:p})=>{var Vt,Ke,ct,pt;const m=Mn[n],{user:x}=Pc(),I="bg-slate-600",[T,P]=Wi.useState(!1),[M,E]=Wi.useState(!1),[w,S]=Wi.useState("main"),[C,z]=Wi.useState(""),L=j=>{var V;const ee=(V=j.target.files)==null?void 0:V[0];if(ee){const $=new FileReader;$.onloadend=()=>{e({...t,image:$.result})},$.readAsDataURL(ee)}},_=(j,ee,V)=>{e({...t,attributes:{...t.attributes,[j]:{...t.attributes[j],[ee]:V}}})},g=(j,ee,V)=>{e({...t,skills:{...t.skills,[j]:{...t.skills[j],[ee]:V}}})},k=(j,ee,V)=>{e({...t,[j]:{...t[j],[ee]:V}})},b=(j,ee)=>{e({...t,pokedex:{...t.pokedex,[j]:Math.max(0,t.pokedex[j]+ee)}})};G.useEffect(()=>{if(!t.nature||!i)return;const j=i[t.nature];if(j){const V=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${j.split("/").map($=>encodeURIComponent($)).join("/")}`;fetch(V).then($=>$.json()).then($=>{$.Confidence&&e(Q=>Q.confidence!==$.Confidence?{...Q,confidence:$.Confidence}:Q)}).catch($=>console.error("Failed to fetch nature",$))}},[t.nature,i]);const N=G.useMemo(()=>i?Object.keys(i).sort():iC,[i]),R=j=>j&&j.includes("BookSprites")?j.replace("BookSprites","ShuffleTokens"):j,v=(j,ee,V)=>{e($=>{const Q=$.potions||{potion:{count:0,used:0},superPotion:{count:0,used:0},hyperPotion:{count:0,used:0}},U=Q[j]||{count:0,used:0};let ne=(U[ee]||0)+V;ne<0&&(ne=0);const Ie={potion:2,superPotion:4,hyperPotion:14}[j];if(ee==="used"){const Re=U.count*Ie;ne>Re&&(ne=Re)}let Ne=ee==="used"?ne:U.used;if(ee==="count"){const Re=ne*Ie;Ne>Re&&(Ne=Re)}return{...$,potions:{...Q,[j]:{...U,count:ee==="count"?ne:U.count,used:Ne}}}})},se=(j,ee)=>{var Re;j.preventDefault(),j.stopPropagation();const V=j.dataTransfer.getData("potionType"),$=j.dataTransfer.getData("healAmount");if(!V||!$||!ee)return;if(ee.hp.current===0){alert(n==="it"?"Non  possibile curare un Pokmon esausto con una pozione!":"Cannot heal a fainted Pokmon with a potion!");return}if(ee.hp.current>=ee.hp.max)return;const Q=parseInt($),U=((Re=t.potions)==null?void 0:Re[V])||{count:0,used:0},he=U.count*Q-U.used;if(he<=0){alert(n==="it"?"Pozione esaurita!":"Potion pool is empty!");return}const Ie=ee.hp.max-ee.hp.current,Ne=Math.min(Ie,he);if(v(V,"used",Ne),p){const mt={...ee,hp:{...ee.hp,current:ee.hp.current+Ne}};p(mt)}},ce=j=>{S(j),z(""),E(!0)},qe=j=>{if(w==="small"&&j.Pocket!=="HeldItems"&&j.Pocket!=="Medicine"){alert(n==="it"?"Nella Small Pocket puoi inserire solo oggetti di tipo 'HeldItems' o 'Medicine'.":"You can only put 'HeldItems' or 'Medicine' in the Small Pocket.");return}const ee={id:crypto.randomUUID(),name:j.Name,count:1,pocket:w,description:j.Description,image:Jd(j)};e(V=>({...V,inventory:[...V.inventory||[],ee]})),E(!1)},Me=(j,ee)=>{e(V=>({...V,inventory:(V.inventory||[]).map($=>$.id===j?{...$,count:Math.max(0,$.count+ee)}:$).filter($=>$.count>0)}))},K=({label:j,current:ee,max:V,onChangeCurrent:$})=>l.jsxs("div",{className:"bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center relative group",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsx("span",{className:"font-black uppercase tracking-widest text-sm text-slate-800",children:j})}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2 px-1",children:Array.from({length:V}).map((Q,U)=>l.jsx("div",{onClick:()=>$(U+1),className:`w-4 h-4 rounded-full border border-slate-300 cursor-pointer hover:bg-slate-400 transition-all duration-150 ${U<ee?"bg-slate-900":"bg-slate-200"}`},U))})]}),J=({label:j,value:ee,onChange:V})=>l.jsxs("div",{className:"flex items-center justify-between mb-1.5 group",children:[l.jsx("span",{className:"text-xs font-bold text-white uppercase group-hover:text-amber-200 transition-colors truncate mr-2",children:j}),l.jsx("div",{className:"flex gap-1 shrink-0",children:Array.from({length:5}).map(($,Q)=>l.jsx("button",{onClick:()=>V(Q+1===ee?0:Q+1),className:`w-3.5 h-3.5 rounded-full border border-white/20 transition-all duration-150 hover:bg-white/20 ${Q<ee?"bg-white scale-110 shadow-sm":"bg-black/20"}`},Q))})]}),oe=({label:j,current:ee,max:V,onChangeCurrent:$,Icon:Q,activeColor:U})=>l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-3 mb-3 border-4 border-slate-700 shadow-md flex items-center gap-4",children:[l.jsx("span",{className:"text-lg font-black text-white uppercase tracking-wider shrink-0",children:j}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.from({length:V}).map((ne,he)=>l.jsx("button",{onClick:()=>{const Ie=he+1;$(he===0&&ee===1?0:Ie)},className:"cursor-pointer hover:scale-110 transition-all duration-200",children:l.jsx(Q,{size:24,className:`drop-shadow-sm ${he<ee?U:"text-slate-600 fill-slate-900"}`})},he))})]}),ye=({label:j,value:ee,Icon:V})=>l.jsxs("div",{className:"flex rounded-full border-4 border-slate-700 bg-white overflow-hidden h-9 shadow-sm",children:[l.jsxs("div",{className:"flex-1 flex items-center pl-3 font-black text-slate-700 uppercase text-[10px] tracking-wider whitespace-nowrap overflow-hidden",children:[j,":"]}),l.jsxs("div",{className:"w-20 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 bg-slate-100",children:[ee,V&&l.jsx(V,{size:12,className:"ml-1 opacity-50"})]})]}),ge=({type:j,label:ee,heal:V,image:$})=>{var Ie;const Q=((Ie=t.potions)==null?void 0:Ie[j])||{count:0,used:0},U=Q.count*V,ne=U-Q.used;let he=ne>0?ne%V:0;return he===0&&ne>0&&(he=V),l.jsxs("div",{className:"bg-black/20 rounded-xl p-2 flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs font-bold text-white uppercase",children:ee}),l.jsxs("span",{className:"text-[10px] text-white/60",children:[V," HP / unit"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-white/50 uppercase",children:"Qty"}),l.jsxs("div",{className:"flex items-center gap-1 bg-slate-700/50 rounded px-1",children:[l.jsx("button",{onClick:()=>v(j,"count",-1),className:"text-white hover:text-red-400",children:l.jsx(Un,{size:12})}),l.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:Q.count}),l.jsx("button",{onClick:()=>v(j,"count",1),className:"text-white hover:text-green-400",children:l.jsx(Qt,{size:12})})]})]}),l.jsxs("div",{className:"flex flex-col items-center min-w-[80px]",children:[l.jsx("span",{className:"text-[8px] text-white/50 uppercase",children:"HP Pool"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>v(j,"used",1),className:"text-white hover:text-red-400",disabled:ne<=0,title:"Use HP",children:l.jsx(Un,{size:12})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:`gap-1 ${V===14?"grid grid-cols-7":"flex flex-wrap justify-center max-w-[80px]"}`,children:Array.from({length:V}).map((Ne,Re)=>l.jsx("div",{className:`w-2.5 h-2.5 rounded-full border border-slate-500 transition-colors duration-200 ${Re<he?"bg-green-500 border-green-400 shadow-[0_0_5px_rgba(34,197,94,0.6)]":"bg-slate-800/50"}`},Re))}),l.jsxs("span",{className:"text-[9px] text-white/40 mt-1 font-mono",children:[ne,"/",U]})]}),l.jsx("button",{onClick:()=>v(j,"used",-1),className:"text-white hover:text-green-400",disabled:Q.used<=0,title:"Restore HP",children:l.jsx(Qt,{size:12})})]})]}),l.jsx("img",{src:$,alt:ee,className:"w-8 h-8 object-contain ml-1 cursor-grab active:cursor-grabbing",draggable:!0,onDragStart:Ne=>{Ne.dataTransfer.setData("potionType",j),Ne.dataTransfer.setData("healAmount",V.toString())}})]})]})},ke=t.attributes.dexterity.current+t.skills.survival.alert,et=t.attributes.vitality.current,tt=t.attributes.insight.current,ft=t.attributes.dexterity.current+t.skills.fight.evasion,Le=t.attributes.strength.current+t.skills.fight.clash;return l.jsxs("div",{className:`fixed inset-0 z-50 ${I} overflow-y-auto animate-fade-in custom-scrollbar`,children:[l.jsxs("div",{className:"sticky top-0 z-50 bg-slate-800/90 backdrop-blur-sm p-4 shadow-md flex justify-between items-center text-white",children:[l.jsxs("button",{onClick:r,className:"flex items-center gap-2 hover:bg-white/20 px-3 py-1 rounded-full transition-colors",children:[l.jsx(vi,{})," ",m.backToHome]}),l.jsx("h1",{className:"text-xl font-bold uppercase tracking-widest hidden md:block",children:m.trainerSheet}),l.jsxs("div",{className:"flex items-center gap-2",children:[x&&s&&l.jsx("button",{onClick:s,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Save to Cloud",children:l.jsx(wv,{size:20})}),(!x||!s)&&l.jsx("div",{className:"w-8"})]})]}),l.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-center bg-slate-800/20 p-6 rounded-3xl border-4 border-slate-800/30",children:[l.jsx("div",{className:"relative group",children:l.jsxs("div",{className:"w-32 h-32 rounded-full bg-slate-200 border-4 border-white shadow-xl flex items-center justify-center overflow-hidden relative",children:[t.image?l.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):l.jsx(Yk,{className:"text-slate-400 w-12 h-12"}),l.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"Upload"})}),l.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:L,accept:"image/*"})]})}),l.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[l.jsx("input",{type:"text",value:t.name,onChange:j=>e({...t,name:j.target.value}),className:"text-4xl md:text-5xl font-black text-white bg-transparent border-b-4 border-white/20 focus:border-white outline-none w-full mb-2 placeholder-white/50",placeholder:m.playerName}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-2",children:[l.jsxs("div",{className:"bg-black/20 text-white font-bold px-3 py-1 rounded-lg border border-white/10 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs uppercase opacity-70",children:m.sheet.age}),l.jsx("input",{type:"number",value:t.age??10,onChange:j=>e({...t,age:parseInt(j.target.value)||0}),className:"w-12 bg-transparent text-center outline-none"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("select",{value:t.nature,onChange:j=>e({...t,nature:j.target.value}),className:"bg-black/20 text-white font-bold px-3 py-1 rounded-lg border border-white/10 outline-none appearance-none cursor-pointer hover:bg-black/30",children:N.map(j=>l.jsx("option",{value:j,className:"text-slate-900",children:j},j))}),l.jsxs("div",{className:"bg-black/20 text-white font-bold px-3 py-1 rounded-lg border border-white/10 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs uppercase opacity-70",children:m.sheet.confidence}),l.jsx("input",{type:"number",value:t.confidence,onChange:j=>e({...t,confidence:parseInt(j.target.value)||0}),className:"w-12 bg-transparent text-center outline-none"})]})]}),l.jsx("div",{className:"h-6 w-px bg-white/40 hidden md:block"}),l.jsx("div",{className:"bg-black/20 rounded-lg p-2 border border-white/10",children:l.jsxs("div",{className:"flex items-center gap-4 px-2 py-1",children:[l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 uppercase tracking-wider",children:m.caught}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>b("caught",-1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(Un,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:t.pokedex.caught}),l.jsx("button",{onClick:()=>b("caught",1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(Qt,{size:14})})]})]}),l.jsx("div",{className:"w-px h-8 bg-white/20"}),l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-white/60 uppercase tracking-wider",children:m.seen}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>b("seen",-1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(Un,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:t.pokedex.seen}),l.jsx("button",{onClick:()=>b("seen",1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(Qt,{size:14})})]})]})]})})]})]})]}),o&&l.jsxs("div",{onClick:u,className:`bg-slate-800/20 p-4 rounded-3xl border-4 border-slate-800/30 mb-8 ${u?"cursor-pointer hover:bg-slate-800/30 transition-colors group":""}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-3 ml-2",children:[l.jsx("h3",{className:"text-white font-bold uppercase tracking-widest flex items-center gap-2 text-sm opacity-80",children:m.party}),u&&l.jsx("span",{className:"text-white/60 text-xs uppercase font-bold group-hover:text-white transition-colors",children:"Manage "})]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-4",children:o.map((j,ee)=>l.jsx("div",{onDragOver:V=>V.preventDefault(),onDrop:V=>j&&se(V,j),onClick:V=>{j&&d&&(V.stopPropagation(),d(j))},className:`aspect-square rounded-2xl border-2 border-slate-700/50 flex items-center justify-center relative overflow-hidden group hover:border-slate-500 transition-colors ${j?zr(j.type1)+(d?" cursor-pointer hover:scale-105":""):"bg-slate-800/40"}`,children:j?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:R(j.image),alt:j.nickname,className:"w-full h-full object-contain p-2 transition-transform duration-300 group-hover:scale-110 drop-shadow-md"}),l.jsxs("div",{className:"absolute bottom-1 inset-x-1 flex justify-center gap-1 pointer-events-none",children:[l.jsxs("div",{className:"flex items-center gap-1 bg-black/60 rounded-full px-2 py-0.5 backdrop-blur-sm shadow-sm",children:[l.jsx(Nd,{size:10,className:"text-red-500 fill-red-500"}),l.jsxs("span",{className:"text-[10px] font-bold text-white leading-none",children:[j.hp.current,"/",j.hp.max]})]}),l.jsxs("div",{className:"flex items-center gap-1 bg-black/60 rounded-full px-2 py-0.5 backdrop-blur-sm shadow-sm",children:[l.jsx(Td,{size:10,className:"text-blue-500 fill-blue-500"}),l.jsxs("span",{className:"text-[10px] font-bold text-white leading-none",children:[j.will.current,"/",j.will.max]})]})]})]}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700/30"})},ee))})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"bg-red-900/80 p-4 rounded-3xl border-4 border-red-800 shadow-lg",children:[l.jsx(K,{label:m.strength,current:t.attributes.strength.current,max:t.attributes.strength.max,onChangeCurrent:j=>_("strength","current",j)}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-red-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(Cd,{size:12})," ",m.sheet.fight]}),l.jsx(J,{label:m.sheet.brawl,value:t.skills.fight.brawl,onChange:j=>g("fight","brawl",j)}),l.jsx(J,{label:m.sheet.channel,value:t.skills.fight.channel,onChange:j=>g("fight","channel",j)}),l.jsx(J,{label:m.sheet.clash,value:t.skills.fight.clash,onChange:j=>g("fight","clash",j)}),l.jsx(J,{label:m.sheet.evasion,value:t.skills.fight.evasion,onChange:j=>g("fight","evasion",j)})]})]}),l.jsxs("div",{className:"bg-green-900/80 p-4 rounded-3xl border-4 border-green-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(K,{label:m.dexterity,current:t.attributes.dexterity.current,max:t.attributes.dexterity.max,onChangeCurrent:j=>_("dexterity","current",j)}),l.jsx(K,{label:m.vitality,current:t.attributes.vitality.current,max:t.attributes.vitality.max,onChangeCurrent:j=>_("vitality","current",j)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-green-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(yv,{size:12})," ",m.sheet.survival]}),l.jsx(J,{label:m.sheet.alert,value:t.skills.survival.alert,onChange:j=>g("survival","alert",j)}),l.jsx(J,{label:m.sheet.athletic,value:t.skills.survival.athletic,onChange:j=>g("survival","athletic",j)}),l.jsx(J,{label:m.sheet.nature,value:t.skills.survival.nature,onChange:j=>g("survival","nature",j)}),l.jsx(J,{label:m.sheet.stealth,value:t.skills.survival.stealth,onChange:j=>g("survival","stealth",j)})]})]}),l.jsxs("div",{className:"bg-purple-900/80 p-4 rounded-3xl border-4 border-purple-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(K,{label:m.special,current:t.attributes.special.current,max:t.attributes.special.max,onChangeCurrent:j=>_("special","current",j)}),l.jsx(K,{label:m.insight,current:t.attributes.insight.current,max:t.attributes.insight.max,onChangeCurrent:j=>_("insight","current",j)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-purple-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(vv,{size:12})," ",m.sheet.social]}),l.jsx(J,{label:m.sheet.allure,value:t.skills.social.allure,onChange:j=>g("social","allure",j)}),l.jsx(J,{label:m.sheet.etiquette,value:t.skills.social.etiquette,onChange:j=>g("social","etiquette",j)}),l.jsx(J,{label:m.sheet.intimidate,value:t.skills.social.intimidate,onChange:j=>g("social","intimidate",j)}),l.jsx(J,{label:m.sheet.perform,value:t.skills.social.perform,onChange:j=>g("social","perform",j)})]})]})]}),l.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-4",children:[l.jsxs("div",{children:[l.jsx(oe,{label:m.sheet.hp,current:t.hp.current,max:t.hp.max,onChangeCurrent:j=>k("hp","current",j),Icon:Nd,activeColor:"text-red-500 fill-red-500"}),l.jsx(oe,{label:m.sheet.will,current:t.will.current,max:t.will.max,onChangeCurrent:j=>k("will","current",j),Icon:Td,activeColor:"text-blue-500 fill-blue-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(ye,{label:m.sheet.initiative,value:ke,Icon:yn}),l.jsx(ye,{label:m.sheet.def,value:`${et}/${tt}`,Icon:kv})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(ye,{label:m.sheet.evasion,value:ft,Icon:yn}),l.jsx(ye,{label:m.sheet.clash,value:Le,Icon:yn})]})]}),l.jsxs("div",{onClick:()=>P(!0),className:"bg-blue-900/80 p-4 rounded-3xl border-4 border-blue-800 shadow-lg cursor-pointer hover:scale-[1.02] transition-transform group",children:[l.jsxs("h3",{className:"text-blue-100 font-bold uppercase text-lg mb-3 flex items-center gap-2",children:[l.jsx(Vl,{className:"w-6 h-6 text-blue-300 group-hover:text-white transition-colors"})," ",m.sheet.item,"s"]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(ge,{type:"potion",label:"Potion",heal:2,image:"https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites/potion.png"}),l.jsx(ge,{type:"superPotion",label:"Super Potion",heal:4,image:"https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites/super-potion.png"}),l.jsx(ge,{type:"hyperPotion",label:"Hyper Potion",heal:14,image:"https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites/hyper-potion.png"})]})]}),l.jsxs("div",{className:"bg-yellow-600/90 p-4 rounded-3xl border-4 border-yellow-700 shadow-lg",children:[l.jsxs("h3",{className:"text-yellow-100 font-bold uppercase text-lg mb-2 flex items-center gap-2",children:[l.jsx(gv,{className:"w-6 h-6 text-yellow-300"})," ",m.money]}),l.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 flex items-center justify-between",children:[l.jsx("span",{className:"text-3xl font-black text-white tracking-widest",children:""}),l.jsx("input",{type:"number",value:t.money,onChange:j=>e({...t,money:parseInt(j.target.value)||0}),className:"bg-transparent text-right text-4xl font-black text-white outline-none w-full"})]})]})]})]})]}),T&&l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>P(!1),children:l.jsxs("div",{className:"bg-slate-900 border-4 border-blue-500 rounded-3xl w-full max-w-4xl h-[80vh] flex flex-col overflow-hidden shadow-2xl",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"bg-blue-600 p-4 flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-widest flex items-center gap-3",children:[l.jsx(Vl,{size:32})," ",m.sheet.item,"s"]}),l.jsx("button",{onClick:()=>P(!1),className:"text-white hover:text-blue-200 transition-colors",children:l.jsx(tr,{size:32})})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[l.jsxs("div",{className:"flex-1 p-4 border-b md:border-b-0 md:border-r border-blue-700/50 bg-blue-900/20 overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 sticky top-0 bg-blue-900/90 p-2 rounded-xl backdrop-blur-md z-10",children:[l.jsxs("h3",{className:"text-xl font-bold text-blue-300 uppercase",children:["Small Pocket ",l.jsx("span",{className:"text-xs opacity-60 block md:inline",children:"(Battle)"})]}),l.jsx("button",{onClick:()=>ce("small"),className:"p-2 bg-blue-600 hover:bg-blue-500 rounded-full text-white shadow-lg",children:l.jsx(Qt,{size:20})})]}),l.jsxs("div",{className:"space-y-2",children:[(Vt=t.inventory)==null?void 0:Vt.filter(j=>j.pocket==="small").map(j=>l.jsxs("div",{className:"bg-slate-800 p-3 rounded-xl flex justify-between items-center border border-slate-700 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[j.image&&l.jsx("img",{src:j.image,alt:j.name,className:"w-8 h-8 object-contain"}),l.jsx("span",{className:"font-bold text-white",children:j.name})]}),l.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg px-2 py-1",children:[l.jsx("button",{onClick:()=>Me(j.id,-1),className:"text-slate-400 hover:text-red-400",children:l.jsx(Un,{size:16})}),l.jsx("span",{className:"font-mono text-white w-6 text-center font-bold",children:j.count}),l.jsx("button",{onClick:()=>Me(j.id,1),className:"text-slate-400 hover:text-green-400",children:l.jsx(Qt,{size:16})})]})]},j.id)),!((Ke=t.inventory)!=null&&Ke.some(j=>j.pocket==="small"))&&l.jsx("p",{className:"text-slate-500 text-center italic py-8 opacity-50",children:"Empty Pocket"})]})]}),l.jsxs("div",{className:"flex-1 p-4 bg-slate-900/50 overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 sticky top-0 bg-slate-800/90 p-2 rounded-xl backdrop-blur-md z-10",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-300 uppercase",children:["Main Pocket ",l.jsx("span",{className:"text-xs opacity-60 block md:inline",children:"(Other)"})]}),l.jsx("button",{onClick:()=>ce("main"),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded-full text-white shadow-lg",children:l.jsx(Qt,{size:20})})]}),l.jsxs("div",{className:"space-y-2",children:[(ct=t.inventory)==null?void 0:ct.filter(j=>j.pocket==="main").map(j=>l.jsxs("div",{className:"bg-slate-800 p-3 rounded-xl flex justify-between items-center border border-slate-700 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[j.image&&l.jsx("img",{src:j.image,alt:j.name,className:"w-8 h-8 object-contain"}),l.jsx("span",{className:"font-bold text-white",children:j.name})]}),l.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg px-2 py-1",children:[l.jsx("button",{onClick:()=>Me(j.id,-1),className:"text-slate-400 hover:text-red-400",children:l.jsx(Un,{size:16})}),l.jsx("span",{className:"font-mono text-white w-6 text-center font-bold",children:j.count}),l.jsx("button",{onClick:()=>Me(j.id,1),className:"text-slate-400 hover:text-green-400",children:l.jsx(Qt,{size:16})})]})]},j.id)),!((pt=t.inventory)!=null&&pt.some(j=>j.pocket==="main"))&&l.jsx("p",{className:"text-slate-500 text-center italic py-8 opacity-50",children:"Empty Pocket"})]})]})]})]})}),M&&l.jsx("div",{className:"fixed inset-0 z-[110] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>E(!1),children:l.jsxs("div",{className:"bg-slate-900 border-4 border-slate-700 rounded-3xl w-full max-w-2xl h-[70vh] flex flex-col overflow-hidden shadow-2xl",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"bg-slate-800 p-4 flex justify-between items-center shrink-0 border-b border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-white uppercase tracking-widest flex items-center gap-2",children:[l.jsx(jo,{size:24})," Select Item (",w==="small"?"Small Pocket":"Main Pocket",")"]}),l.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-white transition-colors",children:l.jsx(tr,{size:24})})]}),l.jsx("div",{className:"p-4 bg-slate-800/50",children:l.jsx("input",{type:"text",autoFocus:!0,placeholder:n==="it"?"Cerca oggetto...":"Search item...",value:C,onChange:j=>z(j.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900 border border-slate-600 text-white focus:outline-none focus:border-blue-500 transition-colors"})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar space-y-2",children:[c.filter(j=>{const ee=j.Name.toLowerCase().includes(C.toLowerCase()),V=j.Pocket==="HeldItems"||j.Pocket==="Medicine";return ee&&(w==="small"?V:!V)}).map(j=>l.jsxs("button",{onClick:()=>qe(j),className:"w-full bg-slate-800 hover:bg-slate-700 p-3 rounded-xl flex items-center gap-4 transition-colors border border-slate-700 hover:border-slate-500 text-left group",children:[l.jsx("img",{src:Jd(j),alt:j.Name,className:"w-10 h-10 object-contain"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-white group-hover:text-blue-300 transition-colors",children:j.Name}),l.jsx("div",{className:"text-xs text-slate-400",children:j.Pocket})]}),l.jsx(Qt,{size:20,className:"text-slate-500 group-hover:text-green-400"})]},j._id)),c.length===0&&l.jsx("div",{className:"text-center text-slate-500 py-8",children:"No items loaded."})]})]})})]})},z_=({character:t,baseData:e,moveFileMap:n,abilityFileMap:r,onSave:s,onClose:i,language:o,natureMap:c})=>{const u=Mn[o],[d,p]=G.useState(t),[m,x]=G.useState(!0),I=zr(d.type1),[T,P]=G.useState({step:"setup",mode:"attribute",isOpen:!1,statName:"",statValue:0,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0,total:0}),[M,E]=G.useState(null),[w,S]=G.useState(null),[C,z]=G.useState(null),[L,_]=G.useState({isOpen:!1,damage:"",type:"physical"}),[g,k]=G.useState(null),[b,N]=G.useState(!1);G.useEffect(()=>{if(!d.nature||!c)return;const A=c[d.nature];if(A){const B=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${A.split("/").map(X=>encodeURIComponent(X)).join("/")}`;fetch(B).then(X=>X.json()).then(X=>{k(X),!m&&X.Confidence&&p(te=>({...te,confidence:X.Confidence}))}).catch(X=>console.error("Failed to fetch nature",X))}else k(null)},[d.nature,c,m]);const R=()=>{s(d)},v=()=>{m||R(),x(!m)},se=A=>{if(!r)return;let F=r[A];if(!F){const B=A.replace(/[\s-]/g,""),X=Object.keys(r).find(te=>te.toLowerCase()===B.toLowerCase()||te.toLowerCase()===A.toLowerCase());X&&(F=r[X])}F&&S({name:A,path:F})},ce=(A,F)=>{if(m)return;const B=d.moves||[],X=B.includes(A),te=d.attributes.insight.current+2;if(X)p(me=>({...me,moves:me.moves.filter(be=>be!==A)}));else{if(B.length>=te){alert(`You can only learn ${te} moves (Insight + 2)!`);return}const me=Jr.indexOf(d.rank);if(Jr.indexOf(F)>me&&B.filter(Bt=>{const Et=e==null?void 0:e.Moves.find(En=>En.Name===Bt);return Et?Jr.indexOf(Et.Learned)>me:!1}).length>=1){alert("You can only learn one move from a higher rank!");return}p(je=>({...je,moves:[...je.moves,A]}))}},qe=(A,F)=>{!m||F<=0||P({step:"setup",mode:"attribute",isOpen:!0,statName:A,statValue:F,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0})},Me=(A,F)=>{T.selectedSkillName===A?P(B=>({...B,selectedSkillName:null,selectedSkillValue:0})):P(B=>({...B,selectedSkillName:A,selectedSkillValue:F}))},K=()=>{const F=T.mode==="initiative"?1:T.statValue+T.selectedSkillValue;P(B=>({...B,step:"rolling",results:Array(F).fill(1)}))},J=A=>{const F=parseInt(A);if(!isNaN(F)&&String(F)===A)return F;const B=A.toLowerCase().trim();if(d.attributes[B])return d.attributes[B].current;for(const X of["fight","survival","social"])if(d.skills[X][B])return d.skills[X][B];return d.contest[B]!==void 0?d.contest[B]:0},oe=(A,F)=>{const B=A.split("+").map(me=>me.trim());let X=B[0],te=B[1]||"";if(X.includes("/")){const me=X.split("/").map(be=>be.trim());z({isOpen:!0,options:me,modifier:te?`+ ${te}`:"",moveData:F}),E(null);return}ye(X,te,F)},ye=(A,F,B)=>{const X=J(A),te=F?J(F):0;let me;if(B&&B.Damage1){const be=B.Damage2?`${B.Damage1} + ${B.Damage2}`:B.Damage1;me={name:B.Name,type:B.Type,damagePool:be,power:B.Power}}P({step:"setup",mode:"move",isOpen:!0,statName:A,statValue:X,selectedSkillName:F||null,selectedSkillValue:te,results:[],successes:0,activeMove:me}),E(null),z(null)},ge=()=>{if(!T.activeMove||!T.activeMove.damagePool)return;const F=T.activeMove.damagePool.split("+").map(En=>En.trim()),B=F[0],X=J(B);let te=0;F[1]&&(te=J(F[1]));const me=T.activeMove.power||0;let be=0;(d.type1===T.activeMove.type||d.type2&&d.type2===T.activeMove.type)&&(be=1);let je=0;T.successes>3&&(je=2);const Bt=te+me+be+je,Et=[];te>0&&Et.push(`Base(${te})`),me>0&&Et.push(`Power(+${me})`),be>0&&Et.push("STAB(+1)"),je>0&&Et.push("Crit(+2)");const st=Et.length>0?Et.join(" "):"Bonus";P({step:"setup",mode:"move",isOpen:!0,statName:"Damage",statValue:X,selectedSkillName:st,selectedSkillValue:Bt,results:[],successes:0,activeMove:void 0})},ke=()=>{const A=d.attributes.dexterity.current,F=d.skills.survival.alert,B=A+F;P({step:"setup",mode:"initiative",isOpen:!0,statName:"Initiative",statValue:1,selectedSkillName:"Dexterity + Alert",selectedSkillValue:B,results:[],successes:0,total:0})},et=()=>{_({isOpen:!0,damage:"",type:"physical"})},tt=()=>{const A=parseInt(L.damage)||0,F=L.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current,B=Math.max(0,A-F),X=d.hp.current,te=Math.max(0,X-B);j("hp","current",te),_(me=>({...me,isOpen:!1}))},ft=()=>{P({step:"setup",mode:"attribute",isOpen:!0,statName:"Evasion",statValue:d.attributes.dexterity.current,selectedSkillName:"Evasion",selectedSkillValue:d.skills.fight.evasion,results:[],successes:0})},Le=()=>{P({step:"setup",mode:"attribute",isOpen:!0,statName:"Clash",statValue:d.attributes.strength.current,selectedSkillName:"Clash",selectedSkillValue:d.skills.fight.clash,results:[],successes:0})};G.useEffect(()=>{let A,F;if(T.isOpen&&T.step==="rolling"){const B=T.mode==="initiative",X=B?1:T.statValue+T.selectedSkillValue;A=setInterval(()=>{P(te=>({...te,results:Array(X).fill(0).map(()=>Math.floor(Math.random()*6)+1)}))},80),F=setTimeout(()=>{clearInterval(A);const te=Array(X).fill(0).map(()=>Math.floor(Math.random()*6)+1);if(B){const me=te[0];P(be=>({...be,step:"result",results:te,total:me+be.selectedSkillValue,successes:0}))}else{const me=te.filter(be=>be>3).length;P(be=>({...be,step:"result",results:te,successes:me}))}},2e3)}return()=>{clearInterval(A),clearTimeout(F)}},[T.isOpen,T.step,T.statValue,T.selectedSkillValue,T.mode]);const Vt=(A,F,B)=>{m||p(X=>({...X,attributes:{...X.attributes,[A]:{...X.attributes[A],[F]:B}}}))},Ke=(A,F,B)=>{m||p(X=>({...X,skills:{...X.skills,[A]:{...X.skills[A],[F]:B}}}))},ct=(A,F)=>{m&&A!=="status"||p(B=>({...B,[A]:F}))},pt=(A,F)=>{p(B=>({...B,[A]:Math.max(0,(B[A]||0)+F)}))},j=(A,F,B)=>{p(X=>({...X,[A]:{...X[A],[F]:B}}))},ee=(A,F)=>{m||p(B=>({...B,contest:{...B.contest,[A]:F}}))},V=({label:A,current:F,max:B,onChangeCurrent:X})=>{const te=m?"button":"div",me=m?{onClick:()=>qe(A,F),className:"w-full bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center hover:bg-slate-50 hover:border-blue-500 hover:scale-[1.02] active:scale-95 transition-all cursor-pointer group relative"}:{className:"bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center"};return l.jsxs(te,{...me,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:`font-black uppercase tracking-widest text-sm ${m?"text-slate-800 group-hover:text-blue-600":"text-slate-800"}`,children:A}),m&&l.jsx(yn,{size:14,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity absolute right-3"})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2 px-1",children:Array.from({length:B}).map((be,je)=>l.jsx("div",{onClick:Bt=>{m||(Bt.stopPropagation(),X(je+1))},className:`w-4 h-4 rounded-full border border-slate-300 transition-all duration-150 ${je<F?"bg-slate-900":"bg-slate-200"} ${m?"":"cursor-pointer hover:bg-slate-400"}`,title:m?"":`${A}: ${je+1}`},je))})]})},$=({label:A,value:F,onChange:B})=>l.jsxs("div",{className:`bg-white/50 rounded-xl px-3 py-2 flex items-center justify-between mb-2 ${m?"opacity-90":"hover:bg-white/80 transition-colors"}`,children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:A}),l.jsx("div",{className:"flex gap-1.5",children:Array.from({length:5}).map((X,te)=>l.jsx("button",{disabled:m,onClick:()=>B(te+1===F?0:te+1),className:`w-3 h-3 rounded-full border border-pink-400 transition-all duration-150 ${te<F?"bg-pink-500 scale-125 border-pink-500":"bg-white"} ${m?"cursor-default":"hover:bg-pink-200 cursor-pointer"}`,title:`${A}: ${te+1}`},te))})]}),Q=({label:A,value:F,onChange:B})=>l.jsxs("div",{className:"flex items-center justify-between mb-1.5 group",children:[l.jsx("span",{className:"text-xs font-bold text-white uppercase group-hover:text-amber-200 transition-colors truncate mr-2",children:A}),l.jsx("div",{className:"flex gap-1 shrink-0",children:Array.from({length:5}).map((X,te)=>l.jsx("button",{disabled:m,onClick:()=>B(te+1===F?0:te+1),className:`w-3.5 h-3.5 rounded-full border border-white/20 transition-all duration-150 ${te<F?"bg-white scale-110 shadow-sm":"bg-black/20"} ${m?"cursor-default":"hover:bg-white/20"}`},te))})]}),U=({label:A,value:F,onChange:B})=>l.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[l.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:A})}),l.jsx("input",{type:"text",value:F,readOnly:m,onChange:X=>B(X.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none ${m?"bg-slate-100 cursor-default":"bg-blue-50 focus:bg-white"}`})]}),ne=({label:A,current:F,max:B,onChangeCurrent:X,Icon:te,activeColor:me})=>l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-3 mb-3 border-4 border-slate-700 shadow-md flex items-center gap-4",children:[l.jsx("span",{className:"text-lg font-black text-white uppercase tracking-wider shrink-0",children:A}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.from({length:B}).map((be,je)=>l.jsx("button",{disabled:!m,onClick:()=>{const Bt=je+1;X(je===0&&F===1?0:Bt)},className:`transition-all duration-200 ${m?"cursor-pointer hover:scale-110":"cursor-default opacity-80"}`,title:`${je+1}/${B}`,children:l.jsx(te,{size:24,className:`drop-shadow-sm ${je<F?me:"text-slate-600 fill-slate-900"}`})},je))})]}),he=({label:A,value:F,onChange:B,isReadOnly:X=!1,onAction:te,ActionIcon:me=yn})=>l.jsxs("div",{className:"flex rounded-full border-4 border-slate-700 bg-white overflow-hidden h-9 shadow-sm",children:[l.jsxs("div",{className:"flex-1 flex items-center pl-3 font-black text-slate-700 uppercase text-[10px] tracking-wider whitespace-nowrap overflow-hidden",children:[A,":"]}),X||m?l.jsxs("div",{onClick:()=>m&&te&&te(),className:`w-20 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 
                   ${m?"bg-slate-100":"bg-blue-100"}
                   ${m&&te?"cursor-pointer hover:bg-green-100 hover:text-green-800 transition-colors":""}
                   `,children:[F,m&&te&&l.jsx(me,{size:12,className:"ml-1 opacity-50"})]}):l.jsx("input",{type:"number",value:F,onChange:be=>B&&B(parseInt(be.target.value)||0),className:"w-20 bg-blue-100 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 text-center outline-none"})]}),Ie=d.attributes.dexterity.current+d.skills.survival.alert,Ne=d.attributes.vitality.current,Re=d.attributes.insight.current,mt=d.attributes.dexterity.current+d.skills.fight.evasion,hn=d.attributes.strength.current+d.skills.fight.clash;d.combat;const Ut=d.attributes.insight.current+2,Ce=G.useMemo(()=>{if(!e)return{currentRank:[],nextRank:[]};const A=Jr.indexOf(d.rank),F=e.Moves.filter(X=>{const te=Jr.indexOf(X.Learned);return te!==-1&&te<=A}),B=e.Moves.filter(X=>Jr.indexOf(X.Learned)===A+1);return{currentRank:F,nextRank:B}},[e,d.rank]),Be=G.useMemo(()=>c?Object.keys(c).sort():[],[c]);return l.jsxs("div",{className:"fixed inset-0 z-50 bg-[#e74c3c] overflow-y-auto animate-fade-in custom-scrollbar",children:[l.jsxs("div",{className:"sticky top-0 z-50 bg-[#c0392b] p-4 shadow-md flex justify-between items-center text-white",children:[l.jsxs("button",{onClick:()=>{R(),i()},className:"flex items-center gap-2 hover:bg-white/20 px-3 py-1 rounded-full transition-colors",children:[l.jsx(vi,{})," ",u.close]}),l.jsx("h1",{className:"text-xl font-bold uppercase tracking-widest hidden md:block",children:u.pokemonSheet}),l.jsxs("button",{onClick:v,className:`flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg border transition-all ${m?"bg-slate-800 border-slate-600 hover:bg-slate-700 text-white":"bg-yellow-400 border-yellow-500 hover:bg-yellow-300 text-slate-900"}`,children:[m?l.jsx(Xk,{size:18}):l.jsx(lb,{size:18}),l.jsx("span",{className:"font-bold",children:m?"Game Mode":"Edit Mode"})]})]}),l.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-center bg-slate-800/20 p-6 rounded-3xl border-4 border-slate-800/30",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`w-32 h-32 rounded-full ${I} border-4 border-white shadow-xl flex items-center justify-center overflow-hidden bg-white`,children:l.jsx("img",{src:d.image,alt:d.nickname,className:"w-24 h-24 object-contain"})}),l.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-slate-800 text-white text-xs font-bold px-2 py-1 rounded-lg border-2 border-white",children:["#",d.dexId]})]}),l.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[l.jsx("input",{type:"text",value:d.nickname,readOnly:m,onChange:A=>ct("nickname",A.target.value),className:`text-4xl md:text-5xl font-black text-white bg-transparent border-b-4 focus:border-white outline-none w-full mb-2 placeholder-white/50 ${m?"border-transparent cursor-default":"border-white/20"}`,placeholder:u.nickname}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-2",children:[l.jsx("span",{className:"text-xl text-white font-bold opacity-80",children:d.speciesName}),l.jsx("div",{className:"h-6 w-px bg-white/40 hidden md:block"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Ur,{type:d.type1,language:o}),d.type2&&l.jsx(Ur,{type:d.type2,language:o})]}),l.jsx("div",{className:"ml-0 md:ml-4 bg-black/20 rounded-lg p-2 border border-white/10",children:l.jsxs("div",{className:"flex items-center gap-4 px-2 py-1",children:[l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 uppercase tracking-wider",children:"Win"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>pt("victories",-1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(Un,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:d.victories||0}),l.jsx("button",{onClick:()=>pt("victories",1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(Qt,{size:14})})]})]}),l.jsx("div",{className:"w-px h-8 bg-white/20"}),l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-white/60 uppercase tracking-wider",children:"Fight"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>pt("battles",-1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(Un,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:d.battles||0}),l.jsx("button",{onClick:()=>pt("battles",1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(Qt,{size:14})})]})]})]})}),e&&l.jsxs("div",{className:"bg-indigo-900/80 p-3 rounded-2xl border-4 border-indigo-800 shadow-md",children:[l.jsxs("h3",{className:"text-indigo-100 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[l.jsx(bv,{className:"w-4 h-4 text-yellow-400"})," ",u.abilities]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.Ability1&&l.jsxs("button",{onClick:()=>se(e.Ability1),className:"flex-1 min-w-[100px] px-3 py-2 bg-indigo-100 hover:bg-white text-indigo-900 rounded-lg font-bold text-xs transition-colors shadow-sm border border-indigo-200 text-left flex flex-col",children:[l.jsx("span",{className:"text-[9px] uppercase opacity-60 tracking-wider",children:u.primary}),l.jsx("span",{className:"truncate",children:ls(e.Ability1,o)})]}),e.Ability2&&l.jsxs("button",{onClick:()=>se(e.Ability2),className:"flex-1 min-w-[100px] px-3 py-2 bg-indigo-100 hover:bg-white text-indigo-900 rounded-lg font-bold text-xs transition-colors shadow-sm border border-indigo-200 text-left flex flex-col",children:[l.jsx("span",{className:"text-[9px] uppercase opacity-60 tracking-wider",children:u.secondary}),l.jsx("span",{className:"truncate",children:ls(e.Ability2,o)})]}),e.HiddenAbility&&l.jsxs("button",{onClick:()=>se(e.HiddenAbility),className:"flex-1 min-w-[100px] px-3 py-2 bg-purple-100 hover:bg-white text-purple-900 rounded-lg font-bold text-xs transition-colors shadow-sm border border-purple-200 text-left flex flex-col",children:[l.jsx("span",{className:"text-[9px] uppercase opacity-60 tracking-wider",children:u.hidden}),l.jsx("span",{className:"truncate",children:ls(e.HiddenAbility,o)})]})]})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"bg-red-900/80 p-4 rounded-3xl border-4 border-red-800 shadow-lg",children:[l.jsx(V,{label:u.strength,current:d.attributes.strength.current,max:d.attributes.strength.max,onChangeCurrent:A=>Vt("strength","current",A)}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-red-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(Cd,{size:12})," ",u.sheet.fight]}),l.jsx(Q,{label:u.sheet.brawl,value:d.skills.fight.brawl,onChange:A=>Ke("fight","brawl",A)}),l.jsx(Q,{label:u.sheet.channel,value:d.skills.fight.channel,onChange:A=>Ke("fight","channel",A)}),l.jsx(Q,{label:u.sheet.clash,value:d.skills.fight.clash,onChange:A=>Ke("fight","clash",A)}),l.jsx(Q,{label:u.sheet.evasion,value:d.skills.fight.evasion,onChange:A=>Ke("fight","evasion",A)})]})]}),l.jsxs("div",{className:"bg-green-900/80 p-4 rounded-3xl border-4 border-green-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(V,{label:u.dexterity,current:d.attributes.dexterity.current,max:d.attributes.dexterity.max,onChangeCurrent:A=>Vt("dexterity","current",A)}),l.jsx(V,{label:u.vitality,current:d.attributes.vitality.current,max:d.attributes.vitality.max,onChangeCurrent:A=>Vt("vitality","current",A)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-green-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(yv,{size:12})," ",u.sheet.survival]}),l.jsx(Q,{label:u.sheet.alert,value:d.skills.survival.alert,onChange:A=>Ke("survival","alert",A)}),l.jsx(Q,{label:u.sheet.athletic,value:d.skills.survival.athletic,onChange:A=>Ke("survival","athletic",A)}),l.jsx(Q,{label:u.sheet.nature,value:d.skills.survival.nature,onChange:A=>Ke("survival","nature",A)}),l.jsx(Q,{label:u.sheet.stealth,value:d.skills.survival.stealth,onChange:A=>Ke("survival","stealth",A)})]})]}),l.jsxs("div",{className:"bg-purple-900/80 p-4 rounded-3xl border-4 border-purple-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(V,{label:u.special,current:d.attributes.special.current,max:d.attributes.special.max,onChangeCurrent:A=>Vt("special","current",A)}),l.jsx(V,{label:u.insight,current:d.attributes.insight.current,max:d.attributes.insight.max,onChangeCurrent:A=>Vt("insight","current",A)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-purple-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(vv,{size:12})," ",u.sheet.social]}),l.jsx(Q,{label:u.sheet.allure,value:d.skills.social.allure,onChange:A=>Ke("social","allure",A)}),l.jsx(Q,{label:u.sheet.etiquette,value:d.skills.social.etiquette,onChange:A=>Ke("social","etiquette",A)}),l.jsx(Q,{label:u.sheet.intimidate,value:d.skills.social.intimidate,onChange:A=>Ke("social","intimidate",A)}),l.jsx(Q,{label:u.sheet.perform,value:d.skills.social.perform,onChange:A=>Ke("social","perform",A)})]})]})]}),l.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-4",children:[l.jsxs("div",{children:[l.jsx(ne,{label:u.sheet.hp,current:d.hp.current,max:d.hp.max,onChangeCurrent:A=>j("hp","current",A),Icon:Nd,activeColor:"text-red-500 fill-red-500"}),l.jsx(ne,{label:u.sheet.will,current:d.will.current,max:d.will.max,onChangeCurrent:A=>j("will","current",A),Icon:Td,activeColor:"text-blue-500 fill-blue-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(he,{label:u.sheet.initiative,value:Ie,isReadOnly:!0,onAction:()=>ke(),ActionIcon:yn}),l.jsx(he,{label:u.sheet.def,value:`${Ne}/${Re}`,isReadOnly:!0,onAction:et,ActionIcon:kv})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(he,{label:u.sheet.evasion,value:mt,isReadOnly:!0,onAction:ft,ActionIcon:yn}),l.jsx(he,{label:u.sheet.clash,value:hn,isReadOnly:!0,onAction:Le,ActionIcon:yn})]})]}),l.jsxs("div",{className:"bg-slate-800 rounded-3xl border-4 border-slate-700 p-4 flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-white font-bold uppercase flex items-center gap-2",children:[l.jsx(gc,{className:"text-yellow-400"})," ",u.moveset]}),l.jsxs("span",{className:"text-xs font-mono text-slate-400",children:[d.moves.length,"/",Ut]})]}),l.jsx("div",{className:"space-y-2",children:Array.from({length:Ut}).map((A,F)=>{const B=d.moves[F];return B?l.jsxs("button",{onClick:()=>{var X;if(m){if(n){const te=n[B]||((X=Object.entries(n).find(([me])=>me.toLowerCase()===B.toLowerCase()))==null?void 0:X[1]);te&&E({name:B,path:te})}}else ce(B,"")},className:"w-full bg-white rounded-xl p-3 flex justify-between items-center shadow-md hover:scale-[1.01] active:scale-95 transition-all text-left group",children:[l.jsx("span",{className:"font-bold text-slate-800",children:Ho(B,o)}),m?l.jsx(yn,{className:"text-slate-300 group-hover:text-blue-500 transition-colors",size:20}):l.jsx(Un,{className:"text-red-500",size:20})]},F):l.jsx("div",{className:"w-full bg-slate-700/50 rounded-xl p-3 flex justify-center items-center border-2 border-dashed border-slate-600",children:l.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:"Empty Slot"})},F)})}),!m&&e&&l.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[l.jsxs("h4",{className:"text-white/60 font-bold uppercase text-xs mb-3",children:["Learnable Moves (Current Rank: ",d.rank,")"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ce.currentRank.map(A=>{const F=d.moves.includes(A.Name);return l.jsx("button",{onClick:()=>ce(A.Name,A.Learned),disabled:F,className:`p-2 rounded-lg text-xs font-bold uppercase border transition-all ${F?"bg-green-500 border-green-500 text-white opacity-50 cursor-not-allowed":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:Ho(A.Name,o)},A.Name)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-slate-100 rounded-3xl p-4 border-4 border-slate-300",children:[l.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[l.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:u.sheet.nature})}),m?l.jsx("div",{className:"w-full px-2 py-1 text-slate-800 font-bold bg-slate-100 cursor-default min-h-[32px] flex items-center",children:d.nature||"-"}):l.jsxs("select",{value:d.nature,onChange:A=>ct("nature",A.target.value),className:"w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none bg-blue-50 focus:bg-white",children:[l.jsx("option",{value:"",children:"- Select -"}),Be.map(A=>l.jsx("option",{value:A,children:A},A))]})]}),l.jsx(U,{label:u.sheet.confidence,value:d.confidence,onChange:A=>ct("confidence",A)}),l.jsx(U,{label:u.sheet.item,value:d.item,onChange:A=>ct("item",A)}),l.jsxs("div",{className:"bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm",children:[l.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:u.sheet.status})}),l.jsx("select",{value:d.status,onChange:A=>ct("status",A.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none ${m?"bg-white cursor-pointer":"bg-blue-50"}`,children:oC.map(A=>l.jsx("option",{value:A,children:u.sheet.statuses[A]||A},A))})]})]}),l.jsxs("div",{className:"bg-pink-100 rounded-3xl p-4 border-4 border-pink-300 flex flex-col",children:[l.jsx("h4",{className:"text-pink-400 font-bold uppercase text-center text-xs mb-3 tracking-widest",children:"Contest"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx($,{label:u.sheet.cool,value:d.contest.cool,onChange:A=>ee("cool",A)}),l.jsx($,{label:u.sheet.beauty,value:d.contest.beauty,onChange:A=>ee("beauty",A)}),l.jsx($,{label:u.sheet.cute,value:d.contest.cute,onChange:A=>ee("cute",A)}),l.jsx($,{label:u.sheet.clever,value:d.contest.clever,onChange:A=>ee("clever",A)}),l.jsx($,{label:u.sheet.tough,value:d.contest.tough,onChange:A=>ee("tough",A)})]})]})]})]})]}),w&&l.jsx(F_,{abilityName:w.name,filePath:w.path,onClose:()=>S(null),language:o}),M&&l.jsx(O_,{moveName:M.name,filePath:M.path,onClose:()=>E(null),language:o,onRoll:oe}),C&&l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Choose Attribute"}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:C.options.map(A=>l.jsx("button",{onClick:()=>ye(A,C.modifier.replace("+","").trim(),C.moveData),className:"w-full py-4 bg-slate-100 dark:bg-slate-800 hover:bg-blue-500 dark:hover:bg-blue-600 hover:text-white rounded-xl font-bold text-lg transition-colors border-2 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-200",children:A},A))}),l.jsx("button",{onClick:()=>z(null),className:"mt-4 text-slate-400 font-bold",children:"Cancel"})]})}),L.isOpen&&l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>_(A=>({...A,isOpen:!1})),children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center shadow-2xl",onClick:A=>A.stopPropagation(),children:[l.jsx("h3",{className:"text-2xl font-black text-slate-800 dark:text-white mb-6 uppercase tracking-tight",children:u.sheet.damageReception}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:u.sheet.damageInflicted}),l.jsx("input",{type:"number",autoFocus:!0,value:L.damage,onChange:A=>_(F=>({...F,damage:A.target.value})),className:"w-full text-center text-4xl font-black bg-slate-100 dark:bg-slate-800 rounded-xl py-4 text-slate-800 dark:text-white outline-none focus:ring-4 focus:ring-red-500 transition-all",placeholder:"0"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[l.jsxs("button",{onClick:()=>_(A=>({...A,type:"physical"})),className:`py-3 rounded-xl font-bold text-sm transition-all border-2 ${L.type==="physical"?"bg-orange-500 border-orange-500 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 hover:border-orange-300"}`,children:[u.sheet.physical,l.jsxs("span",{className:"block text-xs opacity-80 font-normal mt-1",children:["Def: ",d.attributes.vitality.current]})]}),l.jsxs("button",{onClick:()=>_(A=>({...A,type:"special"})),className:`py-3 rounded-xl font-bold text-sm transition-all border-2 ${L.type==="special"?"bg-purple-500 border-purple-500 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 hover:border-purple-300"}`,children:[u.sheet.special,l.jsxs("span",{className:"block text-xs opacity-80 font-normal mt-1",children:["S.Def: ",d.attributes.insight.current]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 mb-6 border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:u.sheet.damageTaken}),l.jsx("span",{className:"text-2xl font-black text-red-500",children:Math.max(0,(parseInt(L.damage)||0)-(L.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current))})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:u.sheet.newHp}),l.jsxs("span",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[Math.max(0,d.hp.current-Math.max(0,(parseInt(L.damage)||0)-(L.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current)))," / ",d.hp.max]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>_(A=>({...A,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",children:u.cancel}),l.jsx("button",{onClick:tt,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors",children:u.apply})]})]})}),T.isOpen&&l.jsx("div",{className:"fixed inset-0 z-[110] bg-black/80 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in p-4",onClick:()=>{T.step==="result"&&P(A=>({...A,isOpen:!1}))},children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[3rem] p-8 md:p-12 w-full max-w-2xl text-center shadow-2xl relative overflow-hidden",onClick:A=>A.stopPropagation(),children:[l.jsx("button",{onClick:()=>P(A=>({...A,isOpen:!1})),className:"absolute top-6 right-6 p-2 bg-slate-100 dark:bg-slate-800 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-800 dark:text-white",children:l.jsx(tr,{size:24})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-4xl font-black text-slate-800 dark:text-white uppercase tracking-tighter mb-2",children:[T.statName," Check"]}),l.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 dark:bg-slate-800 px-4 py-2 rounded-full font-bold text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:T.statValue}),T.selectedSkillName&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"+"}),l.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[T.selectedSkillName," (",T.selectedSkillValue,")"]})]})]})]}),T.step==="setup"&&l.jsxs("div",{className:"animate-fade-in",children:[T.mode==="attribute"&&l.jsxs("div",{className:"mb-8",children:[l.jsx("p",{className:"text-slate-400 font-bold uppercase text-sm mb-4",children:"Add a Skill?"}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-h-48 overflow-y-auto custom-scrollbar p-2",children:Object.entries(d.skills).flatMap(([A,F])=>Object.entries(F).map(([B,X])=>l.jsxs("button",{onClick:()=>Me(B,X),className:`px-4 py-2 rounded-lg font-bold border-2 transition-all capitalize ${T.selectedSkillName===B?"bg-purple-600 border-purple-600 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-purple-300 dark:hover:border-purple-500"}`,children:[B," (",X,")"]},B)))})]}),l.jsxs("button",{onClick:K,className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-black text-2xl shadow-xl hover:scale-[1.02] transition-transform flex items-center justify-center gap-3",children:[l.jsx(yn,{size:32})," ROLL ",T.statValue+T.selectedSkillValue," DICE"]})]}),T.step==="rolling"&&l.jsx("div",{className:"flex flex-wrap justify-center gap-4 py-8",children:T.results.map((A,F)=>l.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-xl flex items-center justify-center text-white text-3xl font-black animate-pulse",children:A},F))}),T.step==="result"&&l.jsxs("div",{className:"animate-scale-up",children:[l.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:T.results.map((A,F)=>l.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center text-2xl font-black border-4 ${A>=4?"bg-green-500 border-green-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-400 dark:text-slate-500"}`,children:A},F))}),T.mode==="initiative"?l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-4 border-yellow-200 dark:border-yellow-700 rounded-2xl p-6",children:[l.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Total Initiative"}),l.jsx("span",{className:"text-6xl font-black text-yellow-500",children:T.total})]}):l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-4 border-green-200 dark:border-green-700 rounded-2xl p-6",children:[l.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Successes"}),l.jsx("span",{className:"text-6xl font-black text-green-600",children:T.successes})]}),l.jsxs("div",{className:"flex gap-4 mt-6",children:[l.jsx("button",{onClick:()=>P(A=>({...A,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Done"}),T.mode==="move"&&T.activeMove&&T.activeMove.damagePool&&l.jsxs("button",{onClick:ge,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors flex items-center justify-center gap-2",children:[l.jsx(Cd,{size:20})," Roll Damage"]})]})]})]})})]})]})},EC=({onBack:t,allPokemon:e,language:n,natureMap:r,moveFileMap:s,abilityFileMap:i,party:o,setParty:c,pcBoxes:u,setPcBoxes:d,onSave:p,onLoad:m})=>{const x=Mn[n],{user:I}=Pc(),[T,P]=G.useState(0),[M,E]=G.useState(!1),[w,S]=G.useState(null),[C,z]=G.useState(null),[L,_]=G.useState(null),[g,k]=G.useState(null),[b,N]=G.useState(null),R=G.useRef(null),v=G.useRef(!1),[se,ce]=G.useState(""),[qe,Me]=G.useState(""),K=(V,$)=>{const{source:Q,boxIndex:U,slotIndex:ne}=V,{source:he,boxIndex:Ie,slotIndex:Ne}=$;if(Q===he&&U===Ie&&ne===Ne)return;let Re=null;if(Q==="party"?Re=o[ne]:Re=u[U][ne],!Re)return;let mt=null;he==="party"?mt=o[Ne]:mt=u[Ie][Ne];const hn=[...o],Ut=[...u],Ce=(Be,A,F,B)=>{Be==="party"?hn[F]=B:(Ut[A]===u[A]&&(Ut[A]=[...u[A]]),Ut[A][F]=B)};Ce(Q,U,ne,null),Ce(he,Ie,Ne,Re),mt&&Ce(Q,U,ne,mt),c(hn),d(Ut)},J=(V,$,Q,U)=>{k({source:$,boxIndex:Q,slotIndex:U}),V.dataTransfer.effectAllowed="move"},oe=V=>{V.preventDefault(),V.dataTransfer.dropEffect="move"},ye=(V,$,Q,U)=>{V.preventDefault(),g&&(K(g,{source:$,boxIndex:Q,slotIndex:U}),k(null))},ge=(V,$,Q)=>{v.current=!1,R.current=setTimeout(()=>{(V==="party"?o[Q]:u[$][Q])&&(N({source:V,boxIndex:$,slotIndex:Q}),v.current=!0,navigator.vibrate&&navigator.vibrate(50))},2e3)},ke=()=>{R.current&&(clearTimeout(R.current),R.current=null)},et=(V,$)=>{if(v.current){v.current=!1;return}if(b){K(b,{source:V===-1?"party":"pc",boxIndex:V,slotIndex:$}),N(null);return}const Q=V===-1?o[$]:u[V][$];Q===null?(S({boxIndex:V,slotIndex:$}),E(!0),ce(""),Me("")):(_({boxIndex:V,slotIndex:$}),z(Q))},tt=V=>{var $,Q,U,ne;return{id:crypto.randomUUID(),dexId:V.Number,nickname:V.Name,speciesName:V.Name,type1:V.Type1,type2:V.Type2,rank:V.RecommendedRank||"Starter",attributes:{strength:{current:V.Strength,max:V.MaxStrength},dexterity:{current:V.Dexterity,max:V.MaxDexterity},vitality:{current:V.Vitality,max:V.MaxVitality},special:{current:V.Special,max:V.MaxSpecial},insight:{current:V.Insight,max:V.MaxInsight}},skills:{fight:{brawl:0,channel:0,clash:0,evasion:0},survival:{alert:0,athletic:0,nature:0,stealth:0},social:{allure:0,etiquette:0,intimidate:0,perform:0}},hp:{current:V.BaseHP,max:V.BaseHP},will:{current:V.Insight+2,max:V.Insight+2},moves:[],nature:"",confidence:"",happiness:2,loyalty:2,battles:0,victories:0,item:"",status:"Neutral",accessory:"",contest:{tough:1,cool:1,beauty:1,cute:1,clever:1},combat:{accuracy:0,damage:0},size:((Q=($=V.Height)==null?void 0:$.Meters)==null?void 0:Q.toString())||"0",weight:((ne=(U=V.Weight)==null?void 0:U.Kilograms)==null?void 0:ne.toString())||"0",image:M_(V)}},ft=V=>{if(w){const $=tt(V),{boxIndex:Q,slotIndex:U}=w;if(Q===-1){const ne=[...o];ne[U]=$,c(ne)}else{const ne=[...u],he=[...ne[Q]];he[U]=$,ne[Q]=he,d(ne)}E(!1),S(null)}},Le=(V,$,Q)=>{if(V.stopPropagation(),$===-1){const U=[...o];U[Q]=null,c(U)}else{const U=[...u],ne=[...U[$]];ne[Q]=null,U[$]=ne,d(U)}},Vt=V=>{if(L){const{boxIndex:$,slotIndex:Q}=L;if($===-1){const U=[...o];U[Q]=V,c(U)}else{const U=[...u],ne=[...U[$]];ne[Q]=V,U[$]=ne,d(U)}}},Ke=()=>P(V=>(V+1)%20),ct=()=>P(V=>(V-1+20)%20),pt=()=>{Me(se)},j=V=>{V.key==="Enter"&&pt()},ee=e.filter(V=>qe.trim()?V.Name.toLowerCase().includes(qe.toLowerCase()):!0).sort((V,$)=>{if(!qe.trim())return V.Number-$.Number;const Q=qe.toLowerCase(),U=V.Name.toLowerCase(),ne=$.Name.toLowerCase();if(U===Q&&ne!==Q)return-1;if(ne===Q&&U!==Q)return 1;const he=U.startsWith(Q),Ie=ne.startsWith(Q);return he&&!Ie?-1:!he&&Ie?1:U.length!==ne.length?U.length-ne.length:U.localeCompare(ne)}).slice(0,50);return l.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen pb-32",children:[l.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:l.jsx(vi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:x.party})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[I&&l.jsxs("div",{className:"flex gap-2 mr-2",children:[l.jsx("button",{onClick:p,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Salva su Cloud",children:l.jsx(wv,{size:20})}),l.jsx("button",{onClick:m,className:"p-2 bg-slate-600 hover:bg-slate-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Ricarica da Cloud",children:l.jsx(Wk,{size:20})})]}),l.jsx("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-3 py-1.5 rounded-full shadow-sm border border-slate-200 dark:border-slate-700 opacity-80",children:I?l.jsx(Gk,{className:"text-green-500",size:16}):l.jsx(Hk,{className:"text-slate-400",size:16})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:o.map((V,$)=>l.jsx("div",{className:"relative",onDragOver:oe,onDrop:Q=>ye(Q,"party",-1,$),onTouchStart:()=>ge("party",-1,$),onTouchEnd:ke,onTouchMove:ke,children:V?l.jsxs("div",{draggable:!0,onDragStart:Q=>J(Q,"party",-1,$),onClick:()=>et(-1,$),className:`relative h-40 rounded-3xl p-5 shadow-lg overflow-hidden ${zr(V.type1)} group cursor-grab active:cursor-grabbing transform hover:scale-[1.02] transition-all ${(b==null?void 0:b.source)==="party"&&b.slotIndex===$?"ring-4 ring-yellow-400 scale-95 z-50":""}`,children:[l.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:l.jsx(eh,{})}),l.jsxs("div",{className:"flex justify-between h-full relative z-10 pointer-events-none",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:V.nickname}),V.nickname!==V.speciesName&&l.jsx("span",{className:"text-white/70 text-xs font-bold uppercase",children:V.speciesName}),l.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[l.jsx(Ur,{type:V.type1,language:n}),V.type2&&l.jsx(Ur,{type:V.type2,language:n})]})]}),l.jsxs("div",{className:"flex flex-col items-end justify-between",children:[l.jsx("div",{className:"bg-black/20 px-2 py-1 rounded-lg",children:l.jsxs("span",{className:"text-white font-mono text-sm",children:["HP ",V.hp.current,"/",V.hp.max]})}),l.jsx("img",{loading:"lazy",src:V.image,alt:V.nickname,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg"})]})]}),l.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity z-20 pointer-events-none",children:l.jsxs("div",{className:"bg-white/20 backdrop-blur-md px-4 py-2 rounded-full flex items-center gap-2",children:[l.jsx(nb,{className:"text-white",size:20}),l.jsx("span",{className:"text-white font-bold",children:"Edit Sheet"})]})}),l.jsx("button",{onClick:Q=>Le(Q,-1,$),className:"absolute top-3 right-3 p-2 bg-black/20 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all duration-200 z-30 pointer-events-auto",title:x.removeFromParty,children:l.jsx(Gm,{size:16})})]}):l.jsxs("div",{onClick:()=>et(-1,$),className:`h-40 rounded-3xl border-4 border-dashed border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/30 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 hover:border-slate-400 dark:hover:border-slate-600 transition-all duration-200 group ${(b==null?void 0:b.source)==="party"&&b.slotIndex===$?"ring-4 ring-yellow-400":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:l.jsx(Qt,{size:24})}),l.jsx("span",{className:"font-bold text-lg",children:x.emptySlot})]})},$))}),l.jsxs("div",{className:"mt-8 border-t-2 border-slate-200 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(tb,{className:"text-slate-500 dark:text-slate-400",size:32}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:x.pc})]}),l.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-2 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:ct,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:l.jsx(Bk,{})}),l.jsxs("div",{className:"flex flex-col items-center w-32",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:x.box}),l.jsx("div",{className:"relative",children:l.jsx("select",{value:T,onChange:V=>P(parseInt(V.target.value)),className:"appearance-none bg-transparent font-black text-xl text-center outline-none cursor-pointer text-slate-800 dark:text-white w-full z-10 relative",children:Array.from({length:20}).map((V,$)=>l.jsx("option",{value:$,className:"text-slate-800",children:$+1},$))})})]}),l.jsx("button",{onClick:Ke,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:l.jsx($k,{})})]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-900/50 p-4 rounded-3xl border-4 border-slate-300 dark:border-slate-800",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:u[T].map((V,$)=>l.jsx("div",{className:"aspect-square relative group",onDragOver:oe,onDrop:Q=>ye(Q,"pc",T,$),onTouchStart:()=>ge("pc",T,$),onTouchEnd:ke,onTouchMove:ke,children:V?l.jsxs("div",{draggable:!0,onDragStart:Q=>J(Q,"pc",T,$),onClick:()=>et(T,$),className:`w-full h-full rounded-xl shadow-md overflow-hidden ${zr(V.type1)} cursor-grab active:cursor-grabbing transition-transform hover:scale-105 border-2 border-white/20 ${(b==null?void 0:b.source)==="pc"&&b.boxIndex===T&&b.slotIndex===$?"ring-4 ring-yellow-400 scale-95 z-50":""}`,children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none",children:l.jsx(eh,{})}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 pointer-events-none",children:[l.jsx("img",{src:V.image,alt:V.nickname,className:"w-16 h-16 object-contain drop-shadow-md mb-1"}),l.jsx("span",{className:"text-[10px] font-bold text-white uppercase truncate w-full text-center bg-black/20 rounded px-1",children:V.nickname})]}),l.jsx("button",{onClick:Q=>Le(Q,T,$),className:"absolute top-1 right-1 p-1 bg-black/40 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all z-10 pointer-events-auto",title:x.removeFromParty,children:l.jsx(Gm,{size:12})})]}):l.jsx("div",{onClick:()=>et(T,$),className:`w-full h-full rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-white/50 dark:bg-slate-800/50 flex flex-col items-center justify-center text-slate-400 hover:bg-white hover:border-slate-400 transition-colors cursor-pointer ${(b==null?void 0:b.source)==="pc"&&b.boxIndex===T&&b.slotIndex===$?"ring-4 ring-yellow-400":""}`,children:l.jsx(Qt,{size:20,className:"opacity-50"})})},$))})})]}),M&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl flex flex-col max-h-[80vh] animate-scale-up",children:[l.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:x.selectPokemon}),l.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500",children:l.jsx(tr,{size:24})})]}),l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(jo,{className:"absolute left-3 top-3 text-slate-400",size:20}),l.jsx("input",{type:"text",autoFocus:!0,placeholder:x.searchPlaceholder,value:se,onChange:V=>ce(V.target.value),onKeyDown:j,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),l.jsx("button",{onClick:pt,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition-colors shadow-lg",children:l.jsx(jo,{size:24})})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[ee.map(V=>l.jsxs("button",{onClick:()=>ft(V),className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-700 text-left",children:[l.jsx("img",{src:$f(V),alt:V.Name,className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-slate-800 dark:text-white",children:V.Name}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["#",V.Number]})]})]},`${V.Number}-${V.Name}`)),ee.length===0&&l.jsx("div",{className:"col-span-full text-center py-8 text-slate-400",children:x.noResults})]})})]})}),C&&l.jsx(z_,{character:C,baseData:e.find(V=>V.Number===C.dexId),moveFileMap:s,abilityFileMap:i,language:n,onSave:Vt,onClose:()=>{z(null),_(null)},natureMap:r})]})},SC=({items:t,onBack:e,language:n})=>{const r=Mn[n],[s,i]=G.useState(""),[o,c]=G.useState(null),[u,d]=G.useState(!1),[p,m]=G.useState({}),x=["Name","Description","Image","_id"],I=["Name","Description","Effect","Cost","_id","Image","Type"],T=["Boost","Category","Cures","ForTypes","ForTipes","Pocket"],P=G.useMemo(()=>{const C=new Map;return t.forEach(z=>{Object.keys(z).forEach(L=>{if(x.includes(L))return;const _=z[L];if(_==null||_==="")return;if(!C.has(L)){let k="string";T.includes(L)?k="select":typeof _=="boolean"&&(k="boolean"),C.set(L,{type:k,options:new Set})}const g=C.get(L);g.type==="select"&&g.options.add(String(_))})}),Array.from(C.entries()).sort((z,L)=>z[0].localeCompare(L[0])).map(([z,L])=>({key:z,type:L.type,options:Array.from(L.options).sort()}))},[t]),M=G.useMemo(()=>t.filter(C=>{if(s&&!C.Name.toLowerCase().includes(s.toLowerCase()))return!1;for(const[z,L]of Object.entries(p)){if(L===""||L===!1||L===null)continue;const _=C[z];if(_==null)return!1;if(typeof L=="boolean"){if(_!==!0)return!1}else if(T.includes(z)){if(String(_)!==String(L))return!1}else{const g=String(_).toLowerCase(),k=String(L).toLowerCase();if(!g.includes(k))return!1}}return!0}),[t,s,p]),E=(C,z)=>{m(L=>({...L,[C]:z}))},w=()=>{i(""),m({})},S=Object.values(p).filter(C=>C!==""&&C!==!1&&C!==null).length;return l.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto min-h-screen pb-20",children:[l.jsx("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300 -mx-4 px-4 pt-4 pb-4 mb-6",children:l.jsxs("div",{className:"flex flex-col gap-4 max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:l.jsx(vi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),l.jsxs("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(Vl,{className:"text-green-500"}),r.sheet.item,"s"]})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("div",{className:"relative w-full md:w-80",children:[l.jsx(jo,{className:"absolute left-3 top-3 text-slate-400",size:20}),l.jsx("input",{type:"text",placeholder:r.searchPlaceholder,value:s,onChange:C=>i(C.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm"})]}),l.jsxs("button",{onClick:()=>d(!u),className:`p-3 rounded-xl border transition-all flex items-center gap-2 font-bold ${u||S>0?"bg-green-500 border-green-500 text-white shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50"}`,children:[u?l.jsx(tr,{size:20}):l.jsx(Id,{size:20}),l.jsx("span",{className:"hidden md:inline",children:r.filters}),S>0&&l.jsx("span",{className:"bg-white text-green-600 text-[10px] px-1.5 py-0.5 rounded-full min-w-[20px] text-center",children:S})]})]})]}),u&&l.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 shadow-lg animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-slate-100 dark:border-slate-800",children:[l.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 uppercase text-sm tracking-wider",children:"Advanced Filters"}),l.jsxs("button",{onClick:w,className:"text-xs font-bold text-red-500 hover:text-red-600 flex items-center gap-1 uppercase",children:[l.jsx(_v,{size:12})," ",r.clear]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar p-1",children:P.map(({key:C,type:z,options:L})=>l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate",title:C,children:C}),z==="select"?l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:p[C]||"",onChange:_=>E(C,_.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",children:[l.jsx("option",{value:"",children:"Any"}),L.map(_=>l.jsx("option",{value:_,children:_},_))]}),l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",children:l.jsx(Id,{size:12})})]}):z==="boolean"?l.jsxs("button",{onClick:()=>E(C,!p[C]),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-bold transition-all ${p[C]?"bg-green-500 border-green-500 text-white":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-400"}`,children:[p[C]?l.jsx(Bm,{size:16}):l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-300"}),p[C]?"Yes":"No / Any"]}):l.jsx("input",{type:"text",placeholder:`Filter ${C}...`,value:p[C]||"",onChange:_=>E(C,_.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]},C))})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map((C,z)=>l.jsxs("div",{onClick:()=>c(o===C?null:C),className:`bg-white dark:bg-slate-800 rounded-2xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md ${o===C?"border-green-500 ring-2 ring-green-500/20":"border-slate-200 dark:border-slate-700 hover:border-green-300 dark:hover:border-green-700"}`,children:[l.jsxs("div",{className:"flex items-start gap-4 mb-2",children:[l.jsx("div",{className:"w-14 h-14 bg-slate-100 dark:bg-slate-900 rounded-xl p-1 border border-slate-200 dark:border-slate-700 flex items-center justify-center shrink-0",children:l.jsx("img",{src:Jd(C),alt:C.Name,className:"w-full h-full object-contain",onError:L=>{L.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",L.target.style.opacity="0.3"}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight mb-1",children:C.Name}),C.Type&&l.jsxs("span",{className:"inline-flex text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-0.5 rounded-full items-center gap-1",children:[l.jsx(ob,{size:10})," ",C.Type]})]})]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-2 mt-2",children:C.Description}),o===C&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700 animate-fade-in space-y-3",children:[l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-200",children:C.Description}),C.Effect&&l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30",children:[l.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 uppercase block mb-1",children:"Effect"}),l.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200",children:C.Effect})]}),C.Cost!==void 0&&l.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400 font-bold text-sm bg-yellow-50 dark:bg-yellow-900/10 px-3 py-2 rounded-lg w-max",children:[l.jsx(gv,{size:16}),l.jsxs("span",{children:[C.Cost," "]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg",children:Object.entries(C).map(([L,_])=>{if(I.includes(L)||_==null||_==="")return null;let g=_;return typeof _=="boolean"&&(g=_?l.jsx(Bm,{size:14,className:"text-green-500"}):l.jsx(ub,{size:14,className:"text-red-500"})),typeof _=="object"?null:l.jsxs("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-700/50 last:border-0 pb-1 last:pb-0",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:L}),l.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1",children:g})]},L)})})]})]},z))}),M.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[l.jsx(mc,{size:48,className:"mb-4"}),l.jsx("p",{className:"text-xl",children:r.noResults}),(s||S>0)&&l.jsxs("button",{onClick:w,className:"mt-4 text-green-500 font-bold hover:underline",children:[r.clear," Filters"]})]})]})},TC="https://api.github.com/repos/Pokerole-Software-Development/Pokerole-Data/git/trees/master?recursive=1",n0="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/";function IC(){return l.jsx(rC,{children:l.jsx(NC,{})})}function NC(){const{user:t}=Pc(),[e,n]=G.useState("home"),[r,s]=G.useState("regions"),[i,o]=G.useState("home"),[c,u]=G.useState("National"),[d,p]=G.useState(null),[m,x]=G.useState(0),[I,T]=G.useState([]),[P,M]=G.useState([]),[E,w]=G.useState(Array(6).fill(null)),[S,C]=G.useState(Array(20).fill(null).map(()=>Array(30).fill(null))),[z,L]=G.useState(eo()),[_,g]=G.useState(!1),[k,b]=G.useState(null),[N,R]=G.useState({}),[v,se]=G.useState({}),[ce,qe]=G.useState({}),[Me,K]=G.useState(!0),[J,oe]=G.useState(0),[ye,ge]=G.useState(0),[ke,et]=G.useState(null),[tt,ft]=G.useState(()=>{if(typeof window<"u"){const U=localStorage.getItem("theme");return U==="dark"||!U&&window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[Le,Vt]=G.useState("en"),Ke=()=>{ft(U=>!U)};G.useEffect(()=>{const U=document.documentElement;tt?(U.classList.add("dark"),localStorage.setItem("theme","dark")):(U.classList.remove("dark"),localStorage.setItem("theme","light"))},[tt]),G.useEffect(()=>{(async()=>{try{const ne=await fetch(TC);if(!ne.ok)throw new Error("GitHub API request failed. Limit might be reached.");const he=await ne.json(),Ie=[],Ne=[],Re={},mt={},hn={};he.tree.forEach(F=>{if(F.type==="blob"){if(F.path.includes("v2.0/Pokedex")&&F.path.endsWith(".json")&&Ie.push(F),F.path.includes("v2.0/Items")&&F.path.endsWith(".json")&&Ne.push(F),F.path.includes("v2.0/Moves")&&F.path.endsWith(".json")){const B=F.path.split("/"),X=B[B.length-1].replace(".json","");Re[X]=F.path}if(F.path.includes("v2.0/Abilities")&&F.path.endsWith(".json")){const B=F.path.split("/"),X=B[B.length-1].replace(".json","");mt[X]=F.path}if(F.path.includes("v2.0/Natures")&&F.path.endsWith(".json")){const B=F.path.split("/"),X=B[B.length-1].replace(".json","");hn[X]=F.path}}});const Ut=Ie.length+Ne.length;ge(Ut),R(Re),se(mt),qe(hn);const Ce=20,Be=[];for(let F=0;F<Ie.length;F+=Ce){const X=Ie.slice(F,F+Ce).map(async be=>{try{const je=be.path.split("/").map(En=>encodeURIComponent(En)).join("/"),Bt=`${n0}${je}`,Et=await fetch(Bt);if(!Et.ok)return null;const st=await Et.json();if(st&&st.Name){const En=st.BaseHP!==void 0?st.BaseHP:st.HP,aa=typeof st.Number=="number"?st.Number:parseInt(st.Number||st.DexID||"0");return{...st,Number:aa,BaseHP:En,Image:st.Image||`${st.Name}.png`}}return null}catch{return null}}),me=(await Promise.all(X)).filter(be=>be!==null);Be.push(...me),oe(be=>Math.min(be+Ce,Ut))}const A=[];for(let F=0;F<Ne.length;F+=Ce){const X=Ne.slice(F,F+Ce).map(async me=>{try{const be=me.path.split("/").map(Et=>encodeURIComponent(Et)).join("/"),je=`${n0}${be}`,Bt=await fetch(je);return Bt.ok?await Bt.json():null}catch{return null}}),te=await Promise.all(X);A.push(...te.filter(me=>me!==null)),oe(me=>Math.min(me+Ce,Ut))}Be.sort((F,B)=>F.Number-B.Number),A.sort((F,B)=>F.Name.localeCompare(B.Name)),T(Be),M(A),K(!1)}catch(ne){console.error(ne),et("Failed to load data. Please check your connection or try again later."),K(!1)}})()},[]),G.useEffect(()=>{t?t0(t.uid).then(U=>{const ne=Array(6).fill(null),he=Array(20).fill(null).map(()=>Array(30).fill(null)),Ie=U!=null&&U.party&&U.party.length===6?U.party:ne,Ne=U!=null&&U.pcBoxes&&U.pcBoxes.length===20?U.pcBoxes:he,Re=(U==null?void 0:U.trainer)||eo();w(Ie),C(Ne),L(Re),g(!0)}):(w(Array(6).fill(null)),C(Array(20).fill(null).map(()=>Array(30).fill(null))),L(eo()),g(!1))},[t]);const ct=async()=>{if(t)try{await mC(t.uid,{party:E,pcBoxes:S,trainer:z}),alert("Salvataggio completato con successo!")}catch(U){console.error("Errore salvataggio:",U),alert("Errore durante il salvataggio. Controlla la console.")}},pt=async()=>{if(!t)return;const U=await t0(t.uid);if(U){const ne=Array(6).fill(null),he=Array(20).fill(null).map(()=>Array(30).fill(null)),Ie=U.party&&Array.isArray(U.party)&&U.party.length===6?U.party:ne,Ne=U.pcBoxes&&Array.isArray(U.pcBoxes)?U.pcBoxes:he,Re=U.trainer||eo();w(Ie),C(Ne),L(Re),alert("Dati ricaricati dal cloud!")}},j=U=>{u(U),s("list"),window.scrollTo(0,0)},ee=U=>{x(window.scrollY),p(U),s("detail")},V=()=>{s("regions"),u("National"),x(0)},$=()=>{s("list"),p(null)};return G.useEffect(()=>{e==="pokedex"&&r==="list"&&setTimeout(()=>{window.scrollTo(0,m)},0)},[e,r,m]),Me&&(e==="pokedex"||e==="pokemon"||e==="items")?l.jsx(_C,{progress:J,total:ye,status:"Syncing Database (v2.0)..."}):ke&&(e==="pokedex"||e==="pokemon"||e==="items")?l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 text-center text-slate-600 dark:text-slate-300",children:[l.jsx(Qh,{className:"w-12 h-12 mb-4 text-red-500 animate-spin"}),l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Oops!"}),l.jsx("p",{children:ke}),l.jsxs("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-slate-800 dark:bg-slate-700 text-white rounded-lg hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[l.jsx(rb,{size:18})," Retry"]})]}):l.jsxs("div",{className:"min-h-screen bg-[#f3f4f6] dark:bg-slate-950 transition-colors duration-300",children:[e==="home"&&l.jsx(vC,{onNavigate:U=>{U==="pokemon"&&o("home"),n(U)},isDark:tt,toggleTheme:Ke,language:Le,setLanguage:Vt}),e==="character"&&l.jsx(bC,{trainer:z,setTrainer:L,onBack:()=>n("home"),language:Le,onSave:ct,natureMap:ce,party:E,items:P,onManagePokemon:()=>{o("character"),n("pokemon")},onEditPokemon:U=>b(U),onUpdatePokemon:U=>{w(ne=>ne.map(he=>he&&he.id===U.id?U:he))}}),e==="items"&&l.jsx(SC,{items:P,onBack:()=>n("home"),language:Le}),e==="pokemon"&&l.jsx(EC,{onBack:()=>n(i),allPokemon:I,language:Le,natureMap:ce,moveFileMap:N,abilityFileMap:v,party:E,setParty:w,pcBoxes:S,setPcBoxes:C,onSave:ct,onLoad:pt}),e==="pokedex"&&l.jsxs(l.Fragment,{children:[r==="regions"&&l.jsx(xC,{onSelect:j,onHome:()=>n("home"),isDark:tt,toggleTheme:Ke,language:Le,setLanguage:Vt}),(r==="list"||r==="detail")&&l.jsx("div",{className:r==="detail"?"hidden":"block",children:l.jsx(wC,{region:c,onBack:V,onSelectPokemon:ee,data:I,language:Le})}),r==="detail"&&d&&l.jsx(kC,{pokemon:d,onBack:$,moveMap:N,abilityMap:v,language:Le})]}),k&&l.jsx(z_,{character:k,baseData:I.find(U=>U.Number===k.dexId),moveFileMap:N,abilityFileMap:v,language:Le,onSave:U=>{w(ne=>ne.map(he=>he&&he.id===U.id?U:he))},onClose:()=>b(null),natureMap:ce})]})}const U_=document.getElementById("root");if(!U_)throw new Error("Could not find root element to mount to");const CC=ju.createRoot(U_);CC.render(l.jsx(Wi.StrictMode,{children:l.jsx(IC,{})}));
