(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xg={exports:{}},ql={},Jg={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=Symbol.for("react.element"),ew=Symbol.for("react.portal"),tw=Symbol.for("react.fragment"),nw=Symbol.for("react.strict_mode"),rw=Symbol.for("react.profiler"),sw=Symbol.for("react.provider"),iw=Symbol.for("react.context"),ow=Symbol.for("react.forward_ref"),aw=Symbol.for("react.suspense"),lw=Symbol.for("react.memo"),uw=Symbol.for("react.lazy"),bp=Symbol.iterator;function cw(t){return t===null||typeof t!="object"?null:(t=bp&&t[bp]||t["@@iterator"],typeof t=="function"?t:null)}var Zg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e0=Object.assign,t0={};function ui(t,e,n){this.props=t,this.context=e,this.refs=t0,this.updater=n||Zg}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n0(){}n0.prototype=ui.prototype;function Wd(t,e,n){this.props=t,this.context=e,this.refs=t0,this.updater=n||Zg}var Gd=Wd.prototype=new n0;Gd.constructor=Wd;e0(Gd,ui.prototype);Gd.isPureReactComponent=!0;var Ip=Array.isArray,r0=Object.prototype.hasOwnProperty,qd={current:null},s0={key:!0,ref:!0,__self:!0,__source:!0};function i0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)r0.call(e,r)&&!s0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Lo,type:t,key:i,ref:o,props:s,_owner:qd.current}}function dw(t,e){return{$$typeof:Lo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lo}function hw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ap=/\/+/g;function Fu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hw(""+t.key):e.toString(36)}function La(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lo:case ew:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fu(o,0):r,Ip(s)?(n="",t!=null&&(n=t.replace(Ap,"$&/")+"/"),La(s,e,n,"",function(d){return d})):s!=null&&(Kd(s)&&(s=dw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ap,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ip(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Fu(i,l);o+=La(i,e,n,c,s)}else if(c=cw(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Fu(i,l++),o+=La(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ma(t,e,n){if(t==null)return t;var r=[],s=0;return La(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Oa={transition:null},pw={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:qd};function o0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:ma,forEach:function(t,e,n){ma(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ma(t,function(){e++}),e},toArray:function(t){return ma(t,function(e){return e})||[]},only:function(t){if(!Kd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=ui;ye.Fragment=tw;ye.Profiler=rw;ye.PureComponent=Wd;ye.StrictMode=nw;ye.Suspense=aw;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pw;ye.act=o0;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=e0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)r0.call(e,c)&&!s0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Lo,type:t.type,key:s,ref:i,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:iw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sw,_context:t},t.Consumer=t};ye.createElement=i0;ye.createFactory=function(t){var e=i0.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:ow,render:t}};ye.isValidElement=Kd;ye.lazy=function(t){return{$$typeof:uw,_payload:{_status:-1,_result:t},_init:fw}};ye.memo=function(t,e){return{$$typeof:lw,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Oa.transition;Oa.transition={};try{t()}finally{Oa.transition=e}};ye.unstable_act=o0;ye.useCallback=function(t,e){return Vt.current.useCallback(t,e)};ye.useContext=function(t){return Vt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Vt.current.useEffect(t,e)};ye.useId=function(){return Vt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Vt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};ye.useRef=function(t){return Vt.current.useRef(t)};ye.useState=function(t){return Vt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Vt.current.useTransition()};ye.version="18.3.1";Jg.exports=ye;var H=Jg.exports;const mw=Zx(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=H,yw=Symbol.for("react.element"),vw=Symbol.for("react.fragment"),_w=Object.prototype.hasOwnProperty,xw=gw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ww={key:!0,ref:!0,__self:!0,__source:!0};function a0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_w.call(e,r)&&!ww.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yw,type:t,key:i,ref:o,props:s,_owner:xw.current}}ql.Fragment=vw;ql.jsx=a0;ql.jsxs=a0;Xg.exports=ql;var u=Xg.exports,Ic={},l0={exports:{}},Kt={},u0={exports:{}},c0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,J){var ne=W.length;W.push(J);e:for(;0<ne;){var pe=ne-1>>>1,ge=W[pe];if(0<s(ge,J))W[pe]=J,W[ne]=ge,ne=pe;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],ne=W.pop();if(ne!==J){W[0]=ne;e:for(var pe=0,ge=W.length,Se=ge>>>1;pe<Se;){var st=2*(pe+1)-1,Nt=W[st],Pt=st+1,Ke=W[Pt];if(0>s(Nt,ne))Pt<ge&&0>s(Ke,Nt)?(W[pe]=Ke,W[Pt]=ne,pe=Pt):(W[pe]=Nt,W[st]=ne,pe=st);else if(Pt<ge&&0>s(Ke,ne))W[pe]=Ke,W[Pt]=ne,pe=Pt;else break e}}return J}function s(W,J){var ne=W.sortIndex-J.sortIndex;return ne!==0?ne:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,m=null,_=3,I=!1,b=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(W){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=W)r(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(d)}}function P(W){if(C=!1,T(W),!b)if(n(c)!==null)b=!0,qe(O);else{var J=n(d);J!==null&&$e(P,J.startTime-W)}}function O(W,J){b=!1,C&&(C=!1,S(y),y=-1),I=!0;var ne=_;try{for(T(J),m=n(c);m!==null&&(!(m.expirationTime>J)||W&&!N());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,_=m.priorityLevel;var ge=pe(m.expirationTime<=J);J=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(c)&&r(c),T(J)}else r(c);m=n(c)}if(m!==null)var Se=!0;else{var st=n(d);st!==null&&$e(P,st.startTime-J),Se=!1}return Se}finally{m=null,_=ne,I=!1}}var M=!1,x=null,y=-1,k=5,E=-1;function N(){return!(t.unstable_now()-E<k)}function R(){if(x!==null){var W=t.unstable_now();E=W;var J=!0;try{J=x(!0,W)}finally{J?v():(M=!1,x=null)}}else M=!1}var v;if(typeof w=="function")v=function(){w(R)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,fe=te.port2;te.port1.onmessage=R,v=function(){fe.postMessage(null)}}else v=function(){D(R,0)};function qe(W){x=W,M||(M=!0,v())}function $e(W,J){y=D(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||I||(b=!0,qe(O))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var ne=_;_=J;try{return W()}finally{_=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=_;_=W;try{return J()}finally{_=ne}},t.unstable_scheduleCallback=function(W,J,ne){var pe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,W){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ne+ge,W={id:p++,callback:J,priorityLevel:W,startTime:ne,expirationTime:ge,sortIndex:-1},ne>pe?(W.sortIndex=ne,e(d,W),n(c)===null&&W===n(d)&&(C?(S(y),y=-1):C=!0,$e(P,ne-pe))):(W.sortIndex=ge,e(c,W),b||I||(b=!0,qe(O))),W},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(W){var J=_;return function(){var ne=_;_=J;try{return W.apply(this,arguments)}finally{_=ne}}}})(c0);u0.exports=c0;var kw=u0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=H,qt=kw;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d0=new Set,lo={};function ds(t,e){qs(t,e),qs(t+"Capture",e)}function qs(t,e){for(lo[t]=e,t=0;t<e.length;t++)d0.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ac=Object.prototype.hasOwnProperty,Sw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Np={},Pp={};function Tw(t){return Ac.call(Pp,t)?!0:Ac.call(Np,t)?!1:Sw.test(t)?Pp[t]=!0:(Np[t]=!0,!1)}function bw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Iw(t,e,n,r){if(e===null||typeof e>"u"||bw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qd=/[\-:]([a-z])/g;function Yd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qd,Yd);yt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qd,Yd);yt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qd,Yd);yt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xd(t,e,n,r){var s=yt.hasOwnProperty(e)?yt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Iw(e,n,s,r)&&(n=null),r||s===null?Tw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),Jd=Symbol.for("react.strict_mode"),Nc=Symbol.for("react.profiler"),h0=Symbol.for("react.provider"),f0=Symbol.for("react.context"),Zd=Symbol.for("react.forward_ref"),Pc=Symbol.for("react.suspense"),Cc=Symbol.for("react.suspense_list"),eh=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),p0=Symbol.for("react.offscreen"),Cp=Symbol.iterator;function Ri(t){return t===null||typeof t!="object"?null:(t=Cp&&t[Cp]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,zu;function Ui(t){if(zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zu=e&&e[1]||""}return`
`+zu+t}var Uu=!1;function Bu(t,e){if(!t||Uu)return"";Uu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Uu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ui(t):""}function Aw(t){switch(t.tag){case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return t=Bu(t.type,!1),t;case 11:return t=Bu(t.type.render,!1),t;case 1:return t=Bu(t.type,!0),t;default:return""}}function Rc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bs:return"Fragment";case Ts:return"Portal";case Nc:return"Profiler";case Jd:return"StrictMode";case Pc:return"Suspense";case Cc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case f0:return(t.displayName||"Context")+".Consumer";case h0:return(t._context.displayName||"Context")+".Provider";case Zd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case eh:return e=t.displayName||null,e!==null?e:Rc(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return Rc(t(e))}catch{}}return null}function Nw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rc(e);case 8:return e===Jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pw(t){var e=m0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ya(t){t._valueTracker||(t._valueTracker=Pw(t))}function g0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=m0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jc(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y0(t,e){e=e.checked,e!=null&&Xd(t,"checked",e,!1)}function Dc(t,e){y0(t,e);var n=Ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vc(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vc(t,e,n){(e!=="number"||sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bi=Array.isArray;function Ls(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Bi(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function v0(t,e){var n=Ar(e.value),r=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var va,x0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(va=va||document.createElement("div"),va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cw=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){Cw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function w0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function k0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=w0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Rw=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oc(t,e){if(e){if(Rw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function th(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uc=null,Os=null,Fs=null;function Mp(t){if(t=zo(t)){if(typeof Uc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Jl(e),Uc(t.stateNode,t.type,e))}}function E0(t){Os?Fs?Fs.push(t):Fs=[t]:Os=t}function S0(){if(Os){var t=Os,e=Fs;if(Fs=Os=null,Mp(t),e)for(t=0;t<e.length;t++)Mp(e[t])}}function T0(t,e){return t(e)}function b0(){}var $u=!1;function I0(t,e,n){if($u)return t(e,n);$u=!0;try{return T0(t,e,n)}finally{$u=!1,(Os!==null||Fs!==null)&&(b0(),S0())}}function co(t,e){var n=t.stateNode;if(n===null)return null;var r=Jl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Bc=!1;if(Hn)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Bc=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Bc=!1}function jw(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Qi=!1,il=null,ol=!1,$c=null,Dw={onError:function(t){Qi=!0,il=t}};function Vw(t,e,n,r,s,i,o,l,c){Qi=!1,il=null,jw.apply(Dw,arguments)}function Mw(t,e,n,r,s,i,o,l,c){if(Vw.apply(this,arguments),Qi){if(Qi){var d=il;Qi=!1,il=null}else throw Error(B(198));ol||(ol=!0,$c=d)}}function hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lp(t){if(hs(t)!==t)throw Error(B(188))}function Lw(t){var e=t.alternate;if(!e){if(e=hs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Lp(s),t;if(i===r)return Lp(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function N0(t){return t=Lw(t),t!==null?P0(t):null}function P0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P0(t);if(e!==null)return e;t=t.sibling}return null}var C0=qt.unstable_scheduleCallback,Op=qt.unstable_cancelCallback,Ow=qt.unstable_shouldYield,Fw=qt.unstable_requestPaint,Ge=qt.unstable_now,zw=qt.unstable_getCurrentPriorityLevel,nh=qt.unstable_ImmediatePriority,R0=qt.unstable_UserBlockingPriority,al=qt.unstable_NormalPriority,Uw=qt.unstable_LowPriority,j0=qt.unstable_IdlePriority,Kl=null,kn=null;function Bw(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Kl,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:Ww,$w=Math.log,Hw=Math.LN2;function Ww(t){return t>>>=0,t===0?32:31-($w(t)/Hw|0)|0}var _a=64,xa=4194304;function $i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=$i(l):(i&=o,i!==0&&(r=$i(i)))}else o=n&~s,o!==0?r=$i(o):i!==0&&(r=$i(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),s=1<<n,r|=t[n],e&=~s;return r}function Gw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Gw(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function D0(){var t=_a;return _a<<=1,!(_a&4194240)&&(_a=64),t}function Hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function Kw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function V0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M0,sh,L0,O0,F0,Wc=!1,wa=[],gr=null,yr=null,vr=null,ho=new Map,fo=new Map,lr=[],Qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fp(t,e){switch(t){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zo(e),e!==null&&sh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Yw(t,e,n,r,s){switch(e){case"focusin":return gr=Di(gr,t,e,n,r,s),!0;case"dragenter":return yr=Di(yr,t,e,n,r,s),!0;case"mouseover":return vr=Di(vr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ho.set(i,Di(ho.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fo.set(i,Di(fo.get(i)||null,t,e,n,r,s)),!0}return!1}function z0(t){var e=Wr(t.target);if(e!==null){var n=hs(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,F0(t.priority,function(){L0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zc=r,n.target.dispatchEvent(r),zc=null}else return e=zo(n),e!==null&&sh(e),t.blockedOn=n,!1;e.shift()}return!0}function zp(t,e,n){Fa(t)&&n.delete(e)}function Xw(){Wc=!1,gr!==null&&Fa(gr)&&(gr=null),yr!==null&&Fa(yr)&&(yr=null),vr!==null&&Fa(vr)&&(vr=null),ho.forEach(zp),fo.forEach(zp)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,Wc||(Wc=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Xw)))}function po(t){function e(s){return Vi(s,t)}if(0<wa.length){Vi(wa[0],t);for(var n=1;n<wa.length;n++){var r=wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gr!==null&&Vi(gr,t),yr!==null&&Vi(yr,t),vr!==null&&Vi(vr,t),ho.forEach(e),fo.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)z0(n),n.blockedOn===null&&lr.shift()}var zs=Jn.ReactCurrentBatchConfig,ul=!0;function Jw(t,e,n,r){var s=Te,i=zs.transition;zs.transition=null;try{Te=1,ih(t,e,n,r)}finally{Te=s,zs.transition=i}}function Zw(t,e,n,r){var s=Te,i=zs.transition;zs.transition=null;try{Te=4,ih(t,e,n,r)}finally{Te=s,zs.transition=i}}function ih(t,e,n,r){if(ul){var s=Gc(t,e,n,r);if(s===null)ec(t,e,r,cl,n),Fp(t,r);else if(Yw(s,t,e,n,r))r.stopPropagation();else if(Fp(t,r),e&4&&-1<Qw.indexOf(t)){for(;s!==null;){var i=zo(s);if(i!==null&&M0(i),i=Gc(t,e,n,r),i===null&&ec(t,e,r,cl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ec(t,e,r,null,n)}}var cl=null;function Gc(t,e,n,r){if(cl=null,t=th(r),t=Wr(t),t!==null)if(e=hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cl=t,null}function U0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zw()){case nh:return 1;case R0:return 4;case al:case Uw:return 16;case j0:return 536870912;default:return 16}default:return 16}}var fr=null,oh=null,za=null;function B0(){if(za)return za;var t,e=oh,n=e.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return za=s.slice(t,1<r?1-r:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ka(){return!0}function Up(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ka:Up,this.isPropagationStopped=Up,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ah=Qt(ci),Fo=Oe({},ci,{view:0,detail:0}),e1=Qt(Fo),Wu,Gu,Mi,Ql=Oe({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mi&&(Mi&&t.type==="mousemove"?(Wu=t.screenX-Mi.screenX,Gu=t.screenY-Mi.screenY):Gu=Wu=0,Mi=t),Wu)},movementY:function(t){return"movementY"in t?t.movementY:Gu}}),Bp=Qt(Ql),t1=Oe({},Ql,{dataTransfer:0}),n1=Qt(t1),r1=Oe({},Fo,{relatedTarget:0}),qu=Qt(r1),s1=Oe({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),i1=Qt(s1),o1=Oe({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a1=Qt(o1),l1=Oe({},ci,{data:0}),$p=Qt(l1),u1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d1[t])?!!e[t]:!1}function lh(){return h1}var f1=Oe({},Fo,{key:function(t){if(t.key){var e=u1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?c1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lh,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p1=Qt(f1),m1=Oe({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hp=Qt(m1),g1=Oe({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lh}),y1=Qt(g1),v1=Oe({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),_1=Qt(v1),x1=Oe({},Ql,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=Qt(x1),k1=[9,13,27,32],uh=Hn&&"CompositionEvent"in window,Yi=null;Hn&&"documentMode"in document&&(Yi=document.documentMode);var E1=Hn&&"TextEvent"in window&&!Yi,$0=Hn&&(!uh||Yi&&8<Yi&&11>=Yi),Wp=" ",Gp=!1;function H0(t,e){switch(t){case"keyup":return k1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function S1(t,e){switch(t){case"compositionend":return W0(e);case"keypress":return e.which!==32?null:(Gp=!0,Wp);case"textInput":return t=e.data,t===Wp&&Gp?null:t;default:return null}}function T1(t,e){if(Is)return t==="compositionend"||!uh&&H0(t,e)?(t=B0(),za=oh=fr=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $0&&e.locale!=="ko"?null:e.data;default:return null}}var b1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b1[t.type]:e==="textarea"}function G0(t,e,n,r){E0(r),e=dl(e,"onChange"),0<e.length&&(n=new ah("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xi=null,mo=null;function I1(t){ry(t,0)}function Yl(t){var e=Ps(t);if(g0(e))return t}function A1(t,e){if(t==="change")return e}var q0=!1;if(Hn){var Ku;if(Hn){var Qu="oninput"in document;if(!Qu){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Qu=typeof Kp.oninput=="function"}Ku=Qu}else Ku=!1;q0=Ku&&(!document.documentMode||9<document.documentMode)}function Qp(){Xi&&(Xi.detachEvent("onpropertychange",K0),mo=Xi=null)}function K0(t){if(t.propertyName==="value"&&Yl(mo)){var e=[];G0(e,mo,t,th(t)),I0(I1,e)}}function N1(t,e,n){t==="focusin"?(Qp(),Xi=e,mo=n,Xi.attachEvent("onpropertychange",K0)):t==="focusout"&&Qp()}function P1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yl(mo)}function C1(t,e){if(t==="click")return Yl(e)}function R1(t,e){if(t==="input"||t==="change")return Yl(e)}function j1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:j1;function go(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ac.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function Yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xp(t,e){var n=Yp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yp(n)}}function Q0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y0(){for(var t=window,e=sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sl(t.document)}return e}function ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D1(t){var e=Y0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Q0(n.ownerDocument.documentElement,n)){if(r!==null&&ch(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xp(n,i);var o=Xp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var V1=Hn&&"documentMode"in document&&11>=document.documentMode,As=null,qc=null,Ji=null,Kc=!1;function Jp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||As==null||As!==sl(r)||(r=As,"selectionStart"in r&&ch(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&go(Ji,r)||(Ji=r,r=dl(qc,"onSelect"),0<r.length&&(e=new ah("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=As)))}function Ea(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionend:Ea("Transition","TransitionEnd")},Yu={},X0={};Hn&&(X0=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Xl(t){if(Yu[t])return Yu[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in X0)return Yu[t]=e[n];return t}var J0=Xl("animationend"),Z0=Xl("animationiteration"),ey=Xl("animationstart"),ty=Xl("transitionend"),ny=new Map,Zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){ny.set(t,e),ds(e,[t])}for(var Xu=0;Xu<Zp.length;Xu++){var Ju=Zp[Xu],M1=Ju.toLowerCase(),L1=Ju[0].toUpperCase()+Ju.slice(1);Dr(M1,"on"+L1)}Dr(J0,"onAnimationEnd");Dr(Z0,"onAnimationIteration");Dr(ey,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(ty,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function em(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Mw(r,e,void 0,t),t.currentTarget=null}function ry(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;em(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;em(s,l,d),i=c}}}if(ol)throw t=$c,ol=!1,$c=null,t}function Re(t,e){var n=e[Zc];n===void 0&&(n=e[Zc]=new Set);var r=t+"__bubble";n.has(r)||(sy(e,t,2,!1),n.add(r))}function Zu(t,e,n){var r=0;e&&(r|=4),sy(n,t,r,e)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function yo(t){if(!t[Sa]){t[Sa]=!0,d0.forEach(function(n){n!=="selectionchange"&&(O1.has(n)||Zu(n,!1,t),Zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sa]||(e[Sa]=!0,Zu("selectionchange",!1,e))}}function sy(t,e,n,r){switch(U0(e)){case 1:var s=Jw;break;case 4:s=Zw;break;default:s=ih}n=s.bind(null,e,n,t),s=void 0,!Bc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ec(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Wr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}I0(function(){var d=i,p=th(n),m=[];e:{var _=ny.get(t);if(_!==void 0){var I=ah,b=t;switch(t){case"keypress":if(Ua(n)===0)break e;case"keydown":case"keyup":I=p1;break;case"focusin":b="focus",I=qu;break;case"focusout":b="blur",I=qu;break;case"beforeblur":case"afterblur":I=qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=n1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=y1;break;case J0:case Z0:case ey:I=i1;break;case ty:I=_1;break;case"scroll":I=e1;break;case"wheel":I=w1;break;case"copy":case"cut":case"paste":I=a1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Hp}var C=(e&4)!==0,D=!C&&t==="scroll",S=C?_!==null?_+"Capture":null:_;C=[];for(var w=d,T;w!==null;){T=w;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,S!==null&&(P=co(w,S),P!=null&&C.push(vo(w,P,T)))),D)break;w=w.return}0<C.length&&(_=new I(_,b,null,n,p),m.push({event:_,listeners:C}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",_&&n!==zc&&(b=n.relatedTarget||n.fromElement)&&(Wr(b)||b[Wn]))break e;if((I||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,I?(b=n.relatedTarget||n.toElement,I=d,b=b?Wr(b):null,b!==null&&(D=hs(b),b!==D||b.tag!==5&&b.tag!==6)&&(b=null)):(I=null,b=d),I!==b)){if(C=Bp,P="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=Hp,P="onPointerLeave",S="onPointerEnter",w="pointer"),D=I==null?_:Ps(I),T=b==null?_:Ps(b),_=new C(P,w+"leave",I,n,p),_.target=D,_.relatedTarget=T,P=null,Wr(p)===d&&(C=new C(S,w+"enter",b,n,p),C.target=T,C.relatedTarget=D,P=C),D=P,I&&b)t:{for(C=I,S=b,w=0,T=C;T;T=ws(T))w++;for(T=0,P=S;P;P=ws(P))T++;for(;0<w-T;)C=ws(C),w--;for(;0<T-w;)S=ws(S),T--;for(;w--;){if(C===S||S!==null&&C===S.alternate)break t;C=ws(C),S=ws(S)}C=null}else C=null;I!==null&&tm(m,_,I,C,!1),b!==null&&D!==null&&tm(m,D,b,C,!0)}}e:{if(_=d?Ps(d):window,I=_.nodeName&&_.nodeName.toLowerCase(),I==="select"||I==="input"&&_.type==="file")var O=A1;else if(qp(_))if(q0)O=R1;else{O=P1;var M=N1}else(I=_.nodeName)&&I.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(O=C1);if(O&&(O=O(t,d))){G0(m,O,n,p);break e}M&&M(t,_,d),t==="focusout"&&(M=_._wrapperState)&&M.controlled&&_.type==="number"&&Vc(_,"number",_.value)}switch(M=d?Ps(d):window,t){case"focusin":(qp(M)||M.contentEditable==="true")&&(As=M,qc=d,Ji=null);break;case"focusout":Ji=qc=As=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Jp(m,n,p);break;case"selectionchange":if(V1)break;case"keydown":case"keyup":Jp(m,n,p)}var x;if(uh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Is?H0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&($0&&n.locale!=="ko"&&(Is||y!=="onCompositionStart"?y==="onCompositionEnd"&&Is&&(x=B0()):(fr=p,oh="value"in fr?fr.value:fr.textContent,Is=!0)),M=dl(d,y),0<M.length&&(y=new $p(y,t,null,n,p),m.push({event:y,listeners:M}),x?y.data=x:(x=W0(n),x!==null&&(y.data=x)))),(x=E1?S1(t,n):T1(t,n))&&(d=dl(d,"onBeforeInput"),0<d.length&&(p=new $p("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=x))}ry(m,e)})}function vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=co(t,n),i!=null&&r.unshift(vo(t,i,s)),i=co(t,e),i!=null&&r.push(vo(t,i,s))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=co(n,i),c!=null&&o.unshift(vo(n,c,l))):s||(c=co(n,i),c!=null&&o.push(vo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var F1=/\r\n?/g,z1=/\u0000|\uFFFD/g;function nm(t){return(typeof t=="string"?t:""+t).replace(F1,`
`).replace(z1,"")}function Ta(t,e,n){if(e=nm(e),nm(t)!==e&&n)throw Error(B(425))}function hl(){}var Qc=null,Yc=null;function Xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,U1=typeof clearTimeout=="function"?clearTimeout:void 0,rm=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof rm<"u"?function(t){return rm.resolve(null).then(t).catch($1)}:Jc;function $1(t){setTimeout(function(){throw t})}function tc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),po(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);po(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),wn="__reactFiber$"+di,_o="__reactProps$"+di,Wn="__reactContainer$"+di,Zc="__reactEvents$"+di,H1="__reactListeners$"+di,W1="__reactHandles$"+di;function Wr(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sm(t);t!==null;){if(n=t[wn])return n;t=sm(t)}return e}t=n,n=t.parentNode}return null}function zo(t){return t=t[wn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Jl(t){return t[_o]||null}var ed=[],Cs=-1;function Vr(t){return{current:t}}function je(t){0>Cs||(t.current=ed[Cs],ed[Cs]=null,Cs--)}function Ne(t,e){Cs++,ed[Cs]=t.current,t.current=e}var Nr={},It=Vr(Nr),Ft=Vr(!1),es=Nr;function Ks(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zt(t){return t=t.childContextTypes,t!=null}function fl(){je(Ft),je(It)}function im(t,e,n){if(It.current!==Nr)throw Error(B(168));Ne(It,e),Ne(Ft,n)}function iy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,Nw(t)||"Unknown",s));return Oe({},n,r)}function pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,es=It.current,Ne(It,t),Ne(Ft,Ft.current),!0}function om(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=iy(t,e,es),r.__reactInternalMemoizedMergedChildContext=t,je(Ft),je(It),Ne(It,t)):je(Ft),Ne(Ft,n)}var Dn=null,Zl=!1,nc=!1;function oy(t){Dn===null?Dn=[t]:Dn.push(t)}function G1(t){Zl=!0,oy(t)}function Mr(){if(!nc&&Dn!==null){nc=!0;var t=0,e=Te;try{var n=Dn;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,Zl=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),C0(nh,Mr),s}finally{Te=e,nc=!1}}return null}var Rs=[],js=0,ml=null,gl=0,Jt=[],Zt=0,ts=null,Mn=1,Ln="";function Ur(t,e){Rs[js++]=gl,Rs[js++]=ml,ml=t,gl=e}function ay(t,e,n){Jt[Zt++]=Mn,Jt[Zt++]=Ln,Jt[Zt++]=ts,ts=t;var r=Mn;t=Ln;var s=32-mn(r)-1;r&=~(1<<s),n+=1;var i=32-mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-mn(e)+s|n<<s|r,Ln=i+t}else Mn=1<<i|n<<s|r,Ln=t}function dh(t){t.return!==null&&(Ur(t,1),ay(t,1,0))}function hh(t){for(;t===ml;)ml=Rs[--js],Rs[js]=null,gl=Rs[--js],Rs[js]=null;for(;t===ts;)ts=Jt[--Zt],Jt[Zt]=null,Ln=Jt[--Zt],Jt[Zt]=null,Mn=Jt[--Zt],Jt[Zt]=null}var Gt=null,Wt=null,Ve=!1,fn=null;function ly(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function am(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:Mn,overflow:Ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Wt=null,!0):!1;default:return!1}}function td(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nd(t){if(Ve){var e=Wt;if(e){var n=e;if(!am(t,e)){if(td(t))throw Error(B(418));e=_r(n.nextSibling);var r=Gt;e&&am(t,e)?ly(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Gt=t)}}else{if(td(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ve=!1,Gt=t}}}function lm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function ba(t){if(t!==Gt)return!1;if(!Ve)return lm(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xc(t.type,t.memoizedProps)),e&&(e=Wt)){if(td(t))throw uy(),Error(B(418));for(;e;)ly(t,e),e=_r(e.nextSibling)}if(lm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Gt?_r(t.stateNode.nextSibling):null;return!0}function uy(){for(var t=Wt;t;)t=_r(t.nextSibling)}function Qs(){Wt=Gt=null,Ve=!1}function fh(t){fn===null?fn=[t]:fn.push(t)}var q1=Jn.ReactCurrentBatchConfig;function Li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ia(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function um(t){var e=t._init;return e(t._payload)}function cy(t){function e(S,w){if(t){var T=S.deletions;T===null?(S.deletions=[w],S.flags|=16):T.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=Er(S,w),S.index=0,S.sibling=null,S}function i(S,w,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<w?(S.flags|=2,w):T):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,w,T,P){return w===null||w.tag!==6?(w=uc(T,S.mode,P),w.return=S,w):(w=s(w,T),w.return=S,w)}function c(S,w,T,P){var O=T.type;return O===bs?p(S,w,T.props.children,P,T.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===or&&um(O)===w.type)?(P=s(w,T.props),P.ref=Li(S,w,T),P.return=S,P):(P=Ka(T.type,T.key,T.props,null,S.mode,P),P.ref=Li(S,w,T),P.return=S,P)}function d(S,w,T,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=cc(T,S.mode,P),w.return=S,w):(w=s(w,T.children||[]),w.return=S,w)}function p(S,w,T,P,O){return w===null||w.tag!==7?(w=Xr(T,S.mode,P,O),w.return=S,w):(w=s(w,T),w.return=S,w)}function m(S,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=uc(""+w,S.mode,T),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ga:return T=Ka(w.type,w.key,w.props,null,S.mode,T),T.ref=Li(S,null,w),T.return=S,T;case Ts:return w=cc(w,S.mode,T),w.return=S,w;case or:var P=w._init;return m(S,P(w._payload),T)}if(Bi(w)||Ri(w))return w=Xr(w,S.mode,T,null),w.return=S,w;Ia(S,w)}return null}function _(S,w,T,P){var O=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:l(S,w,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ga:return T.key===O?c(S,w,T,P):null;case Ts:return T.key===O?d(S,w,T,P):null;case or:return O=T._init,_(S,w,O(T._payload),P)}if(Bi(T)||Ri(T))return O!==null?null:p(S,w,T,P,null);Ia(S,T)}return null}function I(S,w,T,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(T)||null,l(w,S,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ga:return S=S.get(P.key===null?T:P.key)||null,c(w,S,P,O);case Ts:return S=S.get(P.key===null?T:P.key)||null,d(w,S,P,O);case or:var M=P._init;return I(S,w,T,M(P._payload),O)}if(Bi(P)||Ri(P))return S=S.get(T)||null,p(w,S,P,O,null);Ia(w,P)}return null}function b(S,w,T,P){for(var O=null,M=null,x=w,y=w=0,k=null;x!==null&&y<T.length;y++){x.index>y?(k=x,x=null):k=x.sibling;var E=_(S,x,T[y],P);if(E===null){x===null&&(x=k);break}t&&x&&E.alternate===null&&e(S,x),w=i(E,w,y),M===null?O=E:M.sibling=E,M=E,x=k}if(y===T.length)return n(S,x),Ve&&Ur(S,y),O;if(x===null){for(;y<T.length;y++)x=m(S,T[y],P),x!==null&&(w=i(x,w,y),M===null?O=x:M.sibling=x,M=x);return Ve&&Ur(S,y),O}for(x=r(S,x);y<T.length;y++)k=I(x,S,y,T[y],P),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?y:k.key),w=i(k,w,y),M===null?O=k:M.sibling=k,M=k);return t&&x.forEach(function(N){return e(S,N)}),Ve&&Ur(S,y),O}function C(S,w,T,P){var O=Ri(T);if(typeof O!="function")throw Error(B(150));if(T=O.call(T),T==null)throw Error(B(151));for(var M=O=null,x=w,y=w=0,k=null,E=T.next();x!==null&&!E.done;y++,E=T.next()){x.index>y?(k=x,x=null):k=x.sibling;var N=_(S,x,E.value,P);if(N===null){x===null&&(x=k);break}t&&x&&N.alternate===null&&e(S,x),w=i(N,w,y),M===null?O=N:M.sibling=N,M=N,x=k}if(E.done)return n(S,x),Ve&&Ur(S,y),O;if(x===null){for(;!E.done;y++,E=T.next())E=m(S,E.value,P),E!==null&&(w=i(E,w,y),M===null?O=E:M.sibling=E,M=E);return Ve&&Ur(S,y),O}for(x=r(S,x);!E.done;y++,E=T.next())E=I(x,S,y,E.value,P),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),M===null?O=E:M.sibling=E,M=E);return t&&x.forEach(function(R){return e(S,R)}),Ve&&Ur(S,y),O}function D(S,w,T,P){if(typeof T=="object"&&T!==null&&T.type===bs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ga:e:{for(var O=T.key,M=w;M!==null;){if(M.key===O){if(O=T.type,O===bs){if(M.tag===7){n(S,M.sibling),w=s(M,T.props.children),w.return=S,S=w;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===or&&um(O)===M.type){n(S,M.sibling),w=s(M,T.props),w.ref=Li(S,M,T),w.return=S,S=w;break e}n(S,M);break}else e(S,M);M=M.sibling}T.type===bs?(w=Xr(T.props.children,S.mode,P,T.key),w.return=S,S=w):(P=Ka(T.type,T.key,T.props,null,S.mode,P),P.ref=Li(S,w,T),P.return=S,S=P)}return o(S);case Ts:e:{for(M=T.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(S,w.sibling),w=s(w,T.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=cc(T,S.mode,P),w.return=S,S=w}return o(S);case or:return M=T._init,D(S,w,M(T._payload),P)}if(Bi(T))return b(S,w,T,P);if(Ri(T))return C(S,w,T,P);Ia(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(S,w.sibling),w=s(w,T),w.return=S,S=w):(n(S,w),w=uc(T,S.mode,P),w.return=S,S=w),o(S)):n(S,w)}return D}var Ys=cy(!0),dy=cy(!1),yl=Vr(null),vl=null,Ds=null,ph=null;function mh(){ph=Ds=vl=null}function gh(t){var e=yl.current;je(yl),t._currentValue=e}function rd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){vl=t,ph=Ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(ph!==t)if(t={context:t,memoizedValue:e,next:null},Ds===null){if(vl===null)throw Error(B(308));Ds=t,vl.dependencies={lanes:0,firstContext:t}}else Ds=Ds.next=t;return e}var Gr=null;function yh(t){Gr===null?Gr=[t]:Gr.push(t)}function hy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function vh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gn(t,n)}return s=r.interleaved,s===null?(e.next=e,yh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gn(t,n)}function Ba(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rh(t,n)}}function cm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _l(t,e,n,r){var s=t.updateQueue;ar=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=d=c=null,l=i;do{var _=l.lane,I=l.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,C=l;switch(_=e,I=n,C.tag){case 1:if(b=C.payload,typeof b=="function"){m=b.call(I,m,_);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=C.payload,_=typeof b=="function"?b.call(I,m,_):b,_==null)break e;m=Oe({},m,_);break e;case 2:ar=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else I={eventTime:I,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=I,c=m):p=p.next=I,o|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rs|=o,t.lanes=o,t.memoizedState=m}}function dm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Uo={},En=Vr(Uo),xo=Vr(Uo),wo=Vr(Uo);function qr(t){if(t===Uo)throw Error(B(174));return t}function _h(t,e){switch(Ne(wo,e),Ne(xo,t),Ne(En,Uo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lc(e,t)}je(En),Ne(En,e)}function Xs(){je(En),je(xo),je(wo)}function py(t){qr(wo.current);var e=qr(En.current),n=Lc(e,t.type);e!==n&&(Ne(xo,t),Ne(En,n))}function xh(t){xo.current===t&&(je(En),je(xo))}var Me=Vr(0);function xl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rc=[];function wh(){for(var t=0;t<rc.length;t++)rc[t]._workInProgressVersionPrimary=null;rc.length=0}var $a=Jn.ReactCurrentDispatcher,sc=Jn.ReactCurrentBatchConfig,ns=0,Le=null,et=null,ut=null,wl=!1,Zi=!1,ko=0,K1=0;function wt(){throw Error(B(321))}function kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Eh(t,e,n,r,s,i){if(ns=i,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$a.current=t===null||t.memoizedState===null?J1:Z1,t=n(r,s),Zi){i=0;do{if(Zi=!1,ko=0,25<=i)throw Error(B(301));i+=1,ut=et=null,e.updateQueue=null,$a.current=ek,t=n(r,s)}while(Zi)}if($a.current=kl,e=et!==null&&et.next!==null,ns=0,ut=et=Le=null,wl=!1,e)throw Error(B(300));return t}function Sh(){var t=ko!==0;return ko=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Le.memoizedState=ut=t:ut=ut.next=t,ut}function on(){if(et===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=ut===null?Le.memoizedState:ut.next;if(e!==null)ut=e,et=t;else{if(t===null)throw Error(B(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},ut===null?Le.memoizedState=ut=t:ut=ut.next=t}return ut}function Eo(t,e){return typeof e=="function"?e(t):e}function ic(t){var e=on(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=et,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var p=d.lane;if((ns&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Le.lanes|=p,rs|=p}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,vn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Le.lanes|=i,rs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function oc(t){var e=on(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function my(){}function gy(t,e){var n=Le,r=on(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,Th(_y.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,So(9,vy.bind(null,n,r,s,e),void 0,null),ct===null)throw Error(B(349));ns&30||yy(n,e,s)}return s}function yy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vy(t,e,n,r){e.value=n,e.getSnapshot=r,xy(e)&&wy(t)}function _y(t,e,n){return n(function(){xy(e)&&wy(t)})}function xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function wy(t){var e=Gn(t,1);e!==null&&gn(e,t,1,-1)}function hm(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:t},e.queue=t,t=t.dispatch=X1.bind(null,Le,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ky(){return on().memoizedState}function Ha(t,e,n,r){var s=xn();Le.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function eu(t,e,n,r){var s=on();r=r===void 0?null:r;var i=void 0;if(et!==null){var o=et.memoizedState;if(i=o.destroy,r!==null&&kh(r,o.deps)){s.memoizedState=So(e,n,i,r);return}}Le.flags|=t,s.memoizedState=So(1|e,n,i,r)}function fm(t,e){return Ha(8390656,8,t,e)}function Th(t,e){return eu(2048,8,t,e)}function Ey(t,e){return eu(4,2,t,e)}function Sy(t,e){return eu(4,4,t,e)}function Ty(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function by(t,e,n){return n=n!=null?n.concat([t]):null,eu(4,4,Ty.bind(null,e,t),n)}function bh(){}function Iy(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ay(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ny(t,e,n){return ns&21?(vn(n,e)||(n=D0(),Le.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function Q1(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=sc.transition;sc.transition={};try{t(!1),e()}finally{Te=n,sc.transition=r}}function Py(){return on().memoizedState}function Y1(t,e,n){var r=kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cy(t))Ry(e,n);else if(n=hy(t,e,n,r),n!==null){var s=Dt();gn(n,t,r,s),jy(n,e,r)}}function X1(t,e,n){var r=kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cy(t))Ry(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vn(l,o)){var c=e.interleaved;c===null?(s.next=s,yh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=hy(t,e,s,r),n!==null&&(s=Dt(),gn(n,t,r,s),jy(n,e,r))}}function Cy(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Ry(t,e){Zi=wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rh(t,n)}}var kl={readContext:sn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},J1={readContext:sn,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:fm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ha(4194308,4,Ty.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ha(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ha(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Y1.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:hm,useDebugValue:bh,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=hm(!1),e=t[0];return t=Q1.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,s=xn();if(Ve){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),ct===null)throw Error(B(349));ns&30||yy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fm(_y.bind(null,r,i,t),[t]),r.flags|=2048,So(9,vy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xn(),e=ct.identifierPrefix;if(Ve){var n=Ln,r=Mn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ko++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z1={readContext:sn,useCallback:Iy,useContext:sn,useEffect:Th,useImperativeHandle:by,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:Ay,useReducer:ic,useRef:ky,useState:function(){return ic(Eo)},useDebugValue:bh,useDeferredValue:function(t){var e=on();return Ny(e,et.memoizedState,t)},useTransition:function(){var t=ic(Eo)[0],e=on().memoizedState;return[t,e]},useMutableSource:my,useSyncExternalStore:gy,useId:Py,unstable_isNewReconciler:!1},ek={readContext:sn,useCallback:Iy,useContext:sn,useEffect:Th,useImperativeHandle:by,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:Ay,useReducer:oc,useRef:ky,useState:function(){return oc(Eo)},useDebugValue:bh,useDeferredValue:function(t){var e=on();return et===null?e.memoizedState=t:Ny(e,et.memoizedState,t)},useTransition:function(){var t=oc(Eo)[0],e=on().memoizedState;return[t,e]},useMutableSource:my,useSyncExternalStore:gy,useId:Py,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tu={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=kr(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=xr(t,i,s),e!==null&&(gn(e,t,s,r),Ba(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=kr(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=xr(t,i,s),e!==null&&(gn(e,t,s,r),Ba(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=kr(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=xr(t,s,r),e!==null&&(gn(e,t,r,n),Ba(e,t,r))}};function pm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!go(n,r)||!go(s,i):!0}function Dy(t,e,n){var r=!1,s=Nr,i=e.contextType;return typeof i=="object"&&i!==null?i=sn(i):(s=zt(e)?es:It.current,r=e.contextTypes,i=(r=r!=null)?Ks(t,s):Nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function mm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tu.enqueueReplaceState(e,e.state,null)}function id(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=sn(i):(i=zt(e)?es:It.current,s.context=Ks(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tu.enqueueReplaceState(s,s.state,null),_l(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=Aw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ac(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function od(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tk=typeof WeakMap=="function"?WeakMap:Map;function Vy(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sl||(Sl=!0,gd=r),od(t,e)},n}function My(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){od(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){od(t,e),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mk.bind(null,t,e,n),e.then(t,t))}function ym(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,xr(n,e,1))),n.lanes|=1),t)}var nk=Jn.ReactCurrentOwner,Ot=!1;function jt(t,e,n,r){e.child=t===null?dy(e,null,n,r):Ys(e,t.child,n,r)}function _m(t,e,n,r,s){n=n.render;var i=e.ref;return Us(e,s),r=Eh(t,e,n,r,i,s),n=Sh(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Ve&&n&&dh(e),e.flags|=1,jt(t,e,r,s),e.child)}function xm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ly(t,e,i,r,s)):(t=Ka(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=Er(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ly(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(go(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,qn(t,e,s)}return ad(t,e,n,r,s)}function Oy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Ms,Ht),Ht|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Ms,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(Ms,Ht),Ht|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(Ms,Ht),Ht|=r;return jt(t,e,s,n),e.child}function Fy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ad(t,e,n,r,s){var i=zt(n)?es:It.current;return i=Ks(e,i),Us(e,s),n=Eh(t,e,n,r,i,s),r=Sh(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Ve&&r&&dh(e),e.flags|=1,jt(t,e,n,s),e.child)}function wm(t,e,n,r,s){if(zt(n)){var i=!0;pl(e)}else i=!1;if(Us(e,s),e.stateNode===null)Wa(t,e),Dy(e,n,r),id(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=sn(d):(d=zt(n)?es:It.current,d=Ks(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&mm(e,o,r,d),ar=!1;var _=e.memoizedState;o.state=_,_l(e,r,o,s),c=e.memoizedState,l!==r||_!==c||Ft.current||ar?(typeof p=="function"&&(sd(e,n,p,r),c=e.memoizedState),(l=ar||pm(e,n,l,r,_,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,fy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:dn(e.type,l),o.props=d,m=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=zt(n)?es:It.current,c=Ks(e,c));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||_!==c)&&mm(e,o,r,c),ar=!1,_=e.memoizedState,o.state=_,_l(e,r,o,s);var b=e.memoizedState;l!==m||_!==b||Ft.current||ar?(typeof I=="function"&&(sd(e,n,I,r),b=e.memoizedState),(d=ar||pm(e,n,d,r,_,b,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return ld(t,e,n,r,i,s)}function ld(t,e,n,r,s,i){Fy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&om(e,n,!1),qn(t,e,i);r=e.stateNode,nk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,l,i)):jt(t,e,l,i),e.memoizedState=r.state,s&&om(e,n,!0),e.child}function zy(t){var e=t.stateNode;e.pendingContext?im(t,e.pendingContext,e.pendingContext!==e.context):e.context&&im(t,e.context,!1),_h(t,e.containerInfo)}function km(t,e,n,r,s){return Qs(),fh(s),e.flags|=256,jt(t,e,n,r),e.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function cd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uy(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Me,s&1),t===null)return nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=su(o,r,0,null),t=Xr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cd(n),e.memoizedState=ud,t):Ih(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rk(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Er(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Er(l,i):(i=Xr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ud,r}return i=t.child,t=i.sibling,r=Er(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ih(t,e){return e=su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Aa(t,e,n,r){return r!==null&&fh(r),Ys(e,t.child,null,n),t=Ih(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ac(Error(B(422))),Aa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=su({mode:"visible",children:r.children},s,0,null),i=Xr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=cd(o),e.memoizedState=ud,i);if(!(e.mode&1))return Aa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=ac(i,r,void 0),Aa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ot||l){if(r=ct,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(t,s),gn(r,t,s,-1))}return jh(),r=ac(Error(B(421))),Aa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=_r(s.nextSibling),Gt=e,Ve=!0,fn=null,t!==null&&(Jt[Zt++]=Mn,Jt[Zt++]=Ln,Jt[Zt++]=ts,Mn=t.id,Ln=t.overflow,ts=e),e=Ih(e,r.children),e.flags|=4096,e)}function Em(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rd(t.return,e,n)}function lc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function By(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(jt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Em(t,n,e);else if(t.tag===19)Em(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lc(e,!0,n,null,i);break;case"together":lc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sk(t,e,n){switch(e.tag){case 3:zy(e),Qs();break;case 5:py(e);break;case 1:zt(e.type)&&pl(e);break;case 4:_h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(yl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Uy(t,e,n):(Ne(Me,Me.current&1),t=qn(t,e,n),t!==null?t.sibling:null);Ne(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return By(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,Oy(t,e,n)}return qn(t,e,n)}var $y,dd,Hy,Wy;$y=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dd=function(){};Hy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qr(En.current);var i=null;switch(n){case"input":s=jc(t,s),r=jc(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=Mc(t,s),r=Mc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hl)}Oc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(lo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(lo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Wy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oi(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ik(t,e,n){var r=e.pendingProps;switch(hh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return zt(e.type)&&fl(),kt(e),null;case 3:return r=e.stateNode,Xs(),je(Ft),je(It),wh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(_d(fn),fn=null))),dd(t,e),kt(e),null;case 5:xh(e);var s=qr(wo.current);if(n=e.type,t!==null&&e.stateNode!=null)Hy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return kt(e),null}if(t=qr(En.current),ba(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wn]=e,r[_o]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Hi.length;s++)Re(Hi[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Rp(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":Dp(r,i),Re("invalid",r)}Oc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ta(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ta(r.textContent,l,t),s=["children",""+l]):lo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":ya(r),jp(r,i,!0);break;case"textarea":ya(r),Vp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wn]=e,t[_o]=r,$y(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fc(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hi.length;s++)Re(Hi[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":Rp(t,r),s=jc(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Re("invalid",t);break;case"textarea":Dp(t,r),s=Mc(t,r),Re("invalid",t);break;default:s=r}Oc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?k0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&x0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uo(t,c):typeof c=="number"&&uo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Re("scroll",t):c!=null&&Xd(t,i,c,o))}switch(n){case"input":ya(t),jp(t,r,!1);break;case"textarea":ya(t),Vp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ar(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ls(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Wy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=qr(wo.current),qr(En.current),ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[wn]=e,(i=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:Ta(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ta(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=e,e.stateNode=r}return kt(e),null;case 13:if(je(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Wt!==null&&e.mode&1&&!(e.flags&128))uy(),Qs(),e.flags|=98560,i=!1;else if(i=ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[wn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),i=!1}else fn!==null&&(_d(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?nt===0&&(nt=3):jh())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Xs(),dd(t,e),t===null&&yo(e.stateNode.containerInfo),kt(e),null;case 10:return gh(e.type._context),kt(e),null;case 17:return zt(e.type)&&fl(),kt(e),null;case 19:if(je(Me),i=e.memoizedState,i===null)return kt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Oi(i,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xl(t),o!==null){for(e.flags|=128,Oi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ge()>Zs&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304)}else{if(!r)if(t=xl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return kt(e),null}else 2*Ge()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ge(),e.sibling=null,n=Me.current,Ne(Me,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return Rh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function ok(t,e){switch(hh(e),e.tag){case 1:return zt(e.type)&&fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),je(Ft),je(It),wh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xh(e),null;case 13:if(je(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Me),null;case 4:return Xs(),null;case 10:return gh(e.type._context),null;case 22:case 23:return Rh(),null;case 24:return null;default:return null}}var Na=!1,Tt=!1,ak=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function hd(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Sm=!1;function lk(t,e){if(Qc=ul,t=Y0(),ch(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,p=0,m=t,_=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)_=m,m=I;for(;;){if(m===t)break t;if(_===n&&++d===s&&(l=o),_===i&&++p===r&&(c=o),(I=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=I}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yc={focusedElem:t,selectionRange:n},ul=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,D=b.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?C:dn(e.type,C),D);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(P){Ue(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return b=Sm,Sm=!1,b}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hd(e,n,i)}s=s.next}while(s!==r)}}function nu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gy(t){var e=t.alternate;e!==null&&(t.alternate=null,Gy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[_o],delete e[Zc],delete e[H1],delete e[W1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qy(t){return t.tag===5||t.tag===3||t.tag===4}function Tm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hl));else if(r!==4&&(t=t.child,t!==null))for(pd(t,e,n),t=t.sibling;t!==null;)pd(t,e,n),t=t.sibling}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}var ht=null,hn=!1;function rr(t,e,n){for(n=n.child;n!==null;)Ky(t,e,n),n=n.sibling}function Ky(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Kl,n)}catch{}switch(n.tag){case 5:Tt||Vs(n,e);case 6:var r=ht,s=hn;ht=null,rr(t,e,n),ht=r,hn=s,ht!==null&&(hn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(hn?(t=ht,n=n.stateNode,t.nodeType===8?tc(t.parentNode,n):t.nodeType===1&&tc(t,n),po(t)):tc(ht,n.stateNode));break;case 4:r=ht,s=hn,ht=n.stateNode.containerInfo,hn=!0,rr(t,e,n),ht=r,hn=s;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hd(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!Tt&&(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,rr(t,e,n),Tt=r):rr(t,e,n);break;default:rr(t,e,n)}}function bm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ak),e.forEach(function(r){var s=yk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ht=l.stateNode,hn=!1;break e;case 3:ht=l.stateNode.containerInfo,hn=!0;break e;case 4:ht=l.stateNode.containerInfo,hn=!0;break e}l=l.return}if(ht===null)throw Error(B(160));Ky(i,o,s),ht=null,hn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ue(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qy(e,t),e=e.sibling}function Qy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),_n(t),r&4){try{eo(3,t,t.return),nu(3,t)}catch(C){Ue(t,t.return,C)}try{eo(5,t,t.return)}catch(C){Ue(t,t.return,C)}}break;case 1:cn(e,t),_n(t),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(cn(e,t),_n(t),r&512&&n!==null&&Vs(n,n.return),t.flags&32){var s=t.stateNode;try{uo(s,"")}catch(C){Ue(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&y0(s,i),Fc(l,o);var d=Fc(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?k0(s,m):p==="dangerouslySetInnerHTML"?x0(s,m):p==="children"?uo(s,m):Xd(s,p,m,d)}switch(l){case"input":Dc(s,i);break;case"textarea":v0(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Ls(s,!!i.multiple,I,!1):_!==!!i.multiple&&(i.defaultValue!=null?Ls(s,!!i.multiple,i.defaultValue,!0):Ls(s,!!i.multiple,i.multiple?[]:"",!1))}s[_o]=i}catch(C){Ue(t,t.return,C)}}break;case 6:if(cn(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Ue(t,t.return,C)}}break;case 3:if(cn(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{po(e.containerInfo)}catch(C){Ue(t,t.return,C)}break;case 4:cn(e,t),_n(t);break;case 13:cn(e,t),_n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ph=Ge())),r&4&&bm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(d=Tt)||p,cn(e,t),Tt=d):cn(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(m=Q=p;Q!==null;){switch(_=Q,I=_.child,_.tag){case 0:case 11:case 14:case 15:eo(4,_,_.return);break;case 1:Vs(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(C){Ue(r,n,C)}}break;case 5:Vs(_,_.return);break;case 22:if(_.memoizedState!==null){Am(m);continue}}I!==null?(I.return=_,Q=I):Am(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=w0("display",o))}catch(C){Ue(t,t.return,C)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Ue(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:cn(e,t),_n(t),r&4&&bm(t);break;case 21:break;default:cn(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qy(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uo(s,""),r.flags&=-33);var i=Tm(t);md(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Tm(t);pd(t,l,o);break;default:throw Error(B(161))}}catch(c){Ue(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uk(t,e,n){Q=t,Yy(t)}function Yy(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Na;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Tt;l=Na;var d=Tt;if(Na=o,(Tt=c)&&!d)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?Nm(s):c!==null?(c.return=o,Q=c):Nm(s);for(;i!==null;)Q=i,Yy(i),i=i.sibling;Q=s,Na=l,Tt=d}Im(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Im(t)}}function Im(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||nu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&po(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Tt||e.flags&512&&fd(e)}catch(_){Ue(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Am(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Nm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nu(4,e)}catch(c){Ue(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ue(e,s,c)}}var i=e.return;try{fd(e)}catch(c){Ue(e,i,c)}break;case 5:var o=e.return;try{fd(e)}catch(c){Ue(e,o,c)}}}catch(c){Ue(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var ck=Math.ceil,El=Jn.ReactCurrentDispatcher,Ah=Jn.ReactCurrentOwner,nn=Jn.ReactCurrentBatchConfig,we=0,ct=null,Xe=null,mt=0,Ht=0,Ms=Vr(0),nt=0,To=null,rs=0,ru=0,Nh=0,to=null,Lt=null,Ph=0,Zs=1/0,jn=null,Sl=!1,gd=null,wr=null,Pa=!1,pr=null,Tl=0,no=0,yd=null,Ga=-1,qa=0;function Dt(){return we&6?Ge():Ga!==-1?Ga:Ga=Ge()}function kr(t){return t.mode&1?we&2&&mt!==0?mt&-mt:q1.transition!==null?(qa===0&&(qa=D0()),qa):(t=Te,t!==0||(t=window.event,t=t===void 0?16:U0(t.type)),t):1}function gn(t,e,n,r){if(50<no)throw no=0,yd=null,Error(B(185));Oo(t,n,r),(!(we&2)||t!==ct)&&(t===ct&&(!(we&2)&&(ru|=n),nt===4&&ur(t,mt)),Ut(t,r),n===1&&we===0&&!(e.mode&1)&&(Zs=Ge()+500,Zl&&Mr()))}function Ut(t,e){var n=t.callbackNode;qw(t,e);var r=ll(t,t===ct?mt:0);if(r===0)n!==null&&Op(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Op(n),e===1)t.tag===0?G1(Pm.bind(null,t)):oy(Pm.bind(null,t)),B1(function(){!(we&6)&&Mr()}),n=null;else{switch(V0(r)){case 1:n=nh;break;case 4:n=R0;break;case 16:n=al;break;case 536870912:n=j0;break;default:n=al}n=sv(n,Xy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xy(t,e){if(Ga=-1,qa=0,we&6)throw Error(B(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=ll(t,t===ct?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bl(t,r);else{e=r;var s=we;we|=2;var i=Zy();(ct!==t||mt!==e)&&(jn=null,Zs=Ge()+500,Yr(t,e));do try{fk();break}catch(l){Jy(t,l)}while(!0);mh(),El.current=i,we=s,Xe!==null?e=0:(ct=null,mt=0,e=nt)}if(e!==0){if(e===2&&(s=Hc(t),s!==0&&(r=s,e=vd(t,s))),e===1)throw n=To,Yr(t,0),ur(t,r),Ut(t,Ge()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!dk(s)&&(e=bl(t,r),e===2&&(i=Hc(t),i!==0&&(r=i,e=vd(t,i))),e===1))throw n=To,Yr(t,0),ur(t,r),Ut(t,Ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Br(t,Lt,jn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=Ph+500-Ge(),10<e)){if(ll(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jc(Br.bind(null,t,Lt,jn),e);break}Br(t,Lt,jn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ck(r/1960))-r,10<r){t.timeoutHandle=Jc(Br.bind(null,t,Lt,jn),r);break}Br(t,Lt,jn);break;case 5:Br(t,Lt,jn);break;default:throw Error(B(329))}}}return Ut(t,Ge()),t.callbackNode===n?Xy.bind(null,t):null}function vd(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Yr(t,e).flags|=256),t=bl(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&_d(e)),t}function _d(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function dk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Nh,e&=~ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function Pm(t){if(we&6)throw Error(B(327));Bs();var e=ll(t,0);if(!(e&1))return Ut(t,Ge()),null;var n=bl(t,e);if(t.tag!==0&&n===2){var r=Hc(t);r!==0&&(e=r,n=vd(t,r))}if(n===1)throw n=To,Yr(t,0),ur(t,e),Ut(t,Ge()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Br(t,Lt,jn),Ut(t,Ge()),null}function Ch(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Zs=Ge()+500,Zl&&Mr())}}function ss(t){pr!==null&&pr.tag===0&&!(we&6)&&Bs();var e=we;we|=1;var n=nn.transition,r=Te;try{if(nn.transition=null,Te=1,t)return t()}finally{Te=r,nn.transition=n,we=e,!(we&6)&&Mr()}}function Rh(){Ht=Ms.current,je(Ms)}function Yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,U1(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(hh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fl();break;case 3:Xs(),je(Ft),je(It),wh();break;case 5:xh(r);break;case 4:Xs();break;case 13:je(Me);break;case 19:je(Me);break;case 10:gh(r.type._context);break;case 22:case 23:Rh()}n=n.return}if(ct=t,Xe=t=Er(t.current,null),mt=Ht=e,nt=0,To=null,Nh=ru=rs=0,Lt=to=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gr=null}return t}function Jy(t,e){do{var n=Xe;try{if(mh(),$a.current=kl,wl){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wl=!1}if(ns=0,ut=et=Le=null,Zi=!1,ko=0,Ah.current=null,n===null||n.return===null){nt=1,To=e,Xe=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=mt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=ym(o);if(I!==null){I.flags&=-257,vm(I,o,l,i,e),I.mode&1&&gm(i,d,e),e=I,c=d;var b=e.updateQueue;if(b===null){var C=new Set;C.add(c),e.updateQueue=C}else b.add(c);break e}else{if(!(e&1)){gm(i,d,e),jh();break e}c=Error(B(426))}}else if(Ve&&l.mode&1){var D=ym(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),vm(D,o,l,i,e),fh(Js(c,l));break e}}i=c=Js(c,l),nt!==4&&(nt=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=Vy(i,c,e);cm(i,S);break e;case 1:l=c;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(wr===null||!wr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=My(i,l,e);cm(i,P);break e}}i=i.return}while(i!==null)}tv(n)}catch(O){e=O,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function Zy(){var t=El.current;return El.current=kl,t===null?kl:t}function jh(){(nt===0||nt===3||nt===2)&&(nt=4),ct===null||!(rs&268435455)&&!(ru&268435455)||ur(ct,mt)}function bl(t,e){var n=we;we|=2;var r=Zy();(ct!==t||mt!==e)&&(jn=null,Yr(t,e));do try{hk();break}catch(s){Jy(t,s)}while(!0);if(mh(),we=n,El.current=r,Xe!==null)throw Error(B(261));return ct=null,mt=0,nt}function hk(){for(;Xe!==null;)ev(Xe)}function fk(){for(;Xe!==null&&!Ow();)ev(Xe)}function ev(t){var e=rv(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?tv(t):Xe=e,Ah.current=null}function tv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ok(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Xe=null;return}}else if(n=ik(n,e,Ht),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);nt===0&&(nt=5)}function Br(t,e,n){var r=Te,s=nn.transition;try{nn.transition=null,Te=1,pk(t,e,n,r)}finally{nn.transition=s,Te=r}return null}function pk(t,e,n,r){do Bs();while(pr!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Kw(t,i),t===ct&&(Xe=ct=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pa||(Pa=!0,sv(al,function(){return Bs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nn.transition,nn.transition=null;var o=Te;Te=1;var l=we;we|=4,Ah.current=null,lk(t,n),Qy(n,t),D1(Yc),ul=!!Qc,Yc=Qc=null,t.current=n,uk(n),Fw(),we=l,Te=o,nn.transition=i}else t.current=n;if(Pa&&(Pa=!1,pr=t,Tl=s),i=t.pendingLanes,i===0&&(wr=null),Bw(n.stateNode),Ut(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sl)throw Sl=!1,t=gd,gd=null,t;return Tl&1&&t.tag!==0&&Bs(),i=t.pendingLanes,i&1?t===yd?no++:(no=0,yd=t):no=0,Mr(),null}function Bs(){if(pr!==null){var t=V0(Tl),e=nn.transition,n=Te;try{if(nn.transition=null,Te=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,Tl=0,we&6)throw Error(B(331));var s=we;for(we|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:eo(8,p,i)}var m=p.child;if(m!==null)m.return=p,Q=m;else for(;Q!==null;){p=Q;var _=p.sibling,I=p.return;if(Gy(p),p===d){Q=null;break}if(_!==null){_.return=I,Q=_;break}Q=I}}}var b=i.alternate;if(b!==null){var C=b.child;if(C!==null){b.child=null;do{var D=C.sibling;C.sibling=null,C=D}while(C!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Q=S;break e}Q=i.return}}var w=t.current;for(Q=w;Q!==null;){o=Q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Q=T;else e:for(o=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nu(9,l)}}catch(O){Ue(l,l.return,O)}if(l===o){Q=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,Q=P;break e}Q=l.return}}if(we=s,Mr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Kl,t)}catch{}r=!0}return r}finally{Te=n,nn.transition=e}}return!1}function Cm(t,e,n){e=Js(n,e),e=Vy(t,e,1),t=xr(t,e,1),e=Dt(),t!==null&&(Oo(t,1,e),Ut(t,e))}function Ue(t,e,n){if(t.tag===3)Cm(t,t,n);else for(;e!==null;){if(e.tag===3){Cm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){t=Js(n,t),t=My(e,t,1),e=xr(e,t,1),t=Dt(),e!==null&&(Oo(e,1,t),Ut(e,t));break}}e=e.return}}function mk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(mt&n)===n&&(nt===4||nt===3&&(mt&130023424)===mt&&500>Ge()-Ph?Yr(t,0):Nh|=n),Ut(t,e)}function nv(t,e){e===0&&(t.mode&1?(e=xa,xa<<=1,!(xa&130023424)&&(xa=4194304)):e=1);var n=Dt();t=Gn(t,e),t!==null&&(Oo(t,e,n),Ut(t,n))}function gk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nv(t,n)}function yk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),nv(t,n)}var rv;rv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,sk(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Ve&&e.flags&1048576&&ay(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wa(t,e),t=e.pendingProps;var s=Ks(e,It.current);Us(e,n),s=Eh(null,e,r,t,s,n);var i=Sh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(i=!0,pl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vh(e),s.updater=tu,e.stateNode=s,s._reactInternals=e,id(e,r,t,n),e=ld(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&dh(e),jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_k(r),t=dn(r,t),s){case 0:e=ad(null,e,r,t,n);break e;case 1:e=wm(null,e,r,t,n);break e;case 11:e=_m(null,e,r,t,n);break e;case 14:e=xm(null,e,r,dn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),ad(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),wm(t,e,r,s,n);case 3:e:{if(zy(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,fy(t,e),_l(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(B(423)),e),e=km(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(B(424)),e),e=km(t,e,r,n,s);break e}else for(Wt=_r(e.stateNode.containerInfo.firstChild),Gt=e,Ve=!0,fn=null,n=dy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){e=qn(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return py(e),t===null&&nd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xc(r,s)?o=null:i!==null&&Xc(r,i)&&(e.flags|=32),Fy(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&nd(e),null;case 13:return Uy(t,e,n);case 4:return _h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),_m(t,e,r,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ne(yl,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!Ft.current){e=qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Bn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),rd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Us(e,n),s=sn(s),r=r(s),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,s=dn(r,e.pendingProps),s=dn(r.type,s),xm(t,e,r,s,n);case 15:return Ly(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Wa(t,e),e.tag=1,zt(r)?(t=!0,pl(e)):t=!1,Us(e,n),Dy(e,r,s),id(e,r,s,n),ld(null,e,r,!0,t,n);case 19:return By(t,e,n);case 22:return Oy(t,e,n)}throw Error(B(156,e.tag))};function sv(t,e){return C0(t,e)}function vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new vk(t,e,n,r)}function Dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _k(t){if(typeof t=="function")return Dh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zd)return 11;if(t===eh)return 14}return 2}function Er(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ka(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bs:return Xr(n.children,s,i,e);case Jd:o=8,s|=8;break;case Nc:return t=tn(12,n,e,s|2),t.elementType=Nc,t.lanes=i,t;case Pc:return t=tn(13,n,e,s),t.elementType=Pc,t.lanes=i,t;case Cc:return t=tn(19,n,e,s),t.elementType=Cc,t.lanes=i,t;case p0:return su(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case h0:o=10;break e;case f0:o=9;break e;case Zd:o=11;break e;case eh:o=14;break e;case or:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=tn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xr(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function su(t,e,n,r){return t=tn(22,t,r,e),t.elementType=p0,t.lanes=n,t.stateNode={isHidden:!1},t}function uc(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function cc(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vh(t,e,n,r,s,i,o,l,c){return t=new xk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(i),t}function wk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iv(t){if(!t)return Nr;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(zt(n))return iy(t,n,e)}return e}function ov(t,e,n,r,s,i,o,l,c){return t=Vh(n,r,!0,t,s,i,o,l,c),t.context=iv(null),n=t.current,r=Dt(),s=kr(n),i=Bn(r,s),i.callback=e??null,xr(n,i,s),t.current.lanes=s,Oo(t,s,r),Ut(t,r),t}function iu(t,e,n,r){var s=e.current,i=Dt(),o=kr(s);return n=iv(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xr(s,e,o),t!==null&&(gn(t,s,o,i),Ba(t,s,o)),o}function Il(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mh(t,e){Rm(t,e),(t=t.alternate)&&Rm(t,e)}function kk(){return null}var av=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lh(t){this._internalRoot=t}ou.prototype.render=Lh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));iu(t,e,null,null)};ou.prototype.unmount=Lh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){iu(null,t,null,null)}),e[Wn]=null}};function ou(t){this._internalRoot=t}ou.prototype.unstable_scheduleHydration=function(t){if(t){var e=O0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&z0(t)}};function Oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jm(){}function Ek(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Il(o);i.call(d)}}var o=ov(e,r,t,0,null,!1,!1,"",jm);return t._reactRootContainer=o,t[Wn]=o.current,yo(t.nodeType===8?t.parentNode:t),ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Il(c);l.call(d)}}var c=Vh(t,0,!1,null,null,!1,!1,"",jm);return t._reactRootContainer=c,t[Wn]=c.current,yo(t.nodeType===8?t.parentNode:t),ss(function(){iu(e,c,n,r)}),c}function lu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Il(o);l.call(c)}}iu(e,o,t,s)}else o=Ek(n,e,t,s,r);return Il(o)}M0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$i(e.pendingLanes);n!==0&&(rh(e,n|1),Ut(e,Ge()),!(we&6)&&(Zs=Ge()+500,Mr()))}break;case 13:ss(function(){var r=Gn(t,1);if(r!==null){var s=Dt();gn(r,t,1,s)}}),Mh(t,1)}};sh=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=Dt();gn(e,t,134217728,n)}Mh(t,134217728)}};L0=function(t){if(t.tag===13){var e=kr(t),n=Gn(t,e);if(n!==null){var r=Dt();gn(n,t,e,r)}Mh(t,e)}};O0=function(){return Te};F0=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Uc=function(t,e,n){switch(e){case"input":if(Dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jl(r);if(!s)throw Error(B(90));g0(r),Dc(r,s)}}}break;case"textarea":v0(t,n);break;case"select":e=n.value,e!=null&&Ls(t,!!n.multiple,e,!1)}};T0=Ch;b0=ss;var Sk={usingClientEntryPoint:!1,Events:[zo,Ps,Jl,E0,S0,Ch]},Fi={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tk={bundleType:Fi.bundleType,version:Fi.version,rendererPackageName:Fi.rendererPackageName,rendererConfig:Fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N0(t),t===null?null:t.stateNode},findFiberByHostInstance:Fi.findFiberByHostInstance||kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ca.isDisabled&&Ca.supportsFiber)try{Kl=Ca.inject(Tk),kn=Ca}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sk;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oh(e))throw Error(B(200));return wk(t,e,null,n)};Kt.createRoot=function(t,e){if(!Oh(t))throw Error(B(299));var n=!1,r="",s=av;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vh(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,yo(t.nodeType===8?t.parentNode:t),new Lh(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=N0(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return ss(t)};Kt.hydrate=function(t,e,n){if(!au(e))throw Error(B(200));return lu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Oh(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=av;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ov(e,null,t,1,n??null,s,!1,i,o),t[Wn]=e.current,yo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ou(e)};Kt.render=function(t,e,n){if(!au(e))throw Error(B(200));return lu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!au(t))throw Error(B(40));return t._reactRootContainer?(ss(function(){lu(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Ch;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!au(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return lu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function lv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lv)}catch(t){console.error(t)}}lv(),l0.exports=Kt;var bk=l0.exports,Dm=bk;Ic.createRoot=Dm.createRoot,Ic.hydrateRoot=Dm.hydrateRoot;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ik={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},p)=>H.createElement("svg",{ref:p,...Ik,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Ak(t)}`,l].join(" "),...d},[...e.map(([m,_])=>H.createElement(m,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=ee("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=ee("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ee("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=ee("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=ee("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=ee("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=ee("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ee("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=ee("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ee("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=ee("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=ee("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=ee("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=ee("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=ee("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=ee("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=ee("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var zm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let _=(l&15)<<2|d>>6,I=d&63;c||(I=64,o||(_=64)),r.push(n[p],n[m],n[_],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new uE;const _=i<<2|l>>4;if(r.push(_),d!==64){const I=l<<4&240|d>>2;if(r.push(I),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cE=function(t){const e=pv(t);return mv.encodeByteArray(e,!0)},Pl=function(t){return cE(t).replace(/\./g,"")},gv=function(t){try{return mv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=()=>dE().__FIREBASE_DEFAULTS__,fE=()=>{if(typeof process>"u"||typeof zm>"u")return;const t=zm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gv(t[1]);return e&&JSON.parse(e)},du=()=>{try{return hE()||fE()||pE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yv=t=>{var e,n;return(n=(e=du())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mE=t=>{const e=yv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vv=()=>{var t;return(t=du())===null||t===void 0?void 0:t.config},_v=t=>{var e;return(e=du())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pl(JSON.stringify(n)),Pl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function _E(){var t;const e=(t=du())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EE(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SE(){return!_E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){try{return typeof indexedDB=="object"}catch{return!1}}function bE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="FirebaseError";class Zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IE,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}}class Bo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?AE(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Zn(s,l,r)}}function AE(t,e){return t.replace(NE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const NE=/\{\$([^}]+)}/g;function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Um(i)&&Um(o)){if(!Cl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Um(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CE(t,e){const n=new RE(t,e);return n.subscribe.bind(n)}class RE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jE(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pc),s.error===void 0&&(s.error=pc),s.complete===void 0&&(s.complete=pc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ME(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VE(t){return t===$r?void 0:t}function ME(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new DE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const OE={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},FE=_e.INFO,zE={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},UE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zh{constructor(e){this.name=e,this._logLevel=FE,this._logHandler=UE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const BE=(t,e)=>e.some(n=>t instanceof n);let Bm,$m;function $E(){return Bm||(Bm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HE(){return $m||($m=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xv=new WeakMap,wd=new WeakMap,wv=new WeakMap,mc=new WeakMap,Uh=new WeakMap;function WE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Sr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xv.set(n,t)}).catch(()=>{}),Uh.set(e,t),e}function GE(t){if(wd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wd.set(t,e)}let kd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qE(t){kd=t(kd)}function KE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gc(this),e,...n);return wv.set(r,e.sort?e.sort():[e]),Sr(r)}:HE().includes(t)?function(...e){return t.apply(gc(this),e),Sr(xv.get(this))}:function(...e){return Sr(t.apply(gc(this),e))}}function QE(t){return typeof t=="function"?KE(t):(t instanceof IDBTransaction&&GE(t),BE(t,$E())?new Proxy(t,kd):t)}function Sr(t){if(t instanceof IDBRequest)return WE(t);if(mc.has(t))return mc.get(t);const e=QE(t);return e!==t&&(mc.set(t,e),Uh.set(e,t)),e}const gc=t=>Uh.get(t);function YE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Sr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Sr(o.result),c.oldVersion,c.newVersion,Sr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const XE=["get","getKey","getAll","getAllKeys","count"],JE=["put","add","delete","clear"],yc=new Map;function Hm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yc.get(e))return yc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=JE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||XE.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return yc.set(e,i),i}qE(t=>({...t,get:(e,n,r)=>Hm(e,n)||t.get(e,n,r),has:(e,n)=>!!Hm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ed="@firebase/app",Wm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new zh("@firebase/app"),tS="@firebase/app-compat",nS="@firebase/analytics-compat",rS="@firebase/analytics",sS="@firebase/app-check-compat",iS="@firebase/app-check",oS="@firebase/auth",aS="@firebase/auth-compat",lS="@firebase/database",uS="@firebase/data-connect",cS="@firebase/database-compat",dS="@firebase/functions",hS="@firebase/functions-compat",fS="@firebase/installations",pS="@firebase/installations-compat",mS="@firebase/messaging",gS="@firebase/messaging-compat",yS="@firebase/performance",vS="@firebase/performance-compat",_S="@firebase/remote-config",xS="@firebase/remote-config-compat",wS="@firebase/storage",kS="@firebase/storage-compat",ES="@firebase/firestore",SS="@firebase/vertexai-preview",TS="@firebase/firestore-compat",bS="firebase",IS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="[DEFAULT]",AS={[Ed]:"fire-core",[tS]:"fire-core-compat",[rS]:"fire-analytics",[nS]:"fire-analytics-compat",[iS]:"fire-app-check",[sS]:"fire-app-check-compat",[oS]:"fire-auth",[aS]:"fire-auth-compat",[lS]:"fire-rtdb",[uS]:"fire-data-connect",[cS]:"fire-rtdb-compat",[dS]:"fire-fn",[hS]:"fire-fn-compat",[fS]:"fire-iid",[pS]:"fire-iid-compat",[mS]:"fire-fcm",[gS]:"fire-fcm-compat",[yS]:"fire-perf",[vS]:"fire-perf-compat",[_S]:"fire-rc",[xS]:"fire-rc-compat",[wS]:"fire-gcs",[kS]:"fire-gcs-compat",[ES]:"fire-fst",[TS]:"fire-fst-compat",[SS]:"fire-vertex","fire-js":"fire-js",[bS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new Map,NS=new Map,Td=new Map;function Gm(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(Td.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Td.set(e,t);for(const n of Rl.values())Gm(n,t);for(const n of NS.values())Gm(n,t);return!0}function Bh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function On(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new Bo("app","Firebase",PS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=IS;function kv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=vv()),!n)throw Tr.create("no-options");const i=Rl.get(s);if(i){if(Cl(n,i.options)&&Cl(r,i.config))return i;throw Tr.create("duplicate-app",{appName:s})}const o=new LE(s);for(const c of Td.values())o.addComponent(c);const l=new CS(n,r,o);return Rl.set(s,l),l}function Ev(t=Sd){const e=Rl.get(t);if(!e&&t===Sd&&vv())return kv();if(!e)throw Tr.create("no-app",{appName:t});return e}function br(t,e,n){var r;let s=(r=AS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(l.join(" "));return}ei(new is(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebase-heartbeat-database",jS=1,bo="firebase-heartbeat-store";let vc=null;function Sv(){return vc||(vc=YE(RS,jS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),vc}async function DS(t){try{const n=(await Sv()).transaction(bo),r=await n.objectStore(bo).get(Tv(t));return await n.done,r}catch(e){if(e instanceof Zn)Kn.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function qm(t,e){try{const r=(await Sv()).transaction(bo,"readwrite");await r.objectStore(bo).put(e,Tv(t)),await r.done}catch(n){if(n instanceof Zn)Kn.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function Tv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1024,MS=30*24*60*60*1e3;class LS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Km();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=MS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Km(),{heartbeatsToSend:r,unsentEntries:s}=OS(this._heartbeatsCache.heartbeats),i=Pl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function Km(){return new Date().toISOString().substring(0,10)}function OS(t,e=VS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Qm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Qm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?bE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Qm(t){return Pl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){ei(new is("platform-logger",e=>new ZE(e),"PRIVATE")),ei(new is("heartbeat",e=>new LS(e),"PRIVATE")),br(Ed,Wm,t),br(Ed,Wm,"esm2017"),br("fire-js","")}zS("");var US="firebase",BS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(US,BS,"app");function $h(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $S=bv,Iv=new Bo("auth","Firebase",bv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new zh("@firebase/auth");function HS(t,...e){jl.logLevel<=_e.WARN&&jl.warn(`Auth (${fi}): ${t}`,...e)}function Qa(t,...e){jl.logLevel<=_e.ERROR&&jl.error(`Auth (${fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,...e){throw Wh(t,...e)}function yn(t,...e){return Wh(t,...e)}function Hh(t,e,n){const r=Object.assign(Object.assign({},$S()),{[e]:n});return new Bo("auth","Firebase",r).create(e,{appName:t.name})}function Jr(t){return Hh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&In(t,"argument-error"),Hh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Iv.create(t,...e)}function ae(t,e,...n){if(!t)throw Wh(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qa(e),new Error(e)}function Qn(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GS(){return Ym()==="http:"||Ym()==="https:"}function Ym(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GS()||wE()||"connection"in navigator)?navigator.onLine:!0}function KS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=vE()||kE()}get(){return qS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Ho(3e4,6e4);function qh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pi(t,e,n,r,s={}){return Nv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=$o(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return xE()||(d.referrerPolicy="no-referrer"),Av.fetch()(Pv(t,t.config.apiHost,n,l),d)})}async function Nv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QS),e);try{const s=new JS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ra(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ra(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ra(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ra(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Hh(t,p,d);In(t,p)}}catch(s){if(s instanceof Zn)throw s;In(t,"network-request-failed",{message:String(s)})}}async function XS(t,e,n,r,s={}){const i=await pi(t,e,n,r,s);return"mfaPendingCredential"in i&&In(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Pv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Gh(t.config,s):`${t.config.apiScheme}://${s}`}class JS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),YS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ra(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e){return pi(t,"POST","/v1/accounts:delete",e)}async function Cv(t,e){return pi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eT(t,e=!1){const n=an(t),r=await n.getIdToken(e),s=Kh(r);ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ro(_c(s.auth_time)),issuedAtTime:ro(_c(s.iat)),expirationTime:ro(_c(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _c(t){return Number(t)*1e3}function Kh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qa("JWT malformed, contained fewer than 3 sections"),null;try{const s=gv(n);return s?JSON.parse(s):(Qa("Failed to decode base64 JWT payload"),null)}catch(s){return Qa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Xm(t){const e=Kh(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zn&&tT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ro(this.lastLoginAt),this.creationTime=ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Io(t,Cv(n,{idToken:r}));ae(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Rv(i.providerUserInfo):[],l=sT(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Id(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function rT(t){const e=an(t);await Dl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Rv(t){return t.map(e=>{var{providerId:n}=e,r=$h(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(t,e){const n=await Nv(t,{},async()=>{const r=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Pv(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Av.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oT(t,e){return pi(t,"POST","/v2/accounts:revokeToken",qh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=Xm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iT(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $s;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=$h(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Id(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eT(this,e)}reload(){return rT(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await Io(this,ZS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,D=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:T,emailVerified:P,isAnonymous:O,providerData:M,stsTokenManager:x}=n;ae(T&&x,e,"internal-error");const y=$s.fromJSON(this.name,x);ae(typeof T=="string",e,"internal-error"),sr(m,e.name),sr(_,e.name),ae(typeof P=="boolean",e,"internal-error"),ae(typeof O=="boolean",e,"internal-error"),sr(I,e.name),sr(b,e.name),sr(C,e.name),sr(D,e.name),sr(S,e.name),sr(w,e.name);const k=new zn({uid:T,auth:e,email:_,emailVerified:P,displayName:m,isAnonymous:O,photoURL:b,phoneNumber:I,tenantId:C,stsTokenManager:y,createdAt:S,lastLoginAt:w});return M&&Array.isArray(M)&&(k.providerData=M.map(E=>Object.assign({},E))),D&&(k._redirectEventId=D),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new $s;s.updateFromServerResponse(n);const i=new zn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Rv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new $s;l.updateFromIdToken(r);const c=new zn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Id(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map;function Un(t){Qn(t instanceof Function,"Expected a class definition");let e=Jm.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jv.type="NONE";const Zm=jv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ya(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ya("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(Un(Zm),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Un(Zm);const o=Ya(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(o);if(p){const m=zn._fromJSON(e,p);d!==i&&(l=m),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Hs(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Hs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fv(e))return"Blackberry";if(zv(e))return"Webos";if(Vv(e))return"Safari";if((e.includes("chrome/")||Mv(e))&&!e.includes("edge/"))return"Chrome";if(Ov(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Dv(t=At()){return/firefox\//i.test(t)}function Vv(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mv(t=At()){return/crios\//i.test(t)}function Lv(t=At()){return/iemobile/i.test(t)}function Ov(t=At()){return/android/i.test(t)}function Fv(t=At()){return/blackberry/i.test(t)}function zv(t=At()){return/webos/i.test(t)}function Qh(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aT(t=At()){var e;return Qh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lT(){return EE()&&document.documentMode===10}function Uv(t=At()){return Qh(t)||Ov(t)||zv(t)||Fv(t)||/windows phone/i.test(t)||Lv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t,e=[]){let n;switch(t){case"Browser":n=eg(At());break;case"Worker":n=`${eg(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t,e={}){return pi(t,"GET","/v2/passwordPolicy",qh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=6;class hT{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tg(this),this.idTokenSubscription=new tg(this),this.beforeStateQueue=new uT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cv(this,{idToken:e}),r=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Jr(this));const n=e?an(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cT(this),n=new hT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hu(t){return an(t)}class tg{constructor(e){this.auth=e,this.observer=null,this.addObserver=CE(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pT(t){Yh=t}function mT(t){return Yh.loadJS(t)}function gT(){return Yh.gapiScript}function yT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e){const n=Bh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Cl(i,e??{}))return s;In(s,"already-initialized")}return n.initialize({options:e})}function _T(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xT(t,e,n){const r=hu(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=$v(e),{host:o,port:l}=wT(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),kT()}function $v(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wT(t){const e=$v(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ng(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ng(o)}}}function ng(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e){return XS(t,"POST","/v1/accounts:signInWithIdp",qh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="http://localhost";class os extends Hv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=$h(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new os(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}buildRequest(){const e={requestUri:ET,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Xh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Wo{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends Wo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vn.credential(n,r)}catch{return null}}}Vn.GOOGLE_SIGN_IN_METHOD="google.com";Vn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Wo{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Wo{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zn._fromIdTokenResponse(e,r,s),o=rg(r);return new ti({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=rg(r);return new ti({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function rg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends Zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vl(e,n,r,s)}}function Wv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vl._fromErrorAndOperation(t,i,e,r):i})}async function ST(t,e,n=!1){const r=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ti._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e,n=!1){const{auth:r}=t;if(On(r.app))return Promise.reject(Jr(r));const s="reauthenticate";try{const i=await Io(t,Wv(r,s,e,t),n);ae(i.idToken,r,"internal-error");const o=Kh(i.idToken);ae(o,r,"internal-error");const{sub:l}=o;return ae(t.uid===l,r,"user-mismatch"),ti._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&In(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t,e,n=!1){if(On(t.app))return Promise.reject(Jr(t));const r="signIn",s=await Wv(t,r,e),i=await ti._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function IT(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function AT(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function NT(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function PT(t){return an(t).signOut()}const Ml="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ml,"1"),this.storage.removeItem(Ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=1e3,RT=10;class qv extends Gv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RT):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qv.type="LOCAL";const jT=qv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends Gv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kv.type="SESSION";const Qv=Kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new fu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await DT(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Jh("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const _=m;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(_.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function MT(t){Sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function LT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FT(){return Yv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firebaseLocalStorageDb",zT=1,Ll="firebaseLocalStorage",Jv="fbase_key";class Go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pu(t,e){return t.transaction([Ll],e?"readwrite":"readonly").objectStore(Ll)}function UT(){const t=indexedDB.deleteDatabase(Xv);return new Go(t).toPromise()}function Ad(){const t=indexedDB.open(Xv,zT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ll,{keyPath:Jv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ll)?e(r):(r.close(),await UT(),e(await Ad()))})})}async function sg(t,e,n){const r=pu(t,!0).put({[Jv]:e,value:n});return new Go(r).toPromise()}async function BT(t,e){const n=pu(t,!1).get(e),r=await new Go(n).toPromise();return r===void 0?null:r.value}function ig(t,e){const n=pu(t,!0).delete(e);return new Go(n).toPromise()}const $T=800,HT=3;class Zv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ad(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fu._getInstance(FT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await LT(),!this.activeServiceWorker)return;this.sender=new VT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ad();return await sg(e,Ml,"1"),await ig(e,Ml),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ig(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pu(s,!1).getAll();return new Go(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$T)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zv.type="LOCAL";const WT=Zv;new Ho(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t,e){return e?Un(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends Hv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GT(t){return bT(t.auth,new Zh(t),t.bypassAuthState)}function qT(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),TT(n,new Zh(t),t.bypassAuthState)}async function KT(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),ST(n,new Zh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GT;case"linkViaPopup":case"linkViaRedirect":return KT;case"reauthViaPopup":case"reauthViaRedirect":return qT;default:In(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new Ho(2e3,1e4);async function YT(t,e,n){if(On(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=hu(t);WS(t,e,Xh);const s=e_(r,n);return new Kr(r,"signInViaPopup",e,s).executeNotNull()}class Kr extends t_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Kr.currentPopupAction&&Kr.currentPopupAction.cancel(),Kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QT.get())};e()}}Kr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="pendingRedirect",Xa=new Map;class JT extends t_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xa.get(this.auth._key());if(!e){try{const r=await ZT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xa.set(this.auth._key(),e)}return this.bypassAuthState||Xa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZT(t,e){const n=n2(e),r=t2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function e2(t,e){Xa.set(t._key(),e)}function t2(t){return Un(t._redirectPersistence)}function n2(t){return Ya(XT,t.config.apiKey,t.name)}async function r2(t,e,n=!1){if(On(t.app))return Promise.reject(Jr(t));const r=hu(t),s=e_(r,e),o=await new JT(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=10*60*1e3;class i2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!n_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s2&&this.cachedEventUids.clear(),this.cachedEventUids.has(og(e))}saveEventToCache(e){this.cachedEventUids.add(og(e)),this.lastProcessedEventTime=Date.now()}}function og(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e={}){return pi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u2=/^https?/;async function c2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await a2(t);for(const n of e)try{if(d2(n))return}catch{}In(t,"unauthorized-domain")}function d2(t){const e=bd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!u2.test(n))return!1;if(l2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new Ho(3e4,6e4);function ag(){const t=Sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f2(t){return new Promise((e,n)=>{var r,s,i;function o(){ag(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ag(),n(yn(t,"network-request-failed"))},timeout:h2.get()})}if(!((s=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Sn().gapi)===null||i===void 0)&&i.load)o();else{const l=yT("iframefcb");return Sn()[l]=()=>{gapi.load?o():n(yn(t,"network-request-failed"))},mT(`${gT()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ja=null,e})}let Ja=null;function p2(t){return Ja=Ja||f2(t),Ja}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new Ho(5e3,15e3),g2="__/auth/iframe",y2="emulator/auth/iframe",v2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x2(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gh(e,y2):`https://${t.config.authDomain}/${g2}`,r={apiKey:e.apiKey,appName:t.name,v:fi},s=_2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$o(r).slice(1)}`}async function w2(t){const e=await p2(t),n=Sn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:x2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),l=Sn().setTimeout(()=>{i(o)},m2.get());function c(){Sn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E2=500,S2=600,T2="_blank",b2="http://localhost";class lg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I2(t,e,n,r=E2,s=S2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},k2),{width:r.toString(),height:s.toString(),top:i,left:o}),d=At().toLowerCase();n&&(l=Mv(d)?T2:n),Dv(d)&&(e=e||b2,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[I,b])=>`${_}${I}=${b},`,"");if(aT(d)&&l!=="_self")return A2(e||"",l),new lg(null);const m=window.open(e||"",l,p);ae(m,t,"popup-blocked");try{m.focus()}catch{}return new lg(m)}function A2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="__/auth/handler",P2="emulator/auth/handler",C2=encodeURIComponent("fac");async function ug(t,e,n,r,s,i){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fi,eventId:s};if(e instanceof Xh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",PE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Wo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),d=c?`#${C2}=${encodeURIComponent(c)}`:"";return`${R2(t)}?${$o(l).slice(1)}${d}`}function R2({config:t}){return t.emulator?Gh(t,P2):`https://${t.authDomain}/${N2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="webStorageSupport";class j2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qv,this._completeRedirectFn=r2,this._overrideRedirectResult=e2}async _openPopup(e,n,r,s){var i;Qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ug(e,n,r,bd(),s);return I2(e,o,Jh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ug(e,n,r,bd(),s);return MT(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await w2(e),r=new i2(e);return n.register("authEvent",s=>(ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xc,{type:xc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xc];o!==void 0&&n(!!o),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uv()||Vv()||Qh()}}const D2=j2;var cg="@firebase/auth",dg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L2(t){ei(new is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bv(t)},d=new fT(r,s,i,c);return _T(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new is("auth-internal",e=>{const n=hu(e.getProvider("auth").getImmediate());return(r=>new V2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(cg,dg,M2(t)),br(cg,dg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=5*60,F2=_v("authIdTokenMaxAge")||O2;let hg=null;const z2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F2)return;const s=n==null?void 0:n.token;hg!==s&&(hg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function U2(t=Ev()){const e=Bh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vT(t,{popupRedirectResolver:D2,persistence:[WT,jT,Qv]}),r=_v("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=z2(i.toString());AT(n,o,()=>o(n.currentUser)),IT(n,l=>o(l))}}const s=yv("auth");return s&&xT(n,`http://${s}`),n}function B2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",B2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L2("Browser");var fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,r_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function k(){}k.prototype=y.prototype,x.D=y.prototype,x.prototype=new k,x.prototype.constructor=x,x.C=function(E,N,R){for(var v=Array(arguments.length-2),te=2;te<arguments.length;te++)v[te-2]=arguments[te];return y.prototype[N].apply(E,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,k){k||(k=0);var E=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)E[N]=y.charCodeAt(k++)|y.charCodeAt(k++)<<8|y.charCodeAt(k++)<<16|y.charCodeAt(k++)<<24;else for(N=0;16>N;++N)E[N]=y[k++]|y[k++]<<8|y[k++]<<16|y[k++]<<24;y=x.g[0],k=x.g[1],N=x.g[2];var R=x.g[3],v=y+(R^k&(N^R))+E[0]+3614090360&4294967295;y=k+(v<<7&4294967295|v>>>25),v=R+(N^y&(k^N))+E[1]+3905402710&4294967295,R=y+(v<<12&4294967295|v>>>20),v=N+(k^R&(y^k))+E[2]+606105819&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(y^N&(R^y))+E[3]+3250441966&4294967295,k=N+(v<<22&4294967295|v>>>10),v=y+(R^k&(N^R))+E[4]+4118548399&4294967295,y=k+(v<<7&4294967295|v>>>25),v=R+(N^y&(k^N))+E[5]+1200080426&4294967295,R=y+(v<<12&4294967295|v>>>20),v=N+(k^R&(y^k))+E[6]+2821735955&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(y^N&(R^y))+E[7]+4249261313&4294967295,k=N+(v<<22&4294967295|v>>>10),v=y+(R^k&(N^R))+E[8]+1770035416&4294967295,y=k+(v<<7&4294967295|v>>>25),v=R+(N^y&(k^N))+E[9]+2336552879&4294967295,R=y+(v<<12&4294967295|v>>>20),v=N+(k^R&(y^k))+E[10]+4294925233&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(y^N&(R^y))+E[11]+2304563134&4294967295,k=N+(v<<22&4294967295|v>>>10),v=y+(R^k&(N^R))+E[12]+1804603682&4294967295,y=k+(v<<7&4294967295|v>>>25),v=R+(N^y&(k^N))+E[13]+4254626195&4294967295,R=y+(v<<12&4294967295|v>>>20),v=N+(k^R&(y^k))+E[14]+2792965006&4294967295,N=R+(v<<17&4294967295|v>>>15),v=k+(y^N&(R^y))+E[15]+1236535329&4294967295,k=N+(v<<22&4294967295|v>>>10),v=y+(N^R&(k^N))+E[1]+4129170786&4294967295,y=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(y^k))+E[6]+3225465664&4294967295,R=y+(v<<9&4294967295|v>>>23),v=N+(y^k&(R^y))+E[11]+643717713&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^y&(N^R))+E[0]+3921069994&4294967295,k=N+(v<<20&4294967295|v>>>12),v=y+(N^R&(k^N))+E[5]+3593408605&4294967295,y=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(y^k))+E[10]+38016083&4294967295,R=y+(v<<9&4294967295|v>>>23),v=N+(y^k&(R^y))+E[15]+3634488961&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^y&(N^R))+E[4]+3889429448&4294967295,k=N+(v<<20&4294967295|v>>>12),v=y+(N^R&(k^N))+E[9]+568446438&4294967295,y=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(y^k))+E[14]+3275163606&4294967295,R=y+(v<<9&4294967295|v>>>23),v=N+(y^k&(R^y))+E[3]+4107603335&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^y&(N^R))+E[8]+1163531501&4294967295,k=N+(v<<20&4294967295|v>>>12),v=y+(N^R&(k^N))+E[13]+2850285829&4294967295,y=k+(v<<5&4294967295|v>>>27),v=R+(k^N&(y^k))+E[2]+4243563512&4294967295,R=y+(v<<9&4294967295|v>>>23),v=N+(y^k&(R^y))+E[7]+1735328473&4294967295,N=R+(v<<14&4294967295|v>>>18),v=k+(R^y&(N^R))+E[12]+2368359562&4294967295,k=N+(v<<20&4294967295|v>>>12),v=y+(k^N^R)+E[5]+4294588738&4294967295,y=k+(v<<4&4294967295|v>>>28),v=R+(y^k^N)+E[8]+2272392833&4294967295,R=y+(v<<11&4294967295|v>>>21),v=N+(R^y^k)+E[11]+1839030562&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^y)+E[14]+4259657740&4294967295,k=N+(v<<23&4294967295|v>>>9),v=y+(k^N^R)+E[1]+2763975236&4294967295,y=k+(v<<4&4294967295|v>>>28),v=R+(y^k^N)+E[4]+1272893353&4294967295,R=y+(v<<11&4294967295|v>>>21),v=N+(R^y^k)+E[7]+4139469664&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^y)+E[10]+3200236656&4294967295,k=N+(v<<23&4294967295|v>>>9),v=y+(k^N^R)+E[13]+681279174&4294967295,y=k+(v<<4&4294967295|v>>>28),v=R+(y^k^N)+E[0]+3936430074&4294967295,R=y+(v<<11&4294967295|v>>>21),v=N+(R^y^k)+E[3]+3572445317&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^y)+E[6]+76029189&4294967295,k=N+(v<<23&4294967295|v>>>9),v=y+(k^N^R)+E[9]+3654602809&4294967295,y=k+(v<<4&4294967295|v>>>28),v=R+(y^k^N)+E[12]+3873151461&4294967295,R=y+(v<<11&4294967295|v>>>21),v=N+(R^y^k)+E[15]+530742520&4294967295,N=R+(v<<16&4294967295|v>>>16),v=k+(N^R^y)+E[2]+3299628645&4294967295,k=N+(v<<23&4294967295|v>>>9),v=y+(N^(k|~R))+E[0]+4096336452&4294967295,y=k+(v<<6&4294967295|v>>>26),v=R+(k^(y|~N))+E[7]+1126891415&4294967295,R=y+(v<<10&4294967295|v>>>22),v=N+(y^(R|~k))+E[14]+2878612391&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~y))+E[5]+4237533241&4294967295,k=N+(v<<21&4294967295|v>>>11),v=y+(N^(k|~R))+E[12]+1700485571&4294967295,y=k+(v<<6&4294967295|v>>>26),v=R+(k^(y|~N))+E[3]+2399980690&4294967295,R=y+(v<<10&4294967295|v>>>22),v=N+(y^(R|~k))+E[10]+4293915773&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~y))+E[1]+2240044497&4294967295,k=N+(v<<21&4294967295|v>>>11),v=y+(N^(k|~R))+E[8]+1873313359&4294967295,y=k+(v<<6&4294967295|v>>>26),v=R+(k^(y|~N))+E[15]+4264355552&4294967295,R=y+(v<<10&4294967295|v>>>22),v=N+(y^(R|~k))+E[6]+2734768916&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~y))+E[13]+1309151649&4294967295,k=N+(v<<21&4294967295|v>>>11),v=y+(N^(k|~R))+E[4]+4149444226&4294967295,y=k+(v<<6&4294967295|v>>>26),v=R+(k^(y|~N))+E[11]+3174756917&4294967295,R=y+(v<<10&4294967295|v>>>22),v=N+(y^(R|~k))+E[2]+718787259&4294967295,N=R+(v<<15&4294967295|v>>>17),v=k+(R^(N|~y))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(N+(v<<21&4294967295|v>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+R&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var k=y-this.blockSize,E=this.B,N=this.h,R=0;R<y;){if(N==0)for(;R<=k;)s(this,x,R),R+=this.blockSize;if(typeof x=="string"){for(;R<y;)if(E[N++]=x.charCodeAt(R++),N==this.blockSize){s(this,E),N=0;break}}else for(;R<y;)if(E[N++]=x[R++],N==this.blockSize){s(this,E),N=0;break}}this.h=N,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var k=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=k&255,k/=256;for(this.u(x),x=Array(16),y=k=0;4>y;++y)for(var E=0;32>E;E+=8)x[k++]=this.g[y]>>>E&255;return x};function i(x,y){var k=l;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=y(x)}function o(x,y){this.h=y;for(var k=[],E=!0,N=x.length-1;0<=N;N--){var R=x[N]|0;E&&R==y||(k[N]=R,E=!1)}this.g=k}var l={};function c(x){return-128<=x&&128>x?i(x,function(y){return new o([y|0],0>y?-1:0)}):new o([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return D(d(-x));for(var y=[],k=1,E=0;x>=k;E++)y[E]=x/k|0,k*=4294967296;return new o(y,0)}function p(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return D(p(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(y,8)),E=m,N=0;N<x.length;N+=8){var R=Math.min(8,x.length-N),v=parseInt(x.substring(N,N+R),y);8>R?(R=d(Math.pow(y,R)),E=E.j(R).add(d(v))):(E=E.j(k),E=E.add(d(v)))}return E}var m=c(0),_=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-D(this).m();for(var x=0,y=1,k=0;k<this.g.length;k++){var E=this.i(k);x+=(0<=E?E:4294967296+E)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(C(this))return"-"+D(this).toString(x);for(var y=d(Math.pow(x,6)),k=this,E="";;){var N=P(k,y).g;k=S(k,N.j(y));var R=((0<k.g.length?k.g[0]:k.h)>>>0).toString(x);if(k=N,b(k))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function C(x){return x.h==-1}t.l=function(x){return x=S(this,x),C(x)?-1:b(x)?0:1};function D(x){for(var y=x.g.length,k=[],E=0;E<y;E++)k[E]=~x.g[E];return new o(k,~x.h).add(_)}t.abs=function(){return C(this)?D(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),k=[],E=0,N=0;N<=y;N++){var R=E+(this.i(N)&65535)+(x.i(N)&65535),v=(R>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);E=v>>>16,R&=65535,v&=65535,k[N]=v<<16|R}return new o(k,k[k.length-1]&-2147483648?-1:0)};function S(x,y){return x.add(D(y))}t.j=function(x){if(b(this)||b(x))return m;if(C(this))return C(x)?D(this).j(D(x)):D(D(this).j(x));if(C(x))return D(this.j(D(x)));if(0>this.l(I)&&0>x.l(I))return d(this.m()*x.m());for(var y=this.g.length+x.g.length,k=[],E=0;E<2*y;E++)k[E]=0;for(E=0;E<this.g.length;E++)for(var N=0;N<x.g.length;N++){var R=this.i(E)>>>16,v=this.i(E)&65535,te=x.i(N)>>>16,fe=x.i(N)&65535;k[2*E+2*N]+=v*fe,w(k,2*E+2*N),k[2*E+2*N+1]+=R*fe,w(k,2*E+2*N+1),k[2*E+2*N+1]+=v*te,w(k,2*E+2*N+1),k[2*E+2*N+2]+=R*te,w(k,2*E+2*N+2)}for(E=0;E<y;E++)k[E]=k[2*E+1]<<16|k[2*E];for(E=y;E<2*y;E++)k[E]=0;return new o(k,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function T(x,y){this.g=x,this.h=y}function P(x,y){if(b(y))throw Error("division by zero");if(b(x))return new T(m,m);if(C(x))return y=P(D(x),y),new T(D(y.g),D(y.h));if(C(y))return y=P(x,D(y)),new T(D(y.g),y.h);if(30<x.g.length){if(C(x)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var k=_,E=y;0>=E.l(x);)k=O(k),E=O(E);var N=M(k,1),R=M(E,1);for(E=M(E,2),k=M(k,2);!b(E);){var v=R.add(E);0>=v.l(x)&&(N=N.add(k),R=v),E=M(E,1),k=M(k,1)}return y=S(x,N.j(y)),new T(N,y)}for(N=m;0<=x.l(y);){for(k=Math.max(1,Math.floor(x.m()/y.m())),E=Math.ceil(Math.log(k)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=d(k),v=R.j(y);C(v)||0<v.l(x);)k-=E,R=d(k),v=R.j(y);b(R)&&(R=_),N=N.add(R),x=S(x,v)}return new T(N,x)}t.A=function(x){return P(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),k=[],E=0;E<y;E++)k[E]=this.i(E)&x.i(E);return new o(k,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),k=[],E=0;E<y;E++)k[E]=this.i(E)|x.i(E);return new o(k,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),k=[],E=0;E<y;E++)k[E]=this.i(E)^x.i(E);return new o(k,this.h^x.h)};function O(x){for(var y=x.g.length+1,k=[],E=0;E<y;E++)k[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(k,x.h)}function M(x,y){var k=y>>5;y%=32;for(var E=x.g.length-k,N=[],R=0;R<E;R++)N[R]=0<y?x.i(R+k)>>>y|x.i(R+k+1)<<32-y:x.i(R+k);return new o(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,r_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Zr=o}).apply(typeof fg<"u"?fg:typeof self<"u"?self:typeof window<"u"?window:{});var ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s_,Wi,i_,Za,Nd,o_,a_,l_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ja=="object"&&ja];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var j=a[g];if(!(j in f))break e;f=f[j]}a=a[a.length-1],g=f[a],h=h(g),h!=g&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,g=!1,j={next:function(){if(!g&&f<a.length){var V=f++;return{value:h(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,g),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function _(a,h,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,_.apply(null,arguments)}function I(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function b(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,j,V){for(var q=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)q[Ae-2]=arguments[Ae];return h.prototype[j].apply(g,q)}}function C(a){const h=a.length;if(0<h){const f=Array(h);for(let g=0;g<h;g++)f[g]=a[g];return f}return[]}function D(a,h){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const j=a.length||0,V=g.length||0;a.length=j+V;for(let q=0;q<V;q++)a[j+q]=g[q]}else a.push(g)}}class S{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var O=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(a,h,f){for(const g in a)h.call(f,a[g],g,a)}function x(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function y(a){const h={};for(const f in a)h[f]=a[f];return h}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,h){let f,g;for(let j=1;j<arguments.length;j++){g=arguments[j];for(f in g)a[f]=g[f];for(let V=0;V<k.length;V++)f=k[V],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function N(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function v(){var a=J;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class te{constructor(){this.h=this.g=null}add(h,f){const g=fe.get();g.set(h,f),this.h?this.h.next=g:this.g=g,this.h=g}}var fe=new S(()=>new qe,a=>a.reset());class qe{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,W=!1,J=new te,ne=()=>{const a=l.Promise.resolve(void 0);$e=()=>{a.then(pe)}};var pe=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(f){R(f)}var h=fe;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}W=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var st=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function Nt(a,h){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(O){e:{try{P(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Pt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Nt.aa.h.call(this)}}b(Nt,Se);var Pt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),it=0;function ln(a,h,f,g,j){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!g,this.ha=j,this.key=++it,this.da=this.fa=!1}function Yt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function oe(a){this.src=a,this.g={},this.h=0}oe.prototype.add=function(a,h,f,g,j){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=ot(a,h,g,j);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new ln(h,this.src,V,!!g,j),h.fa=f,a.push(h)),h};function Qe(a,h){var f=h.type;if(f in a.g){var g=a.g[f],j=Array.prototype.indexOf.call(g,h,void 0),V;(V=0<=j)&&Array.prototype.splice.call(g,j,1),V&&(Yt(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ot(a,h,f,g){for(var j=0;j<a.length;++j){var V=a[j];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==g)return j}return-1}var L="closure_lm_"+(1e6*Math.random()|0),G={};function Z(a,h,f,g,j){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Z(a,h[V],f,g,j);return null}return f=Ze(f),a&&a[Ke]?a.K(h,f,d(g)?!!g.capture:!1,j):le(a,h,f,!1,g,j)}function le(a,h,f,g,j,V){if(!h)throw Error("Invalid event type");var q=d(j)?!!j.capture:!!j,Ae=ce(a);if(Ae||(a[L]=Ae=new oe(a)),f=Ae.add(h,f,g,q,V),f.proxy)return f;if(g=me(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)st||(j=q),j===void 0&&(j=!1),a.addEventListener(h.toString(),g,j);else if(a.attachEvent)a.attachEvent(Bt(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function me(){function a(f){return h.call(a.src,a.listener,f)}const h=Xt;return a}function at(a,h,f,g,j){if(Array.isArray(h))for(var V=0;V<h.length;V++)at(a,h[V],f,g,j);else g=d(g)?!!g.capture:!!g,f=Ze(f),a&&a[Ke]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],f=ot(V,f,g,j),-1<f&&(Yt(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=ce(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ot(h,f,g,j)),(f=-1<a?h[a]:null)&&Je(f))}function Je(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ke])Qe(h.i,a);else{var f=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(f,g,a.capture):h.detachEvent?h.detachEvent(Bt(f),g):h.addListener&&h.removeListener&&h.removeListener(g),(f=ce(h))?(Qe(f,a),f.h==0&&(f.src=null,h[L]=null)):Yt(a)}}}function Bt(a){return a in G?G[a]:G[a]="on"+a}function Xt(a,h){if(a.da)a=!0;else{h=new Nt(h,this);var f=a.listener,g=a.ha||a.src;a.fa&&Je(a),a=f.call(g,h)}return a}function ce(a){return a=a[L],a instanceof oe?a:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ze(a){return typeof a=="function"?a:(a[De]||(a[De]=function(h){return a.handleEvent(h)}),a[De])}function Pe(){ge.call(this),this.i=new oe(this),this.M=this,this.F=null}b(Pe,ge),Pe.prototype[Ke]=!0,Pe.prototype.removeEventListener=function(a,h,f,g){at(this,a,h,f,g)};function A(a,h){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new Se(h,a);else if(h instanceof Se)h.target=h.target||a;else{var j=h;h=new Se(g,a),E(h,j)}if(j=!0,f)for(var V=f.length-1;0<=V;V--){var q=h.g=f[V];j=z(q,g,!0,h)&&j}if(q=h.g=a,j=z(q,g,!0,h)&&j,j=z(q,g,!1,h)&&j,f)for(V=0;V<f.length;V++)q=h.g=f[V],j=z(q,g,!1,h)&&j}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],g=0;g<f.length;g++)Yt(f[g]);delete a.g[h],a.h--}}this.F=null},Pe.prototype.K=function(a,h,f,g){return this.i.add(String(a),h,!1,f,g)},Pe.prototype.L=function(a,h,f,g){return this.i.add(String(a),h,!0,f,g)};function z(a,h,f,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,V=0;V<h.length;++V){var q=h[V];if(q&&!q.da&&q.capture==f){var Ae=q.listener,dt=q.ha||q.src;q.fa&&Qe(a.i,q),j=Ae.call(dt,g)!==!1&&j}}return j&&!g.defaultPrevented}function $(a,h,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function K(a){a.g=$(()=>{a.g=null,a.i&&(a.i=!1,K(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class X extends ge{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:K(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(a){ge.call(this),this.h=a,this.g={}}b(ie,ge);var Ie=[];function He(a){M(a.g,function(h,f){this.g.hasOwnProperty(f)&&Je(h)},a),a.g={}}ie.prototype.N=function(){ie.aa.N.call(this),He(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ct=l.JSON.stringify,gs=l.JSON.parse,Zo=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function _i(){}_i.prototype.h=null;function Vf(a){return a.h||(a.h=a.i())}function Mf(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tu(){Se.call(this,"d")}b(Tu,Se);function bu(){Se.call(this,"c")}b(bu,Se);var Lr={},Lf=null;function ea(){return Lf=Lf||new Pe}Lr.La="serverreachability";function Of(a){Se.call(this,Lr.La,a)}b(Of,Se);function wi(a){const h=ea();A(h,new Of(h))}Lr.STAT_EVENT="statevent";function Ff(a,h){Se.call(this,Lr.STAT_EVENT,a),this.stat=h}b(Ff,Se);function Rt(a){const h=ea();A(h,new Ff(h,a))}Lr.Ma="timingevent";function zf(a,h){Se.call(this,Lr.Ma,a),this.size=h}b(zf,Se);function ki(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Ei(){this.g=!0}Ei.prototype.xa=function(){this.g=!1};function Px(a,h,f,g,j,V){a.info(function(){if(a.g)if(V)for(var q="",Ae=V.split("&"),dt=0;dt<Ae.length;dt++){var ke=Ae[dt].split("=");if(1<ke.length){var _t=ke[0];ke=ke[1];var xt=_t.split("_");q=2<=xt.length&&xt[1]=="type"?q+(_t+"="+ke+"&"):q+(_t+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+g+") [attempt "+j+"]: "+h+`
`+f+`
`+q})}function Cx(a,h,f,g,j,V,q){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+j+"]: "+h+`
`+f+`
`+V+" "+q})}function ys(a,h,f,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+jx(a,f)+(g?" "+g:"")})}function Rx(a,h){a.info(function(){return"TIMEOUT: "+h})}Ei.prototype.info=function(){};function jx(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var j=g[1];if(Array.isArray(j)&&!(1>j.length)){var V=j[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<j.length;q++)j[q]=""}}}}return Ct(f)}catch{return h}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Iu;function na(){}b(na,_i),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Iu=new na;function er(a,h,f,g){this.j=a,this.i=h,this.l=f,this.R=g||1,this.U=new ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bf}function Bf(){this.i=null,this.g="",this.h=!1}var $f={},Au={};function Nu(a,h,f){a.L=1,a.v=oa(Cn(h)),a.m=f,a.P=!0,Hf(a,null)}function Hf(a,h){a.F=Date.now(),ra(a),a.A=Cn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),sp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new Bf,a.g=kp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new X(_(a.Y,a,a.g),a.O)),h=a.U,f=a.g,g=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ie[0]=j.toString()),j=Ie);for(var V=0;V<j.length;V++){var q=Z(f,j[V],g||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),wi(),Px(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const h=this.M;h&&Rn(a)==3?h.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const xt=Rn(this.g);var h=this.g.Ba();const xs=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||dp(this.g)))){this.J||xt!=4||h==7||(h==8||0>=xs?wi(3):wi(2)),Pu(this);var f=this.g.Z();this.X=f;t:if(Wf(this)){var g=dp(this.g);a="";var j=g.length,V=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),Si(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(g[h],{stream:!(V&&h==j-1)});g.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Cx(this.i,this.u,this.A,this.l,this.R,xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,dt=this.g;if((Ae=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ae)){var ke=Ae;break t}}ke=null}if(f=ke)ys(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cu(this,f);else{this.o=!1,this.s=3,Rt(12),Or(this),Si(this);break e}}if(this.P){f=!0;let un;for(;!this.J&&this.C<q.length;)if(un=Dx(this,q),un==Au){xt==4&&(this.s=4,Rt(14),f=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(un==$f){this.s=4,Rt(15),ys(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else ys(this.i,this.l,un,null),Cu(this,un);if(Wf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||q.length!=0||this.h.h||(this.s=1,Rt(16),f=!1),this.o=this.o&&f,!f)ys(this.i,this.l,q,"[Invalid Chunked Response]"),Or(this),Si(this);else if(0<q.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Lu(_t),_t.M=!0,Rt(11))}}else ys(this.i,this.l,q,null),Cu(this,q);xt==4&&Or(this),this.o&&!this.J&&(xt==4?vp(this.j,this):(this.o=!1,ra(this)))}else Xx(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Or(this),Si(this)}}}catch{}finally{}};function Wf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Dx(a,h){var f=a.C,g=h.indexOf(`
`,f);return g==-1?Au:(f=Number(h.substring(f,g)),isNaN(f)?$f:(g+=1,g+f>h.length?Au:(h=h.slice(g,g+f),a.C=g+f,h)))}er.prototype.cancel=function(){this.J=!0,Or(this)};function ra(a){a.S=Date.now()+a.I,Gf(a,a.I)}function Gf(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ki(_(a.ba,a),h)}function Pu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Rx(this.i,this.A),this.L!=2&&(wi(),Rt(17)),Or(this),this.s=2,Si(this)):Gf(this,this.S-a)};function Si(a){a.j.G==0||a.J||vp(a.j,a)}function Or(a){Pu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,He(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Cu(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Ru(f.h,a))){if(!a.K&&Ru(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var j=g;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ha(f),ca(f);else break e;Mu(f),Rt(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=ki(_(f.Za,f),6e3));if(1>=Qf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zr(f,11)}else if((a.K||f.g==a)&&ha(f),!w(h))for(j=f.Da.g.parse(h),h=0;h<j.length;h++){let ke=j[h];if(f.T=ke[0],ke=ke[1],f.G==2)if(ke[0]=="c"){f.K=ke[1],f.ia=ke[2];const _t=ke[3];_t!=null&&(f.la=_t,f.j.info("VER="+f.la));const xt=ke[4];xt!=null&&(f.Aa=xt,f.j.info("SVER="+f.Aa));const xs=ke[5];xs!=null&&typeof xs=="number"&&0<xs&&(g=1.5*xs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const un=a.g;if(un){const pa=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pa){var V=g.h;V.g||pa.indexOf("spdy")==-1&&pa.indexOf("quic")==-1&&pa.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ju(V,V.h),V.h=null))}if(g.D){const Ou=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(g.ya=Ou,Ce(g.I,g.D,Ou))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var q=a;if(g.qa=wp(g,g.J?g.ia:null,g.W),q.K){Yf(g.h,q);var Ae=q,dt=g.L;dt&&(Ae.I=dt),Ae.B&&(Pu(Ae),ra(Ae)),g.g=q}else gp(g);0<f.i.length&&da(f)}else ke[0]!="stop"&&ke[0]!="close"||zr(f,7);else f.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?zr(f,7):Vu(f):ke[0]!="noop"&&f.l&&f.l.ta(ke),f.v=0)}}wi(4)}catch{}}var Vx=class{constructor(a,h){this.g=a,this.map=h}};function qf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qf(a){return a.h?1:a.g?a.g.size:0}function Ru(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ju(a,h){a.g?a.g.add(h):a.h=h}function Yf(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}qf.prototype.cancel=function(){if(this.i=Xf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Xf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return C(a.i)}function Mx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,g=0;g<f;g++)h.push(a[g]);return h}h=[],f=0;for(g in a)h[f++]=a[g];return h}function Lx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const g in a)h[f++]=g;return h}}}function Jf(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=Lx(a),g=Mx(a),j=g.length,V=0;V<j;V++)h.call(void 0,g[V],f&&f[V],a)}var Zf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ox(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),j=null;if(0<=g){var V=a[f].substring(0,g);j=a[f].substring(g+1)}else V=a[f];h(V,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Fr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Fr){this.h=a.h,sa(this,a.j),this.o=a.o,this.g=a.g,ia(this,a.s),this.l=a.l;var h=a.i,f=new Ii;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),ep(this,f),this.m=a.m}else a&&(h=String(a).match(Zf))?(this.h=!1,sa(this,h[1]||"",!0),this.o=Ti(h[2]||""),this.g=Ti(h[3]||"",!0),ia(this,h[4]),this.l=Ti(h[5]||"",!0),ep(this,h[6]||"",!0),this.m=Ti(h[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Fr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(bi(h,tp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(bi(h,tp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(bi(f,f.charAt(0)=="/"?Ux:zx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",bi(f,$x)),a.join("")};function Cn(a){return new Fr(a)}function sa(a,h,f){a.j=f?Ti(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ia(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ep(a,h,f){h instanceof Ii?(a.i=h,Hx(a.i,a.h)):(f||(h=bi(h,Bx)),a.i=new Ii(h,a.h))}function Ce(a,h,f){a.i.set(h,f)}function oa(a){return Ce(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ti(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bi(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Fx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Fx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tp=/[#\/\?@]/g,zx=/[#\?:]/g,Ux=/[#\?]/g,Bx=/[#\?@]/g,$x=/#/g;function Ii(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&Ox(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ii.prototype,t.add=function(a,h){tr(this),this.i=null,a=vs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function np(a,h){tr(a),h=vs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function rp(a,h){return tr(a),h=vs(a,h),a.g.has(h)}t.forEach=function(a,h){tr(this),this.g.forEach(function(f,g){f.forEach(function(j){a.call(h,j,g,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let g=0;g<h.length;g++){const j=a[g];for(let V=0;V<j.length;V++)f.push(h[g])}return f},t.V=function(a){tr(this);let h=[];if(typeof a=="string")rp(this,a)&&(h=h.concat(this.g.get(vs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return tr(this),this.i=null,a=vs(this,a),rp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function sp(a,h,f){np(a,h),0<f.length&&(a.i=null,a.g.set(vs(a,h),C(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var g=h[f];const V=encodeURIComponent(String(g)),q=this.V(g);for(g=0;g<q.length;g++){var j=V;q[g]!==""&&(j+="="+encodeURIComponent(String(q[g]))),a.push(j)}}return this.i=a.join("&")};function vs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Hx(a,h){h&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(f,g){var j=g.toLowerCase();g!=j&&(np(this,g),sp(this,j,f))},a)),a.j=h}function Wx(a,h){const f=new Ei;if(l.Image){const g=new Image;g.onload=I(nr,f,"TestLoadImage: loaded",!0,h,g),g.onerror=I(nr,f,"TestLoadImage: error",!1,h,g),g.onabort=I(nr,f,"TestLoadImage: abort",!1,h,g),g.ontimeout=I(nr,f,"TestLoadImage: timeout",!1,h,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function Gx(a,h){const f=new Ei,g=new AbortController,j=setTimeout(()=>{g.abort(),nr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(j),V.ok?nr(f,"TestPingServer: ok",!0,h):nr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),nr(f,"TestPingServer: error",!1,h)})}function nr(a,h,f,g,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),g(f)}catch{}}function qx(){this.g=new Zo}function Kx(a,h,f){const g=f||"";try{Jf(a,function(j,V){let q=j;d(j)&&(q=Ct(j)),h.push(g+V+"="+encodeURIComponent(q))})}catch(j){throw h.push(g+"type="+encodeURIComponent("_badmap")),j}}function aa(a){this.l=a.Ub||null,this.j=a.eb||!1}b(aa,_i),aa.prototype.g=function(){return new la(this.l,this.j)},aa.prototype.i=function(a){return function(){return a}}({});function la(a,h){Pe.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(la,Pe),t=la.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ni(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ip(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ip(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ai(this):Ni(this),this.readyState==3&&ip(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ai(this))},t.Qa=function(a){this.g&&(this.response=a,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ni(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Ni(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function op(a){let h="";return M(a,function(f,g){h+=g,h+=":",h+=f,h+=`\r
`}),h}function Du(a,h,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=op(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ce(a,h,f))}function ze(a){Pe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ze,Pe);var Qx=/^https?$/i,Yx=["POST","PUT"];t=ze.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Iu.g(),this.v=this.o?Vf(this.o):Vf(Iu),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){ap(this,V);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var j in g)f.set(j,g[j]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())f.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Yx,h,void 0))||g||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cp(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){ap(this,V)}};function ap(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,lp(a),ua(a)}function lp(a){a.A||(a.A=!0,A(a,"complete"),A(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,A(this,"complete"),A(this,"abort"),ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?up(this):this.bb())},t.bb=function(){up(this)};function up(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Rn(a)!=4||a.Z()!=2)){if(a.u&&Rn(a)==4)$(a.Ea,0,a);else if(A(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var g;if(g=q===0){var j=String(a.D).match(Zf)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),g=!Qx.test(j?j.toLowerCase():"")}f=g}if(f)A(a,"complete"),A(a,"success");else{a.m=6;try{var V=2<Rn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",lp(a)}}finally{ua(a)}}}}function ua(a,h){if(a.g){cp(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||A(a,"ready");try{f.onreadystatechange=g}catch{}}}function cp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),gs(h)}};function dp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Xx(a){const h={};a=(a.g&&2<=Rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=N(a[g]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[j]||[];h[j]=V,V.push(f)}x(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function hp(a){this.Aa=0,this.i=[],this.j=new Ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pi("baseRetryDelayMs",5e3,a),this.cb=Pi("retryDelaySeedMs",1e4,a),this.Wa=Pi("forwardChannelMaxRetries",2,a),this.wa=Pi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qf(a&&a.concurrentRequestLimit),this.Da=new qx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hp.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,g){Rt(0),this.W=a,this.H=h||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=wp(this,null,this.W),da(this)};function Vu(a){if(fp(a),a.G==3){var h=a.U++,f=Cn(a.I);if(Ce(f,"SID",a.K),Ce(f,"RID",h),Ce(f,"TYPE","terminate"),Ci(a,f),h=new er(a,a.j,h),h.L=2,h.v=oa(Cn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=kp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ra(h)}xp(a)}function ca(a){a.g&&(Lu(a),a.g.cancel(),a.g=null)}function fp(a){ca(a),a.u&&(l.clearTimeout(a.u),a.u=null),ha(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function da(a){if(!Kf(a.h)&&!a.s){a.s=!0;var h=a.Ga;$e||ne(),W||($e(),W=!0),J.add(h,a),a.B=0}}function Jx(a,h){return Qf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ki(_(a.Ga,a,h),_p(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new er(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),E(V,this.S)):V=this.S),this.m!==null||this.O||(j.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=mp(this,j,h),f=Cn(this.I),Ce(f,"RID",a),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),Ci(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(op(V)))+"&"+h:this.m&&Du(f,this.m,V)),ju(this.h,j),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",h),Ce(f,"SID","null"),j.T=!0,Nu(j,f,null)):Nu(j,f,h),this.G=2}}else this.G==3&&(a?pp(this,a):this.i.length==0||Kf(this.h)||pp(this))};function pp(a,h){var f;h?f=h.l:f=a.U++;const g=Cn(a.I);Ce(g,"SID",a.K),Ce(g,"RID",f),Ce(g,"AID",a.T),Ci(a,g),a.m&&a.o&&Du(g,a.m,a.o),f=new er(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=mp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ju(a.h,f),Nu(f,g,h)}function Ci(a,h){a.H&&M(a.H,function(f,g){Ce(h,g,f)}),a.l&&Jf({},function(f,g){Ce(h,g,f)})}function mp(a,h,f){f=Math.min(a.i.length,f);var g=a.l?_(a.l.Na,a.l,a):null;e:{var j=a.i;let V=-1;for(;;){const q=["count="+f];V==-1?0<f?(V=j[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Ae=!0;for(let dt=0;dt<f;dt++){let ke=j[dt].g;const _t=j[dt].map;if(ke-=V,0>ke)V=Math.max(0,j[dt].g-100),Ae=!1;else try{Kx(_t,q,"req"+ke+"_")}catch{g&&g(_t)}}if(Ae){g=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,g}function gp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;$e||ne(),W||($e(),W=!0),J.add(h,a),a.v=0}}function Mu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ki(_(a.Fa,a),_p(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ki(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),ca(this),yp(this))};function Lu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function yp(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Cn(a.qa);Ce(h,"RID","rpc"),Ce(h,"SID",a.K),Ce(h,"AID",a.T),Ce(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ce(h,"TO",a.ja),Ce(h,"TYPE","xmlhttp"),Ci(a,h),a.m&&a.o&&Du(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=oa(Cn(h)),f.m=null,f.P=!0,Hf(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ca(this),Mu(this),Rt(19))};function ha(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function vp(a,h){var f=null;if(a.g==h){ha(a),Lu(a),a.g=null;var g=2}else if(Ru(a.h,h))f=h.D,Yf(a.h,h),g=1;else return;if(a.G!=0){if(h.o)if(g==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;g=ea(),A(g,new zf(g,f)),da(a)}else gp(a);else if(j=h.s,j==3||j==0&&0<h.X||!(g==1&&Jx(a,h)||g==2&&Mu(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),j){case 1:zr(a,5);break;case 4:zr(a,10);break;case 3:zr(a,6);break;default:zr(a,2)}}}function _p(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function zr(a,h){if(a.j.info("Error code "+h),h==2){var f=_(a.fb,a),g=a.Xa;const j=!g;g=new Fr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||sa(g,"https"),oa(g),j?Wx(g.toString(),f):Gx(g.toString(),f)}else Rt(2);a.G=0,a.l&&a.l.sa(h),xp(a),fp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function xp(a){if(a.G=0,a.ka=[],a.l){const h=Xf(a.h);(h.length!=0||a.i.length!=0)&&(D(a.ka,h),D(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function wp(a,h,f){var g=f instanceof Fr?Cn(f):new Fr(f);if(g.g!="")h&&(g.g=h+"."+g.g),ia(g,g.s);else{var j=l.location;g=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var V=new Fr(null);g&&sa(V,g),h&&(V.g=h),j&&ia(V,j),f&&(V.l=f),g=V}return f=a.D,h=a.ya,f&&h&&Ce(g,f,h),Ce(g,"VER",a.la),Ci(a,g),g}function kp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ze(new aa({eb:f})):new ze(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ep(){}t=Ep.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fa(){}fa.prototype.g=function(a,h){return new $t(a,h)};function $t(a,h){Pe.call(this),this.g=new hp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new _s(this)}b($t,Pe),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Vu(this.g)},$t.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ct(a),a=f);h.i.push(new Vx(h.Ya++,a)),h.G==3&&da(h)},$t.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,$t.aa.N.call(this)};function Sp(a){Tu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}b(Sp,Tu);function Tp(){bu.call(this),this.status=1}b(Tp,bu);function _s(a){this.g=a}b(_s,Ep),_s.prototype.ua=function(){A(this.g,"a")},_s.prototype.ta=function(a){A(this.g,new Sp(a))},_s.prototype.sa=function(a){A(this.g,new Tp)},_s.prototype.ra=function(){A(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,l_=function(){return new fa},a_=function(){return ea()},o_=Lr,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Za=ta,Uf.COMPLETE="complete",i_=Uf,Mf.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Wi=Mf,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,s_=ze}).apply(typeof ja<"u"?ja:typeof self<"u"?self:typeof window<"u"?window:{});const pg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new zh("@firebase/firestore");function zi(){return as.logLevel}function Y(t,...e){if(as.logLevel<=_e.DEBUG){const n=e.map(ef);as.debug(`Firestore (${mi}): ${t}`,...n)}}function Yn(t,...e){if(as.logLevel<=_e.ERROR){const n=e.map(ef);as.error(`Firestore (${mi}): ${t}`,...n)}}function ni(t,...e){if(as.logLevel<=_e.WARN){const n=e.map(ef);as.warn(`Firestore (${mi}): ${t}`,...n)}}function ef(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${mi}) INTERNAL ASSERTION FAILED: `+t;throw Yn(e),new Error(e)}function be(t,e){t||ue()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class H2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class W2{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ir,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new u_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new St(e)}}class G2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){be(this.o===void 0);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new K2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Y2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function ri(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new rt(0,0))}static max(){return new de(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ao.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ao?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Ao{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const X2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Ao{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return X2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new re(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new re(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Be.fromString(e))}static fromName(e){return new se(Be.fromString(e).popFirst(5))}static empty(){return new se(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Be(e.slice()))}}function J2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Pr(s,se.empty(),e)}function Z2(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(de.min(),se.empty(),-1)}static max(){return new Pr(de.max(),se.empty(),-1)}}function eb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==tb)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function rb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ko(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tf.oe=-1;function mu(t){return t==null}function Ol(t){return t===0&&1/t==-1/0}function sb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function d_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Da(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Da(this.root,e,this.comparator,!1)}getReverseIterator(){return new Da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Da(this.root,e,this.comparator,!0)}}class Da{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ft.RED,this.left=s??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gg(this.data.getIterator())}getIteratorFrom(e){return new gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class gg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new pn([])}unionWith(e){let n=new gt(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new h_("Invalid base64 string: "+i):i}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const ib=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(t){if(be(!!t),typeof t=="string"){let e=0;const n=ib.exec(t);if(be(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rf(t){const e=t.mapValue.fields.__previous_value__;return nf(e)?rf(e):e}function No(t){const e=Cr(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,s,i,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va={mapValue:{}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nf(t)?4:lb(t)?9007199254740991:ab(t)?10:11:ue()}function An(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return No(t).isEqual(No(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Cr(s.timestampValue),l=Cr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ls(s.bytesValue).isEqual(ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return We(s.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(s.geoPointValue.longitude)===We(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return We(s.integerValue)===We(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=We(s.doubleValue),l=We(i.doubleValue);return o===l?Ol(o)===Ol(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ri(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mg(o)!==mg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!An(o[c],l[c])))return!1;return!0}(t,e);default:return ue()}}function Co(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function si(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=We(i.integerValue||i.doubleValue),c=We(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return yg(t.timestampValue,e.timestampValue);case 4:return yg(No(t),No(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ls(i),c=ls(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const p=Ee(l[d],c[d]);if(p!==0)return p}return Ee(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ee(We(i.latitude),We(o.latitude));return l!==0?l:Ee(We(i.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,p;const m=i.fields||{},_=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(c=_.value)===null||c===void 0?void 0:c.arrayValue,C=Ee(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return C!==0?C:vg(I,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Va.mapValue&&o===Va.mapValue)return 0;if(i===Va.mapValue)return 1;if(o===Va.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const _=Ee(c[m],p[m]);if(_!==0)return _;const I=si(l[c[m]],d[p[m]]);if(I!==0)return I}return Ee(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ue()}}function yg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Cr(t),r=Cr(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function vg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=si(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function ii(t){return Pd(t)}function Pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Pd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Pd(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function Cd(t){return!!t&&"integerValue"in t}function sf(t){return!!t&&"arrayValue"in t}function _g(t){return!!t&&"nullValue"in t}function xg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function el(t){return!!t&&"mapValue"in t}function ab(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function so(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=so(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=so(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!el(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(n)}setAll(e){let n=pt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=so(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());el(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];el(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new en(so(this.value))}}function f_(t){const e=[];return gi(t.fields,(n,r)=>{const s=new pt([n]);if(el(r)){const i=f_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new bt(e,0,de.min(),de.min(),de.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new bt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new bt(e,2,n,de.min(),de.min(),en.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,de.min(),de.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.position=e,this.inclusive=n}}function wg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=si(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function kg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function ub(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{}class tt extends p_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new db(e,n,r):n==="array-contains"?new pb(e,r):n==="in"?new mb(e,r):n==="not-in"?new gb(e,r):n==="array-contains-any"?new yb(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hb(e,r):new fb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(si(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends p_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nn(e,n)}matches(e){return m_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function m_(t){return t.op==="and"}function g_(t){return cb(t)&&m_(t)}function cb(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function Rd(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+ii(t.value);if(g_(t))return t.filters.map(e=>Rd(e)).join(",");{const e=t.filters.map(n=>Rd(n)).join(",");return`${t.op}(${e})`}}function y_(t,e){return t instanceof tt?function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&An(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&y_(o,s.filters[l]),!0):!1}(t,e):void ue()}function v_(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${ii(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(v_).join(" ,")+"}"}(t):"Filter"}class db extends tt{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class hb extends tt{constructor(e,n){super(e,"in",n),this.keys=__("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fb extends tt{constructor(e,n){super(e,"not-in",n),this.keys=__("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function __(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class pb extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sf(n)&&Co(n.arrayValue,this.value)}}class mb extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Co(this.value.arrayValue,n)}}class gb extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Co(this.value.arrayValue,n)}}class yb extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Co(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Eg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new vb(t,e,n,r,s,i,o)}function of(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ii(r)).join(",")),e.ue=n}return e.ue}function af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ub(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!y_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kg(t.startAt,e.startAt)&&kg(t.endAt,e.endAt)}function jd(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _b(t,e,n,r,s,i,o,l){return new gu(t,e,n,r,s,i,o,l)}function lf(t){return new gu(t)}function Sg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xb(t){return t.collectionGroup!==null}function io(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new gt(pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new zl(i,r))}),n.has(pt.keyField().canonicalString())||e.ce.push(new zl(pt.keyField(),r))}return e.ce}function Tn(t){const e=he(t);return e.le||(e.le=wb(e,io(t))),e.le}function wb(t,e){if(t.limitType==="F")return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new zl(s.field,i)});const n=t.endAt?new Fl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fl(t.startAt.position,t.startAt.inclusive):null;return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dd(t,e,n){return new gu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yu(t,e){return af(Tn(t),Tn(e))&&t.limitType===e.limitType}function x_(t){return`${of(Tn(t))}|lt:${t.limitType}`}function ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>v_(s)).join(", ")}]`),mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ii(s)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function vu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=wg(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,io(r),s)||r.endAt&&!function(o,l,c){const d=wg(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,io(r),s))}(t,e)}function kb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w_(t){return(e,n)=>{let r=!1;for(const s of io(t)){const i=Eb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Eb(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?si(c,d):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return d_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Fe(se.comparator);function Xn(){return Sb}const k_=new Fe(se.comparator);function Gi(...t){let e=k_;for(const n of t)e=e.insert(n.key,n);return e}function E_(t){let e=k_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qr(){return oo()}function S_(){return oo()}function oo(){return new yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tb=new Fe(se.comparator),bb=new gt(se.comparator);function ve(...t){let e=bb;for(const n of t)e=e.add(n);return e}const Ib=new gt(Ee);function Ab(){return Ib}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function T_(t){return{integerValue:""+t}}function Nb(t,e){return sb(e)?T_(e):uf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this._=void 0}}function Pb(t,e,n){return t instanceof Ul?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&nf(i)&&(i=rf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ro?I_(t,e):t instanceof jo?A_(t,e):function(s,i){const o=b_(s,i),l=Tg(o)+Tg(s.Pe);return Cd(o)&&Cd(s.Pe)?T_(l):uf(s.serializer,l)}(t,e)}function Cb(t,e,n){return t instanceof Ro?I_(t,e):t instanceof jo?A_(t,e):n}function b_(t,e){return t instanceof Bl?function(r){return Cd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ul extends _u{}class Ro extends _u{constructor(e){super(),this.elements=e}}function I_(t,e){const n=N_(e);for(const r of t.elements)n.some(s=>An(s,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends _u{constructor(e){super(),this.elements=e}}function A_(t,e){let n=N_(e);for(const r of t.elements)n=n.filter(s=>!An(s,r));return{arrayValue:{values:n}}}class Bl extends _u{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tg(t){return We(t.integerValue||t.doubleValue)}function N_(t){return sf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Rb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ro&&s instanceof Ro||r instanceof jo&&s instanceof jo?ri(r.elements,s.elements,An):r instanceof Bl&&s instanceof Bl?An(r.Pe,s.Pe):r instanceof Ul&&s instanceof Ul}(t.transform,e.transform)}class jb{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xu{}function P_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new R_(t.key,$n.none()):new Qo(t.key,t.data,$n.none());{const n=t.data,r=en.empty();let s=new gt(pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ps(t.key,r,new pn(s.toArray()),$n.none())}}function Db(t,e,n){t instanceof Qo?function(s,i,o){const l=s.value.clone(),c=Ig(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ps?function(s,i,o){if(!tl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ig(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(C_(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ao(t,e,n,r){return t instanceof Qo?function(i,o,l,c){if(!tl(i.precondition,o))return l;const d=i.value.clone(),p=Ag(i.fieldTransforms,c,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ps?function(i,o,l,c){if(!tl(i.precondition,o))return l;const d=Ag(i.fieldTransforms,c,o),p=o.data;return p.setAll(C_(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return tl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Vb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=b_(r.transform,s||null);i!=null&&(n===null&&(n=en.empty()),n.set(r.field,i))}return n||null}function bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ri(r,s,(i,o)=>Rb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qo extends xu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ps extends xu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ig(t,e,n){const r=new Map;be(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Cb(o,l,n[s]))}return r}function Ag(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Pb(i,o,e))}return r}class R_ extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mb extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Db(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=S_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=P_(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&ri(this.mutations,e.mutations,(n,r)=>bg(n,r))&&ri(this.baseMutations,e.baseMutations,(n,r)=>bg(n,r))}}class cf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){be(e.mutations.length===r.length);let s=function(){return Tb}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,xe;function zb(t){switch(t){default:return ue();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function j_(t){if(t===void 0)return Yn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ye.OK:return U.OK;case Ye.CANCELLED:return U.CANCELLED;case Ye.UNKNOWN:return U.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return U.INTERNAL;case Ye.UNAVAILABLE:return U.UNAVAILABLE;case Ye.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ye.NOT_FOUND:return U.NOT_FOUND;case Ye.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ye.ABORTED:return U.ABORTED;case Ye.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ye.DATA_LOSS:return U.DATA_LOSS;default:return ue()}}(xe=Ye||(Ye={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Zr([4294967295,4294967295],0);function Ng(t){const e=Ub().encode(t),n=new r_;return n.update(e),new Uint8Array(n.digest())}function Pg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([s,i],0)]}class df{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qi(`Invalid padding: ${n}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Zr.fromNumber(r)));return s.compare(Bb)===1&&(s=new Zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ng(e),[r,s]=Pg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new df(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ng(e),[r,s]=Pg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Yo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wu(de.min(),s,new Fe(Ee),Xn(),ve())}}class Yo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yo(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class D_{constructor(e,n){this.targetId=e,this.me=n}}class V_{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cg{constructor(){this.fe=0,this.ge=jg(),this.pe=vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new Yo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $b{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xn(),this.qe=Rg(),this.Qe=new Fe(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jd(i))if(r===0){const o=new se(i.path);this.Ue(n,o,bt.newNoDocument(o,de.min()))}else be(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ls(r).toUint8Array()}catch(c){if(c instanceof h_)return ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new df(o,s,i)}catch(c){return ni(c instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&jd(l.target)){const c=new se(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ve();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new wu(e,n,this.Qe,this.ke,r);return this.ke=Xn(),this.qe=Rg(),this.Qe=new Fe(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Cg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gt(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Rg(){return new Fe(se.comparator)}function jg(){return new Fe(se.comparator)}const Hb={asc:"ASCENDING",desc:"DESCENDING"},Wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gb={and:"AND",or:"OR"};class qb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vd(t,e){return t.useProto3Json||mu(e)?e:{value:e}}function $l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Kb(t,e){return $l(t,e.toTimestamp())}function bn(t){return be(!!t),de.fromTimestamp(function(n){const r=Cr(n);return new rt(r.seconds,r.nanos)}(t))}function hf(t,e){return Md(t,e).canonicalString()}function Md(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L_(t){const e=Be.fromString(t);return be(B_(e)),e}function Ld(t,e){return hf(t.databaseId,e.path)}function wc(t,e){const n=L_(e);if(n.get(1)!==t.databaseId.projectId)throw new re(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(F_(n))}function O_(t,e){return hf(t.databaseId,e)}function Qb(t){const e=L_(t);return e.length===4?Be.emptyPath():F_(e)}function Od(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F_(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Dg(t,e,n){return{name:Ld(t,e),fields:n.value.mapValue.fields}}function Yb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(be(p===void 0||typeof p=="string"),vt.fromBase64String(p||"")):(be(p===void 0||p instanceof Buffer||p instanceof Uint8Array),vt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?U.UNKNOWN:j_(d.code);return new re(p,d.message||"")}(o);n=new V_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wc(t,r.document.name),i=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):de.min(),l=new en({mapValue:{fields:r.document.fields}}),c=bt.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new nl(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wc(t,r.document),i=r.readTime?bn(r.readTime):de.min(),o=bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new nl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wc(t,r.document),i=r.removedTargetIds||[];n=new nl([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Fb(s,i),l=r.targetId;n=new D_(l,o)}}return n}function Xb(t,e){let n;if(e instanceof Qo)n={update:Dg(t,e.key,e.value)};else if(e instanceof R_)n={delete:Ld(t,e.key)};else if(e instanceof ps)n={update:Dg(t,e.key,e.data),updateMask:oI(e.fieldMask)};else{if(!(e instanceof Mb))return ue();n={verify:Ld(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ul)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Kb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function Jb(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?bn(s.updateTime):bn(i);return o.isEqual(de.min())&&(o=bn(i)),new jb(o,s.transformResults||[])}(n,e))):[]}function Zb(t,e){return{documents:[O_(t,e.path)]}}function eI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O_(t,s);const i=function(d){if(d.length!==0)return U_(Nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(_){return{field:Es(_.field),direction:rI(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Vd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function tI(t){let e=Qb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){be(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const _=z_(m);return _ instanceof Nn&&g_(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(_=>function(b){return new zl(Ss(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(m){let _;return _=typeof m=="object"?m.value:m,mu(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){const _=!!m.before,I=m.values||[];return new Fl(I,_)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const _=!m.before,I=m.values||[];return new Fl(I,_)}(n.endAt)),_b(e,s,o,i,l,"F",c,d)}function nI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return tt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>z_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function rI(t){return Hb[t]}function sI(t){return Wb[t]}function iI(t){return Gb[t]}function Es(t){return{fieldPath:t.canonicalString()}}function Ss(t){return pt.fromServerFormat(t.fieldPath)}function U_(t){return t instanceof tt?function(n){if(n.op==="=="){if(xg(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(_g(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xg(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(_g(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:sI(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>U_(s));return r.length===1?r[0]:{compositeFilter:{op:iI(n.op),filters:r}}}(t):ue()}function oI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function B_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,s,i=de.min(),o=de.min(),l=vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.ct=e}}function lI(t){const e=tI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.un=new cI}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Pr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class cI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new gt(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oi(0)}static kn(){return new oi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.changes=new yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ao(r.mutation,s,pn.empty(),rt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const s=Qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Gi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Xn();const o=oo(),l=function(){return oo()}();return n.forEach((c,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof ps)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),ao(p.mutation,d,p.mutation.getFieldMask(),rt.now())):o.set(d.key,pn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new hI(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=oo();let s=new Fe((o,l)=>o-l),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=r.get(c)||pn.empty();p=l.applyToLocalView(d,p),r.set(c,p);const m=(s.get(l.batchId)||ve()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,p=c.value,m=S_();p.forEach(_=>{if(!i.has(_)){const I=P_(n.get(_),r.get(_));I!==null&&m.set(_,I),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Qr());let l=-1,c=i;return o.next(d=>F.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ve())).next(p=>({batchId:l,changes:E_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=Gi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Gi();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const d=function(m,_){return new gu(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,bt.newInvalidDocument(p)))});let l=Gi();return o.forEach((c,d)=>{const p=i.get(c);p!==void 0&&ao(p.mutation,d,pn.empty(),rt.now()),vu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:lI(s.bundledQuery),readTime:bn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.overlays=new Fe(se.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Qr(),i=n.length+1,o=new se(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Qr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Qr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ob(n,r));let i=this.Ir.get(n);i===void 0&&(i=ve(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.Tr=new gt(lt.Er),this.dr=new gt(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new lt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new lt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Be([])),r=new lt(n,e),s=new lt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Be([])),r=new lt(n,e),s=new lt(n,e+1);let i=ve();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new lt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gt(lt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lb(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new lt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),s=new lt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(Ee);return n.forEach(s=>{const i=new lt(s,0),o=new lt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new lt(new se(i),0);let l=new gt(Ee);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new lt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.Mr=e,this.docs=function(){return new Fe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=Xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():bt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xn();const o=n.path,l=new se(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||eb(Z2(p),r)<=0||(s.has(p.key)||vu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _I(this)}getSize(e){return F.resolve(this.size)}}class _I extends dI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.persistence=e,this.Nr=new yi(n=>of(n),af),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ff,this.targetCount=0,this.kr=oi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new oi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tf(0),this.Kr=!1,this.Kr=!0,this.$r=new gI,this.referenceDelegate=e(this),this.Ur=new xI(this),this.indexManager=new uI,this.remoteDocumentCache=function(s){return new vI(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new aI(n),this.Gr=new pI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new yI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new kI(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class kI extends nb{constructor(e){super(),this.currentSequenceNumber=e}}class pf{constructor(e){this.persistence=e,this.Jr=new ff,this.Yr=null}static Zr(e){return new pf(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ve(),s=ve();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return SE()?8:rb(At())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new EI;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(zi()<=_e.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(zi()<=_e.DEBUG&&Y("QueryEngine","Query:",ks(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(zi()<=_e.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):F.resolve())}Yi(e,n){if(Sg(n))return F.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dd(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ve(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,o,c.readTime)?this.Yi(e,Dd(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Sg(n)||s.isEqual(de.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(zi()<=_e.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ks(n)),this.rs(e,o,n,J2(s,-1)).next(l=>l))})}ts(e,n){let r=new gt(w_(e));return n.forEach((s,i)=>{vu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return zi()<=_e.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Fe(Ee),this._s=new yi(i=>of(i),af),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function bI(t,e,n,r){return new TI(t,e,n,r)}async function $_(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ve();for(const d of s){o.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function II(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,p){const m=d.batch,_=m.keys();let I=F.resolve();return _.forEach(b=>{I=I.next(()=>p.getEntry(c,b)).next(C=>{const D=d.docVersions.get(b);be(D!==null),C.version.compareTo(D)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ve();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function H_(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function AI(t,e){const n=he(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const _=s.get(m);if(!_)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(vt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(C,D,S){return C.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(_,I,p)&&l.push(n.Ur.updateTargetData(i,I))});let c=Xn(),d=ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(NI(i,o,e.documentUpdates).next(p=>{c=p.Ps,d=p.Is})),!r.isEqual(de.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function NI(t,e,n){let r=ve(),s=ve();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Xn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(de.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function PI(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CI(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new mr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fd(t,e,n){const r=he(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ko(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Vg(t,e,n){const r=he(t);let s=de.min(),i=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,p){const m=he(c),_=m._s.get(p);return _!==void 0?F.resolve(m.os.get(_)):m.Ur.getTargetData(d,p)}(r,o,Tn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:ve())).next(l=>(RI(r,kb(e),l),{documents:l,Ts:i})))}function RI(t,e,n){let r=t.us.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Mg{constructor(){this.activeTargetIds=Ab()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jI{constructor(){this.so=new Mg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Mg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma=null;function kc(){return Ma===null?Ma=function(){return 268435456+Math.round(2147483648*Math.random())}():Ma++,"0x"+Ma.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class LI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=kc(),c=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(p=>(Y("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ni("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=VI[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=kc();return new Promise((o,l)=>{const c=new s_;c.setWithCredentials(!0),c.listenOnce(i_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Za.NO_ERROR:const p=c.getResponseJson();Y(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Za.TIMEOUT:Y(Et,`RPC '${e}' ${i} timed out`),l(new re(U.DEADLINE_EXCEEDED,"Request time out"));break;case Za.HTTP_ERROR:const m=c.getStatus();if(Y(Et,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const b=function(D){const S=D.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(I.status);l(new re(b,I.message))}else l(new re(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new re(U.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Y(Et,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Y(Et,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=kc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=l_(),l=a_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Y(Et,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let _=!1,I=!1;const b=new MI({Io:D=>{I?Y(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(_||(Y(Et,`Opening RPC '${e}' stream ${s} transport.`),m.open(),_=!0),Y(Et,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},To:()=>m.close()}),C=(D,S,w)=>{D.listen(S,T=>{try{w(T)}catch(P){setTimeout(()=>{throw P},0)}})};return C(m,Wi.EventType.OPEN,()=>{I||(Y(Et,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),C(m,Wi.EventType.CLOSE,()=>{I||(I=!0,Y(Et,`RPC '${e}' stream ${s} transport closed`),b.So())}),C(m,Wi.EventType.ERROR,D=>{I||(I=!0,ni(Et,`RPC '${e}' stream ${s} transport errored:`,D),b.So(new re(U.UNAVAILABLE,"The operation could not be completed")))}),C(m,Wi.EventType.MESSAGE,D=>{var S;if(!I){const w=D.data[0];be(!!w);const T=w,P=T.error||((S=T[0])===null||S===void 0?void 0:S.error);if(P){Y(Et,`RPC '${e}' stream ${s} received error:`,P);const O=P.status;let M=function(k){const E=Ye[k];if(E!==void 0)return j_(E)}(O),x=P.message;M===void 0&&(M=U.INTERNAL,x="Unknown error status: "+O+" with message "+P.message),I=!0,b.So(new re(M,x)),m.close()}else Y(Et,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),C(l,o_.STAT_EVENT,D=>{D.stat===Nd.PROXY?Y(Et,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Nd.NOPROXY&&Y(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Ec(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t){return new qb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new W_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new re(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OI extends G_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Yb(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?bn(o.readTime):de.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Od(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=jd(c)?{documents:Zb(i,c)}:{query:eI(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M_(i,o.resumeToken);const d=Vd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(de.min())>0){l.readTime=$l(i,o.snapshotVersion.toTimestamp());const d=Vd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=nI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Od(this.serializer),n.removeTarget=e,this.a_(n)}}class FI extends G_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Jb(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Od(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Xb(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new re(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Md(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Md(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class UI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yn(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ms(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=he(c);d.L_.add(4),await Xo(d),d.q_.set("Unknown"),d.L_.delete(4),await Eu(d)}(this))})}),this.q_=new UI(r,s)}}async function Eu(t){if(ms(t))for(const e of t.B_)await e(!0)}async function Xo(t){for(const e of t.B_)await e(!1)}function q_(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_f(n)?vf(n):vi(n).r_()&&yf(n,e))}function gf(t,e){const n=he(t),r=vi(n);n.N_.delete(e),r.r_()&&K_(n,e),n.N_.size===0&&(r.r_()?r.o_():ms(n)&&n.q_.set("Unknown"))}function yf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vi(t).A_(e)}function K_(t,e){t.Q_.xe(e),vi(t).R_(e)}function vf(t){t.Q_=new $b({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vi(t).start(),t.q_.v_()}function _f(t){return ms(t)&&!vi(t).n_()&&t.N_.size>0}function ms(t){return he(t).L_.size===0}function Q_(t){t.Q_=void 0}async function $I(t){t.q_.set("Online")}async function HI(t){t.N_.forEach((e,n)=>{yf(t,e)})}async function WI(t,e){Q_(t),_f(t)?(t.q_.M_(e),vf(t)):t.q_.set("Unknown")}async function GI(t,e,n){if(t.q_.set("Online"),e instanceof V_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hl(t,r)}else if(e instanceof nl?t.Q_.Ke(e):e instanceof D_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(de.min()))try{const r=await H_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(vt.EMPTY_BYTE_STRING,p.snapshotVersion)),K_(i,c);const m=new mr(p.target,c,d,p.sequenceNumber);yf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Hl(t,r)}}async function Hl(t,e,n){if(!Ko(e))throw e;t.L_.add(1),await Xo(t),t.q_.set("Offline"),n||(n=()=>H_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Eu(t)})}function Y_(t,e){return e().catch(n=>Hl(t,n,e))}async function Su(t){const e=he(t),n=Rr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qI(e);)try{const s=await PI(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,KI(e,s)}catch(s){await Hl(e,s)}X_(e)&&J_(e)}function qI(t){return ms(t)&&t.O_.length<10}function KI(t,e){t.O_.push(e);const n=Rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function X_(t){return ms(t)&&!Rr(t).n_()&&t.O_.length>0}function J_(t){Rr(t).start()}async function QI(t){Rr(t).p_()}async function YI(t){const e=Rr(t);for(const n of t.O_)e.m_(n.mutations)}async function XI(t,e,n){const r=t.O_.shift(),s=cf.from(r,e,n);await Y_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Su(t)}async function JI(t,e){e&&Rr(t).V_&&await async function(r,s){if(function(o){return zb(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Rr(r).s_(),await Y_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Su(r)}}(t,e),X_(t)&&J_(t)}async function Og(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=ms(n);n.L_.add(3),await Xo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Eu(n)}async function ZI(t,e){const n=he(t);e?(n.L_.delete(2),await Eu(n)):e||(n.L_.add(2),await Xo(n),n.q_.set("Unknown"))}function vi(t){return t.K_||(t.K_=function(n,r,s){const i=he(n);return i.w_(),new OI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$I.bind(null,t),Ro:HI.bind(null,t),mo:WI.bind(null,t),d_:GI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_f(t)?vf(t):t.q_.set("Unknown")):(await t.K_.stop(),Q_(t))})),t.K_}function Rr(t){return t.U_||(t.U_=function(n,r,s){const i=he(n);return i.w_(),new FI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QI.bind(null,t),mo:JI.bind(null,t),f_:YI.bind(null,t),g_:XI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Su(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new xf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wf(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),Ko(t))return new re(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Gi(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.W_=new Fe(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ai{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ai(e,n,Gs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class tA{constructor(){this.queries=zg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=zg(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new re(U.ABORTED,"Firestore shutting down"))}}function zg(){return new yi(t=>x_(t),yu)}async function nA(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new eA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=wf(o,`Initialization of query '${ks(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&kf(n)}async function rA(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sA(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&kf(n)}function iA(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function kf(t){t.Y_.forEach(e=>{e.next()})}var zd,Ug;(Ug=zd||(zd={})).ea="default",Ug.Cache="cache";class oA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ai(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.key=e}}class ex{constructor(e){this.key=e}}class aA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=w_(e),this.Ra=new Gs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Fg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const _=s.get(p),I=vu(this.query,m)?m:null,b=!!_&&this.mutatedKeys.has(_.key),C=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;_&&I?_.data.isEqual(I.data)?b!==C&&(r.track({type:3,doc:I}),D=!0):this.ga(_,I)||(r.track({type:2,doc:I}),D=!0,(c&&this.Aa(I,c)>0||d&&this.Aa(I,d)<0)&&(l=!0)):!_&&I?(r.track({type:0,doc:I}),D=!0):_&&!I&&(r.track({type:1,doc:_}),D=!0,(c||d)&&(l=!0)),D&&(I?(o=o.add(I),i=C?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,b){const C=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return C(I)-C(b)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new ai(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ex(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Z_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ai.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uA{constructor(e){this.key=e,this.va=!1}}class cA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new yi(l=>x_(l),yu),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(se.comparator),this.Na=new Map,this.La=new ff,this.Ba={},this.ka=new Map,this.qa=oi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dA(t,e,n=!0){const r=ox(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await tx(r,e,n,!0),s}async function hA(t,e){const n=ox(t);await tx(n,e,!0,!1)}async function tx(t,e,n,r){const s=await CI(t.localStore,Tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await fA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&q_(t.remoteStore,s),l}async function fA(t,e,n,r,s){t.Ka=(m,_,I)=>async function(C,D,S,w){let T=D.view.ma(S);T.ns&&(T=await Vg(C.localStore,D.query,!1).then(({documents:x})=>D.view.ma(x,T)));const P=w&&w.targetChanges.get(D.targetId),O=w&&w.targetMismatches.get(D.targetId)!=null,M=D.view.applyChanges(T,C.isPrimaryClient,P,O);return $g(C,D.targetId,M.wa),M.snapshot}(t,m,_,I);const i=await Vg(t.localStore,e,!0),o=new aA(e,i.Ts),l=o.ma(i.documents),c=Yo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);$g(t,n,d.wa);const p=new lA(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function pA(t,e,n){const r=he(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!yu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gf(r.remoteStore,s.targetId),Ud(r,s.targetId)}).catch(qo)):(Ud(r,s.targetId),await Fd(r.localStore,s.targetId,!0))}async function mA(t,e){const n=he(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gf(n.remoteStore,r.targetId))}async function gA(t,e,n){const r=EA(t);try{const s=await function(o,l){const c=he(o),d=rt.now(),p=l.reduce((I,b)=>I.add(b.key),ve());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Xn(),C=ve();return c.cs.getEntries(I,p).next(D=>{b=D,b.forEach((S,w)=>{w.isValidDocument()||(C=C.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(D=>{m=D;const S=[];for(const w of l){const T=Vb(w,m.get(w.key).overlayedDocument);T!=null&&S.push(new ps(w.key,T,f_(T.value.mapValue),$n.exists(!0)))}return c.mutationQueue.addMutationBatch(I,d,S,l)}).next(D=>{_=D;const S=D.applyToLocalDocumentSet(m,C);return c.documentOverlayCache.saveOverlays(I,D.batchId,S)})}).then(()=>({batchId:_.batchId,changes:E_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Fe(Ee)),d=d.insert(l,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Jo(r,s.changes),await Su(r.remoteStore)}catch(s){const i=wf(s,"Failed to persist write");n.reject(i)}}async function nx(t,e){const n=he(t);try{const r=await AI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(be(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?be(o.va):s.removedDocuments.size>0&&(be(o.va),o.va=!1))}),await Jo(n,r,e)}catch(r){await qo(r)}}function Bg(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=he(o);c.onlineState=l;let d=!1;c.queries.forEach((p,m)=>{for(const _ of m.j_)_.Z_(l)&&(d=!0)}),d&&kf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yA(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Fe(se.comparator);o=o.insert(i,bt.newNoDocument(i,de.min()));const l=ve().add(i),c=new wu(de.min(),new Map,new Fe(Ee),o,l);await nx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ef(r)}else await Fd(r.localStore,e,!1).then(()=>Ud(r,e,n)).catch(qo)}async function vA(t,e){const n=he(t),r=e.batch.batchId;try{const s=await II(n.localStore,e);sx(n,r,null),rx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jo(n,s)}catch(s){await qo(s)}}async function _A(t,e,n){const r=he(t);try{const s=await function(o,l){const c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(be(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);sx(r,e,n),rx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jo(r,s)}catch(s){await qo(s)}}function rx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function sx(t,e,n){const r=he(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Ud(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ix(t,r)})}function ix(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ef(t))}function $g(t,e,n){for(const r of n)r instanceof Z_?(t.La.addReference(r.key,e),xA(t,r)):r instanceof ex?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ix(t,r.key)):ue()}function xA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ef(t))}function Ef(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new uA(n)),t.Oa=t.Oa.insert(n,r),q_(t.remoteStore,new mr(Tn(lf(n.path)),r,"TargetPurposeLimboResolution",tf.oe))}}async function Jo(t,e,n){const r=he(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=mf.Wi(c.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const p=he(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,_=>F.forEach(_.$i,I=>p.persistence.referenceDelegate.addReference(m,_.targetId,I)).next(()=>F.forEach(_.Ui,I=>p.persistence.referenceDelegate.removeReference(m,_.targetId,I)))))}catch(m){if(!Ko(m))throw m;Y("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const _=m.targetId;if(!m.fromCache){const I=p.os.get(_),b=I.snapshotVersion,C=I.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(_,C)}}}(r.localStore,i))}async function wA(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await $_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new re(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jo(n,r.hs)}}function kA(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let s=ve();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function ox(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yA.bind(null,e),e.Ca.d_=sA.bind(null,e.eventManager),e.Ca.$a=iA.bind(null,e.eventManager),e}function EA(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_A.bind(null,e),e}class Wl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ku(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bI(this.persistence,new SI,e.initialUser,this.serializer)}Ga(e){return new wI(pf.Zr,this.serializer)}Wa(e){return new jI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wl.provider={build:()=>new Wl};class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wA.bind(null,this.syncEngine),await ZI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tA}()}createDatastore(e){const n=ku(e.databaseInfo.databaseId),r=function(i){return new LI(i)}(e.databaseInfo);return function(i,o,l,c){return new zI(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new BI(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Bg(this.syncEngine,n,0),function(){return Lg.D()?new Lg:new DI}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,p){const m=new cA(s,i,o,l,c,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);Y("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Xo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=St.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sc(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bA(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Og(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Og(e.remoteStore,s)),t._onlineComponents=e}async function bA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ni("Error using user provided cache. Falling back to memory cache: "+n),await Sc(t,new Wl)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Sc(t,new Wl);return t._offlineComponents}async function ax(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await Hg(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await Hg(t,new Bd))),t._onlineComponents}function IA(t){return ax(t).then(e=>e.syncEngine)}async function AA(t){const e=await ax(t),n=e.eventManager;return n.onListen=dA.bind(null,e.syncEngine),n.onUnlisten=pA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mA.bind(null,e.syncEngine),n}function NA(t,e,n={}){const r=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const p=new SA({next:_=>{p.Za(),o.enqueueAndForget(()=>rA(i,m));const I=_.docs.has(l);!I&&_.fromCache?d.reject(new re(U.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&c&&c.source==="server"?d.reject(new re(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),m=new oA(lf(l.path),p,{includeMetadataChanges:!0,_a:!0});return nA(i,m)}(await AA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e,n){if(!n)throw new re(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CA(t,e,n,r){if(e===!0&&r===!0)throw new re(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gg(t){if(!se.isDocumentKey(t))throw new re(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function Do(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(t);throw new re(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $2;switch(r.type){case"firstParty":return new q2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wg.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Wg.delete(n),r.terminate())}(this),Promise.resolve()}}function RA(t,e,n,r={}){var s;const i=(t=Do(t,Tf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=St.MOCK_USER;else{l=yE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new re(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new St(d)}t._authCredentials=new H2(new u_(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bf(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class Vo extends bf{constructor(e,n,r){super(e,n,lf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new se(e))}withConverter(e){return new Vo(this.firestore,e,this._path)}}function ux(t,e,...n){if(t=an(t),arguments.length===1&&(e=c_.newId()),PA("doc","path",e),t instanceof Tf){const r=Be.fromString(e,...n);return Gg(r),new rn(t,null,new se(r))}{if(!(t instanceof rn||t instanceof Vo))throw new re(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return Gg(r),new rn(t.firestore,t instanceof Vo?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new W_(this,"async_queue_retry"),this.Vu=()=>{const r=Ec();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ec();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ec();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ko(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Yn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=xf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class If extends Tf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Kg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kg(e),this._firestoreClient=void 0,await e}}}function jA(t,e){const n=typeof t=="object"?t:Ev(),r=typeof t=="string"?t:"(default)",s=Bh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mE("firestore");i&&RA(s,...i)}return s}function cx(t){if(t._terminated)throw new re(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DA(t),t._firestoreClient}function DA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,p){return new ob(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,lx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(vt.fromBase64String(e))}catch(n){throw new re(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new li(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^__.*__$/;class MA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qo(e,this.data,n,this.fieldTransforms)}}function hx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Cf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hx(this.Cu)&&VA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class LA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ku(e)}Qu(e,n,r,s=!1){return new Cf({Cu:e,methodName:n,qu:r,path:pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OA(t){const e=t._freezeSettings(),n=ku(t._databaseId);return new LA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FA(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);gx("Data must be an object, but it was:",o,r);const l=px(r,o);let c,d;if(i.merge)c=new pn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const _=zA(e,m,n);if(!o.contains(_))throw new re(U.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);BA(p,_)||p.push(_)}c=new pn(p),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new MA(new en(l),c,d)}function fx(t,e){if(mx(t=an(t)))return gx("Unsupported field value:",e,t),px(t,e);if(t instanceof dx)return function(r,s){if(!hx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=fx(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Nb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=rt.fromDate(r);return{timestampValue:$l(s.serializer,i)}}if(r instanceof rt){const i=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$l(s.serializer,i)}}if(r instanceof Nf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:M_(s.serializer,r._byteString)};if(r instanceof rn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return uf(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Sf(r)}`)}(t,e)}function px(t,e){const n={};return d_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,s)=>{const i=fx(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Nf||t instanceof li||t instanceof rn||t instanceof dx||t instanceof Pf)}function gx(t,e,n){if(!mx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Sf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zA(t,e,n){if((e=an(e))instanceof Af)return e._internalPath;if(typeof e=="string")return yx(t,e);throw Gl("Field path arguments must be of type string or ",t,!1,void 0,n)}const UA=new RegExp("[~\\*/\\[\\]]");function yx(t,e,n){if(e.search(UA)>=0)throw Gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Af(...e.split("."))._internalPath}catch{throw Gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new re(U.INVALID_ARGUMENT,l+t+c)}function BA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_x("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $A extends vx{data(){return super.data()}}function _x(t,e){return typeof e=="string"?yx(t,e):e instanceof Af?e._internalPath:e._delegate._internalPath}class HA{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>We(o.doubleValue));return new Pf(i)}convertGeoPoint(e){return new Nf(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const n=Cr(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);be(B_(r));const s=new Po(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xx extends vx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_x("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qA extends xx{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){t=Do(t,rn);const e=Do(t.firestore,If);return NA(cx(e),t._key).then(n=>JA(e,t,n))}class QA extends HA{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function YA(t,e,n){t=Do(t,rn);const r=Do(t.firestore,If),s=WA(t.converter,e,n);return XA(r,[FA(OA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$n.none())])}function XA(t,e){return function(r,s){const i=new Ir;return r.asyncQueue.enqueueAndForget(async()=>gA(await IA(r),s,i)),i.promise}(cx(t),e)}function JA(t,e,n){const r=n.docs.get(e._key),s=new QA(t);return new xx(t,s,e._key,r,new GA(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){mi=s})(fi),ei(new is("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new If(new W2(r.getProvider("auth-internal")),new Q2(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new re(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),br(pg,"4.7.3",e),br(pg,"4.7.3","esm2017")})();const ZA={apiKey:"AIzaSyDq3lmHDACIejkIMshrYk5cd8nF5zGnA_A",authDomain:"pokerole-system-game.firebaseapp.com",projectId:"pokerole-system-game",storageBucket:"pokerole-system-game.firebasestorage.app",messagingSenderId:"1003513148425",appId:"1:1003513148425:web:2fb5b9ce999637c3c674d8",measurementId:"G-K1V0DY6Z5G"},wx=kv(ZA),Tc=U2(wx),kx=jA(wx),Ex=H.createContext(void 0),eN=({children:t})=>{const[e,n]=H.useState(null),[r,s]=H.useState(!0),[i,o]=H.useState(null);H.useEffect(()=>{const p=NT(Tc,m=>{n(m),s(!1)});return()=>p()},[]);const l=()=>o(null),c=async()=>{o(null);const p=new Vn;try{await YT(Tc,p)}catch(m){console.error("Error signing in with Google",m);const _=m;if(_.code==="auth/unauthorized-domain"){let I=window.location.hostname;I||(I=window.location.host),I||(I=window.location.origin),o(` Dominio Non Autorizzato: "${I||"Sconosciuto"}"

Devi autorizzare questo dominio su Firebase:
1. Vai su Firebase Console -> Authentication -> Settings -> Authorized Domains
2. Aggiungi il dominio: ${I||"localhost"}
3. Ricarica la pagina.`)}else _.code==="auth/popup-closed-by-user"?o("Login annullato dall'utente."):_.code==="auth/popup-blocked"?o("Popup bloccato. Per favore consenti i popup per questo sito nelle impostazioni del browser."):_.code==="auth/cancelled-popup-request"||o(`Login Fallito: ${_.message}`)}},d=async()=>{try{await PT(Tc),o(null)}catch(p){console.error("Error signing out",p),o(p.message)}};return u.jsx(Ex.Provider,{value:{user:e,loading:r,signInWithGoogle:c,logout:d,error:i,clearError:l},children:t})},Rf=()=>{const t=H.useContext(Ex);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},tN=async(t,e)=>{if(t)try{const n=JSON.parse(JSON.stringify(e)),r=n.pcBoxes.reduce((i,o,l)=>(i[l.toString()]=o,i),{}),s={party:n.party,pcBoxes:r};console.log("Dati inviati a Firebase:",s),await YA(ux(kx,"users",t),s,{merge:!0}),console.log("Dati salvati con successo!")}catch(n){throw console.error("Errore durante il salvataggio:",n),n}},Qg=async t=>{if(!t)return null;try{const e=ux(kx,"users",t),n=await KA(e);if(n.exists()){const r=n.data();let s;return r.pcBoxes&&!Array.isArray(r.pcBoxes)?s=Array.from({length:20},(i,o)=>r.pcBoxes[o.toString()]||Array(30).fill(null)):s=Array(20).fill(null).map(()=>Array(30).fill(null)),{party:r.party||Array(6).fill(null),pcBoxes:s}}else return console.log("Nessun dato trovato per questo utente (nuovo utente?)."),null}catch(e){return console.error("Errore durante il caricamento:",e),null}},nN=({region:t})=>{const e={width:120,height:120,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};switch(t){case"National":return u.jsx(zk,{...e});case"Kanto":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M2 17h20L19 9H5L2 17Z"}),u.jsx("path",{d:"M6 9V5h3v4"}),u.jsx("path",{d:"M15 9V4h3v5"}),u.jsx("path",{d:"M4 17v4"}),u.jsx("path",{d:"M20 17v4"}),u.jsx("path",{d:"M2 21h20"}),u.jsx("path",{d:"M9 13h6"})]});case"Johto":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2l-8 4h16l-8-4z"}),u.jsx("path",{d:"M4 6v4h16V6"}),u.jsx("path",{d:"M2 14l2-4h16l2 4H2z"}),u.jsx("path",{d:"M6 14v6h12v-6"}),u.jsx("path",{d:"M12 14v6"})]});case"Hoenn":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2c0 0-3 3-3 8v6c0 1.5 1 3 3 3s3-1.5 3-3v-6c0-5-3-8-3-8z"}),u.jsx("path",{d:"M9 16c-3 0-5 3-5 5h16c0-2-2-5-5-5"}),u.jsx("path",{d:"M12 6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})]});case"Sinnoh":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2L2 22h20L12 2z"}),u.jsx("path",{d:"M12 2l4 10-4 4-4-4 4-10z"}),u.jsx("path",{d:"M8 22l4-8 4 8"})]});case"Unova":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M4 21V9"}),u.jsx("path",{d:"M20 21V9"}),u.jsx("path",{d:"M4 9c8 6 8 6 16 0"}),u.jsx("path",{d:"M2 21h20"}),u.jsx("path",{d:"M7 12l2 2"}),u.jsx("path",{d:"M17 12l-2 2"})]});case"Kalos":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2L4 22h16L12 2z"}),u.jsx("path",{d:"M12 2v20"}),u.jsx("path",{d:"M8 12h8"}),u.jsx("path",{d:"M6 17h12"}),u.jsx("path",{d:"M10 7h4"})]});case"Alola":return u.jsxs("svg",{...e,children:[u.jsx("circle",{cx:"18",cy:"6",r:"4"}),u.jsx("path",{d:"M12 22s-6-8-6-14c0-2 2-3 4-3"}),u.jsx("path",{d:"M12 22s6-8 6-14c0-2-2-3-4-3"}),u.jsx("path",{d:"M12 22v-8"})]});case"Galar":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M4 22V8l4-4 4 4 4-4 4 4v14H4z"}),u.jsx("path",{d:"M12 8v14"}),u.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),u.jsx("path",{d:"M12 4v4"})]});case"Paldea":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 4l-8 6v12h16v-12z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"}),u.jsx("path",{d:"M12 9v4"}),u.jsx("path",{d:"M12 13l3 2"}),u.jsx("path",{d:"M2 22h20"})]});default:return u.jsx(qk,{...e})}},$d=t=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[u.jsx("path",{d:"M5 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v18a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V3z"}),u.jsx("path",{d:"M5 9h14"}),u.jsx("circle",{cx:"9",cy:"5",r:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 4h1"}),u.jsx("path",{d:"M16 6h1"}),u.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),u.jsx("path",{d:"M8 20h2"}),u.jsx("path",{d:"M14 20h2"})]}),Hd=()=>u.jsxs("svg",{viewBox:"0 0 24 24",className:"w-full h-full text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M2 12h7"}),u.jsx("path",{d:"M15 12h7"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"})]}),rN=["Bug","Dark","Dragon","Electric","Fairy","Fighting","Fire","Flying","Ghost","Grass","Ground","Ice","Normal","Poison","Psychic","Rock","Steel","Water"],Hr=["Starter","Beginner","Amateur","Ace","Pro","Master","Champion"],sN=["Neutral","Burn","Freeze","Paralysis","Poison","Bad Poison","Sleep","Confused","Infatuated","Fainted"],iN={Bug:{en:"Bug",it:"Coleottero",es:"Bicho",de:"Kfer",fr:"Insecte"},Dark:{en:"Dark",it:"Buio",es:"Siniestro",de:"Unlicht",fr:"Tnbres"},Dragon:{en:"Dragon",it:"Drago",es:"Dragn",de:"Drache",fr:"Dragon"},Electric:{en:"Electric",it:"Elettro",es:"Elctrico",de:"Elektro",fr:"lectrik"},Fairy:{en:"Fairy",it:"Folletto",es:"Hada",de:"Fee",fr:"Fe"},Fighting:{en:"Fighting",it:"Lotta",es:"Lucha",de:"Kampf",fr:"Combat"},Fire:{en:"Fire",it:"Fuoco",es:"Fuego",de:"Feuer",fr:"Feu"},Flying:{en:"Flying",it:"Volante",es:"Volador",de:"Flug",fr:"Vol"},Ghost:{en:"Ghost",it:"Spettro",es:"Fantasma",de:"Geist",fr:"Spectre"},Grass:{en:"Grass",it:"Erba",es:"Planta",de:"Pflanze",fr:"Plante"},Ground:{en:"Ground",it:"Terra",es:"Tierra",de:"Boden",fr:"Sol"},Ice:{en:"Ice",it:"Ghiaccio",es:"Hielo",de:"Eis",fr:"Glace"},Normal:{en:"Normal",it:"Normale",es:"Normal",de:"Normal",fr:"Normal"},Poison:{en:"Poison",it:"Veleno",es:"Veneno",de:"Gift",fr:"Poison"},Psychic:{en:"Psychic",it:"Psico",es:"Psquico",de:"Psycho",fr:"Psy"},Rock:{en:"Rock",it:"Roccia",es:"Roca",de:"Gestein",fr:"Roche"},Steel:{en:"Steel",it:"Acciaio",es:"Acero",de:"Stahl",fr:"Acier"},Water:{en:"Water",it:"Acqua",es:"Agua",de:"Wasser",fr:"Eau"}},oN={Starter:{en:"Starter",it:"Base",es:"Inicial",de:"Starter",fr:"Dpart"},Beginner:{en:"Beginner",it:"Principiante",es:"Principiante",de:"Anfnger",fr:"Dbutant"},Amateur:{en:"Amateur",it:"Dilettante",es:"Aficionado",de:"Amateur",fr:"Amateur"},Ace:{en:"Ace",it:"Asso",es:"As",de:"Ass",fr:"As"},Pro:{en:"Pro",it:"Pro",es:"Pro",de:"Profi",fr:"Pro"},Master:{en:"Master",it:"Maestro",es:"Maestro",de:"Meister",fr:"Matre"},Champion:{en:"Champion",it:"Campione",es:"Campen",de:"Champ",fr:"Champion"}},aN={Overgrow:{en:"Overgrow",it:"Erbaiuto",es:"Espesura",de:"Notdnger",fr:"Engrais"},Blaze:{en:"Blaze",it:"Aiutofuoco",es:"Mar Llamas",de:"Grobrand",fr:"Brasier"},Torrent:{en:"Torrent",it:"Acquaiuto",es:"Torrente",de:"Sturzbach",fr:"Torrent"},"Shield Dust":{en:"Shield Dust",it:"Polvoscudo",es:"Polvo Escudo",de:"Puderabwehr",fr:"cran Poudre"},"Shed Skin":{en:"Shed Skin",it:"Muta",es:"Mudar",de:"Hutung",fr:"Mue"},"Compound Eyes":{en:"Compound Eyes",it:"Insettocchi",es:"Ojo Compuesto",de:"Facettenauge",fr:"Oeil Compos"},Swarm:{en:"Swarm",it:"Aiutinsetto",es:"Enjambre",de:"Hexaplaga",fr:"Essaim"},"Keen Eye":{en:"Keen Eye",it:"Sguardofermo",es:"Vista Lince",de:"Adlerauge",fr:"Regard Vif"},"Run Away":{en:"Run Away",it:"Fugafacile",es:"Fuga",de:"Angsthase",fr:"Fuite"},Intimidate:{en:"Intimidate",it:"Prepotenza",es:"Intimidacin",de:"Bedroher",fr:"Intimidation"},Static:{en:"Static",it:"Statico",es:"Elec. Esttica",de:"Statik",fr:"Statik"},"Sand Veil":{en:"Sand Veil",it:"Sabbiavelo",es:"Velo Arena",de:"Sandschleier",fr:"Voile Sable"},"Poison Point":{en:"Poison Point",it:"Velenopunto",es:"Punto Txico",de:"Giftdorn",fr:"Point Poison"},"Cute Charm":{en:"Cute Charm",it:"Incantevole",es:"Gran Encanto",de:"Charmebolzen",fr:"Joli Sourire"},"Flash Fire":{en:"Flash Fire",it:"Fuocardore",es:"Absorbe Fuego",de:"Feuerfnger",fr:"Torche"},Pressure:{en:"Pressure",it:"Pressione",es:"Presin",de:"Erzwinger",fr:"Pression"},Levitate:{en:"Levitate",it:"Levitazione",es:"Levitacin",de:"Schwebe",fr:"Lvitation"},Synchronize:{en:"Synchronize",it:"Sincronismo",es:"Sincrona",de:"Synchro",fr:"Synchro"},Guts:{en:"Guts",it:"Dentistretti",es:"Agallas",de:"Adrenalin",fr:"Cran"},"Huge Power":{en:"Huge Power",it:"Macroforza",es:"Potencia",de:"Kraftkoloss",fr:"Coloforce"},Chlorophyll:{en:"Chlorophyll",it:"Clorofilla",es:"Clorofila",de:"Chlorophyll",fr:"Chlorophylle"},"Swift Swim":{en:"Swift Swim",it:"Nuotovelox",es:"Nado Rpido",de:"Wassertempo",fr:"Glissade"},"Solar Power":{en:"Solar Power",it:"Solarpotere",es:"Poder Solar",de:"Solarkraft",fr:"Force Soleil"},"Inner Focus":{en:"Inner Focus",it:"Fuocodentro",es:"Foco Interno",de:"Konzentrator",fr:"Attention"},Stench:{en:"Stench",it:"Tanfo",es:"Hedor",de:"Duftnote",fr:"Puanteur"},"Effect Spore":{en:"Effect Spore",it:"Spargispora",es:"Efec. Espora",de:"Sporenwirt",fr:"Pose Spore"},Damp:{en:"Damp",it:"Umidit",es:"Humedad",de:"Feuchtigkeit",fr:"Moiteur"},Limber:{en:"Limber",it:"Scioltezza",es:"Flexibilidad",de:"Flexibilitt",fr:"chauffement"},"Rock Head":{en:"Rock Head",it:"Testadura",es:"Cabeza Roca",de:"Steinhaupt",fr:"Tte de Roc"},Insomnia:{en:"Insomnia",it:"Insonnia",es:"Insomnio",de:"Insomnia",fr:"Insomnia"},Oblivious:{en:"Oblivious",it:"Indifferenza",es:"Despiste",de:"Dsigkeit",fr:"Bent"},"Magnet Pull":{en:"Magnet Pull",it:"Magnetismo",es:"Imn",de:"Magnetfalle",fr:"Magnpige"},"Early Bird":{en:"Early Bird",it:"Sveglialampo",es:"Madrugar",de:"Frhwecker",fr:"Matinal"},Hydration:{en:"Hydration",it:"Idratazione",es:"Hidratacin",de:"Hydration",fr:"Hydratation"},Gluttony:{en:"Gluttony",it:"Voracit",es:"Gula",de:"Vllerei",fr:"Gloutonnerie"},"Ice Body":{en:"Ice Body",it:"Corpogelo",es:"Glido",de:"Eishaut",fr:"Corps Gel"}},lN={Tackle:{en:"Tackle",it:"Azione",es:"Placaje",de:"Tackle",fr:"Charge"},Scratch:{en:"Scratch",it:"Graffio",es:"Araazo",de:"Kratzer",fr:"Griffe"},Growl:{en:"Growl",it:"Ruggito",es:"Gruido",de:"Heuler",fr:"Rugissement"},"Tail Whip":{en:"Tail Whip",it:"Colpocoda",es:"Ltigo",de:"Rutenschlag",fr:"Mimi-Queue"},Ember:{en:"Ember",it:"Braciere",es:"Ascuas",de:"Glut",fr:"Flammche"},"Water Gun":{en:"Water Gun",it:"Pistolacqua",es:"Pistola Agua",de:"Aquaknarre",fr:"Pistolet  O"},"Vine Whip":{en:"Vine Whip",it:"Frustata",es:"Ltigo Cepa",de:"Rankenhieb",fr:"Fouet Lianes"},"Leech Seed":{en:"Leech Seed",it:"Parassiseme",es:"Drenadoras",de:"Egelsamen",fr:"Vampigraine"},"Thunder Shock":{en:"Thunder Shock",it:"Tuonoshock",es:"Impactrueno",de:"Donnerschock",fr:"clair"},"Quick Attack":{en:"Quick Attack",it:"Attacco Rapido",es:"Ataque Rpido",de:"Ruckzuckhieb",fr:"Vive-Attaque"},Bite:{en:"Bite",it:"Morso",es:"Mordisco",de:"Biss",fr:"Morsure"},"Wing Attack":{en:"Wing Attack",it:"Attacco d'Ala",es:"Ataque Ala",de:"Flgelschlag",fr:"Cru-Ailes"},Gust:{en:"Gust",it:"Raffica",es:"Tornado",de:"Windsto",fr:"Tornade"},Peck:{en:"Peck",it:"Beccata",es:"Picotazo",de:"Schnabel",fr:"Picpic"},"Sand Attack":{en:"Sand Attack",it:"Turbosabbia",es:"Ataque Arena",de:"Sandwirbel",fr:"Jet de Sable"},"Double Kick":{en:"Double Kick",it:"Doppiocalcio",es:"Doble Patada",de:"Doppelkick",fr:"Double Pied"},"Razor Leaf":{en:"Razor Leaf",it:"Foglielama",es:"Hoja Afilada",de:"Rasierblatt",fr:"Tranch'Herbe"},Flamethrower:{en:"Flamethrower",it:"Lanciafiamme",es:"Lanzallamas",de:"Flammenwurf",fr:"Lance-Flammes"},"Hydro Pump":{en:"Hydro Pump",it:"Idropompa",es:"Hidrobomba",de:"Hydropumpe",fr:"Hydrocanon"},"Solar Beam":{en:"Solar Beam",it:"Solarraggio",es:"Rayo Solar",de:"Solarstrahl",fr:"Lance-Soleil"},Psychic:{en:"Psychic",it:"Psichico",es:"Psquico",de:"Psychokinese",fr:"Psyko"},Earthquake:{en:"Earthquake",it:"Terremoto",es:"Terremoto",de:"Erdbeben",fr:"Sisme"},Thunderbolt:{en:"Thunderbolt",it:"Fulmine",es:"Rayo",de:"Donnerblitz",fr:"Tonnerre"},"Ice Beam":{en:"Ice Beam",it:"Geloraggio",es:"Rayo Hielo",de:"Eisstrahl",fr:"Laser Glace"},"Hyper Beam":{en:"Hyper Beam",it:"Iperraggio",es:"Hiperrayo",de:"Hyperstrahl",fr:"Ultralaser"},Leer:{en:"Leer",it:"Fulmisguardo",es:"Malicioso",de:"Silberblick",fr:"Gros Yeux"},Pound:{en:"Pound",it:"Botta",es:"Destructor",de:"Pfund",fr:"cras'Face"},Supersonic:{en:"Supersonic",it:"Supersuono",es:"Supersnico",de:"Superschall",fr:"Ultrason"},Disable:{en:"Disable",it:"Inibitore",es:"Anulacin",de:"Aussetzer",fr:"Entrave"},Confusion:{en:"Confusion",it:"Confusione",es:"Confusin",de:"Konfusion",fr:"Choc Mental"},Hypnosis:{en:"Hypnosis",it:"Ipnosi",es:"Hipnosis",de:"Hypnose",fr:"Hypnose"},"String Shot":{en:"String Shot",it:"Millebave",es:"Disparo Demora",de:"Fadenschuss",fr:"Scrtion"},"Poison Sting":{en:"Poison Sting",it:"Velenospina",es:"Picotazo Ven",de:"Giftstachel",fr:"Dard-Venin"},Harden:{en:"Harden",it:"Rafforzatore",es:"Fortaleza",de:"Hrtner",fr:"Armure"},"Focus Energy":{en:"Focus Energy",it:"Focalenergia",es:"Foco Energa",de:"Energiefokus",fr:"Puissance"},Spark:{en:"Spark",it:"Scintilla",es:"Chispa",de:"Funkenflug",fr:"tincelle"},Crunch:{en:"Crunch",it:"Sgranocchio",es:"Triturar",de:"Knirscher",fr:"Mchouille"},Bubble:{en:"Bubble",it:"Bolla",es:"Burbuja",de:"Blubber",fr:"cume"},Withdraw:{en:"Withdraw",it:"Ritirata",es:"Refugio",de:"Panzerschutz",fr:"Repli"},"Sleep Powder":{en:"Sleep Powder",it:"Sonnifero",es:"Somnfero",de:"Schlafpuder",fr:"Poudre Dodo"},"Stun Spore":{en:"Stun Spore",it:"Paralizzante",es:"Paralizador",de:"Stachelspore",fr:"Para-Spore"},"Poison Powder":{en:"Poison Powder",it:"Velenpolvere",es:"Polvo Veneno",de:"Giftpuder",fr:"Poudre Toxik"},"Will-O-Wisp":{en:"Will-O-Wisp",it:"Fuocofatuo",es:"Fuego Fatuo",de:"Irrlicht",fr:"Feu Follet"},Protect:{en:"Protect",it:"Protezione",es:"Proteccin",de:"Schutzschild",fr:"Abri"},Surf:{en:"Surf",it:"Surf",es:"Surf",de:"Surfer",fr:"Surf"},Fly:{en:"Fly",it:"Volo",es:"Vuelo",de:"Fliegen",fr:"Vol"},Cut:{en:"Cut",it:"Taglio",es:"Corte",de:"Zerschneider",fr:"Coupe"}},jf=(t,e)=>{var r;if(!t)return"";const n=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();return((r=iN[n])==null?void 0:r[e])||t},Sx=(t,e)=>{var n;return t?((n=oN[t])==null?void 0:n[e])||t:"Standard"},rl=(t,e)=>{var n;return t?((n=aN[t])==null?void 0:n[e])||t:""},Mo=(t,e)=>{var n;return t?((n=lN[t])==null?void 0:n[e])||t:""},cs=t=>{if(!t)return"bg-slate-500";switch(t.toLowerCase()){case"bug":return"bg-lime-600";case"dark":return"bg-slate-800";case"dragon":return"bg-violet-600";case"electric":return"bg-yellow-500";case"fairy":return"bg-pink-400";case"fighting":return"bg-orange-700";case"fire":return"bg-red-500";case"flying":return"bg-sky-400";case"ghost":return"bg-purple-700";case"grass":return"bg-green-500";case"ground":return"bg-amber-600";case"ice":return"bg-cyan-400";case"normal":return"bg-slate-400";case"poison":return"bg-fuchsia-600";case"psychic":return"bg-pink-600";case"rock":return"bg-stone-500";case"steel":return"bg-slate-500";case"water":return"bg-blue-500";default:return"bg-slate-500"}},Pn={en:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Select a region to view the database.",appSubtitle:"Choose a tool to begin your adventure.",searchPlaceholder:"Search...",filters:"Filters",close:"Close",clear:"Clear",cancel:"Cancel",apply:"Apply",nameSearch:"Name Search",type:"Type",allTypes:"All Types",minStats:"Min Stats",noResults:"No results found.",entriesFound:"Entries found",about:"About",height:"Height",weight:"Weight",rank:"Rank",role:"Role",baseStats:"Base Stats",hp:"Base HP",abilities:"Abilities",primary:"Primary",secondary:"Secondary",hidden:"Hidden",moveset:"Moveset",consulting:"Consulting Archives...",power:"Power",target:"Target",dicePools:"Dice Pools",accuracy:"Accuracy",damage:"Damage",effect:"Effect",starter:"Starter",wild:"Wild",strength:"Strength",dexterity:"Dexterity",vitality:"Vitality",special:"Special",insight:"Insight",rankFilter:"Rank",onlyStarter:"Only Starter",home:"Home",characterSheet:"Character Sheet",pokemonSheet:"Pokmon Sheet",pokedex:"Pokdex",comingSoon:"Coming Soon",comingSoonDesc:"This feature is currently under development. Please check back later!",backToHome:"Back to Home",party:"Belt",pc:"Bill's PC",box:"Box",emptySlot:"Empty",addToParty:"Add to Belt",removeFromParty:"Remove",selectPokemon:"Select Pokmon",nickname:"Nickname",sheet:{nature:"Nature",confidence:"Confidence",happiness:"Happiness",loyalty:"Loyalty",battles:"No of Battles",victories:"Victories",item:"Item",status:"Status",accessory:"Accessory",weakness:"Weakness",hp:"HP",will:"Will",fight:"Fight",survival:"Survival",social:"Social",brawl:"Brawl",channel:"Channel",clash:"Clash",evasion:"Evasion",alert:"Alert",athletic:"Athletic",stealth:"Stealth",allure:"Allure",etiquette:"Etiquette",intimidate:"Intimidate",perform:"Perform",tough:"Tough",cool:"Cool",beauty:"Beauty",cute:"Cute",clever:"Clever",quickRefs:"Quick References",initiative:"Initiative",def:"Def/S.Def",damageReception:"Damage Reception",damageInflicted:"Damage Inflicted",physical:"Physical",special:"Special",damageTaken:"Damage Taken",newHp:"New HP",statuses:{Neutral:"Neutral",Burn:"Burn",Freeze:"Freeze",Paralysis:"Paralysis",Poison:"Poison","Bad Poison":"Bad Poison",Sleep:"Sleep",Confused:"Confused",Infatuated:"Infatuated",Fainted:"Fainted"}},regions:{National:"All Data",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},it:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Seleziona una regione per vedere il database.",appSubtitle:"Scegli uno strumento per iniziare l'avventura.",searchPlaceholder:"Cerca...",filters:"Filtri",close:"Chiudi",clear:"Pulisci",cancel:"Annulla",apply:"Applica",nameSearch:"Cerca Nome",type:"Tipo",allTypes:"Tutti i Tipi",minStats:"Stat. Minime",noResults:"Nessun risultato trovato.",entriesFound:"Voci trovate",about:"Info",height:"Altezza",weight:"Peso",rank:"Rango",role:"Ruolo",baseStats:"Statistiche Base",hp:"PV Base",abilities:"Abilit",primary:"Primaria",secondary:"Secondaria",hidden:"Nascosta",moveset:"Mosse",consulting:"Consultando gli Archivi...",power:"Potenza",target:"Bersaglio",dicePools:"Dadi",accuracy:"Precisione",damage:"Danno",effect:"Effetto",starter:"Starter",wild:"Selvatico",strength:"Forza",dexterity:"Destrezza",vitality:"Vitalit",special:"Speciale",insight:"Intuito",rankFilter:"Rango",onlyStarter:"Solo Starter",home:"Home",characterSheet:"Scheda Personaggio",pokemonSheet:"Scheda Pokmon",pokedex:"Pokdex",comingSoon:"Prossimamente",comingSoonDesc:"Questa funzionalit  in fase di sviluppo. Torna pi tardi!",backToHome:"Torna alla Home",party:"Cintura",pc:"PC di Bill",box:"Box",emptySlot:"Vuoto",addToParty:"Aggiungi",removeFromParty:"Rimuovi",selectPokemon:"Seleziona Pokmon",nickname:"Soprannome",sheet:{nature:"Natura",confidence:"Sicurezza",happiness:"Felicit",loyalty:"Lealt",battles:"N Battaglie",victories:"Vittorie",item:"Oggetto",status:"Stato",accessory:"Accessorio",weakness:"Debolezza",hp:"PV",will:"Volont",fight:"Lotta",survival:"Sopravvivenza",social:"Sociale",brawl:"Rissa",channel:"Incanalare",clash:"Scontro",evasion:"Evasione",alert:"Allerta",athletic:"Atletica",stealth:"Furtivit",allure:"Fascino",etiquette:"Etichetta",intimidate:"Intimidire",perform:"Esibirsi",tough:"Grinta",cool:"Classe",beauty:"Bellezza",cute:"Grazia",clever:"Acume",quickRefs:"Riferimenti Rapidi",initiative:"Iniziativa",def:"Dif/Dif.Sp",damageReception:"Ricezione Danni",damageInflicted:"Danni Inflitti",physical:"Fisico",special:"Speciale",damageTaken:"Danni Subiti",newHp:"Nuovi PV",statuses:{Neutral:"Neutro",Burn:"Scottatura",Freeze:"Congelamento",Paralysis:"Paralisi",Poison:"Veleno","Bad Poison":"Iperveleno",Sleep:"Sonno",Confused:"Confusione",Infatuated:"Infatuazione",Fainted:"Esausto"}},regions:{National:"Tutti i Dati",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},es:{title:"Pokrole Dex",appTitle:"Herramientas Pokrole",subtitle:"Selecciona una regin para ver la base de datos.",appSubtitle:"Elige una herramienta para comenzar tu aventura.",searchPlaceholder:"Buscar...",filters:"Filtros",close:"Cerrar",clear:"Limpiar",cancel:"Cancelar",apply:"Aplicar",nameSearch:"Buscar Nombre",type:"Tipo",allTypes:"Todos los Tipos",minStats:"Estad. Mnimas",noResults:"No se encontraron resultados.",entriesFound:"Entradas encontradas",about:"Info",height:"Altura",weight:"Peso",rank:"Rango",role:"Rol",baseStats:"Estadsticas Base",hp:"PS Base",abilities:"Habilidades",primary:"Primaria",secondary:"Secundaria",hidden:"Oculta",moveset:"Movimientos",consulting:"Consultando Archivos...",power:"Potencia",target:"Objetivo",dicePools:"Dados",accuracy:"Precisin",damage:"Dao",effect:"Efecto",starter:"Inicial",wild:"Salvaje",strength:"Fuerza",dexterity:"Destreza",vitality:"Vitalidad",special:"Especial",insight:"Intuicin",rankFilter:"Rango",onlyStarter:"Solo Inicial",home:"Inicio",characterSheet:"Hoja de Personaje",pokemonSheet:"Hoja de Pokmon",pokedex:"Pokdex",comingSoon:"Prximamente",comingSoonDesc:"Esta funcin est en desarrollo. Vuelve ms tarde!",backToHome:"Volver al Inicio",party:"Cinturn",pc:"PC de Bill",box:"Caja",emptySlot:"Vaco",addToParty:"Aadir",removeFromParty:"Quitar",selectPokemon:"Seleccionar Pokmon",nickname:"Apodo",sheet:{nature:"Naturaleza",confidence:"Confianza",happiness:"Felicidad",loyalty:"Lealtad",battles:"N Batallas",victories:"Victorias",item:"Objeto",status:"Estado",accessory:"Accesorio",weakness:"Debilidad",hp:"PS",will:"Voluntad",fight:"Pelea",survival:"Supervivencia",social:"Social",brawl:"Reyerta",channel:"Canalizar",clash:"Choque",evasion:"Evasin",alert:"Alerta",athletic:"Atletismo",stealth:"Sigilo",allure:"Seduccin",etiquette:"Etiqueta",intimidate:"Intimidar",perform:"Actuar",tough:"Dureza",cool:"Carisma",beauty:"Belleza",cute:"Dulzura",clever:"Ingenio",quickRefs:"Referencias Rpidas",initiative:"Iniciativa",def:"Def/Def.Esp",damageReception:"Recepcin de Dao",damageInflicted:"Dao Infligido",physical:"Fsico",special:"Especial",damageTaken:"Dao Recibido",newHp:"Nuevos PS",statuses:{Neutral:"Neutral",Burn:"Quemado",Freeze:"Congelado",Paralysis:"Parlisis",Poison:"Veneno","Bad Poison":"Gravemente Env.",Sleep:"Dormido",Confused:"Confuso",Infatuated:"Enamoramiento",Fainted:"Debilitado"}},regions:{National:"Todos los Datos",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},de:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Whle eine Region, um die Datenbank anzuzeigen.",appSubtitle:"Whle ein Werkzeug, um dein Abenteuer zu beginnen.",searchPlaceholder:"Suchen...",filters:"Filter",close:"Schlieen",clear:"Leeren",cancel:"Abbrechen",apply:"Anwenden",nameSearch:"Namenssuche",type:"Typ",allTypes:"Alle Typen",minStats:"Min. Werte",noResults:"Keine Ergebnisse gefunden.",entriesFound:"Eintrge gefunden",about:"ber",height:"Gre",weight:"Gewicht",rank:"Rang",role:"Rolle",baseStats:"Basiswerte",hp:"Basis KP",abilities:"Fhigkeiten",primary:"Primr",secondary:"Sekundr",hidden:"Versteckt",moveset:"Attacken",consulting:"Archive werden durchsucht...",power:"Strke",target:"Ziel",dicePools:"Wrfelpools",accuracy:"Genauigkeit",damage:"Schaden",effect:"Effekt",starter:"Starter",wild:"Wild",strength:"Strke",dexterity:"Geschick",vitality:"Vitalitt",special:"Spezial",insight:"Einsicht",rankFilter:"Rang",onlyStarter:"Nur Starter",home:"Startseite",characterSheet:"Charakterbogen",pokemonSheet:"Pokmon-Bogen",pokedex:"Pokdex",comingSoon:"Demnchst",comingSoonDesc:"Diese Funktion wird derzeit entwickelt. Schau spter wieder vorbei!",backToHome:"Zurck zur Startseite",party:"Grtel",pc:"Bills PC",box:"Box",emptySlot:"Leer",addToParty:"Hinzufgen",removeFromParty:"Entfernen",selectPokemon:"Pokmon auswhlen",nickname:"Spitzname",sheet:{nature:"Wesen",confidence:"Selbstvertr.",happiness:"Freundschaft",loyalty:"Loyalitt",battles:"Kmpfe",victories:"Siege",item:"Item",status:"Status",accessory:"Accessoire",weakness:"Schwche",hp:"KP",will:"Wille",fight:"Kampf",survival:"berleben",social:"Sozial",brawl:"Handgemenge",channel:"Kanalisieren",clash:"Zusammensto",evasion:"Ausweichen",alert:"Wachsamkeit",athletic:"Athletik",stealth:"Heimlichkeit",allure:"Anziehung",etiquette:"Etikette",intimidate:"Einschchtern",perform:"Auftritt",tough:"Strke",cool:"Coolness",beauty:"Schnheit",cute:"Anmut",clever:"Klugheit",quickRefs:"Schnellreferenz",initiative:"Initiative",def:"Vert/Sp.Vert",damageReception:"Schadensempfang",damageInflicted:"Zugefgter Schaden",physical:"Physisch",special:"Spezial",damageTaken:"Erlittener Schaden",newHp:"Neue KP",statuses:{Neutral:"Neutral",Burn:"Verbrennung",Freeze:"Frost",Paralysis:"Paralyse",Poison:"Vergiftung","Bad Poison":"Schwer vergiftet",Sleep:"Schlaf",Confused:"Verwirrt",Infatuated:"Anziehung",Fainted:"Besiegt"}},regions:{National:"Alle Daten",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},fr:{title:"Pokrole Dex",appTitle:"Outils Pokrole",subtitle:"Slectionnez une rgion pour voir la base de donnes.",appSubtitle:"Choisissez un outil pour commencer votre aventure.",searchPlaceholder:"Rechercher...",filters:"Filtres",close:"Fermer",clear:"Effacer",cancel:"Annuler",apply:"Appliquer",nameSearch:"Recherche par nom",type:"Type",allTypes:"Tous les Types",minStats:"Stats Min.",noResults:"Aucun rsultat trouv.",entriesFound:"Entres trouves",about:" propos",height:"Taille",weight:"Poids",rank:"Rang",role:"Rle",baseStats:"Stats de Base",hp:"PV de Base",abilities:"Talents",primary:"Primaire",secondary:"Secondaire",hidden:"Cach",moveset:"Capacits",consulting:"Consultation des archives...",power:"Puissance",target:"Cible",dicePools:"Ds",accuracy:"Prcision",damage:"Dgts",effect:"Effet",starter:"Starter",wild:"Sauvage",strength:"Force",dexterity:"Dextrit",vitality:"Vitalit",special:"Spcial",insight:"Intuition",rankFilter:"Rang",onlyStarter:"Seulement Starter",home:"Accueil",characterSheet:"Fiche Personnage",pokemonSheet:"Fiche Pokmon",pokedex:"Pokdex",comingSoon:"Bientt",comingSoonDesc:"Cette fonctionnalit est en cours de dveloppement. Revenez plus tard !",backToHome:"Retour  l'accueil",party:"Ceinture",pc:"PC de Lo",box:"Bote",emptySlot:"Vide",addToParty:"Ajouter",removeFromParty:"Retirer",selectPokemon:"Slectionner Pokmon",nickname:"Surnom",sheet:{nature:"Nature",confidence:"Confiance",happiness:"Bonheur",loyalty:"Loyaut",battles:"Nb Combats",victories:"Victoires",item:"Objet",status:"Statut",accessory:"Accessoire",weakness:"Faiblesse",hp:"PV",will:"Volont",fight:"Combat",survival:"Survie",social:"Social",brawl:"Bagarre",channel:"Canaliser",clash:"Affrontement",evasion:"vasion",alert:"Vigilance",athletic:"Athltisme",stealth:"Discrtion",allure:"Charme",etiquette:"tiquette",intimidate:"Intimidation",perform:"Performance",tough:"Robuste",cool:"Sang-froid",beauty:"Beaut",cute:"Mignon",clever:"Intelligence",quickRefs:"Rf. Rapides",initiative:"Initiative",def:"Df/Df.Sp",damageReception:"Rception de Dgts",damageInflicted:"Dgts Infligs",physical:"Physique",special:"Spcial",damageTaken:"Dgts Subis",newHp:"Nouveaux PV",statuses:{Neutral:"Neutre",Burn:"Brlure",Freeze:"Gel",Paralysis:"Paralysie",Poison:"Poison","Bad Poison":"Gravement Empois.",Sleep:"Sommeil",Confused:"Confusion",Infatuated:"Attraction",Fainted:"K.O."}},regions:{National:"Toutes les donnes",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}}},uN="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ShuffleTokens",cN="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/BookSprites",dN="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites",Df=t=>{const e=t.Image||`${t.Name}.png`;return`${uN}/${e}`},Tx=t=>{const e=t.Image||`${t.Name}.png`;return`${cN}/${e}`},hN=t=>`${dN}/${t._id}.png`,fN=(t,e)=>{const n=[];for(let r=0;r<e;r++)n.push(u.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r<t?"bg-slate-800 dark:bg-slate-200":"bg-slate-300 dark:bg-slate-700"}`},r));return u.jsx("div",{className:"flex items-center",children:n})},bc={en:"",it:"",es:"",de:"",fr:""},pN={en:"English",it:"Italiano",es:"Espaol",de:"Deutsch",fr:"Franais"},bx=({currentLanguage:t,onChange:e})=>{const[n,r]=H.useState(!1),s=H.useRef(null);H.useEffect(()=>{const o=l=>{s.current&&!s.current.contains(l.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=o=>{e(o),r(!1)};return u.jsxs("div",{className:"relative",ref:s,children:[u.jsx("button",{onClick:()=>r(!n),className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-2xl hover:scale-110 transition-transform shadow-md","aria-label":"Select Language",children:bc[t]}),n&&u.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in",children:u.jsx("div",{className:"py-1",children:Object.keys(bc).map(o=>u.jsxs("button",{onClick:()=>i(o),className:`w-full px-4 py-2 text-left flex items-center gap-3 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors ${t===o?"bg-slate-50 dark:bg-slate-700/50 font-bold":""}`,children:[u.jsx("span",{className:"text-xl",children:bc[o]}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:pN[o]})]},o))})})]})},mN=({onNavigate:t,isDark:e,toggleTheme:n,language:r,setLanguage:s})=>{const i=Pn[r],{user:o,signInWithGoogle:l,logout:c,error:d,clearError:p}=Rf();return u.jsxs("div",{className:"p-6 max-w-6xl mx-auto min-h-screen flex flex-col animate-fade-in",children:[d&&u.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] w-full max-w-lg px-4",children:u.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-xl shadow-2xl flex items-start gap-3 animate-bounce-in border-2 border-red-600",children:[u.jsx(Pk,{className:"shrink-0 mt-0.5",size:20}),u.jsx("div",{className:"flex-1 text-sm font-bold whitespace-pre-line leading-relaxed",children:d}),u.jsx("button",{onClick:p,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:u.jsx(fs,{size:20})})]})}),u.jsxs("header",{className:"mb-12 mt-4 flex flex-col md:flex-row items-center justify-between gap-4",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center justify-center md:justify-start gap-3",children:[u.jsx($d,{className:"w-10 h-10 text-red-500"}),i.appTitle]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:i.appSubtitle})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[u.jsx(bx,{currentLanguage:r,onChange:s}),u.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:e?u.jsx(fv,{size:24}):u.jsx(dv,{size:24})}),o?u.jsxs("div",{className:"flex items-center gap-2 pl-2 bg-white dark:bg-slate-800 rounded-full pr-1 py-1 shadow-md border border-slate-200 dark:border-slate-700",children:[o.photoURL?u.jsx("img",{src:o.photoURL,alt:"User",className:"w-10 h-10 rounded-full border-2 border-green-500"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold text-lg",children:o.displayName?o.displayName[0].toUpperCase():"U"}),u.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 hidden sm:block px-2",children:o.displayName}),u.jsx("button",{onClick:()=>c(),className:"w-10 h-10 flex items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 hover:bg-red-500 hover:text-white transition-colors",title:"Logout",children:u.jsx(Gk,{size:18})})]}):u.jsxs("button",{onClick:()=>l(),className:"flex items-center gap-2 px-5 py-3 rounded-full bg-slate-800 dark:bg-white text-white dark:text-slate-900 font-bold shadow-md hover:scale-105 transition-transform",children:[u.jsx(Wk,{size:20}),u.jsx("span",{children:"Login"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:[u.jsxs("button",{onClick:()=>t("character"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.characterSheet})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-blue-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(oE,{size:120,strokeWidth:1.5})})]}),u.jsxs("button",{onClick:()=>t("pokemon"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.pokemonSheet})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-amber-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(Fk,{size:120,strokeWidth:1.5})})]}),u.jsxs("button",{onClick:()=>t("items"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:[i.sheet.item,"s"]})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-green-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(cv,{size:120,strokeWidth:1.5})})]}),u.jsxs("button",{onClick:()=>t("pokedex"),className:"group relative h-40 bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 text-white hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsx("h2",{className:"text-2xl font-bold mb-2",children:i.pokedex})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-white opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx($d,{className:"w-[120px] h-[120px]"})})]})]})]})},gN=({onBack:t,language:e})=>{const n=Pn[e];return u.jsxs("div",{className:"min-h-screen flex flex-col p-6 animate-fade-in",children:[u.jsx("div",{className:"mb-8",children:u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors inline-flex",children:u.jsx(hi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})})}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[u.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/20 p-8 rounded-full mb-8",children:u.jsx(Lk,{className:"w-20 h-20 text-amber-500"})}),u.jsx("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white mb-4",children:n.comingSoon}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl leading-relaxed",children:n.comingSoonDesc})]})]})},yN=({onSelect:t,onHome:e,isDark:n,toggleTheme:r,language:s,setLanguage:i})=>{const o=Pn[s],l=[{id:"National",color:"bg-indigo-500 dark:bg-indigo-700",desc:o.regions.National,range:"All"},{id:"Kanto",color:"bg-green-600 dark:bg-green-800",desc:o.regions.Kanto,range:"001-151"},{id:"Johto",color:"bg-yellow-600 dark:bg-yellow-800",desc:o.regions.Johto,range:"152-251"},{id:"Hoenn",color:"bg-red-600 dark:bg-red-800",desc:o.regions.Hoenn,range:"252-386"},{id:"Sinnoh",color:"bg-cyan-600 dark:bg-cyan-800",desc:o.regions.Sinnoh,range:"387-493"},{id:"Unova",color:"bg-stone-600 dark:bg-stone-800",desc:o.regions.Unova,range:"494-649"},{id:"Kalos",color:"bg-blue-600 dark:bg-blue-800",desc:o.regions.Kalos,range:"650-721"},{id:"Alola",color:"bg-orange-500 dark:bg-orange-700",desc:o.regions.Alola,range:"722-809"},{id:"Galar",color:"bg-pink-600 dark:bg-pink-800",desc:o.regions.Galar,range:"810-905"},{id:"Paldea",color:"bg-purple-600 dark:bg-purple-800",desc:o.regions.Paldea,range:"906+"}];return u.jsxs("div",{className:"p-6 max-w-6xl mx-auto animate-fade-in",children:[u.jsxs("header",{className:"mb-10 mt-4 flex flex-col md:flex-row items-center md:items-start justify-between gap-4",children:[u.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[u.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white transition-colors mb-2 font-medium",children:[u.jsx(Bk,{size:18})," ",o.backToHome]}),u.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center gap-3",children:[u.jsx($d,{className:"w-10 h-10 text-red-500"}),o.title]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:o.subtitle})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(bx,{currentLanguage:s,onChange:i}),u.jsx("button",{onClick:r,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:n?u.jsx(fv,{size:24}):u.jsx(dv,{size:24})})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(c=>u.jsxs("button",{onClick:()=>t(c.id),className:`${c.color} text-white p-6 rounded-3xl shadow-xl hover:scale-[1.02] hover:shadow-2xl transition-all duration-300 text-left relative overflow-hidden group h-40`,children:[u.jsx("div",{className:"absolute -right-6 -bottom-6 opacity-20 group-hover:opacity-30 transition-opacity",children:u.jsx(nN,{region:c.id})}),u.jsxs("h2",{className:"text-2xl font-bold relative z-10",children:[c.id," Dex"]}),u.jsxs("div",{className:"flex flex-col mt-1 relative z-10",children:[u.jsx("span",{className:"text-white/90 font-medium",children:c.desc}),u.jsx("span",{className:"text-white/60 text-sm",children:c.range})]})]},c.id))})]})},jr=({type:t,language:e})=>t?u.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold text-white bg-white/25 rounded-full backdrop-blur-sm mb-2 capitalize w-max shadow-sm",children:jf(t,e)}):null,vN=({progress:t,total:e,status:n})=>{const r=e>0?Math.min(100,Math.round(t/e*100)):0;return u.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/90 backdrop-blur-sm text-white p-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between mb-2 items-end",children:[u.jsx("span",{className:"font-bold text-lg",children:n}),u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"block font-mono text-2xl font-bold text-red-400",children:[r,"%"]}),u.jsxs("span",{className:"block text-xs text-slate-400 font-mono mt-1",children:[t," / ",e," files"]})]})]}),u.jsx("div",{className:"h-4 w-full bg-slate-700 rounded-full overflow-hidden border border-slate-600",children:u.jsx("div",{className:"h-full bg-red-500 transition-all duration-200 ease-out shadow-[0_0_10px_rgba(239,68,68,0.5)]",style:{width:`${r}%`}})}),u.jsx("p",{className:"text-slate-400 mt-4 text-center text-sm animate-pulse",children:"Retrieving data from GitHub..."})]})})},_N=({region:t,onBack:e,onSelectPokemon:n,data:r,language:s})=>{const i=Pn[s],[o,l]=H.useState(!1),[c,d]=H.useState({types:!0,ranks:!1,stats:!1}),[p,m]=H.useState(""),[_,I]=H.useState([]),[b,C]=H.useState([]),[D,S]=H.useState(!1),[w,T]=H.useState({strength:"",dexterity:"",vitality:"",special:"",insight:""}),[P,O]=H.useState({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}}),M=v=>{d(te=>({...te,[v]:!te[v]}))},x=()=>{m(""),I([]),C([]),S(!1),T({strength:"",dexterity:"",vitality:"",special:"",insight:""}),O({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}})},y=()=>{O({name:p,type:_,ranks:b,isStarter:D,stats:{...w}})},k=(v,te)=>{T(fe=>({...fe,[v]:te}))},E=v=>{C(te=>te.includes(v)?te.filter(fe=>fe!==v):[...te,v])},N=v=>{I(te=>te.includes(v)?te.filter(fe=>fe!==v):[...te,v])},R=H.useMemo(()=>{let v=r;if(t!=="National"){const qe={Kanto:[1,151],Johto:[152,251],Hoenn:[252,386],Sinnoh:[387,493],Unova:[494,649],Kalos:[650,721],Alola:[722,809],Galar:[810,905],Paldea:[906,2e3]}[t];qe&&(v=v.filter($e=>{const W=$e.Name.toLowerCase(),J=W.includes("alolan"),ne=W.includes("galarian"),pe=W.includes("paldean"),ge=W.includes("hisuian");return J?t==="Alola":ne?t==="Galar":pe?t==="Paldea":ge?t==="Sinnoh":$e.Number>=qe[0]&&$e.Number<=qe[1]}))}if(P.name.trim()){const fe=P.name.toLowerCase();v=v.filter(qe=>qe.Name.toLowerCase().includes(fe))}P.type.length>0&&(v=v.filter(fe=>P.type.includes(fe.Type1)||fe.Type2&&P.type.includes(fe.Type2))),P.ranks.length>0&&(v=v.filter(fe=>P.ranks.includes(fe.RecommendedRank))),P.isStarter&&(v=v.filter(fe=>fe.GoodStarter));const te=P.stats;return te.strength&&(v=v.filter(fe=>fe.Strength>=Number(te.strength))),te.dexterity&&(v=v.filter(fe=>fe.Dexterity>=Number(te.dexterity))),te.vitality&&(v=v.filter(fe=>fe.Vitality>=Number(te.vitality))),te.special&&(v=v.filter(fe=>fe.Special>=Number(te.special))),te.insight&&(v=v.filter(fe=>fe.Insight>=Number(te.insight))),v},[t,r,P]);return u.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen",children:[u.jsxs("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300",children:[u.jsxs("div",{className:"flex items-center justify-between p-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:u.jsx(hi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white",children:[t," Dex"]}),u.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:[R.length," ",i.entriesFound]})]})]}),u.jsxs("button",{onClick:()=>l(!o),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${o?"bg-red-500 text-white":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"}`,children:[o?u.jsx(fs,{size:20}):u.jsx(xd,{size:20}),u.jsx("span",{className:"hidden md:inline",children:o?i.close:i.filters})]})]}),o&&u.jsxs("div",{className:"p-4 md:p-6 border-t border-slate-200 dark:border-slate-800 animate-fade-in bg-slate-50 dark:bg-slate-900/50 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(Nl,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:i.searchPlaceholder,value:p,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),u.jsxs("button",{onClick:x,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg flex items-center justify-center gap-2 transition-colors font-medium whitespace-nowrap",children:[u.jsx(hv,{size:18})," ",i.clear]})]}),u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[u.jsxs("button",{onClick:()=>M("types"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[u.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.type}),c.types?u.jsx(hc,{size:18,className:"text-slate-400"}):u.jsx(dc,{size:18,className:"text-slate-400"})]}),c.types&&u.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:u.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:rN.map(v=>{const te=_.includes(v);return u.jsx("button",{onClick:()=>N(v),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${te?`${cs(v)} text-white font-semibold shadow-md border-transparent`:"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:jf(v,s)},v)})})})]}),u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[u.jsxs("button",{onClick:()=>M("ranks"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[u.jsxs("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:[i.rank," & ",i.role]}),c.ranks?u.jsx(hc,{size:18,className:"text-slate-400"}):u.jsx(dc,{size:18,className:"text-slate-400"})]}),c.ranks&&u.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.rankFilter}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Hr.map(v=>{const te=b.includes(v);return u.jsx("button",{onClick:()=>E(v),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${te?"bg-red-500 border-red-500 text-white font-semibold shadow-md":"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Sx(v,s)},v)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.role}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors w-max border border-transparent hover:border-slate-200 dark:hover:border-slate-700",children:[u.jsx("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-colors ${D?"bg-red-500 border-red-500":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 group-hover:border-red-400"}`,children:D&&u.jsx(Mm,{size:16,className:"text-white"})}),u.jsx("input",{type:"checkbox",checked:D,onChange:()=>S(!D),className:"hidden"}),u.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium select-none",children:i.onlyStarter})]})]})]})})]}),u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[u.jsxs("button",{onClick:()=>M("stats"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[u.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.minStats}),c.stats?u.jsx(hc,{size:18,className:"text-slate-400"}):u.jsx(dc,{size:18,className:"text-slate-400"})]}),c.stats&&u.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mt-4",children:["strength","dexterity","vitality","special","insight"].map(v=>u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:i[v]}),u.jsx("input",{type:"number",min:"0",max:"10",placeholder:"0",value:w[v],onChange:te=>k(v,te.target.value),className:"w-full px-3 py-2 text-center rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]},v))})})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{onClick:y,className:"w-full md:w-auto px-8 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg shadow-red-500/20 font-bold text-lg flex items-center justify-center gap-2 transition-all transform hover:scale-105",children:[u.jsx(Mm,{size:24})," ",i.apply]})})]})]}),R.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(uu,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-xl",children:i.noResults}),u.jsx("button",{onClick:x,className:"mt-4 text-red-500 hover:underline",children:i.clear})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20 mt-8",children:R.map(v=>u.jsxs("div",{onClick:()=>n(v),className:`relative h-40 rounded-3xl p-5 shadow-lg cursor-pointer transform hover:-translate-y-1 transition-all duration-300 overflow-hidden ${cs(v.Type1)}`,children:[u.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:u.jsx(Hd,{})}),u.jsxs("div",{className:"flex justify-between h-full relative z-10",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:v.Name}),u.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[u.jsx(jr,{type:v.Type1,language:s}),v.Type2&&u.jsx(jr,{type:v.Type2,language:s})]})]}),u.jsxs("div",{className:"flex flex-col items-end justify-between",children:[u.jsxs("span",{className:"text-white/80 font-bold text-lg drop-shadow-sm",children:["#",v.Number.toString().padStart(3,"0")]}),u.jsx("img",{loading:"lazy",src:Df(v),alt:v.Name,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg",onError:te=>{te.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})]})]})]},`${v.Number}-${v.Name}`))})]})},Ix=({moveName:t,filePath:e,onClose:n,language:r,onRoll:s})=>{const i=Pn[r],[o,l]=H.useState(null),[c,d]=H.useState(!0),[p,m]=H.useState(null);H.useEffect(()=>{e&&(async()=>{try{d(!0);const C=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(w=>encodeURIComponent(w)).join("/")}`,D=await fetch(C);if(!D.ok)throw new Error("Could not fetch move data");const S=await D.json();l(S)}catch{m("Failed to load move details.")}finally{d(!1)}})()},[e]),H.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const _=I=>{I.target===I.currentTarget&&n()};return e?u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:_,children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up",children:[u.jsxs("div",{className:`p-6 ${o?cs(o.Type):"bg-slate-500"} text-white relative transition-colors duration-300`,children:[u.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:u.jsx(fs,{size:20})}),o?u.jsxs(u.Fragment,{children:[u.jsx("h2",{className:"text-3xl font-extrabold tracking-tight pr-8",children:Mo(o.Name,r)}),u.jsx("span",{className:"inline-block px-3 py-1 mt-2 text-xs font-bold bg-white/25 rounded-full backdrop-blur-md uppercase tracking-wider",children:jf(o.Type,r)})]}):u.jsx("h2",{className:"text-2xl font-bold",children:Mo(t,r)})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:c?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[u.jsx(Fh,{className:"w-10 h-10 animate-spin mb-3 text-red-500"}),u.jsx("p",{children:i.consulting})]}):p||!o?u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[u.jsx(uv,{className:"w-12 h-12 mb-3 text-red-400"}),u.jsx("p",{children:p||"Move data not found."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:u.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',o.Description,'"']})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-2xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 flex flex-col items-center justify-center text-center",children:[u.jsxs("span",{className:"text-xs font-bold text-red-400 uppercase mb-1 flex items-center gap-1",children:[u.jsx(nE,{size:14})," ",i.power]}),u.jsx("span",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:o.Power})]}),u.jsxs("div",{className:"p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 flex flex-col items-center justify-center text-center",children:[u.jsxs("span",{className:"text-xs font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[u.jsx(sE,{size:14})," ",i.target]}),u.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:o.Target})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(ir,{className:"w-4 h-4"})," ",i.dicePools,s&&u.jsx("span",{className:"text-[10px] bg-green-500 text-white px-2 py-0.5 rounded-full ml-auto",children:"Click to Roll"})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("button",{disabled:!s||!o.Accuracy1,onClick:()=>{if(s&&o.Accuracy1){const I=o.Accuracy2?`${o.Accuracy1} + ${o.Accuracy2}`:o.Accuracy1;s(I,o)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[u.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.accuracy,s&&u.jsx(Lm,{size:14,className:"text-green-500"})]}),u.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[u.jsx("span",{className:"capitalize",children:o.Accuracy1}),o.Accuracy2&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-slate-300",children:"+"}),u.jsx("span",{className:"capitalize",children:o.Accuracy2})]})]})]}),u.jsxs("button",{disabled:!s||!o.Damage1,onClick:()=>{if(s&&o.Damage1){const I=o.Damage2?`${o.Damage1} + ${o.Damage2}`:o.Damage1;s(I)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-red-50 dark:hover:bg-red-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[u.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.damage,s&&u.jsx(Lm,{size:14,className:"text-green-500"})]}),u.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[u.jsx("span",{className:"capitalize",children:o.Damage1||"None"}),o.Damage2&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-slate-300",children:"+"}),u.jsx("span",{className:"capitalize",children:o.Damage2})]})]})]})]})]}),o.Effect&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(cu,{className:"w-4 h-4"})," ",i.effect]}),u.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-xl text-slate-700 dark:text-slate-300 text-sm leading-relaxed",children:o.Effect})]})]})})]})}):null},Ax=({abilityName:t,filePath:e,onClose:n,language:r})=>{const s=Pn[r],[i,o]=H.useState(null),[l,c]=H.useState(!0),[d,p]=H.useState(null);H.useEffect(()=>{e&&(async()=>{try{c(!0);const C=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(w=>encodeURIComponent(w)).join("/")}`,D=await fetch(C);if(!D.ok)throw new Error("Could not fetch ability data");const S=await D.json();o(S)}catch{p("Failed to load ability details.")}finally{c(!1)}})()},[e]),H.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const m=I=>{I.target===I.currentTarget&&n()};if(!e)return null;const _=rl((i==null?void 0:i.Name)||t,r);return u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:m,children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"p-6 bg-indigo-600 dark:bg-indigo-800 text-white relative transition-colors duration-300",children:[u.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:u.jsx(fs,{size:20})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(eE,{className:"text-indigo-200",size:28}),u.jsx("h2",{className:"text-3xl font-extrabold tracking-tight",children:_})]}),u.jsx("span",{className:"inline-block mt-2 text-xs font-bold text-indigo-100 uppercase tracking-wider opacity-80",children:s.abilities})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:l?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[u.jsx(Fh,{className:"w-10 h-10 animate-spin mb-3 text-indigo-500"}),u.jsx("p",{children:s.consulting})]}):d||!i?u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[u.jsx(uv,{className:"w-12 h-12 mb-3 text-red-400"}),u.jsx("p",{children:d||"Ability data not found."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[u.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2",children:[u.jsx(uu,{size:14})," ",s.about]}),u.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',i.Description,'"']})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(cu,{className:"w-4 h-4"})," ",s.effect]}),u.jsx("div",{className:"p-5 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-900/30 rounded-xl text-slate-800 dark:text-slate-200 text-sm leading-relaxed shadow-sm",children:i.Effect})]})]})})]})})},xN=({pokemon:t,onBack:e,moveMap:n,abilityMap:r,language:s})=>{var I,b;const i=Pn[s],o=cs(t.Type1),[l,c]=H.useState(null),[d,p]=H.useState(null);H.useEffect(()=>{window.scrollTo(0,0)},[]);const m=C=>{let D=n[C];if(!D){const S=C.replace(/[\s-]/g,""),w=Object.keys(n).find(T=>T.toLowerCase()===S.toLowerCase()||T.toLowerCase()===C.toLowerCase());w&&(D=n[w])}D?c({name:C,path:D}):(console.warn(`Move path not found for: ${C}`),c({name:C,path:""}))},_=C=>{if(!C)return;let D=r[C];if(!D){const S=C.replace(/[\s-]/g,""),w=Object.keys(r).find(T=>T.toLowerCase()===S.toLowerCase()||T.toLowerCase()===C.toLowerCase());w&&(D=r[w])}D?p({name:C,path:D}):console.warn(`Ability path not found for: ${C}`)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`min-h-screen ${o} transition-colors duration-500 overflow-x-hidden`,children:[u.jsxs("div",{className:"p-6 pt-8 pb-48 relative",children:[u.jsxs("div",{className:"flex justify-between items-center text-white max-w-4xl mx-auto z-50 relative",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors backdrop-blur-md",children:u.jsx(hi,{size:32})}),u.jsxs("span",{className:"font-bold text-2xl",children:["#",t.Number.toString().padStart(3,"0")]})]}),u.jsxs("div",{className:"max-w-4xl mx-auto mt-6 flex justify-between items-center px-4 relative z-30",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white tracking-tight drop-shadow-md",children:t.Name}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx(jr,{type:t.Type1,language:s}),t.Type2&&u.jsx(jr,{type:t.Type2,language:s})]})]}),u.jsx("div",{className:"text-white/90 font-semibold text-lg hidden md:block backdrop-blur-sm bg-white/10 px-4 py-2 rounded-lg",children:t.DexCategory})]}),u.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-12 z-40 pointer-events-none",children:u.jsx("img",{src:Tx(t),alt:t.Name,className:"w-64 h-64 md:w-80 md:h-80 object-contain drop-shadow-2xl",onError:C=>{const D=C.target,S=Df(t);D.src!==S?D.src=S:D.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})}),u.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 pointer-events-none translate-y-1/4 translate-x-1/4 z-10",children:u.jsx("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-96 h-96 filter invert",alt:"bg"})})]}),u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-t-[3rem] min-h-[calc(100vh-300px)] p-6 pt-16 md:px-12 pb-20 relative z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] transition-colors duration-300",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-10",children:[u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(uu,{className:"w-5 h-5"})," ",i.about]}),u.jsxs("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-lg italic",children:['"',t.DexDescription||"No description available.",'"']}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.height}),u.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((I=t.Height)==null?void 0:I.Meters)||"?","m"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.weight}),u.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((b=t.Weight)==null?void 0:b.Kilograms)||"?","kg"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.rank}),u.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.RecommendedRank||"Unknown"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.role}),u.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.GoodStarter?i.starter:i.wild})]})]})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(Nk,{className:"w-5 h-5"})," ",i.baseStats]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4",children:[u.jsxs("div",{className:"col-span-1 md:col-span-2 flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-700",children:[u.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:i.hp}),u.jsxs("div",{className:"flex-1 flex items-center",children:[u.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 mr-4 w-8",children:t.BaseHP}),u.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${Math.min(100,t.BaseHP/15*100)}%`}})})]})]}),[{label:i.strength,val:t.Strength,max:t.MaxStrength},{label:i.dexterity,val:t.Dexterity,max:t.MaxDexterity},{label:i.vitality,val:t.Vitality,max:t.MaxVitality},{label:i.special,val:t.Special,max:t.MaxSpecial},{label:i.insight,val:t.Insight,max:t.MaxInsight}].map(C=>u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:C.label}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[C.val,"/",C.max]}),fN(C.val,C.max)]})]},C.label))]})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(tE,{className:"w-5 h-5"})," ",i.abilities]}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.Ability1&&u.jsxs("button",{onClick:()=>_(t.Ability1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[u.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.primary}),u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:rl(t.Ability1,s)})]}),t.Ability2&&u.jsxs("button",{onClick:()=>_(t.Ability2),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[u.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.secondary}),u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:rl(t.Ability2,s)})]}),t.HiddenAbility&&u.jsxs("button",{onClick:()=>_(t.HiddenAbility),className:"px-4 py-2 bg-purple-50 dark:bg-purple-900/30 rounded-lg border border-purple-100 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors text-left",children:[u.jsx("span",{className:"text-xs text-purple-400 dark:text-purple-300 block uppercase font-bold",children:i.hidden}),u.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-200",children:rl(t.HiddenAbility,s)})]})]})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(cu,{className:"w-5 h-5"})," ",i.moveset]}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-4 overflow-hidden border border-slate-100 dark:border-slate-700",children:t.Moves&&t.Moves.length>0?u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:t.Moves.map((C,D)=>{let S="text-slate-500 dark:text-slate-400",w="bg-white dark:bg-slate-800",T="hover:bg-slate-100 dark:hover:bg-slate-700";const P=C.Learned||"Standard",O=Sx(P,s),M=Mo(C.Name,s);return P==="Starter"&&(S="text-green-600 dark:text-green-400",w="bg-green-50 dark:bg-green-900/20",T="hover:bg-green-100 dark:hover:bg-green-900/30"),(P==="Expert"||P==="Ace"||P==="Master")&&(S="text-orange-600 dark:text-orange-400",w="bg-orange-50 dark:bg-orange-900/20",T="hover:bg-orange-100 dark:hover:bg-orange-900/30"),u.jsxs("button",{onClick:()=>m(C.Name),className:`${w} ${T} p-3 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm flex flex-col text-left transition-all duration-200 active:scale-95`,children:[u.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${S} mb-1`,children:O}),u.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm truncate w-full",children:M})]},D)})}):u.jsx("p",{className:"text-slate-400 text-center italic",children:"No moves data available."})})]})]})})]}),l&&u.jsx(Ix,{moveName:l.name,filePath:l.path,onClose:()=>c(null),language:s}),d&&u.jsx(Ax,{abilityName:d.name,filePath:d.path,onClose:()=>p(null),language:s})]})},wN=({character:t,baseData:e,moveFileMap:n,abilityFileMap:r,onSave:s,onClose:i,language:o,natureMap:l})=>{const c=Pn[o],[d,p]=H.useState(t),[m,_]=H.useState(!0),I=cs(d.type1),[b,C]=H.useState({step:"setup",mode:"attribute",isOpen:!1,statName:"",statValue:0,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0,total:0}),[D,S]=H.useState(null),[w,T]=H.useState(null),[P,O]=H.useState(null),[M,x]=H.useState({isOpen:!1,damage:"",type:"physical"}),[y,k]=H.useState(null),[E,N]=H.useState(!1);H.useEffect(()=>{if(!d.nature||!l)return;const A=l[d.nature];if(A){const $=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${A.split("/").map(K=>encodeURIComponent(K)).join("/")}`;fetch($).then(K=>K.json()).then(K=>{k(K),!m&&K.Confidence&&p(X=>({...X,confidence:K.Confidence}))}).catch(K=>console.error("Failed to fetch nature",K))}else k(null)},[d.nature,l,m]);const R=()=>{s(d)},v=()=>{m||R(),_(!m)},te=(A,z)=>{if(m)return;const $=d.moves||[],K=$.includes(A),X=d.attributes.insight.current+2;if(K)p(ie=>({...ie,moves:ie.moves.filter(Ie=>Ie!==A)}));else{if($.length>=X){alert(`You can only learn ${X} moves (Insight + 2)!`);return}const ie=Hr.indexOf(d.rank);if(Hr.indexOf(z)>ie&&$.filter(Ct=>{const gs=e==null?void 0:e.Moves.find(_i=>_i.Name===Ct);return gs?Hr.indexOf(gs.Learned)>ie:!1}).length>=1){alert("You can only learn one move from a higher rank!");return}p(He=>({...He,moves:[...He.moves,A]}))}},fe=(A,z)=>{!m||z<=0||C({step:"setup",mode:"attribute",isOpen:!0,statName:A,statValue:z,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0})},qe=(A,z)=>{b.selectedSkillName===A?C($=>({...$,selectedSkillName:null,selectedSkillValue:0})):C($=>({...$,selectedSkillName:A,selectedSkillValue:z}))},$e=()=>{const z=b.mode==="initiative"?1:b.statValue+b.selectedSkillValue;C($=>({...$,step:"rolling",results:Array(z).fill(1)}))},W=A=>{const z=parseInt(A);if(!isNaN(z)&&String(z)===A)return z;const $=A.toLowerCase().trim();if(d.attributes[$])return d.attributes[$].current;for(const K of["fight","survival","social"])if(d.skills[K][$])return d.skills[K][$];return d.contest[$]!==void 0?d.contest[$]:0},J=(A,z)=>{const $=A.split("+").map(ie=>ie.trim());let K=$[0],X=$[1]||"";if(K.includes("/")){const ie=K.split("/").map(Ie=>Ie.trim());O({isOpen:!0,options:ie,modifier:X?`+ ${X}`:"",moveData:z}),S(null);return}ne(K,X,z)},ne=(A,z,$)=>{const K=W(A),X=z?W(z):0;let ie;if($&&$.Damage1){const Ie=$.Damage2?`${$.Damage1} + ${$.Damage2}`:$.Damage1;ie={name:$.Name,type:$.Type,damagePool:Ie}}C({step:"setup",mode:"move",isOpen:!0,statName:A,statValue:K,selectedSkillName:z||null,selectedSkillValue:X,results:[],successes:0,activeMove:ie}),S(null),O(null)},pe=()=>{if(!b.activeMove||!b.activeMove.damagePool)return;const z=b.activeMove.damagePool.split("+").map(Zo=>Zo.trim()),$=z[0],K=W($);let X=0;z[1]&&(X=W(z[1]));let ie=0;(d.type1===b.activeMove.type||d.type2&&d.type2===b.activeMove.type)&&(ie=1);let Ie=0;b.successes>3&&(Ie=2);const He=X+ie+Ie,Ct=[];X>0&&Ct.push(`Base(${X})`),ie>0&&Ct.push("STAB(+1)"),Ie>0&&Ct.push("Crit(+2)");const gs=Ct.length>0?Ct.join(" "):"Bonus";C({step:"setup",mode:"move",isOpen:!0,statName:"Damage",statValue:K,selectedSkillName:gs,selectedSkillValue:He,results:[],successes:0,activeMove:void 0})},ge=()=>{const A=d.attributes.dexterity.current,z=d.skills.survival.alert,$=A+z;C({step:"setup",mode:"initiative",isOpen:!0,statName:"Initiative",statValue:1,selectedSkillName:"Dexterity + Alert",selectedSkillValue:$,results:[],successes:0,total:0})},Se=()=>{x({isOpen:!0,damage:"",type:"physical"})},st=()=>{const A=parseInt(M.damage)||0,z=M.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current,$=Math.max(0,A-z),K=d.hp.current,X=Math.max(0,K-$);oe("hp","current",X),x(ie=>({...ie,isOpen:!1}))},Nt=()=>{C({step:"setup",mode:"attribute",isOpen:!0,statName:"Evasion",statValue:d.attributes.dexterity.current,selectedSkillName:"Evasion",selectedSkillValue:d.skills.fight.evasion,results:[],successes:0})},Pt=()=>{C({step:"setup",mode:"attribute",isOpen:!0,statName:"Clash",statValue:d.attributes.strength.current,selectedSkillName:"Clash",selectedSkillValue:d.skills.fight.clash,results:[],successes:0})};H.useEffect(()=>{let A,z;if(b.isOpen&&b.step==="rolling"){const $=b.mode==="initiative",K=$?1:b.statValue+b.selectedSkillValue;A=setInterval(()=>{C(X=>({...X,results:Array(K).fill(0).map(()=>Math.floor(Math.random()*6)+1)}))},80),z=setTimeout(()=>{clearInterval(A);const X=Array(K).fill(0).map(()=>Math.floor(Math.random()*6)+1);if($){const ie=X[0];C(Ie=>({...Ie,step:"result",results:X,total:ie+Ie.selectedSkillValue,successes:0}))}else{const ie=X.filter(Ie=>Ie>3).length;C(Ie=>({...Ie,step:"result",results:X,successes:ie}))}},2e3)}return()=>{clearInterval(A),clearTimeout(z)}},[b.isOpen,b.step,b.statValue,b.selectedSkillValue,b.mode]);const Ke=(A,z,$)=>{m||p(K=>({...K,attributes:{...K.attributes,[A]:{...K.attributes[A],[z]:$}}}))},it=(A,z,$)=>{m||p(K=>({...K,skills:{...K.skills,[A]:{...K.skills[A],[z]:$}}}))},ln=(A,z)=>{m&&A!=="status"||p($=>({...$,[A]:z}))},Yt=(A,z)=>{p($=>({...$,[A]:Math.max(0,($[A]||0)+z)}))},oe=(A,z,$)=>{p(K=>({...K,[A]:{...K[A],[z]:$}}))},Qe=(A,z)=>{m||p($=>({...$,contest:{...$.contest,[A]:z}}))},ot=({label:A,current:z,max:$,onChangeCurrent:K})=>{const X=m?"button":"div",ie=m?{onClick:()=>fe(A,z),className:"w-full bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center hover:bg-slate-50 hover:border-blue-500 hover:scale-[1.02] active:scale-95 transition-all cursor-pointer group relative"}:{className:"bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center"};return u.jsxs(X,{...ie,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:`font-black uppercase tracking-widest text-sm ${m?"text-slate-800 group-hover:text-blue-600":"text-slate-800"}`,children:A}),m&&u.jsx(ir,{size:14,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity absolute right-3"})]}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2 px-1",children:Array.from({length:$}).map((Ie,He)=>u.jsx("div",{onClick:Ct=>{m||(Ct.stopPropagation(),K(He+1))},className:`w-4 h-4 rounded-full border border-slate-300 transition-all duration-150 ${He<z?"bg-slate-900":"bg-slate-200"} ${m?"":"cursor-pointer hover:bg-slate-400"}`,title:m?"":`${A}: ${He+1}`},He))})]})},L=({label:A,value:z,onChange:$})=>u.jsxs("div",{className:`bg-white/50 rounded-xl px-3 py-2 flex items-center justify-between mb-2 ${m?"opacity-90":"hover:bg-white/80 transition-colors"}`,children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:A}),u.jsx("div",{className:"flex gap-1.5",children:Array.from({length:5}).map((K,X)=>u.jsx("button",{disabled:m,onClick:()=>$(X+1===z?0:X+1),className:`w-3 h-3 rounded-full border border-pink-400 transition-all duration-150 ${X<z?"bg-pink-500 scale-125 border-pink-500":"bg-white"} ${m?"cursor-default":"hover:bg-pink-200 cursor-pointer"}`,title:`${A}: ${X+1}`},X))})]}),G=({label:A,value:z,onChange:$})=>u.jsxs("div",{className:"flex items-center justify-between mb-1.5 group",children:[u.jsx("span",{className:"text-xs font-bold text-white uppercase group-hover:text-amber-200 transition-colors truncate mr-2",children:A}),u.jsx("div",{className:"flex gap-1 shrink-0",children:Array.from({length:5}).map((K,X)=>u.jsx("button",{disabled:m,onClick:()=>$(X+1===z?0:X+1),className:`w-3.5 h-3.5 rounded-full border border-white/20 transition-all duration-150 ${X<z?"bg-white scale-110 shadow-sm":"bg-black/20"} ${m?"cursor-default":"hover:bg-white/20"}`},X))})]}),Z=({label:A,value:z,onChange:$})=>u.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[u.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:u.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:A})}),u.jsx("input",{type:"text",value:z,readOnly:m,onChange:K=>$(K.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none ${m?"bg-slate-100 cursor-default":"bg-blue-50 focus:bg-white"}`})]}),le=({label:A,current:z,max:$,onChangeCurrent:K,Icon:X,activeColor:ie})=>u.jsxs("div",{className:"bg-slate-800 rounded-2xl p-3 mb-3 border-4 border-slate-700 shadow-md flex items-center gap-4",children:[u.jsx("span",{className:"text-lg font-black text-white uppercase tracking-wider shrink-0",children:A}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.from({length:$}).map((Ie,He)=>u.jsx("button",{disabled:!m,onClick:()=>{const Ct=He+1;K(He===0&&z===1?0:Ct)},className:`transition-all duration-200 ${m?"cursor-pointer hover:scale-110":"cursor-default opacity-80"}`,title:`${He+1}/${$}`,children:u.jsx(X,{size:24,className:`drop-shadow-sm ${He<z?ie:"text-slate-600 fill-slate-900"}`})},He))})]}),me=({label:A,value:z,onChange:$,isReadOnly:K=!1,onAction:X,ActionIcon:ie=ir})=>u.jsxs("div",{className:"flex rounded-full border-4 border-slate-700 bg-white overflow-hidden h-9 shadow-sm",children:[u.jsxs("div",{className:"flex-1 flex items-center pl-3 font-black text-slate-700 uppercase text-[10px] tracking-wider whitespace-nowrap overflow-hidden",children:[A,":"]}),K||m?u.jsxs("div",{onClick:()=>m&&X&&X(),className:`w-20 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 
                   ${m?"bg-slate-100":"bg-blue-100"}
                   ${m&&X?"cursor-pointer hover:bg-green-100 hover:text-green-800 transition-colors":""}
                   `,children:[z,m&&X&&u.jsx(ie,{size:12,className:"ml-1 opacity-50"})]}):u.jsx("input",{type:"number",value:z,onChange:Ie=>$&&$(parseInt(Ie.target.value)||0),className:"w-20 bg-blue-100 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 text-center outline-none"})]}),at=d.attributes.dexterity.current+d.skills.survival.alert,Je=d.attributes.vitality.current,Bt=d.attributes.insight.current,Xt=d.attributes.dexterity.current+d.skills.fight.evasion,ce=d.attributes.strength.current+d.skills.fight.clash;d.combat;const De=d.attributes.insight.current+2,Ze=H.useMemo(()=>{if(!e)return{currentRank:[],nextRank:[]};const A=Hr.indexOf(d.rank),z=e.Moves.filter(K=>{const X=Hr.indexOf(K.Learned);return X!==-1&&X<=A}),$=e.Moves.filter(K=>Hr.indexOf(K.Learned)===A+1);return{currentRank:z,nextRank:$}},[e,d.rank]),Pe=H.useMemo(()=>l?Object.keys(l).sort():[],[l]);return u.jsxs("div",{className:"fixed inset-0 z-50 bg-[#e74c3c] overflow-y-auto animate-fade-in custom-scrollbar",children:[u.jsxs("div",{className:"sticky top-0 z-50 bg-[#c0392b] p-4 shadow-md flex justify-between items-center text-white",children:[u.jsxs("button",{onClick:()=>{R(),i()},className:"flex items-center gap-2 hover:bg-white/20 px-3 py-1 rounded-full transition-colors",children:[u.jsx(hi,{})," ",c.close]}),u.jsx("h1",{className:"text-xl font-bold uppercase tracking-widest hidden md:block",children:c.pokemonSheet}),u.jsxs("button",{onClick:v,className:`flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg border transition-all ${m?"bg-slate-800 border-slate-600 hover:bg-slate-700 text-white":"bg-yellow-400 border-yellow-500 hover:bg-yellow-300 text-slate-900"}`,children:[m?u.jsx(Hk,{size:18}):u.jsx(iE,{size:18}),u.jsx("span",{className:"font-bold",children:m?"Game Mode":"Edit Mode"})]})]}),u.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-center bg-slate-800/20 p-6 rounded-3xl border-4 border-slate-800/30",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-32 h-32 rounded-full ${I} border-4 border-white shadow-xl flex items-center justify-center overflow-hidden bg-white`,children:u.jsx("img",{src:d.image,alt:d.nickname,className:"w-24 h-24 object-contain"})}),u.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-slate-800 text-white text-xs font-bold px-2 py-1 rounded-lg border-2 border-white",children:["#",d.dexId]})]}),u.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[u.jsx("input",{type:"text",value:d.nickname,readOnly:m,onChange:A=>ln("nickname",A.target.value),className:`text-4xl md:text-5xl font-black text-white bg-transparent border-b-4 focus:border-white outline-none w-full mb-2 placeholder-white/50 ${m?"border-transparent cursor-default":"border-white/20"}`,placeholder:c.nickname}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-2",children:[u.jsx("span",{className:"text-xl text-white font-bold opacity-80",children:d.speciesName}),u.jsx("div",{className:"h-6 w-px bg-white/40 hidden md:block"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx(jr,{type:d.type1,language:o}),d.type2&&u.jsx(jr,{type:d.type2,language:o})]}),u.jsx("div",{className:"ml-0 md:ml-4 bg-black/20 rounded-lg p-2 border border-white/10",children:u.jsxs("div",{className:"flex items-center gap-4 px-2 py-1",children:[u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx("span",{className:"text-[10px] font-bold text-yellow-400 uppercase tracking-wider",children:"Win"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>Yt("victories",-1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:u.jsx(fc,{size:14})}),u.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:d.victories||0}),u.jsx("button",{onClick:()=>Yt("victories",1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:u.jsx(Al,{size:14})})]})]}),u.jsx("div",{className:"w-px h-8 bg-white/20"}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx("span",{className:"text-[10px] font-bold text-white/60 uppercase tracking-wider",children:"Fight"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>Yt("battles",-1),className:"p-1 hover:text-white text-white/40 transition-colors",children:u.jsx(fc,{size:14})}),u.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:d.battles||0}),u.jsx("button",{onClick:()=>Yt("battles",1),className:"p-1 hover:text-white text-white/40 transition-colors",children:u.jsx(Al,{size:14})})]})]})]})})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[u.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[u.jsxs("div",{className:"bg-red-900/80 p-4 rounded-3xl border-4 border-red-800 shadow-lg",children:[u.jsx(ot,{label:c.strength,current:d.attributes.strength.current,max:d.attributes.strength.max,onChangeCurrent:A=>Ke("strength","current",A)}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[u.jsxs("h4",{className:"text-red-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[u.jsx(Om,{size:12})," ",c.sheet.fight]}),u.jsx(G,{label:c.sheet.brawl,value:d.skills.fight.brawl,onChange:A=>it("fight","brawl",A)}),u.jsx(G,{label:c.sheet.channel,value:d.skills.fight.channel,onChange:A=>it("fight","channel",A)}),u.jsx(G,{label:c.sheet.clash,value:d.skills.fight.clash,onChange:A=>it("fight","clash",A)}),u.jsx(G,{label:c.sheet.evasion,value:d.skills.fight.evasion,onChange:A=>it("fight","evasion",A)})]})]}),u.jsxs("div",{className:"bg-green-900/80 p-4 rounded-3xl border-4 border-green-800 shadow-lg",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(ot,{label:c.dexterity,current:d.attributes.dexterity.current,max:d.attributes.dexterity.max,onChangeCurrent:A=>Ke("dexterity","current",A)}),u.jsx(ot,{label:c.vitality,current:d.attributes.vitality.current,max:d.attributes.vitality.max,onChangeCurrent:A=>Ke("vitality","current",A)})]}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[u.jsxs("h4",{className:"text-green-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[u.jsx($k,{size:12})," ",c.sheet.survival]}),u.jsx(G,{label:c.sheet.alert,value:d.skills.survival.alert,onChange:A=>it("survival","alert",A)}),u.jsx(G,{label:c.sheet.athletic,value:d.skills.survival.athletic,onChange:A=>it("survival","athletic",A)}),u.jsx(G,{label:c.sheet.nature,value:d.skills.survival.nature,onChange:A=>it("survival","nature",A)}),u.jsx(G,{label:c.sheet.stealth,value:d.skills.survival.stealth,onChange:A=>it("survival","stealth",A)})]})]}),u.jsxs("div",{className:"bg-purple-900/80 p-4 rounded-3xl border-4 border-purple-800 shadow-lg",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(ot,{label:c.special,current:d.attributes.special.current,max:d.attributes.special.max,onChangeCurrent:A=>Ke("special","current",A)}),u.jsx(ot,{label:c.insight,current:d.attributes.insight.current,max:d.attributes.insight.max,onChangeCurrent:A=>Ke("insight","current",A)})]}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[u.jsxs("h4",{className:"text-purple-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[u.jsx(Kk,{size:12})," ",c.sheet.social]}),u.jsx(G,{label:c.sheet.allure,value:d.skills.social.allure,onChange:A=>it("social","allure",A)}),u.jsx(G,{label:c.sheet.etiquette,value:d.skills.social.etiquette,onChange:A=>it("social","etiquette",A)}),u.jsx(G,{label:c.sheet.intimidate,value:d.skills.social.intimidate,onChange:A=>it("social","intimidate",A)}),u.jsx(G,{label:c.sheet.perform,value:d.skills.social.perform,onChange:A=>it("social","perform",A)})]})]})]}),u.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-4",children:[u.jsxs("div",{children:[u.jsx(le,{label:c.sheet.hp,current:d.hp.current,max:d.hp.max,onChangeCurrent:A=>oe("hp","current",A),Icon:Uk,activeColor:"text-red-500 fill-red-500"}),u.jsx(le,{label:c.sheet.will,current:d.will.current,max:d.will.max,onChangeCurrent:A=>oe("will","current",A),Icon:Ck,activeColor:"text-blue-500 fill-blue-500"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx(me,{label:c.sheet.initiative,value:at,isReadOnly:!0,onAction:()=>ge(),ActionIcon:ir}),u.jsx(me,{label:c.sheet.def,value:`${Je}/${Bt}`,isReadOnly:!0,onAction:Se,ActionIcon:Zk})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx(me,{label:c.sheet.evasion,value:Xt,isReadOnly:!0,onAction:Nt,ActionIcon:ir}),u.jsx(me,{label:c.sheet.clash,value:ce,isReadOnly:!0,onAction:Pt,ActionIcon:ir})]})]}),u.jsxs("div",{className:"bg-slate-800 rounded-3xl border-4 border-slate-700 p-4 flex-1",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h3",{className:"text-white font-bold uppercase flex items-center gap-2",children:[u.jsx(cu,{className:"text-yellow-400"})," ",c.moveset]}),u.jsxs("span",{className:"text-xs font-mono text-slate-400",children:[d.moves.length,"/",De]})]}),u.jsx("div",{className:"space-y-2",children:Array.from({length:De}).map((A,z)=>{const $=d.moves[z];return $?u.jsxs("button",{onClick:()=>{var K;if(m){if(n){const X=n[$]||((K=Object.entries(n).find(([ie])=>ie.toLowerCase()===$.toLowerCase()))==null?void 0:K[1]);X&&S({name:$,path:X})}}else te($,"")},className:"w-full bg-white rounded-xl p-3 flex justify-between items-center shadow-md hover:scale-[1.01] active:scale-95 transition-all text-left group",children:[u.jsx("span",{className:"font-bold text-slate-800",children:Mo($,o)}),m?u.jsx(ir,{className:"text-slate-300 group-hover:text-blue-500 transition-colors",size:20}):u.jsx(fc,{className:"text-red-500",size:20})]},z):u.jsx("div",{className:"w-full bg-slate-700/50 rounded-xl p-3 flex justify-center items-center border-2 border-dashed border-slate-600",children:u.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:"Empty Slot"})},z)})}),!m&&e&&u.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[u.jsxs("h4",{className:"text-white/60 font-bold uppercase text-xs mb-3",children:["Learnable Moves (Current Rank: ",d.rank,")"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ze.currentRank.map(A=>{const z=d.moves.includes(A.Name);return u.jsx("button",{onClick:()=>te(A.Name,A.Learned),disabled:z,className:`p-2 rounded-lg text-xs font-bold uppercase border transition-all ${z?"bg-green-500 border-green-500 text-white opacity-50 cursor-not-allowed":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:Mo(A.Name,o)},A.Name)})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-slate-100 rounded-3xl p-4 border-4 border-slate-300",children:[u.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[u.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:u.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:c.sheet.nature})}),m?u.jsx("div",{className:"w-full px-2 py-1 text-slate-800 font-bold bg-slate-100 cursor-default min-h-[32px] flex items-center",children:d.nature||"-"}):u.jsxs("select",{value:d.nature,onChange:A=>ln("nature",A.target.value),className:"w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none bg-blue-50 focus:bg-white",children:[u.jsx("option",{value:"",children:"- Select -"}),Pe.map(A=>u.jsx("option",{value:A,children:A},A))]})]}),u.jsx(Z,{label:c.sheet.confidence,value:d.confidence,onChange:A=>ln("confidence",A)}),u.jsx(Z,{label:c.sheet.item,value:d.item,onChange:A=>ln("item",A)}),u.jsxs("div",{className:"bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm",children:[u.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:u.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:c.sheet.status})}),u.jsx("select",{value:d.status,onChange:A=>ln("status",A.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none ${m?"bg-white cursor-pointer":"bg-blue-50"}`,children:sN.map(A=>u.jsx("option",{value:A,children:c.sheet.statuses[A]||A},A))})]})]}),u.jsxs("div",{className:"bg-pink-100 rounded-3xl p-4 border-4 border-pink-300 flex flex-col",children:[u.jsx("h4",{className:"text-pink-400 font-bold uppercase text-center text-xs mb-3 tracking-widest",children:"Contest"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx(L,{label:c.sheet.cool,value:d.contest.cool,onChange:A=>Qe("cool",A)}),u.jsx(L,{label:c.sheet.beauty,value:d.contest.beauty,onChange:A=>Qe("beauty",A)}),u.jsx(L,{label:c.sheet.cute,value:d.contest.cute,onChange:A=>Qe("cute",A)}),u.jsx(L,{label:c.sheet.clever,value:d.contest.clever,onChange:A=>Qe("clever",A)}),u.jsx(L,{label:c.sheet.tough,value:d.contest.tough,onChange:A=>Qe("tough",A)})]})]})]})]})]}),w&&u.jsx(Ax,{abilityName:w.name,filePath:w.path,onClose:()=>T(null),language:o}),D&&u.jsx(Ix,{moveName:D.name,filePath:D.path,onClose:()=>S(null),language:o,onRoll:J}),P&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Choose Attribute"}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:P.options.map(A=>u.jsx("button",{onClick:()=>ne(A,P.modifier.replace("+","").trim(),P.moveData),className:"w-full py-4 bg-slate-100 dark:bg-slate-800 hover:bg-blue-500 dark:hover:bg-blue-600 hover:text-white rounded-xl font-bold text-lg transition-colors border-2 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-200",children:A},A))}),u.jsx("button",{onClick:()=>O(null),className:"mt-4 text-slate-400 font-bold",children:"Cancel"})]})}),M.isOpen&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>x(A=>({...A,isOpen:!1})),children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center shadow-2xl",onClick:A=>A.stopPropagation(),children:[u.jsx("h3",{className:"text-2xl font-black text-slate-800 dark:text-white mb-6 uppercase tracking-tight",children:c.sheet.damageReception}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:c.sheet.damageInflicted}),u.jsx("input",{type:"number",autoFocus:!0,value:M.damage,onChange:A=>x(z=>({...z,damage:A.target.value})),className:"w-full text-center text-4xl font-black bg-slate-100 dark:bg-slate-800 rounded-xl py-4 text-slate-800 dark:text-white outline-none focus:ring-4 focus:ring-red-500 transition-all",placeholder:"0"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[u.jsxs("button",{onClick:()=>x(A=>({...A,type:"physical"})),className:`py-3 rounded-xl font-bold text-sm transition-all border-2 ${M.type==="physical"?"bg-orange-500 border-orange-500 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 hover:border-orange-300"}`,children:[c.sheet.physical,u.jsxs("span",{className:"block text-xs opacity-80 font-normal mt-1",children:["Def: ",d.attributes.vitality.current]})]}),u.jsxs("button",{onClick:()=>x(A=>({...A,type:"special"})),className:`py-3 rounded-xl font-bold text-sm transition-all border-2 ${M.type==="special"?"bg-purple-500 border-purple-500 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 hover:border-purple-300"}`,children:[c.sheet.special,u.jsxs("span",{className:"block text-xs opacity-80 font-normal mt-1",children:["S.Def: ",d.attributes.insight.current]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 mb-6 border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:c.sheet.damageTaken}),u.jsx("span",{className:"text-2xl font-black text-red-500",children:Math.max(0,(parseInt(M.damage)||0)-(M.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current))})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:c.sheet.newHp}),u.jsxs("span",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[Math.max(0,d.hp.current-Math.max(0,(parseInt(M.damage)||0)-(M.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current)))," / ",d.hp.max]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>x(A=>({...A,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",children:c.cancel}),u.jsx("button",{onClick:st,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors",children:c.apply})]})]})}),b.isOpen&&u.jsx("div",{className:"fixed inset-0 z-[110] bg-black/80 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in p-4",onClick:()=>{b.step==="result"&&C(A=>({...A,isOpen:!1}))},children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[3rem] p-8 md:p-12 w-full max-w-2xl text-center shadow-2xl relative overflow-hidden",onClick:A=>A.stopPropagation(),children:[u.jsx("button",{onClick:()=>C(A=>({...A,isOpen:!1})),className:"absolute top-6 right-6 p-2 bg-slate-100 dark:bg-slate-800 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-800 dark:text-white",children:u.jsx(fs,{size:24})}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h2",{className:"text-4xl font-black text-slate-800 dark:text-white uppercase tracking-tighter mb-2",children:[b.statName," Check"]}),u.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 dark:bg-slate-800 px-4 py-2 rounded-full font-bold text-slate-500 dark:text-slate-400",children:[u.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:b.statValue}),b.selectedSkillName&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"+"}),u.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[b.selectedSkillName," (",b.selectedSkillValue,")"]})]})]})]}),b.step==="setup"&&u.jsxs("div",{className:"animate-fade-in",children:[b.mode==="attribute"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("p",{className:"text-slate-400 font-bold uppercase text-sm mb-4",children:"Add a Skill?"}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-h-48 overflow-y-auto custom-scrollbar p-2",children:Object.entries(d.skills).flatMap(([A,z])=>Object.entries(z).map(([$,K])=>u.jsxs("button",{onClick:()=>qe($,K),className:`px-4 py-2 rounded-lg font-bold border-2 transition-all capitalize ${b.selectedSkillName===$?"bg-purple-600 border-purple-600 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-purple-300 dark:hover:border-purple-500"}`,children:[$," (",K,")"]},$)))})]}),u.jsxs("button",{onClick:$e,className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-black text-2xl shadow-xl hover:scale-[1.02] transition-transform flex items-center justify-center gap-3",children:[u.jsx(ir,{size:32})," ROLL ",b.statValue+b.selectedSkillValue," DICE"]})]}),b.step==="rolling"&&u.jsx("div",{className:"flex flex-wrap justify-center gap-4 py-8",children:b.results.map((A,z)=>u.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-xl flex items-center justify-center text-white text-3xl font-black animate-pulse",children:A},z))}),b.step==="result"&&u.jsxs("div",{className:"animate-scale-up",children:[u.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:b.results.map((A,z)=>u.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center text-2xl font-black border-4 ${A>=4?"bg-green-500 border-green-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-400 dark:text-slate-500"}`,children:A},z))}),b.mode==="initiative"?u.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-4 border-yellow-200 dark:border-yellow-700 rounded-2xl p-6",children:[u.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Total Initiative"}),u.jsx("span",{className:"text-6xl font-black text-yellow-500",children:b.total})]}):u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-4 border-green-200 dark:border-green-700 rounded-2xl p-6",children:[u.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Successes"}),u.jsx("span",{className:"text-6xl font-black text-green-600",children:b.successes})]}),u.jsxs("div",{className:"flex gap-4 mt-6",children:[u.jsx("button",{onClick:()=>C(A=>({...A,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Done"}),b.mode==="move"&&b.activeMove&&b.activeMove.damagePool&&u.jsxs("button",{onClick:pe,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors flex items-center justify-center gap-2",children:[u.jsx(Om,{size:20})," Roll Damage"]})]})]})]})})]})]})},kN=({onBack:t,allPokemon:e,language:n,natureMap:r,moveFileMap:s,abilityFileMap:i,party:o,setParty:l,pcBoxes:c,setPcBoxes:d,onSave:p,onLoad:m})=>{const _=Pn[n],{user:I}=Rf(),[b,C]=H.useState(0),[D,S]=H.useState(!1),[w,T]=H.useState(null),[P,O]=H.useState(null),[M,x]=H.useState(null),[y,k]=H.useState(null),[E,N]=H.useState(null),R=H.useRef(null),v=H.useRef(!1),[te,fe]=H.useState(""),[qe,$e]=H.useState(""),W=(L,G)=>{const{source:Z,boxIndex:le,slotIndex:me}=L,{source:at,boxIndex:Je,slotIndex:Bt}=G;if(Z===at&&le===Je&&me===Bt)return;let Xt=null;if(Z==="party"?Xt=o[me]:Xt=c[le][me],!Xt)return;let ce=null;at==="party"?ce=o[Bt]:ce=c[Je][Bt];const De=[...o],Ze=[...c],Pe=(A,z,$,K)=>{A==="party"?De[$]=K:(Ze[z]===c[z]&&(Ze[z]=[...c[z]]),Ze[z][$]=K)};Pe(Z,le,me,null),Pe(at,Je,Bt,Xt),ce&&Pe(Z,le,me,ce),l(De),d(Ze)},J=(L,G,Z,le)=>{k({source:G,boxIndex:Z,slotIndex:le}),L.dataTransfer.effectAllowed="move"},ne=L=>{L.preventDefault(),L.dataTransfer.dropEffect="move"},pe=(L,G,Z,le)=>{L.preventDefault(),y&&(W(y,{source:G,boxIndex:Z,slotIndex:le}),k(null))},ge=(L,G,Z)=>{v.current=!1,R.current=setTimeout(()=>{(L==="party"?o[Z]:c[G][Z])&&(N({source:L,boxIndex:G,slotIndex:Z}),v.current=!0,navigator.vibrate&&navigator.vibrate(50))},2e3)},Se=()=>{R.current&&(clearTimeout(R.current),R.current=null)},st=(L,G)=>{if(v.current){v.current=!1;return}if(E){W(E,{source:L===-1?"party":"pc",boxIndex:L,slotIndex:G}),N(null);return}const Z=L===-1?o[G]:c[L][G];Z===null?(T({boxIndex:L,slotIndex:G}),S(!0),fe(""),$e("")):(x({boxIndex:L,slotIndex:G}),O(Z))},Nt=L=>{var G,Z,le,me;return{id:crypto.randomUUID(),dexId:L.Number,nickname:L.Name,speciesName:L.Name,type1:L.Type1,type2:L.Type2,rank:L.RecommendedRank||"Starter",attributes:{strength:{current:L.Strength,max:L.MaxStrength},dexterity:{current:L.Dexterity,max:L.MaxDexterity},vitality:{current:L.Vitality,max:L.MaxVitality},special:{current:L.Special,max:L.MaxSpecial},insight:{current:L.Insight,max:L.MaxInsight}},skills:{fight:{brawl:0,channel:0,clash:0,evasion:0},survival:{alert:0,athletic:0,nature:0,stealth:0},social:{allure:0,etiquette:0,intimidate:0,perform:0}},hp:{current:L.BaseHP,max:L.BaseHP},will:{current:L.Insight+2,max:L.Insight+2},moves:[],nature:"",confidence:"",happiness:2,loyalty:2,battles:0,victories:0,item:"",status:"Neutral",accessory:"",contest:{tough:1,cool:1,beauty:1,cute:1,clever:1},combat:{accuracy:0,damage:0},size:((Z=(G=L.Height)==null?void 0:G.Meters)==null?void 0:Z.toString())||"0",weight:((me=(le=L.Weight)==null?void 0:le.Kilograms)==null?void 0:me.toString())||"0",image:Tx(L)}},Pt=L=>{if(w){const G=Nt(L),{boxIndex:Z,slotIndex:le}=w;if(Z===-1){const me=[...o];me[le]=G,l(me)}else{const me=[...c],at=[...me[Z]];at[le]=G,me[Z]=at,d(me)}S(!1),T(null)}},Ke=(L,G,Z)=>{if(L.stopPropagation(),G===-1){const le=[...o];le[Z]=null,l(le)}else{const le=[...c],me=[...le[G]];me[Z]=null,le[G]=me,d(le)}},it=L=>{if(M){const{boxIndex:G,slotIndex:Z}=M;if(G===-1){const le=[...o];le[Z]=L,l(le)}else{const le=[...c],me=[...le[G]];me[Z]=L,le[G]=me,d(le)}}},ln=()=>C(L=>(L+1)%20),Yt=()=>C(L=>(L-1+20)%20),oe=()=>{$e(te)},Qe=L=>{L.key==="Enter"&&oe()},ot=e.filter(L=>qe.trim()?L.Name.toLowerCase().includes(qe.toLowerCase()):!0).sort((L,G)=>{if(!qe.trim())return L.Number-G.Number;const Z=qe.toLowerCase(),le=L.Name.toLowerCase(),me=G.Name.toLowerCase();if(le===Z&&me!==Z)return-1;if(me===Z&&le!==Z)return 1;const at=le.startsWith(Z),Je=me.startsWith(Z);return at&&!Je?-1:!at&&Je?1:le.length!==me.length?le.length-me.length:le.localeCompare(me)}).slice(0,50);return u.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen pb-32",children:[u.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:u.jsx(hi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:_.party})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[I&&u.jsxs("div",{className:"flex gap-2 mr-2",children:[u.jsx("button",{onClick:p,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Salva su Cloud",children:u.jsx(Jk,{size:20})}),u.jsx("button",{onClick:m,className:"p-2 bg-slate-600 hover:bg-slate-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Ricarica da Cloud",children:u.jsx(Ok,{size:20})})]}),u.jsx("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-3 py-1.5 rounded-full shadow-sm border border-slate-200 dark:border-slate-700 opacity-80",children:I?u.jsx(Vk,{className:"text-green-500",size:16}):u.jsx(Dk,{className:"text-slate-400",size:16})})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:o.map((L,G)=>u.jsx("div",{className:"relative",onDragOver:ne,onDrop:Z=>pe(Z,"party",-1,G),onTouchStart:()=>ge("party",-1,G),onTouchEnd:Se,onTouchMove:Se,children:L?u.jsxs("div",{draggable:!0,onDragStart:Z=>J(Z,"party",-1,G),onClick:()=>st(-1,G),className:`relative h-40 rounded-3xl p-5 shadow-lg overflow-hidden ${cs(L.type1)} group cursor-grab active:cursor-grabbing transform hover:scale-[1.02] transition-all ${(E==null?void 0:E.source)==="party"&&E.slotIndex===G?"ring-4 ring-yellow-400 scale-95 z-50":""}`,children:[u.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:u.jsx(Hd,{})}),u.jsxs("div",{className:"flex justify-between h-full relative z-10 pointer-events-none",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:L.nickname}),L.nickname!==L.speciesName&&u.jsx("span",{className:"text-white/70 text-xs font-bold uppercase",children:L.speciesName}),u.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[u.jsx(jr,{type:L.type1,language:n}),L.type2&&u.jsx(jr,{type:L.type2,language:n})]})]}),u.jsxs("div",{className:"flex flex-col items-end justify-between",children:[u.jsx("div",{className:"bg-black/20 px-2 py-1 rounded-lg",children:u.jsxs("span",{className:"text-white font-mono text-sm",children:["HP ",L.hp.current,"/",L.hp.max]})}),u.jsx("img",{loading:"lazy",src:L.image,alt:L.nickname,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg"})]})]}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity z-20 pointer-events-none",children:u.jsxs("div",{className:"bg-white/20 backdrop-blur-md px-4 py-2 rounded-full flex items-center gap-2",children:[u.jsx(Yk,{className:"text-white",size:20}),u.jsx("span",{className:"text-white font-bold",children:"Edit Sheet"})]})}),u.jsx("button",{onClick:Z=>Ke(Z,-1,G),className:"absolute top-3 right-3 p-2 bg-black/20 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all duration-200 z-30 pointer-events-auto",title:_.removeFromParty,children:u.jsx(Fm,{size:16})})]}):u.jsxs("div",{onClick:()=>st(-1,G),className:`h-40 rounded-3xl border-4 border-dashed border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/30 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 hover:border-slate-400 dark:hover:border-slate-600 transition-all duration-200 group ${(E==null?void 0:E.source)==="party"&&E.slotIndex===G?"ring-4 ring-yellow-400":""}`,children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:u.jsx(Al,{size:24})}),u.jsx("span",{className:"font-bold text-lg",children:_.emptySlot})]})},G))}),u.jsxs("div",{className:"mt-8 border-t-2 border-slate-200 dark:border-slate-700 pt-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Qk,{className:"text-slate-500 dark:text-slate-400",size:32}),u.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:_.pc})]}),u.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-2 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsx("button",{onClick:Yt,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:u.jsx(Rk,{})}),u.jsxs("div",{className:"flex flex-col items-center w-32",children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:_.box}),u.jsx("div",{className:"relative",children:u.jsx("select",{value:b,onChange:L=>C(parseInt(L.target.value)),className:"appearance-none bg-transparent font-black text-xl text-center outline-none cursor-pointer text-slate-800 dark:text-white w-full z-10 relative",children:Array.from({length:20}).map((L,G)=>u.jsx("option",{value:G,className:"text-slate-800",children:G+1},G))})})]}),u.jsx("button",{onClick:ln,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:u.jsx(jk,{})})]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-900/50 p-4 rounded-3xl border-4 border-slate-300 dark:border-slate-800",children:u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:c[b].map((L,G)=>u.jsx("div",{className:"aspect-square relative group",onDragOver:ne,onDrop:Z=>pe(Z,"pc",b,G),onTouchStart:()=>ge("pc",b,G),onTouchEnd:Se,onTouchMove:Se,children:L?u.jsxs("div",{draggable:!0,onDragStart:Z=>J(Z,"pc",b,G),onClick:()=>st(b,G),className:`w-full h-full rounded-xl shadow-md overflow-hidden ${cs(L.type1)} cursor-grab active:cursor-grabbing transition-transform hover:scale-105 border-2 border-white/20 ${(E==null?void 0:E.source)==="pc"&&E.boxIndex===b&&E.slotIndex===G?"ring-4 ring-yellow-400 scale-95 z-50":""}`,children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none",children:u.jsx(Hd,{})}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 pointer-events-none",children:[u.jsx("img",{src:L.image,alt:L.nickname,className:"w-16 h-16 object-contain drop-shadow-md mb-1"}),u.jsx("span",{className:"text-[10px] font-bold text-white uppercase truncate w-full text-center bg-black/20 rounded px-1",children:L.nickname})]}),u.jsx("button",{onClick:Z=>Ke(Z,b,G),className:"absolute top-1 right-1 p-1 bg-black/40 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all z-10 pointer-events-auto",title:_.removeFromParty,children:u.jsx(Fm,{size:12})})]}):u.jsx("div",{onClick:()=>st(b,G),className:`w-full h-full rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-white/50 dark:bg-slate-800/50 flex flex-col items-center justify-center text-slate-400 hover:bg-white hover:border-slate-400 transition-colors cursor-pointer ${(E==null?void 0:E.source)==="pc"&&E.boxIndex===b&&E.slotIndex===G?"ring-4 ring-yellow-400":""}`,children:u.jsx(Al,{size:20,className:"opacity-50"})})},G))})})]}),D&&u.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl flex flex-col max-h-[80vh] animate-scale-up",children:[u.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:_.selectPokemon}),u.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500",children:u.jsx(fs,{size:24})})]}),u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(Nl,{className:"absolute left-3 top-3 text-slate-400",size:20}),u.jsx("input",{type:"text",autoFocus:!0,placeholder:_.searchPlaceholder,value:te,onChange:L=>fe(L.target.value),onKeyDown:Qe,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),u.jsx("button",{onClick:oe,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition-colors shadow-lg",children:u.jsx(Nl,{size:24})})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[ot.map(L=>u.jsxs("button",{onClick:()=>Pt(L),className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-700 text-left",children:[u.jsx("img",{src:Df(L),alt:L.Name,className:"w-12 h-12 object-contain"}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-slate-800 dark:text-white",children:L.Name}),u.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["#",L.Number]})]})]},L.Number)),ot.length===0&&u.jsx("div",{className:"col-span-full text-center py-8 text-slate-400",children:_.noResults})]})})]})}),P&&u.jsx(wN,{character:P,baseData:e.find(L=>L.Number===P.dexId),moveFileMap:s,abilityFileMap:i,language:n,onSave:it,onClose:()=>{O(null),x(null)},natureMap:r})]})},EN=({items:t,onBack:e,language:n})=>{const r=Pn[n],[s,i]=H.useState(""),[o,l]=H.useState(null),[c,d]=H.useState(!1),[p,m]=H.useState({}),_=["Name","Description","Image","_id"],I=["Name","Description","Effect","Cost","_id","Image","Type"],b=["Boost","Category","Cures","ForTypes","ForTipes","Pocket"],C=H.useMemo(()=>{const P=new Map;return t.forEach(O=>{Object.keys(O).forEach(M=>{if(_.includes(M))return;const x=O[M];if(x==null||x==="")return;if(!P.has(M)){let k="string";b.includes(M)?k="select":typeof x=="boolean"&&(k="boolean"),P.set(M,{type:k,options:new Set})}const y=P.get(M);y.type==="select"&&y.options.add(String(x))})}),Array.from(P.entries()).sort((O,M)=>O[0].localeCompare(M[0])).map(([O,M])=>({key:O,type:M.type,options:Array.from(M.options).sort()}))},[t]),D=H.useMemo(()=>t.filter(P=>{if(s&&!P.Name.toLowerCase().includes(s.toLowerCase()))return!1;for(const[O,M]of Object.entries(p)){if(M===""||M===!1||M===null)continue;const x=P[O];if(x==null)return!1;if(typeof M=="boolean"){if(x!==!0)return!1}else if(b.includes(O)){if(String(x)!==String(M))return!1}else{const y=String(x).toLowerCase(),k=String(M).toLowerCase();if(!y.includes(k))return!1}}return!0}),[t,s,p]),S=(P,O)=>{m(M=>({...M,[P]:O}))},w=()=>{i(""),m({})},T=Object.values(p).filter(P=>P!==""&&P!==!1&&P!==null).length;return u.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto min-h-screen pb-20",children:[u.jsx("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300 -mx-4 px-4 pt-4 pb-4 mb-6",children:u.jsxs("div",{className:"flex flex-col gap-4 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:u.jsx(hi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),u.jsxs("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[u.jsx(cv,{className:"text-green-500"}),r.sheet.item,"s"]})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[u.jsxs("div",{className:"relative w-full md:w-80",children:[u.jsx(Nl,{className:"absolute left-3 top-3 text-slate-400",size:20}),u.jsx("input",{type:"text",placeholder:r.searchPlaceholder,value:s,onChange:P=>i(P.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm"})]}),u.jsxs("button",{onClick:()=>d(!c),className:`p-3 rounded-xl border transition-all flex items-center gap-2 font-bold ${c||T>0?"bg-green-500 border-green-500 text-white shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50"}`,children:[c?u.jsx(fs,{size:20}):u.jsx(xd,{size:20}),u.jsx("span",{className:"hidden md:inline",children:r.filters}),T>0&&u.jsx("span",{className:"bg-white text-green-600 text-[10px] px-1.5 py-0.5 rounded-full min-w-[20px] text-center",children:T})]})]})]}),c&&u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 shadow-lg animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-slate-100 dark:border-slate-800",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 uppercase text-sm tracking-wider",children:"Advanced Filters"}),u.jsxs("button",{onClick:w,className:"text-xs font-bold text-red-500 hover:text-red-600 flex items-center gap-1 uppercase",children:[u.jsx(hv,{size:12})," ",r.clear]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar p-1",children:C.map(({key:P,type:O,options:M})=>u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate",title:P,children:P}),O==="select"?u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:p[P]||"",onChange:x=>S(P,x.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",children:[u.jsx("option",{value:"",children:"Any"}),M.map(x=>u.jsx("option",{value:x,children:x},x))]}),u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",children:u.jsx(xd,{size:12})})]}):O==="boolean"?u.jsxs("button",{onClick:()=>S(P,!p[P]),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-bold transition-all ${p[P]?"bg-green-500 border-green-500 text-white":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-400"}`,children:[p[P]?u.jsx(Vm,{size:16}):u.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-300"}),p[P]?"Yes":"No / Any"]}):u.jsx("input",{type:"text",placeholder:`Filter ${P}...`,value:p[P]||"",onChange:x=>S(P,x.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]},P))})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map((P,O)=>u.jsxs("div",{onClick:()=>l(o===P?null:P),className:`bg-white dark:bg-slate-800 rounded-2xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md ${o===P?"border-green-500 ring-2 ring-green-500/20":"border-slate-200 dark:border-slate-700 hover:border-green-300 dark:hover:border-green-700"}`,children:[u.jsxs("div",{className:"flex items-start gap-4 mb-2",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-100 dark:bg-slate-900 rounded-xl p-1 border border-slate-200 dark:border-slate-700 flex items-center justify-center shrink-0",children:u.jsx("img",{src:hN(P),alt:P.Name,className:"w-full h-full object-contain",onError:M=>{M.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",M.target.style.opacity="0.3"}})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight mb-1",children:P.Name}),P.Type&&u.jsxs("span",{className:"inline-flex text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-0.5 rounded-full items-center gap-1",children:[u.jsx(rE,{size:10})," ",P.Type]})]})]}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-2 mt-2",children:P.Description}),o===P&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700 animate-fade-in space-y-3",children:[u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-200",children:P.Description}),P.Effect&&u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30",children:[u.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 uppercase block mb-1",children:"Effect"}),u.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200",children:P.Effect})]}),P.Cost!==void 0&&u.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400 font-bold text-sm bg-yellow-50 dark:bg-yellow-900/10 px-3 py-2 rounded-lg w-max",children:[u.jsx(Mk,{size:16}),u.jsxs("span",{children:[P.Cost," "]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg",children:Object.entries(P).map(([M,x])=>{if(I.includes(M)||x==null||x==="")return null;let y=x;return typeof x=="boolean"&&(y=x?u.jsx(Vm,{size:14,className:"text-green-500"}):u.jsx(aE,{size:14,className:"text-red-500"})),typeof x=="object"?null:u.jsxs("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-700/50 last:border-0 pb-1 last:pb-0",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:M}),u.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1",children:y})]},M)})})]})]},O))}),D.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(uu,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-xl",children:r.noResults}),(s||T>0)&&u.jsxs("button",{onClick:w,className:"mt-4 text-green-500 font-bold hover:underline",children:[r.clear," Filters"]})]})]})},SN="https://api.github.com/repos/Pokerole-Software-Development/Pokerole-Data/git/trees/master?recursive=1",Yg="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/";function TN(){return u.jsx(eN,{children:u.jsx(bN,{})})}function bN(){const{user:t}=Rf(),[e,n]=H.useState("home"),[r,s]=H.useState("regions"),[i,o]=H.useState("National"),[l,c]=H.useState(null),[d,p]=H.useState(0),[m,_]=H.useState([]),[I,b]=H.useState([]),[C,D]=H.useState(Array(6).fill(null)),[S,w]=H.useState(Array(20).fill(null).map(()=>Array(30).fill(null))),[T,P]=H.useState(!1),[O,M]=H.useState({}),[x,y]=H.useState({}),[k,E]=H.useState({}),[N,R]=H.useState(!0),[v,te]=H.useState(0),[fe,qe]=H.useState(0),[$e,W]=H.useState(null),[J,ne]=H.useState(()=>{if(typeof window<"u"){const oe=localStorage.getItem("theme");return oe==="dark"||!oe&&window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[pe,ge]=H.useState("en"),Se=()=>{ne(oe=>!oe)};H.useEffect(()=>{const oe=document.documentElement;J?(oe.classList.add("dark"),localStorage.setItem("theme","dark")):(oe.classList.remove("dark"),localStorage.setItem("theme","light"))},[J]),H.useEffect(()=>{(async()=>{try{const Qe=await fetch(SN);if(!Qe.ok)throw new Error("GitHub API request failed. Limit might be reached.");const ot=await Qe.json(),L=[],G=[],Z={},le={},me={};ot.tree.forEach(ce=>{if(ce.type==="blob"){if(ce.path.includes("v2.0/Pokedex")&&ce.path.endsWith(".json")&&L.push(ce),ce.path.includes("v2.0/Items")&&ce.path.endsWith(".json")&&G.push(ce),ce.path.includes("v2.0/Moves")&&ce.path.endsWith(".json")){const De=ce.path.split("/"),Ze=De[De.length-1].replace(".json","");Z[Ze]=ce.path}if(ce.path.includes("v2.0/Abilities")&&ce.path.endsWith(".json")){const De=ce.path.split("/"),Ze=De[De.length-1].replace(".json","");le[Ze]=ce.path}if(ce.path.includes("v2.0/Natures")&&ce.path.endsWith(".json")){const De=ce.path.split("/"),Ze=De[De.length-1].replace(".json","");me[Ze]=ce.path}}});const at=L.length+G.length;qe(at),M(Z),y(le),E(me);const Je=20,Bt=[];for(let ce=0;ce<L.length;ce+=Je){const Ze=L.slice(ce,ce+Je).map(async z=>{try{const $=z.path.split("/").map(Ie=>encodeURIComponent(Ie)).join("/"),K=`${Yg}${$}`,X=await fetch(K);if(!X.ok)return null;const ie=await X.json();if(ie&&ie.Name){const Ie=ie.BaseHP!==void 0?ie.BaseHP:ie.HP,He=typeof ie.Number=="number"?ie.Number:parseInt(ie.Number||ie.DexID||"0");return{...ie,Number:He,BaseHP:Ie,Image:ie.Image||`${ie.Name}.png`}}return null}catch{return null}}),A=(await Promise.all(Ze)).filter(z=>z!==null);Bt.push(...A),te(z=>Math.min(z+Je,at))}const Xt=[];for(let ce=0;ce<G.length;ce+=Je){const Ze=G.slice(ce,ce+Je).map(async A=>{try{const z=A.path.split("/").map(X=>encodeURIComponent(X)).join("/"),$=`${Yg}${z}`,K=await fetch($);return K.ok?await K.json():null}catch{return null}}),Pe=await Promise.all(Ze);Xt.push(...Pe.filter(A=>A!==null)),te(A=>Math.min(A+Je,at))}Bt.sort((ce,De)=>ce.Number-De.Number),Xt.sort((ce,De)=>ce.Name.localeCompare(De.Name)),_(Bt),b(Xt),R(!1)}catch(Qe){console.error(Qe),W("Failed to load data. Please check your connection or try again later."),R(!1)}})()},[]),H.useEffect(()=>{t?Qg(t.uid).then(oe=>{const Qe=Array(6).fill(null),ot=Array(20).fill(null).map(()=>Array(30).fill(null)),L=oe!=null&&oe.party&&oe.party.length===6?oe.party:Qe,G=oe!=null&&oe.pcBoxes&&oe.pcBoxes.length===20?oe.pcBoxes:ot;D(L),w(G),P(!0)}):(D(Array(6).fill(null)),w(Array(20).fill(null).map(()=>Array(30).fill(null))),P(!1))},[t]);const st=async()=>{if(t)try{await tN(t.uid,{party:C,pcBoxes:S}),alert("Salvataggio completato con successo!")}catch(oe){console.error("Errore salvataggio:",oe),alert("Errore durante il salvataggio. Controlla la console.")}},Nt=async()=>{if(!t)return;const oe=await Qg(t.uid);if(oe){const Qe=Array(6).fill(null),ot=Array(20).fill(null).map(()=>Array(30).fill(null)),L=oe.party&&Array.isArray(oe.party)&&oe.party.length===6?oe.party:Qe,G=oe.pcBoxes&&Array.isArray(oe.pcBoxes)?oe.pcBoxes:ot;D(L),w(G),alert("Dati ricaricati dal cloud!")}},Pt=oe=>{o(oe),s("list"),window.scrollTo(0,0)},Ke=oe=>{p(window.scrollY),c(oe),s("detail")},it=()=>{s("regions"),o("National"),p(0)},ln=()=>{s("list"),c(null)};return H.useEffect(()=>{e==="pokedex"&&r==="list"&&setTimeout(()=>{window.scrollTo(0,d)},0)},[e,r,d]),N&&(e==="pokedex"||e==="pokemon"||e==="items")?u.jsx(vN,{progress:v,total:fe,status:"Syncing Database (v2.0)..."}):$e&&(e==="pokedex"||e==="pokemon"||e==="items")?u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 text-center text-slate-600 dark:text-slate-300",children:[u.jsx(Fh,{className:"w-12 h-12 mb-4 text-red-500 animate-spin"}),u.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Oops!"}),u.jsx("p",{children:$e}),u.jsxs("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-slate-800 dark:bg-slate-700 text-white rounded-lg hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[u.jsx(Xk,{size:18})," Retry"]})]}):u.jsxs("div",{className:"min-h-screen bg-[#f3f4f6] dark:bg-slate-950 transition-colors duration-300",children:[e==="home"&&u.jsx(mN,{onNavigate:n,isDark:J,toggleTheme:Se,language:pe,setLanguage:ge}),e==="character"&&u.jsx(gN,{onBack:()=>n("home"),language:pe}),e==="items"&&u.jsx(EN,{items:I,onBack:()=>n("home"),language:pe}),e==="pokemon"&&u.jsx(kN,{onBack:()=>n("home"),allPokemon:m,language:pe,natureMap:k,moveFileMap:O,abilityFileMap:x,party:C,setParty:D,pcBoxes:S,setPcBoxes:w,onSave:st,onLoad:Nt}),e==="pokedex"&&u.jsxs(u.Fragment,{children:[r==="regions"&&u.jsx(yN,{onSelect:Pt,onHome:()=>n("home"),isDark:J,toggleTheme:Se,language:pe,setLanguage:ge}),(r==="list"||r==="detail")&&u.jsx("div",{className:r==="detail"?"hidden":"block",children:u.jsx(_N,{region:i,onBack:it,onSelectPokemon:Ke,data:m,language:pe})}),r==="detail"&&l&&u.jsx(xN,{pokemon:l,onBack:ln,moveMap:O,abilityMap:x,language:pe})]})]})}const Nx=document.getElementById("root");if(!Nx)throw new Error("Could not find root element to mount to");const IN=Ic.createRoot(Nx);IN.render(u.jsx(mw.StrictMode,{children:u.jsx(TN,{})}));
