(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Jx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qg={exports:{}},Ul={},Yg={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Co=Symbol.for("react.element"),Zx=Symbol.for("react.portal"),ew=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),nw=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),sw=Symbol.for("react.context"),iw=Symbol.for("react.forward_ref"),ow=Symbol.for("react.suspense"),aw=Symbol.for("react.memo"),lw=Symbol.for("react.lazy"),kp=Symbol.iterator;function uw(t){return t===null||typeof t!="object"?null:(t=kp&&t[kp]||t["@@iterator"],typeof t=="function"?t:null)}var Xg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jg=Object.assign,Zg={};function ri(t,e,n){this.props=t,this.context=e,this.refs=Zg,this.updater=n||Xg}ri.prototype.isReactComponent={};ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e0(){}e0.prototype=ri.prototype;function Bd(t,e,n){this.props=t,this.context=e,this.refs=Zg,this.updater=n||Xg}var $d=Bd.prototype=new e0;$d.constructor=Bd;Jg($d,ri.prototype);$d.isPureReactComponent=!0;var Sp=Array.isArray,t0=Object.prototype.hasOwnProperty,Hd={current:null},n0={key:!0,ref:!0,__self:!0,__source:!0};function r0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)t0.call(e,r)&&!n0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Co,type:t,key:i,ref:o,props:s,_owner:Hd.current}}function cw(t,e){return{$$typeof:Co,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Co}function dw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tp=/\/+/g;function Mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dw(""+t.key):e.toString(36)}function Ca(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Co:case Zx:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mu(o,0):r,Sp(s)?(n="",t!=null&&(n=t.replace(Tp,"$&/")+"/"),Ca(s,e,n,"",function(h){return h})):s!=null&&(Wd(s)&&(s=cw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Tp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sp(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Mu(i,l);o+=Ca(i,e,n,c,s)}else if(c=uw(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Mu(i,l++),o+=Ca(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ua(t,e,n){if(t==null)return t;var r=[],s=0;return Ca(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Ra={transition:null},fw={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Ra,ReactCurrentOwner:Hd};function s0(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:ua,forEach:function(t,e,n){ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ua(t,function(){e++}),e},toArray:function(t){return ua(t,function(e){return e})||[]},only:function(t){if(!Wd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=ri;pe.Fragment=ew;pe.Profiler=nw;pe.PureComponent=Bd;pe.StrictMode=tw;pe.Suspense=ow;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fw;pe.act=s0;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)t0.call(e,c)&&!n0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Co,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:sw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rw,_context:t},t.Consumer=t};pe.createElement=r0;pe.createFactory=function(t){var e=r0.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:iw,render:t}};pe.isValidElement=Wd;pe.lazy=function(t){return{$$typeof:lw,_payload:{_status:-1,_result:t},_init:hw}};pe.memo=function(t,e){return{$$typeof:aw,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Ra.transition;Ra.transition={};try{t()}finally{Ra.transition=e}};pe.unstable_act=s0;pe.useCallback=function(t,e){return Pt.current.useCallback(t,e)};pe.useContext=function(t){return Pt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Pt.current.useEffect(t,e)};pe.useId=function(){return Pt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Pt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};pe.useRef=function(t){return Pt.current.useRef(t)};pe.useState=function(t){return Pt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Pt.current.useTransition()};pe.version="18.3.1";Yg.exports=pe;var $=Yg.exports;const pw=Jx($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw=$,gw=Symbol.for("react.element"),yw=Symbol.for("react.fragment"),vw=Object.prototype.hasOwnProperty,_w=mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xw={key:!0,ref:!0,__self:!0,__source:!0};function i0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vw.call(e,r)&&!xw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gw,type:t,key:i,ref:o,props:s,_owner:_w.current}}Ul.Fragment=yw;Ul.jsx=i0;Ul.jsxs=i0;Qg.exports=Ul;var u=Qg.exports,Sc={},o0={exports:{}},Bt={},a0={exports:{}},l0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,re){var se=H.length;H.push(re);e:for(;0<se;){var ve=se-1>>>1,te=H[ve];if(0<s(te,re))H[ve]=re,H[se]=te,se=ve;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var re=H[0],se=H.pop();if(se!==re){H[0]=se;e:for(var ve=0,te=H.length,ge=te>>>1;ve<ge;){var tt=2*(ve+1)-1,Ye=H[tt],Fe=tt+1,$e=H[Fe];if(0>s(Ye,se))Fe<te&&0>s($e,Ye)?(H[ve]=$e,H[Fe]=se,ve=Fe):(H[ve]=Ye,H[tt]=se,ve=tt);else if(Fe<te&&0>s($e,se))H[ve]=$e,H[Fe]=se,ve=Fe;else break e}}return re}function s(H,re){var se=H.sortIndex-re.sortIndex;return se!==0?se:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,_=3,I=!1,b=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var re=n(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=H)r(h),re.sortIndex=re.expirationTime,e(c,re);else break;re=n(h)}}function N(H){if(P=!1,T(H),!b)if(n(c)!==null)b=!0,Oe(L);else{var re=n(h);re!==null&&Ge(N,re.startTime-H)}}function L(H,re){b=!1,P&&(P=!1,k(y),y=-1),I=!0;var se=_;try{for(T(re),m=n(c);m!==null&&(!(m.expirationTime>re)||H&&!A());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,_=m.priorityLevel;var te=ve(m.expirationTime<=re);re=t.unstable_now(),typeof te=="function"?m.callback=te:m===n(c)&&r(c),T(re)}else r(c);m=n(c)}if(m!==null)var ge=!0;else{var tt=n(h);tt!==null&&Ge(N,tt.startTime-re),ge=!1}return ge}finally{m=null,_=se,I=!1}}var M=!1,x=null,y=-1,E=5,S=-1;function A(){return!(t.unstable_now()-S<E)}function C(){if(x!==null){var H=t.unstable_now();S=H;var re=!0;try{re=x(!0,H)}finally{re?v():(M=!1,x=null)}}else M=!1}var v;if(typeof w=="function")v=function(){w(C)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,de=ee.port2;ee.port1.onmessage=C,v=function(){de.postMessage(null)}}else v=function(){D(C,0)};function Oe(H){x=H,M||(M=!0,v())}function Ge(H,re){y=D(function(){H(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){b||I||(b=!0,Oe(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var se=_;_=re;try{return H()}finally{_=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=_;_=H;try{return re()}finally{_=se}},t.unstable_scheduleCallback=function(H,re,se){var ve=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ve+se:ve):se=ve,H){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=se+te,H={id:p++,callback:re,priorityLevel:H,startTime:se,expirationTime:te,sortIndex:-1},se>ve?(H.sortIndex=se,e(h,H),n(c)===null&&H===n(h)&&(P?(k(y),y=-1):P=!0,Ge(N,se-ve))):(H.sortIndex=te,e(c,H),b||I||(b=!0,Oe(L))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var re=_;return function(){var se=_;_=re;try{return H.apply(this,arguments)}finally{_=se}}}})(l0);a0.exports=l0;var ww=a0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=$,Ut=ww;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u0=new Set,no={};function os(t,e){Us(t,e),Us(t+"Capture",e)}function Us(t,e){for(no[t]=e,t=0;t<e.length;t++)u0.add(e[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=Object.prototype.hasOwnProperty,kw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ip={},bp={};function Sw(t){return Tc.call(bp,t)?!0:Tc.call(Ip,t)?!1:kw.test(t)?bp[t]=!0:(Ip[t]=!0,!1)}function Tw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Iw(t,e,n,r){if(e===null||typeof e>"u"||Tw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gd=/[\-:]([a-z])/g;function qd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gd,qd);ht[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gd,qd);ht[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gd,qd);ht[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kd(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Iw(e,n,s,r)&&(n=null),r||s===null?Sw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ca=Symbol.for("react.element"),_s=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),Qd=Symbol.for("react.strict_mode"),Ic=Symbol.for("react.profiler"),c0=Symbol.for("react.provider"),d0=Symbol.for("react.context"),Yd=Symbol.for("react.forward_ref"),bc=Symbol.for("react.suspense"),Ac=Symbol.for("react.suspense_list"),Xd=Symbol.for("react.memo"),Zn=Symbol.for("react.lazy"),h0=Symbol.for("react.offscreen"),Ap=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=Ap&&t[Ap]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Lu;function Di(t){if(Lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lu=e&&e[1]||""}return`
`+Lu+t}var Ou=!1;function Fu(t,e){if(!t||Ou)return"";Ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ou=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Di(t):""}function bw(t){switch(t.tag){case 5:return Di(t.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 2:case 15:return t=Fu(t.type,!1),t;case 11:return t=Fu(t.type.render,!1),t;case 1:return t=Fu(t.type,!0),t;default:return""}}function Nc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case _s:return"Portal";case Ic:return"Profiler";case Qd:return"StrictMode";case bc:return"Suspense";case Ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d0:return(t.displayName||"Context")+".Consumer";case c0:return(t._context.displayName||"Context")+".Provider";case Yd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xd:return e=t.displayName||null,e!==null?e:Nc(t.type)||"Memo";case Zn:e=t._payload,t=t._init;try{return Nc(t(e))}catch{}}return null}function Aw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nc(e);case 8:return e===Qd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nw(t){var e=f0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function da(t){t._valueTracker||(t._valueTracker=Nw(t))}function p0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pc(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Np(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m0(t,e){e=e.checked,e!=null&&Kd(t,"checked",e,!1)}function Cc(t,e){m0(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rc(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rc(t,e,n){(e!=="number"||Ja(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vi=Array.isArray;function Cs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Vi(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function g0(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,v0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ro(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pw=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(t){Pw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bi[e]=Bi[t]})});function _0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bi.hasOwnProperty(t)&&Bi[t]?(""+e).trim():e+"px"}function x0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Cw=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vc(t,e){if(e){if(Cw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Mc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=null;function Jd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oc=null,Rs=null,js=null;function jp(t){if(t=Do(t)){if(typeof Oc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Gl(e),Oc(t.stateNode,t.type,e))}}function w0(t){Rs?js?js.push(t):js=[t]:Rs=t}function E0(){if(Rs){var t=Rs,e=js;if(js=Rs=null,jp(t),e)for(t=0;t<e.length;t++)jp(e[t])}}function k0(t,e){return t(e)}function S0(){}var zu=!1;function T0(t,e,n){if(zu)return t(e,n);zu=!0;try{return k0(t,e,n)}finally{zu=!1,(Rs!==null||js!==null)&&(S0(),E0())}}function so(t,e){var n=t.stateNode;if(n===null)return null;var r=Gl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Fc=!1;if(On)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",Ii,Ii),window.removeEventListener("test",Ii,Ii)}catch{Fc=!1}function Rw(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var $i=!1,Za=null,el=!1,zc=null,jw={onError:function(t){$i=!0,Za=t}};function Dw(t,e,n,r,s,i,o,l,c){$i=!1,Za=null,Rw.apply(jw,arguments)}function Vw(t,e,n,r,s,i,o,l,c){if(Dw.apply(this,arguments),$i){if($i){var h=Za;$i=!1,Za=null}else throw Error(B(198));el||(el=!0,zc=h)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dp(t){if(as(t)!==t)throw Error(B(188))}function Mw(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Dp(s),t;if(i===r)return Dp(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function b0(t){return t=Mw(t),t!==null?A0(t):null}function A0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=A0(t);if(e!==null)return e;t=t.sibling}return null}var N0=Ut.unstable_scheduleCallback,Vp=Ut.unstable_cancelCallback,Lw=Ut.unstable_shouldYield,Ow=Ut.unstable_requestPaint,We=Ut.unstable_now,Fw=Ut.unstable_getCurrentPriorityLevel,Zd=Ut.unstable_ImmediatePriority,P0=Ut.unstable_UserBlockingPriority,tl=Ut.unstable_NormalPriority,zw=Ut.unstable_LowPriority,C0=Ut.unstable_IdlePriority,Bl=null,gn=null;function Uw(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Bl,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:Hw,Bw=Math.log,$w=Math.LN2;function Hw(t){return t>>>=0,t===0?32:31-(Bw(t)/$w|0)|0}var fa=64,pa=4194304;function Mi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Mi(l):(i&=o,i!==0&&(r=Mi(i)))}else o=n&~s,o!==0?r=Mi(o):i!==0&&(r=Mi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function Ww(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Ww(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R0(){var t=fa;return fa<<=1,!(fa&4194240)&&(fa=64),t}function Uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ro(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function qw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function eh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function j0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D0,th,V0,M0,L0,Bc=!1,ma=[],ur=null,cr=null,dr=null,io=new Map,oo=new Map,tr=[],Kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mp(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(e.pointerId)}}function bi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Do(e),e!==null&&th(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Qw(t,e,n,r,s){switch(e){case"focusin":return ur=bi(ur,t,e,n,r,s),!0;case"dragenter":return cr=bi(cr,t,e,n,r,s),!0;case"mouseover":return dr=bi(dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return io.set(i,bi(io.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oo.set(i,bi(oo.get(i)||null,t,e,n,r,s)),!0}return!1}function O0(t){var e=zr(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=I0(n),e!==null){t.blockedOn=e,L0(t.priority,function(){V0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ja(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$c(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lc=r,n.target.dispatchEvent(r),Lc=null}else return e=Do(n),e!==null&&th(e),t.blockedOn=n,!1;e.shift()}return!0}function Lp(t,e,n){ja(t)&&n.delete(e)}function Yw(){Bc=!1,ur!==null&&ja(ur)&&(ur=null),cr!==null&&ja(cr)&&(cr=null),dr!==null&&ja(dr)&&(dr=null),io.forEach(Lp),oo.forEach(Lp)}function Ai(t,e){t.blockedOn===e&&(t.blockedOn=null,Bc||(Bc=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Yw)))}function ao(t){function e(s){return Ai(s,t)}if(0<ma.length){Ai(ma[0],t);for(var n=1;n<ma.length;n++){var r=ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&Ai(ur,t),cr!==null&&Ai(cr,t),dr!==null&&Ai(dr,t),io.forEach(e),oo.forEach(e),n=0;n<tr.length;n++)r=tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)O0(n),n.blockedOn===null&&tr.shift()}var Ds=Gn.ReactCurrentBatchConfig,rl=!0;function Xw(t,e,n,r){var s=Te,i=Ds.transition;Ds.transition=null;try{Te=1,nh(t,e,n,r)}finally{Te=s,Ds.transition=i}}function Jw(t,e,n,r){var s=Te,i=Ds.transition;Ds.transition=null;try{Te=4,nh(t,e,n,r)}finally{Te=s,Ds.transition=i}}function nh(t,e,n,r){if(rl){var s=$c(t,e,n,r);if(s===null)Xu(t,e,r,sl,n),Mp(t,r);else if(Qw(s,t,e,n,r))r.stopPropagation();else if(Mp(t,r),e&4&&-1<Kw.indexOf(t)){for(;s!==null;){var i=Do(s);if(i!==null&&D0(i),i=$c(t,e,n,r),i===null&&Xu(t,e,r,sl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xu(t,e,r,null,n)}}var sl=null;function $c(t,e,n,r){if(sl=null,t=Jd(r),t=zr(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=I0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sl=t,null}function F0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fw()){case Zd:return 1;case P0:return 4;case tl:case zw:return 16;case C0:return 536870912;default:return 16}default:return 16}}var or=null,rh=null,Da=null;function z0(){if(Da)return Da;var t,e=rh,n=e.length,r,s="value"in or?or.value:or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Da=s.slice(t,1<r?1-r:void 0)}function Va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function Op(){return!1}function $t(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ga:Op,this.isPropagationStopped=Op,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=$t(si),jo=Me({},si,{view:0,detail:0}),Zw=$t(jo),Bu,$u,Ni,$l=Me({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ih,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ni&&(Ni&&t.type==="mousemove"?(Bu=t.screenX-Ni.screenX,$u=t.screenY-Ni.screenY):$u=Bu=0,Ni=t),Bu)},movementY:function(t){return"movementY"in t?t.movementY:$u}}),Fp=$t($l),e1=Me({},$l,{dataTransfer:0}),t1=$t(e1),n1=Me({},jo,{relatedTarget:0}),Hu=$t(n1),r1=Me({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),s1=$t(r1),i1=Me({},si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),o1=$t(i1),a1=Me({},si,{data:0}),zp=$t(a1),l1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c1[t])?!!e[t]:!1}function ih(){return d1}var h1=Me({},jo,{key:function(t){if(t.key){var e=l1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ih,charCode:function(t){return t.type==="keypress"?Va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f1=$t(h1),p1=Me({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=$t(p1),m1=Me({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ih}),g1=$t(m1),y1=Me({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),v1=$t(y1),_1=Me({},$l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x1=$t(_1),w1=[9,13,27,32],oh=On&&"CompositionEvent"in window,Hi=null;On&&"documentMode"in document&&(Hi=document.documentMode);var E1=On&&"TextEvent"in window&&!Hi,U0=On&&(!oh||Hi&&8<Hi&&11>=Hi),Bp=" ",$p=!1;function B0(t,e){switch(t){case"keyup":return w1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ws=!1;function k1(t,e){switch(t){case"compositionend":return $0(e);case"keypress":return e.which!==32?null:($p=!0,Bp);case"textInput":return t=e.data,t===Bp&&$p?null:t;default:return null}}function S1(t,e){if(ws)return t==="compositionend"||!oh&&B0(t,e)?(t=z0(),Da=rh=or=null,ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return U0&&e.locale!=="ko"?null:e.data;default:return null}}var T1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!T1[t.type]:e==="textarea"}function H0(t,e,n,r){w0(r),e=il(e,"onChange"),0<e.length&&(n=new sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wi=null,lo=null;function I1(t){ty(t,0)}function Hl(t){var e=Ss(t);if(p0(e))return t}function b1(t,e){if(t==="change")return e}var W0=!1;if(On){var Wu;if(On){var Gu="oninput"in document;if(!Gu){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),Gu=typeof Wp.oninput=="function"}Wu=Gu}else Wu=!1;W0=Wu&&(!document.documentMode||9<document.documentMode)}function Gp(){Wi&&(Wi.detachEvent("onpropertychange",G0),lo=Wi=null)}function G0(t){if(t.propertyName==="value"&&Hl(lo)){var e=[];H0(e,lo,t,Jd(t)),T0(I1,e)}}function A1(t,e,n){t==="focusin"?(Gp(),Wi=e,lo=n,Wi.attachEvent("onpropertychange",G0)):t==="focusout"&&Gp()}function N1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hl(lo)}function P1(t,e){if(t==="click")return Hl(e)}function C1(t,e){if(t==="input"||t==="change")return Hl(e)}function R1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:R1;function uo(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Tc.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kp(t,e){var n=qp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qp(n)}}function q0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K0(){for(var t=window,e=Ja();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ja(t.document)}return e}function ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function j1(t){var e=K0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q0(n.ownerDocument.documentElement,n)){if(r!==null&&ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Kp(n,i);var o=Kp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D1=On&&"documentMode"in document&&11>=document.documentMode,Es=null,Hc=null,Gi=null,Wc=!1;function Qp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wc||Es==null||Es!==Ja(r)||(r=Es,"selectionStart"in r&&ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gi&&uo(Gi,r)||(Gi=r,r=il(Hc,"onSelect"),0<r.length&&(e=new sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Es)))}function ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},qu={},Q0={};On&&(Q0=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Wl(t){if(qu[t])return qu[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q0)return qu[t]=e[n];return t}var Y0=Wl("animationend"),X0=Wl("animationiteration"),J0=Wl("animationstart"),Z0=Wl("transitionend"),ey=new Map,Yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(t,e){ey.set(t,e),os(e,[t])}for(var Ku=0;Ku<Yp.length;Ku++){var Qu=Yp[Ku],V1=Qu.toLowerCase(),M1=Qu[0].toUpperCase()+Qu.slice(1);br(V1,"on"+M1)}br(Y0,"onAnimationEnd");br(X0,"onAnimationIteration");br(J0,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(Z0,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Vw(r,e,void 0,t),t.currentTarget=null}function ty(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Xp(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Xp(s,l,h),i=c}}}if(el)throw t=zc,el=!1,zc=null,t}function Pe(t,e){var n=e[Yc];n===void 0&&(n=e[Yc]=new Set);var r=t+"__bubble";n.has(r)||(ny(e,t,2,!1),n.add(r))}function Yu(t,e,n){var r=0;e&&(r|=4),ny(n,t,r,e)}var va="_reactListening"+Math.random().toString(36).slice(2);function co(t){if(!t[va]){t[va]=!0,u0.forEach(function(n){n!=="selectionchange"&&(L1.has(n)||Yu(n,!1,t),Yu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[va]||(e[va]=!0,Yu("selectionchange",!1,e))}}function ny(t,e,n,r){switch(F0(e)){case 1:var s=Xw;break;case 4:s=Jw;break;default:s=nh}n=s.bind(null,e,n,t),s=void 0,!Fc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=zr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}T0(function(){var h=i,p=Jd(n),m=[];e:{var _=ey.get(t);if(_!==void 0){var I=sh,b=t;switch(t){case"keypress":if(Va(n)===0)break e;case"keydown":case"keyup":I=f1;break;case"focusin":b="focus",I=Hu;break;case"focusout":b="blur",I=Hu;break;case"beforeblur":case"afterblur":I=Hu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=t1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=g1;break;case Y0:case X0:case J0:I=s1;break;case Z0:I=v1;break;case"scroll":I=Zw;break;case"wheel":I=x1;break;case"copy":case"cut":case"paste":I=o1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Up}var P=(e&4)!==0,D=!P&&t==="scroll",k=P?_!==null?_+"Capture":null:_;P=[];for(var w=h,T;w!==null;){T=w;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,k!==null&&(N=so(w,k),N!=null&&P.push(ho(w,N,T)))),D)break;w=w.return}0<P.length&&(_=new I(_,b,null,n,p),m.push({event:_,listeners:P}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",_&&n!==Lc&&(b=n.relatedTarget||n.fromElement)&&(zr(b)||b[Fn]))break e;if((I||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,I?(b=n.relatedTarget||n.toElement,I=h,b=b?zr(b):null,b!==null&&(D=as(b),b!==D||b.tag!==5&&b.tag!==6)&&(b=null)):(I=null,b=h),I!==b)){if(P=Fp,N="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=Up,N="onPointerLeave",k="onPointerEnter",w="pointer"),D=I==null?_:Ss(I),T=b==null?_:Ss(b),_=new P(N,w+"leave",I,n,p),_.target=D,_.relatedTarget=T,N=null,zr(p)===h&&(P=new P(k,w+"enter",b,n,p),P.target=T,P.relatedTarget=D,N=P),D=N,I&&b)t:{for(P=I,k=b,w=0,T=P;T;T=ms(T))w++;for(T=0,N=k;N;N=ms(N))T++;for(;0<w-T;)P=ms(P),w--;for(;0<T-w;)k=ms(k),T--;for(;w--;){if(P===k||k!==null&&P===k.alternate)break t;P=ms(P),k=ms(k)}P=null}else P=null;I!==null&&Jp(m,_,I,P,!1),b!==null&&D!==null&&Jp(m,D,b,P,!0)}}e:{if(_=h?Ss(h):window,I=_.nodeName&&_.nodeName.toLowerCase(),I==="select"||I==="input"&&_.type==="file")var L=b1;else if(Hp(_))if(W0)L=C1;else{L=N1;var M=A1}else(I=_.nodeName)&&I.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(L=P1);if(L&&(L=L(t,h))){H0(m,L,n,p);break e}M&&M(t,_,h),t==="focusout"&&(M=_._wrapperState)&&M.controlled&&_.type==="number"&&Rc(_,"number",_.value)}switch(M=h?Ss(h):window,t){case"focusin":(Hp(M)||M.contentEditable==="true")&&(Es=M,Hc=h,Gi=null);break;case"focusout":Gi=Hc=Es=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,Qp(m,n,p);break;case"selectionchange":if(D1)break;case"keydown":case"keyup":Qp(m,n,p)}var x;if(oh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ws?B0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(U0&&n.locale!=="ko"&&(ws||y!=="onCompositionStart"?y==="onCompositionEnd"&&ws&&(x=z0()):(or=p,rh="value"in or?or.value:or.textContent,ws=!0)),M=il(h,y),0<M.length&&(y=new zp(y,t,null,n,p),m.push({event:y,listeners:M}),x?y.data=x:(x=$0(n),x!==null&&(y.data=x)))),(x=E1?k1(t,n):S1(t,n))&&(h=il(h,"onBeforeInput"),0<h.length&&(p=new zp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=x))}ty(m,e)})}function ho(t,e,n){return{instance:t,listener:e,currentTarget:n}}function il(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=so(t,n),i!=null&&r.unshift(ho(t,i,s)),i=so(t,e),i!=null&&r.push(ho(t,i,s))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=so(n,i),c!=null&&o.unshift(ho(n,c,l))):s||(c=so(n,i),c!=null&&o.push(ho(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var O1=/\r\n?/g,F1=/\u0000|\uFFFD/g;function Zp(t){return(typeof t=="string"?t:""+t).replace(O1,`
`).replace(F1,"")}function _a(t,e,n){if(e=Zp(e),Zp(t)!==e&&n)throw Error(B(425))}function ol(){}var Gc=null,qc=null;function Kc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,z1=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,U1=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(t){return em.resolve(null).then(t).catch(B1)}:Qc;function B1(t){setTimeout(function(){throw t})}function Ju(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ao(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ao(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ii=Math.random().toString(36).slice(2),mn="__reactFiber$"+ii,fo="__reactProps$"+ii,Fn="__reactContainer$"+ii,Yc="__reactEvents$"+ii,$1="__reactListeners$"+ii,H1="__reactHandles$"+ii;function zr(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tm(t);t!==null;){if(n=t[mn])return n;t=tm(t)}return e}t=n,n=t.parentNode}return null}function Do(t){return t=t[mn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Gl(t){return t[fo]||null}var Xc=[],Ts=-1;function Ar(t){return{current:t}}function Ce(t){0>Ts||(t.current=Xc[Ts],Xc[Ts]=null,Ts--)}function Ae(t,e){Ts++,Xc[Ts]=t.current,t.current=e}var Er={},kt=Ar(Er),Dt=Ar(!1),Qr=Er;function Bs(t,e){var n=t.type.contextTypes;if(!n)return Er;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(t){return t=t.childContextTypes,t!=null}function al(){Ce(Dt),Ce(kt)}function nm(t,e,n){if(kt.current!==Er)throw Error(B(168));Ae(kt,e),Ae(Dt,n)}function ry(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,Aw(t)||"Unknown",s));return Me({},n,r)}function ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,Qr=kt.current,Ae(kt,t),Ae(Dt,Dt.current),!0}function rm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=ry(t,e,Qr),r.__reactInternalMemoizedMergedChildContext=t,Ce(Dt),Ce(kt),Ae(kt,t)):Ce(Dt),Ae(Dt,n)}var An=null,ql=!1,Zu=!1;function sy(t){An===null?An=[t]:An.push(t)}function W1(t){ql=!0,sy(t)}function Nr(){if(!Zu&&An!==null){Zu=!0;var t=0,e=Te;try{var n=An;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}An=null,ql=!1}catch(s){throw An!==null&&(An=An.slice(t+1)),N0(Zd,Nr),s}finally{Te=e,Zu=!1}}return null}var Is=[],bs=0,ul=null,cl=0,Gt=[],qt=0,Yr=null,Pn=1,Cn="";function Mr(t,e){Is[bs++]=cl,Is[bs++]=ul,ul=t,cl=e}function iy(t,e,n){Gt[qt++]=Pn,Gt[qt++]=Cn,Gt[qt++]=Yr,Yr=t;var r=Pn;t=Cn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-un(e)+s|n<<s|r,Cn=i+t}else Pn=1<<i|n<<s|r,Cn=t}function lh(t){t.return!==null&&(Mr(t,1),iy(t,1,0))}function uh(t){for(;t===ul;)ul=Is[--bs],Is[bs]=null,cl=Is[--bs],Is[bs]=null;for(;t===Yr;)Yr=Gt[--qt],Gt[qt]=null,Cn=Gt[--qt],Gt[qt]=null,Pn=Gt[--qt],Gt[qt]=null}var zt=null,Ft=null,Re=!1,an=null;function oy(t,e){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:Pn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function Jc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zc(t){if(Re){var e=Ft;if(e){var n=e;if(!sm(t,e)){if(Jc(t))throw Error(B(418));e=hr(n.nextSibling);var r=zt;e&&sm(t,e)?oy(r,n):(t.flags=t.flags&-4097|2,Re=!1,zt=t)}}else{if(Jc(t))throw Error(B(418));t.flags=t.flags&-4097|2,Re=!1,zt=t}}}function im(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function xa(t){if(t!==zt)return!1;if(!Re)return im(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kc(t.type,t.memoizedProps)),e&&(e=Ft)){if(Jc(t))throw ay(),Error(B(418));for(;e;)oy(t,e),e=hr(e.nextSibling)}if(im(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?hr(t.stateNode.nextSibling):null;return!0}function ay(){for(var t=Ft;t;)t=hr(t.nextSibling)}function $s(){Ft=zt=null,Re=!1}function ch(t){an===null?an=[t]:an.push(t)}var G1=Gn.ReactCurrentBatchConfig;function Pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function wa(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function om(t){var e=t._init;return e(t._payload)}function ly(t){function e(k,w){if(t){var T=k.deletions;T===null?(k.deletions=[w],k.flags|=16):T.push(w)}}function n(k,w){if(!t)return null;for(;w!==null;)e(k,w),w=w.sibling;return null}function r(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function s(k,w){return k=gr(k,w),k.index=0,k.sibling=null,k}function i(k,w,T){return k.index=T,t?(T=k.alternate,T!==null?(T=T.index,T<w?(k.flags|=2,w):T):(k.flags|=2,w)):(k.flags|=1048576,w)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function l(k,w,T,N){return w===null||w.tag!==6?(w=oc(T,k.mode,N),w.return=k,w):(w=s(w,T),w.return=k,w)}function c(k,w,T,N){var L=T.type;return L===xs?p(k,w,T.props.children,N,T.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Zn&&om(L)===w.type)?(N=s(w,T.props),N.ref=Pi(k,w,T),N.return=k,N):(N=Ba(T.type,T.key,T.props,null,k.mode,N),N.ref=Pi(k,w,T),N.return=k,N)}function h(k,w,T,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=ac(T,k.mode,N),w.return=k,w):(w=s(w,T.children||[]),w.return=k,w)}function p(k,w,T,N,L){return w===null||w.tag!==7?(w=Gr(T,k.mode,N,L),w.return=k,w):(w=s(w,T),w.return=k,w)}function m(k,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=oc(""+w,k.mode,T),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ca:return T=Ba(w.type,w.key,w.props,null,k.mode,T),T.ref=Pi(k,null,w),T.return=k,T;case _s:return w=ac(w,k.mode,T),w.return=k,w;case Zn:var N=w._init;return m(k,N(w._payload),T)}if(Vi(w)||Ti(w))return w=Gr(w,k.mode,T,null),w.return=k,w;wa(k,w)}return null}function _(k,w,T,N){var L=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:l(k,w,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ca:return T.key===L?c(k,w,T,N):null;case _s:return T.key===L?h(k,w,T,N):null;case Zn:return L=T._init,_(k,w,L(T._payload),N)}if(Vi(T)||Ti(T))return L!==null?null:p(k,w,T,N,null);wa(k,T)}return null}function I(k,w,T,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return k=k.get(T)||null,l(w,k,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ca:return k=k.get(N.key===null?T:N.key)||null,c(w,k,N,L);case _s:return k=k.get(N.key===null?T:N.key)||null,h(w,k,N,L);case Zn:var M=N._init;return I(k,w,T,M(N._payload),L)}if(Vi(N)||Ti(N))return k=k.get(T)||null,p(w,k,N,L,null);wa(w,N)}return null}function b(k,w,T,N){for(var L=null,M=null,x=w,y=w=0,E=null;x!==null&&y<T.length;y++){x.index>y?(E=x,x=null):E=x.sibling;var S=_(k,x,T[y],N);if(S===null){x===null&&(x=E);break}t&&x&&S.alternate===null&&e(k,x),w=i(S,w,y),M===null?L=S:M.sibling=S,M=S,x=E}if(y===T.length)return n(k,x),Re&&Mr(k,y),L;if(x===null){for(;y<T.length;y++)x=m(k,T[y],N),x!==null&&(w=i(x,w,y),M===null?L=x:M.sibling=x,M=x);return Re&&Mr(k,y),L}for(x=r(k,x);y<T.length;y++)E=I(x,k,y,T[y],N),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),M===null?L=E:M.sibling=E,M=E);return t&&x.forEach(function(A){return e(k,A)}),Re&&Mr(k,y),L}function P(k,w,T,N){var L=Ti(T);if(typeof L!="function")throw Error(B(150));if(T=L.call(T),T==null)throw Error(B(151));for(var M=L=null,x=w,y=w=0,E=null,S=T.next();x!==null&&!S.done;y++,S=T.next()){x.index>y?(E=x,x=null):E=x.sibling;var A=_(k,x,S.value,N);if(A===null){x===null&&(x=E);break}t&&x&&A.alternate===null&&e(k,x),w=i(A,w,y),M===null?L=A:M.sibling=A,M=A,x=E}if(S.done)return n(k,x),Re&&Mr(k,y),L;if(x===null){for(;!S.done;y++,S=T.next())S=m(k,S.value,N),S!==null&&(w=i(S,w,y),M===null?L=S:M.sibling=S,M=S);return Re&&Mr(k,y),L}for(x=r(k,x);!S.done;y++,S=T.next())S=I(x,k,y,S.value,N),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?y:S.key),w=i(S,w,y),M===null?L=S:M.sibling=S,M=S);return t&&x.forEach(function(C){return e(k,C)}),Re&&Mr(k,y),L}function D(k,w,T,N){if(typeof T=="object"&&T!==null&&T.type===xs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ca:e:{for(var L=T.key,M=w;M!==null;){if(M.key===L){if(L=T.type,L===xs){if(M.tag===7){n(k,M.sibling),w=s(M,T.props.children),w.return=k,k=w;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Zn&&om(L)===M.type){n(k,M.sibling),w=s(M,T.props),w.ref=Pi(k,M,T),w.return=k,k=w;break e}n(k,M);break}else e(k,M);M=M.sibling}T.type===xs?(w=Gr(T.props.children,k.mode,N,T.key),w.return=k,k=w):(N=Ba(T.type,T.key,T.props,null,k.mode,N),N.ref=Pi(k,w,T),N.return=k,k=N)}return o(k);case _s:e:{for(M=T.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(k,w.sibling),w=s(w,T.children||[]),w.return=k,k=w;break e}else{n(k,w);break}else e(k,w);w=w.sibling}w=ac(T,k.mode,N),w.return=k,k=w}return o(k);case Zn:return M=T._init,D(k,w,M(T._payload),N)}if(Vi(T))return b(k,w,T,N);if(Ti(T))return P(k,w,T,N);wa(k,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(k,w.sibling),w=s(w,T),w.return=k,k=w):(n(k,w),w=oc(T,k.mode,N),w.return=k,k=w),o(k)):n(k,w)}return D}var Hs=ly(!0),uy=ly(!1),dl=Ar(null),hl=null,As=null,dh=null;function hh(){dh=As=hl=null}function fh(t){var e=dl.current;Ce(dl),t._currentValue=e}function ed(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vs(t,e){hl=t,dh=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(dh!==t)if(t={context:t,memoizedValue:e,next:null},As===null){if(hl===null)throw Error(B(308));As=t,hl.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return e}var Ur=null;function ph(t){Ur===null?Ur=[t]:Ur.push(t)}function cy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ph(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var er=!1;function mh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,ph(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function Ma(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,eh(t,n)}}function am(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fl(t,e,n,r){var s=t.updateQueue;er=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var _=l.lane,I=l.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,P=l;switch(_=e,I=n,P.tag){case 1:if(b=P.payload,typeof b=="function"){m=b.call(I,m,_);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=P.payload,_=typeof b=="function"?b.call(I,m,_):b,_==null)break e;m=Me({},m,_);break e;case 2:er=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else I={eventTime:I,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=I,c=m):p=p.next=I,o|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jr|=o,t.lanes=o,t.memoizedState=m}}function lm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Vo={},yn=Ar(Vo),po=Ar(Vo),mo=Ar(Vo);function Br(t){if(t===Vo)throw Error(B(174));return t}function gh(t,e){switch(Ae(mo,e),Ae(po,t),Ae(yn,Vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dc(e,t)}Ce(yn),Ae(yn,e)}function Ws(){Ce(yn),Ce(po),Ce(mo)}function hy(t){Br(mo.current);var e=Br(yn.current),n=Dc(e,t.type);e!==n&&(Ae(po,t),Ae(yn,n))}function yh(t){po.current===t&&(Ce(yn),Ce(po))}var De=Ar(0);function pl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ec=[];function vh(){for(var t=0;t<ec.length;t++)ec[t]._workInProgressVersionPrimary=null;ec.length=0}var La=Gn.ReactCurrentDispatcher,tc=Gn.ReactCurrentBatchConfig,Xr=0,Ve=null,Xe=null,rt=null,ml=!1,qi=!1,go=0,q1=0;function yt(){throw Error(B(321))}function _h(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function xh(t,e,n,r,s,i){if(Xr=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,La.current=t===null||t.memoizedState===null?X1:J1,t=n(r,s),qi){i=0;do{if(qi=!1,go=0,25<=i)throw Error(B(301));i+=1,rt=Xe=null,e.updateQueue=null,La.current=Z1,t=n(r,s)}while(qi)}if(La.current=gl,e=Xe!==null&&Xe.next!==null,Xr=0,rt=Xe=Ve=null,ml=!1,e)throw Error(B(300));return t}function wh(){var t=go!==0;return go=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ve.memoizedState=rt=t:rt=rt.next=t,rt}function Zt(){if(Xe===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=rt===null?Ve.memoizedState:rt.next;if(e!==null)rt=e,Xe=t;else{if(t===null)throw Error(B(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},rt===null?Ve.memoizedState=rt=t:rt=rt.next=t}return rt}function yo(t,e){return typeof e=="function"?e(t):e}function nc(t){var e=Zt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((Xr&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ve.lanes|=p,Jr|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,hn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,Jr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rc(t){var e=Zt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fy(){}function py(t,e){var n=Ve,r=Zt(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,Eh(yy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,vo(9,gy.bind(null,n,r,s,e),void 0,null),st===null)throw Error(B(349));Xr&30||my(n,e,s)}return s}function my(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gy(t,e,n,r){e.value=n,e.getSnapshot=r,vy(e)&&_y(t)}function yy(t,e,n){return n(function(){vy(e)&&_y(t)})}function vy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function _y(t){var e=zn(t,1);e!==null&&cn(e,t,1,-1)}function um(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:t},e.queue=t,t=t.dispatch=Y1.bind(null,Ve,t),[e.memoizedState,t]}function vo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xy(){return Zt().memoizedState}function Oa(t,e,n,r){var s=pn();Ve.flags|=t,s.memoizedState=vo(1|e,n,void 0,r===void 0?null:r)}function Kl(t,e,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&_h(r,o.deps)){s.memoizedState=vo(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=vo(1|e,n,i,r)}function cm(t,e){return Oa(8390656,8,t,e)}function Eh(t,e){return Kl(2048,8,t,e)}function wy(t,e){return Kl(4,2,t,e)}function Ey(t,e){return Kl(4,4,t,e)}function ky(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Sy(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4,4,ky.bind(null,e,t),n)}function kh(){}function Ty(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_h(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Iy(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_h(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function by(t,e,n){return Xr&21?(hn(n,e)||(n=R0(),Ve.lanes|=n,Jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function K1(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=tc.transition;tc.transition={};try{t(!1),e()}finally{Te=n,tc.transition=r}}function Ay(){return Zt().memoizedState}function Q1(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ny(t))Py(e,n);else if(n=cy(t,e,n,r),n!==null){var s=Nt();cn(n,t,r,s),Cy(n,e,r)}}function Y1(t,e,n){var r=mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ny(t))Py(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var c=e.interleaved;c===null?(s.next=s,ph(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=cy(t,e,s,r),n!==null&&(s=Nt(),cn(n,t,r,s),Cy(n,e,r))}}function Ny(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function Py(t,e){qi=ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,eh(t,n)}}var gl={readContext:Jt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},X1={readContext:Jt,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:cm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Oa(4194308,4,ky.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oa(4,2,t,e)},useMemo:function(t,e){var n=pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Q1.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:um,useDebugValue:kh,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=um(!1),e=t[0];return t=K1.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=pn();if(Re){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),st===null)throw Error(B(349));Xr&30||my(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cm(yy.bind(null,r,i,t),[t]),r.flags|=2048,vo(9,gy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pn(),e=st.identifierPrefix;if(Re){var n=Cn,r=Pn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=q1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J1={readContext:Jt,useCallback:Ty,useContext:Jt,useEffect:Eh,useImperativeHandle:Sy,useInsertionEffect:wy,useLayoutEffect:Ey,useMemo:Iy,useReducer:nc,useRef:xy,useState:function(){return nc(yo)},useDebugValue:kh,useDeferredValue:function(t){var e=Zt();return by(e,Xe.memoizedState,t)},useTransition:function(){var t=nc(yo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:fy,useSyncExternalStore:py,useId:Ay,unstable_isNewReconciler:!1},Z1={readContext:Jt,useCallback:Ty,useContext:Jt,useEffect:Eh,useImperativeHandle:Sy,useInsertionEffect:wy,useLayoutEffect:Ey,useMemo:Iy,useReducer:rc,useRef:xy,useState:function(){return rc(yo)},useDebugValue:kh,useDeferredValue:function(t){var e=Zt();return Xe===null?e.memoizedState=t:by(e,Xe.memoizedState,t)},useTransition:function(){var t=rc(yo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:fy,useSyncExternalStore:py,useId:Ay,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function td(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ql={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=mr(t),i=Mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(cn(e,t,s,r),Ma(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=mr(t),i=Mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fr(t,i,s),e!==null&&(cn(e,t,s,r),Ma(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=mr(t),s=Mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=fr(t,s,r),e!==null&&(cn(e,t,r,n),Ma(e,t,r))}};function dm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!uo(n,r)||!uo(s,i):!0}function Ry(t,e,n){var r=!1,s=Er,i=e.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(s=Vt(e)?Qr:kt.current,r=e.contextTypes,i=(r=r!=null)?Bs(t,s):Er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ql,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ql.enqueueReplaceState(e,e.state,null)}function nd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},mh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Jt(i):(i=Vt(e)?Qr:kt.current,s.context=Bs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(td(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ql.enqueueReplaceState(s,s.state,null),fl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Gs(t,e){try{var n="",r=e;do n+=bw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eE=typeof WeakMap=="function"?WeakMap:Map;function jy(t,e,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vl||(vl=!0,fd=r),rd(t,e)},n}function Dy(t,e,n){n=Mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){rd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rd(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pE.bind(null,t,e,n),e.then(t,t))}function pm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var tE=Gn.ReactCurrentOwner,jt=!1;function At(t,e,n,r){e.child=t===null?uy(e,null,n,r):Hs(e,t.child,n,r)}function gm(t,e,n,r,s){n=n.render;var i=e.ref;return Vs(e,s),r=xh(t,e,n,r,i,s),n=wh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Un(t,e,s)):(Re&&n&&lh(e),e.flags|=1,At(t,e,r,s),e.child)}function ym(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ch(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Vy(t,e,i,r,s)):(t=Ba(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:uo,n(o,r)&&t.ref===e.ref)return Un(t,e,s)}return e.flags|=1,t=gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Vy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(uo(i,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Un(t,e,s)}return sd(t,e,n,r,s)}function My(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ps,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ps,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Ps,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Ps,Ot),Ot|=r;return At(t,e,s,n),e.child}function Ly(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sd(t,e,n,r,s){var i=Vt(n)?Qr:kt.current;return i=Bs(e,i),Vs(e,s),n=xh(t,e,n,r,i,s),r=wh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Un(t,e,s)):(Re&&r&&lh(e),e.flags|=1,At(t,e,n,s),e.child)}function vm(t,e,n,r,s){if(Vt(n)){var i=!0;ll(e)}else i=!1;if(Vs(e,s),e.stateNode===null)Fa(t,e),Ry(e,n,r),nd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jt(h):(h=Vt(n)?Qr:kt.current,h=Bs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&hm(e,o,r,h),er=!1;var _=e.memoizedState;o.state=_,fl(e,r,o,s),c=e.memoizedState,l!==r||_!==c||Dt.current||er?(typeof p=="function"&&(td(e,n,p,r),c=e.memoizedState),(l=er||dm(e,n,l,r,_,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:sn(e.type,l),o.props=h,m=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jt(c):(c=Vt(n)?Qr:kt.current,c=Bs(e,c));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||_!==c)&&hm(e,o,r,c),er=!1,_=e.memoizedState,o.state=_,fl(e,r,o,s);var b=e.memoizedState;l!==m||_!==b||Dt.current||er?(typeof I=="function"&&(td(e,n,I,r),b=e.memoizedState),(h=er||dm(e,n,h,r,_,b,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return id(t,e,n,r,i,s)}function id(t,e,n,r,s,i){Ly(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&rm(e,n,!1),Un(t,e,i);r=e.stateNode,tE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hs(e,t.child,null,i),e.child=Hs(e,null,l,i)):At(t,e,l,i),e.memoizedState=r.state,s&&rm(e,n,!0),e.child}function Oy(t){var e=t.stateNode;e.pendingContext?nm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nm(t,e.context,!1),gh(t,e.containerInfo)}function _m(t,e,n,r,s){return $s(),ch(s),e.flags|=256,At(t,e,n,r),e.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fy(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(De,s&1),t===null)return Zc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Jl(o,r,0,null),t=Gr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ad(n),e.memoizedState=od,t):Sh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return nE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=gr(l,i):(i=Gr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ad(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=od,r}return i=t.child,t=i.sibling,r=gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sh(t,e){return e=Jl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ea(t,e,n,r){return r!==null&&ch(r),Hs(e,t.child,null,n),t=Sh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sc(Error(B(422))),Ea(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Jl({mode:"visible",children:r.children},s,0,null),i=Gr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Hs(e,t.child,null,o),e.child.memoizedState=ad(o),e.memoizedState=od,i);if(!(e.mode&1))return Ea(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=sc(i,r,void 0),Ea(t,e,o,r)}if(l=(o&t.childLanes)!==0,jt||l){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),cn(r,t,s,-1))}return Ph(),r=sc(Error(B(421))),Ea(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=hr(s.nextSibling),zt=e,Re=!0,an=null,t!==null&&(Gt[qt++]=Pn,Gt[qt++]=Cn,Gt[qt++]=Yr,Pn=t.id,Cn=t.overflow,Yr=e),e=Sh(e,r.children),e.flags|=4096,e)}function xm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ed(t.return,e,n)}function ic(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(At(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xm(t,n,e);else if(t.tag===19)xm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&pl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ic(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&pl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ic(e,!0,n,null,i);break;case"together":ic(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rE(t,e,n){switch(e.tag){case 3:Oy(e),$s();break;case 5:hy(e);break;case 1:Vt(e.type)&&ll(e);break;case 4:gh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(dl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?Fy(t,e,n):(Ae(De,De.current&1),t=Un(t,e,n),t!==null?t.sibling:null);Ae(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,My(t,e,n)}return Un(t,e,n)}var Uy,ld,By,$y;Uy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ld=function(){};By=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Br(yn.current);var i=null;switch(n){case"input":s=Pc(t,s),r=Pc(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=jc(t,s),r=jc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ol)}Vc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(no.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(no.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Pe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};$y=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ci(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sE(t,e,n){var r=e.pendingProps;switch(uh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Vt(e.type)&&al(),vt(e),null;case 3:return r=e.stateNode,Ws(),Ce(Dt),Ce(kt),vh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(gd(an),an=null))),ld(t,e),vt(e),null;case 5:yh(e);var s=Br(mo.current);if(n=e.type,t!==null&&e.stateNode!=null)By(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return vt(e),null}if(t=Br(yn.current),xa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mn]=e,r[fo]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Li.length;s++)Pe(Li[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Np(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Cp(r,i),Pe("invalid",r)}Vc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&_a(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&_a(r.textContent,l,t),s=["children",""+l]):no.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":da(r),Pp(r,i,!0);break;case"textarea":da(r),Rp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ol)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mn]=e,t[fo]=r,Uy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mc(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Li.length;s++)Pe(Li[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":Np(t,r),s=Pc(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Cp(t,r),s=jc(t,r),Pe("invalid",t);break;default:s=r}Vc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?x0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&v0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ro(t,c):typeof c=="number"&&ro(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(no.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Pe("scroll",t):c!=null&&Kd(t,i,c,o))}switch(n){case"input":da(t),Pp(t,r,!1);break;case"textarea":da(t),Rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Cs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)$y(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Br(mo.current),Br(yn.current),xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:_a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_a(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return vt(e),null;case 13:if(Ce(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Ft!==null&&e.mode&1&&!(e.flags&128))ay(),$s(),e.flags|=98560,i=!1;else if(i=xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[mn]=e}else $s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),i=!1}else an!==null&&(gd(an),an=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ze===0&&(Ze=3):Ph())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Ws(),ld(t,e),t===null&&co(e.stateNode.containerInfo),vt(e),null;case 10:return fh(e.type._context),vt(e),null;case 17:return Vt(e.type)&&al(),vt(e),null;case 19:if(Ce(De),i=e.memoizedState,i===null)return vt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ci(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pl(t),o!==null){for(e.flags|=128,Ci(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&We()>qs&&(e.flags|=128,r=!0,Ci(i,!1),e.lanes=4194304)}else{if(!r)if(t=pl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return vt(e),null}else 2*We()-i.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,Ci(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=We(),e.sibling=null,n=De.current,Ae(De,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Nh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function iE(t,e){switch(uh(e),e.tag){case 1:return Vt(e.type)&&al(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ws(),Ce(Dt),Ce(kt),vh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yh(e),null;case 13:if(Ce(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));$s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(De),null;case 4:return Ws(),null;case 10:return fh(e.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var ka=!1,wt=!1,oE=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ns(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function ud(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var wm=!1;function aE(t,e){if(Gc=rl,t=K0(),ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,_=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)_=m,m=I;for(;;){if(m===t)break t;if(_===n&&++h===s&&(l=o),_===i&&++p===r&&(c=o),(I=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=I}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qc={focusedElem:t,selectionRange:n},rl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var P=b.memoizedProps,D=b.memoizedState,k=e.stateNode,w=k.getSnapshotBeforeUpdate(e.elementType===e.type?P:sn(e.type,P),D);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(N){Ue(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return b=wm,wm=!1,b}function Ki(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ud(e,n,i)}s=s.next}while(s!==r)}}function Yl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hy(t){var e=t.alternate;e!==null&&(t.alternate=null,Hy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[fo],delete e[Yc],delete e[$1],delete e[H1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wy(t){return t.tag===5||t.tag===3||t.tag===4}function Em(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ol));else if(r!==4&&(t=t.child,t!==null))for(dd(t,e,n),t=t.sibling;t!==null;)dd(t,e,n),t=t.sibling}function hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hd(t,e,n),t=t.sibling;t!==null;)hd(t,e,n),t=t.sibling}var at=null,on=!1;function Xn(t,e,n){for(n=n.child;n!==null;)Gy(t,e,n),n=n.sibling}function Gy(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Bl,n)}catch{}switch(n.tag){case 5:wt||Ns(n,e);case 6:var r=at,s=on;at=null,Xn(t,e,n),at=r,on=s,at!==null&&(on?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(on?(t=at,n=n.stateNode,t.nodeType===8?Ju(t.parentNode,n):t.nodeType===1&&Ju(t,n),ao(t)):Ju(at,n.stateNode));break;case 4:r=at,s=on,at=n.stateNode.containerInfo,on=!0,Xn(t,e,n),at=r,on=s;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ud(n,e,o),s=s.next}while(s!==r)}Xn(t,e,n);break;case 1:if(!wt&&(Ns(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,e,l)}Xn(t,e,n);break;case 21:Xn(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Xn(t,e,n),wt=r):Xn(t,e,n);break;default:Xn(t,e,n)}}function km(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oE),e.forEach(function(r){var s=gE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,on=!1;break e;case 3:at=l.stateNode.containerInfo,on=!0;break e;case 4:at=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(at===null)throw Error(B(160));Gy(i,o,s),at=null,on=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Ue(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qy(e,t),e=e.sibling}function qy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),fn(t),r&4){try{Ki(3,t,t.return),Yl(3,t)}catch(P){Ue(t,t.return,P)}try{Ki(5,t,t.return)}catch(P){Ue(t,t.return,P)}}break;case 1:rn(e,t),fn(t),r&512&&n!==null&&Ns(n,n.return);break;case 5:if(rn(e,t),fn(t),r&512&&n!==null&&Ns(n,n.return),t.flags&32){var s=t.stateNode;try{ro(s,"")}catch(P){Ue(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&m0(s,i),Mc(l,o);var h=Mc(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?x0(s,m):p==="dangerouslySetInnerHTML"?v0(s,m):p==="children"?ro(s,m):Kd(s,p,m,h)}switch(l){case"input":Cc(s,i);break;case"textarea":g0(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Cs(s,!!i.multiple,I,!1):_!==!!i.multiple&&(i.defaultValue!=null?Cs(s,!!i.multiple,i.defaultValue,!0):Cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[fo]=i}catch(P){Ue(t,t.return,P)}}break;case 6:if(rn(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Ue(t,t.return,P)}}break;case 3:if(rn(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ao(e.containerInfo)}catch(P){Ue(t,t.return,P)}break;case 4:rn(e,t),fn(t);break;case 13:rn(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bh=We())),r&4&&km(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(h=wt)||p,rn(e,t),wt=h):rn(e,t),fn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(m=Y=p;Y!==null;){switch(_=Y,I=_.child,_.tag){case 0:case 11:case 14:case 15:Ki(4,_,_.return);break;case 1:Ns(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(P){Ue(r,n,P)}}break;case 5:Ns(_,_.return);break;case 22:if(_.memoizedState!==null){Tm(m);continue}}I!==null?(I.return=_,Y=I):Tm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=_0("display",o))}catch(P){Ue(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(P){Ue(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rn(e,t),fn(t),r&4&&km(t);break;case 21:break;default:rn(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wy(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ro(s,""),r.flags&=-33);var i=Em(t);hd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Em(t);dd(t,l,o);break;default:throw Error(B(161))}}catch(c){Ue(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lE(t,e,n){Y=t,Ky(t)}function Ky(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ka;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||wt;l=ka;var h=wt;if(ka=o,(wt=c)&&!h)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?Im(s):c!==null?(c.return=o,Y=c):Im(s);for(;i!==null;)Y=i,Ky(i),i=i.sibling;Y=s,ka=l,wt=h}Sm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Sm(t)}}function Sm(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||Yl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ao(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}wt||e.flags&512&&cd(e)}catch(_){Ue(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Tm(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Im(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yl(4,e)}catch(c){Ue(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ue(e,s,c)}}var i=e.return;try{cd(e)}catch(c){Ue(e,i,c)}break;case 5:var o=e.return;try{cd(e)}catch(c){Ue(e,o,c)}}}catch(c){Ue(e,e.return,c)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var uE=Math.ceil,yl=Gn.ReactCurrentDispatcher,Th=Gn.ReactCurrentOwner,Yt=Gn.ReactCurrentBatchConfig,we=0,st=null,Qe=null,ct=0,Ot=0,Ps=Ar(0),Ze=0,_o=null,Jr=0,Xl=0,Ih=0,Qi=null,Rt=null,bh=0,qs=1/0,bn=null,vl=!1,fd=null,pr=null,Sa=!1,ar=null,_l=0,Yi=0,pd=null,za=-1,Ua=0;function Nt(){return we&6?We():za!==-1?za:za=We()}function mr(t){return t.mode&1?we&2&&ct!==0?ct&-ct:G1.transition!==null?(Ua===0&&(Ua=R0()),Ua):(t=Te,t!==0||(t=window.event,t=t===void 0?16:F0(t.type)),t):1}function cn(t,e,n,r){if(50<Yi)throw Yi=0,pd=null,Error(B(185));Ro(t,n,r),(!(we&2)||t!==st)&&(t===st&&(!(we&2)&&(Xl|=n),Ze===4&&nr(t,ct)),Mt(t,r),n===1&&we===0&&!(e.mode&1)&&(qs=We()+500,ql&&Nr()))}function Mt(t,e){var n=t.callbackNode;Gw(t,e);var r=nl(t,t===st?ct:0);if(r===0)n!==null&&Vp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vp(n),e===1)t.tag===0?W1(bm.bind(null,t)):sy(bm.bind(null,t)),U1(function(){!(we&6)&&Nr()}),n=null;else{switch(j0(r)){case 1:n=Zd;break;case 4:n=P0;break;case 16:n=tl;break;case 536870912:n=C0;break;default:n=tl}n=nv(n,Qy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qy(t,e){if(za=-1,Ua=0,we&6)throw Error(B(327));var n=t.callbackNode;if(Ms()&&t.callbackNode!==n)return null;var r=nl(t,t===st?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xl(t,r);else{e=r;var s=we;we|=2;var i=Xy();(st!==t||ct!==e)&&(bn=null,qs=We()+500,Wr(t,e));do try{hE();break}catch(l){Yy(t,l)}while(!0);hh(),yl.current=i,we=s,Qe!==null?e=0:(st=null,ct=0,e=Ze)}if(e!==0){if(e===2&&(s=Uc(t),s!==0&&(r=s,e=md(t,s))),e===1)throw n=_o,Wr(t,0),nr(t,r),Mt(t,We()),n;if(e===6)nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!cE(s)&&(e=xl(t,r),e===2&&(i=Uc(t),i!==0&&(r=i,e=md(t,i))),e===1))throw n=_o,Wr(t,0),nr(t,r),Mt(t,We()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Lr(t,Rt,bn);break;case 3:if(nr(t,r),(r&130023424)===r&&(e=bh+500-We(),10<e)){if(nl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qc(Lr.bind(null,t,Rt,bn),e);break}Lr(t,Rt,bn);break;case 4:if(nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uE(r/1960))-r,10<r){t.timeoutHandle=Qc(Lr.bind(null,t,Rt,bn),r);break}Lr(t,Rt,bn);break;case 5:Lr(t,Rt,bn);break;default:throw Error(B(329))}}}return Mt(t,We()),t.callbackNode===n?Qy.bind(null,t):null}function md(t,e){var n=Qi;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=xl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&gd(e)),t}function gd(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function cE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nr(t,e){for(e&=~Ih,e&=~Xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function bm(t){if(we&6)throw Error(B(327));Ms();var e=nl(t,0);if(!(e&1))return Mt(t,We()),null;var n=xl(t,e);if(t.tag!==0&&n===2){var r=Uc(t);r!==0&&(e=r,n=md(t,r))}if(n===1)throw n=_o,Wr(t,0),nr(t,e),Mt(t,We()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lr(t,Rt,bn),Mt(t,We()),null}function Ah(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(qs=We()+500,ql&&Nr())}}function Zr(t){ar!==null&&ar.tag===0&&!(we&6)&&Ms();var e=we;we|=1;var n=Yt.transition,r=Te;try{if(Yt.transition=null,Te=1,t)return t()}finally{Te=r,Yt.transition=n,we=e,!(we&6)&&Nr()}}function Nh(){Ot=Ps.current,Ce(Ps)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,z1(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(uh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:Ws(),Ce(Dt),Ce(kt),vh();break;case 5:yh(r);break;case 4:Ws();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:fh(r.type._context);break;case 22:case 23:Nh()}n=n.return}if(st=t,Qe=t=gr(t.current,null),ct=Ot=e,Ze=0,_o=null,Ih=Xl=Jr=0,Rt=Qi=null,Ur!==null){for(e=0;e<Ur.length;e++)if(n=Ur[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ur=null}return t}function Yy(t,e){do{var n=Qe;try{if(hh(),La.current=gl,ml){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ml=!1}if(Xr=0,rt=Xe=Ve=null,qi=!1,go=0,Th.current=null,n===null||n.return===null){Ze=1,_o=e,Qe=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=pm(o);if(I!==null){I.flags&=-257,mm(I,o,l,i,e),I.mode&1&&fm(i,h,e),e=I,c=h;var b=e.updateQueue;if(b===null){var P=new Set;P.add(c),e.updateQueue=P}else b.add(c);break e}else{if(!(e&1)){fm(i,h,e),Ph();break e}c=Error(B(426))}}else if(Re&&l.mode&1){var D=pm(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),mm(D,o,l,i,e),ch(Gs(c,l));break e}}i=c=Gs(c,l),Ze!==4&&(Ze=2),Qi===null?Qi=[i]:Qi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var k=jy(i,c,e);am(i,k);break e;case 1:l=c;var w=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(pr===null||!pr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Dy(i,l,e);am(i,N);break e}}i=i.return}while(i!==null)}Zy(n)}catch(L){e=L,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Xy(){var t=yl.current;return yl.current=gl,t===null?gl:t}function Ph(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(Jr&268435455)&&!(Xl&268435455)||nr(st,ct)}function xl(t,e){var n=we;we|=2;var r=Xy();(st!==t||ct!==e)&&(bn=null,Wr(t,e));do try{dE();break}catch(s){Yy(t,s)}while(!0);if(hh(),we=n,yl.current=r,Qe!==null)throw Error(B(261));return st=null,ct=0,Ze}function dE(){for(;Qe!==null;)Jy(Qe)}function hE(){for(;Qe!==null&&!Lw();)Jy(Qe)}function Jy(t){var e=tv(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?Zy(t):Qe=e,Th.current=null}function Zy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iE(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Qe=null;return}}else if(n=sE(n,e,Ot),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);Ze===0&&(Ze=5)}function Lr(t,e,n){var r=Te,s=Yt.transition;try{Yt.transition=null,Te=1,fE(t,e,n,r)}finally{Yt.transition=s,Te=r}return null}function fE(t,e,n,r){do Ms();while(ar!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qw(t,i),t===st&&(Qe=st=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sa||(Sa=!0,nv(tl,function(){return Ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=Te;Te=1;var l=we;we|=4,Th.current=null,aE(t,n),qy(n,t),j1(qc),rl=!!Gc,qc=Gc=null,t.current=n,lE(n),Ow(),we=l,Te=o,Yt.transition=i}else t.current=n;if(Sa&&(Sa=!1,ar=t,_l=s),i=t.pendingLanes,i===0&&(pr=null),Uw(n.stateNode),Mt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vl)throw vl=!1,t=fd,fd=null,t;return _l&1&&t.tag!==0&&Ms(),i=t.pendingLanes,i&1?t===pd?Yi++:(Yi=0,pd=t):Yi=0,Nr(),null}function Ms(){if(ar!==null){var t=j0(_l),e=Yt.transition,n=Te;try{if(Yt.transition=null,Te=16>t?16:t,ar===null)var r=!1;else{if(t=ar,ar=null,_l=0,we&6)throw Error(B(331));var s=we;for(we|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(Y=h;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:Ki(8,p,i)}var m=p.child;if(m!==null)m.return=p,Y=m;else for(;Y!==null;){p=Y;var _=p.sibling,I=p.return;if(Hy(p),p===h){Y=null;break}if(_!==null){_.return=I,Y=_;break}Y=I}}}var b=i.alternate;if(b!==null){var P=b.child;if(P!==null){b.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ki(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,Y=k;break e}Y=i.return}}var w=t.current;for(Y=w;Y!==null;){o=Y;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Y=T;else e:for(o=w;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yl(9,l)}}catch(L){Ue(l,l.return,L)}if(l===o){Y=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Y=N;break e}Y=l.return}}if(we=s,Nr(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Bl,t)}catch{}r=!0}return r}finally{Te=n,Yt.transition=e}}return!1}function Am(t,e,n){e=Gs(n,e),e=jy(t,e,1),t=fr(t,e,1),e=Nt(),t!==null&&(Ro(t,1,e),Mt(t,e))}function Ue(t,e,n){if(t.tag===3)Am(t,t,n);else for(;e!==null;){if(e.tag===3){Am(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=Gs(n,t),t=Dy(e,t,1),e=fr(e,t,1),t=Nt(),e!==null&&(Ro(e,1,t),Mt(e,t));break}}e=e.return}}function pE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ct&n)===n&&(Ze===4||Ze===3&&(ct&130023424)===ct&&500>We()-bh?Wr(t,0):Ih|=n),Mt(t,e)}function ev(t,e){e===0&&(t.mode&1?(e=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):e=1);var n=Nt();t=zn(t,e),t!==null&&(Ro(t,e,n),Mt(t,n))}function mE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ev(t,n)}function gE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),ev(t,n)}var tv;tv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,rE(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Re&&e.flags&1048576&&iy(e,cl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fa(t,e),t=e.pendingProps;var s=Bs(e,kt.current);Vs(e,n),s=xh(null,e,r,t,s,n);var i=wh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(i=!0,ll(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mh(e),s.updater=Ql,e.stateNode=s,s._reactInternals=e,nd(e,r,t,n),e=id(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&lh(e),At(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vE(r),t=sn(r,t),s){case 0:e=sd(null,e,r,t,n);break e;case 1:e=vm(null,e,r,t,n);break e;case 11:e=gm(null,e,r,t,n);break e;case 14:e=ym(null,e,r,sn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),sd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),vm(t,e,r,s,n);case 3:e:{if(Oy(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dy(t,e),fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Gs(Error(B(423)),e),e=_m(t,e,r,n,s);break e}else if(r!==s){s=Gs(Error(B(424)),e),e=_m(t,e,r,n,s);break e}else for(Ft=hr(e.stateNode.containerInfo.firstChild),zt=e,Re=!0,an=null,n=uy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($s(),r===s){e=Un(t,e,n);break e}At(t,e,r,n)}e=e.child}return e;case 5:return hy(e),t===null&&Zc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Kc(r,s)?o=null:i!==null&&Kc(r,i)&&(e.flags|=32),Ly(t,e),At(t,e,o,n),e.child;case 6:return t===null&&Zc(e),null;case 13:return Fy(t,e,n);case 4:return gh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hs(e,null,r,n):At(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),gm(t,e,r,s,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(dl,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!Dt.current){e=Un(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Mn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ed(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ed(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}At(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vs(e,n),s=Jt(s),r=r(s),e.flags|=1,At(t,e,r,n),e.child;case 14:return r=e.type,s=sn(r,e.pendingProps),s=sn(r.type,s),ym(t,e,r,s,n);case 15:return Vy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),Fa(t,e),e.tag=1,Vt(r)?(t=!0,ll(e)):t=!1,Vs(e,n),Ry(e,r,s),nd(e,r,s,n),id(null,e,r,!0,t,n);case 19:return zy(t,e,n);case 22:return My(t,e,n)}throw Error(B(156,e.tag))};function nv(t,e){return N0(t,e)}function yE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,e,n,r){return new yE(t,e,n,r)}function Ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vE(t){if(typeof t=="function")return Ch(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yd)return 11;if(t===Xd)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ba(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ch(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return Gr(n.children,s,i,e);case Qd:o=8,s|=8;break;case Ic:return t=Qt(12,n,e,s|2),t.elementType=Ic,t.lanes=i,t;case bc:return t=Qt(13,n,e,s),t.elementType=bc,t.lanes=i,t;case Ac:return t=Qt(19,n,e,s),t.elementType=Ac,t.lanes=i,t;case h0:return Jl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case c0:o=10;break e;case d0:o=9;break e;case Yd:o=11;break e;case Xd:o=14;break e;case Zn:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gr(t,e,n,r){return t=Qt(7,t,r,e),t.lanes=n,t}function Jl(t,e,n,r){return t=Qt(22,t,r,e),t.elementType=h0,t.lanes=n,t.stateNode={isHidden:!1},t}function oc(t,e,n){return t=Qt(6,t,null,e),t.lanes=n,t}function ac(t,e,n){return e=Qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _E(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rh(t,e,n,r,s,i,o,l,c){return t=new _E(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mh(i),t}function xE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rv(t){if(!t)return Er;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Vt(n))return ry(t,n,e)}return e}function sv(t,e,n,r,s,i,o,l,c){return t=Rh(n,r,!0,t,s,i,o,l,c),t.context=rv(null),n=t.current,r=Nt(),s=mr(n),i=Mn(r,s),i.callback=e??null,fr(n,i,s),t.current.lanes=s,Ro(t,s,r),Mt(t,r),t}function Zl(t,e,n,r){var s=e.current,i=Nt(),o=mr(s);return n=rv(n),e.context===null?e.context=n:e.pendingContext=n,e=Mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(s,e,o),t!==null&&(cn(t,s,o,i),Ma(t,s,o)),o}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jh(t,e){Nm(t,e),(t=t.alternate)&&Nm(t,e)}function wE(){return null}var iv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dh(t){this._internalRoot=t}eu.prototype.render=Dh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Zl(t,e,null,null)};eu.prototype.unmount=Dh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){Zl(null,t,null,null)}),e[Fn]=null}};function eu(t){this._internalRoot=t}eu.prototype.unstable_scheduleHydration=function(t){if(t){var e=M0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tr.length&&e!==0&&e<tr[n].priority;n++);tr.splice(n,0,t),n===0&&O0(t)}};function Vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pm(){}function EE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=wl(o);i.call(h)}}var o=sv(e,r,t,0,null,!1,!1,"",Pm);return t._reactRootContainer=o,t[Fn]=o.current,co(t.nodeType===8?t.parentNode:t),Zr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=wl(c);l.call(h)}}var c=Rh(t,0,!1,null,null,!1,!1,"",Pm);return t._reactRootContainer=c,t[Fn]=c.current,co(t.nodeType===8?t.parentNode:t),Zr(function(){Zl(e,c,n,r)}),c}function nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=wl(o);l.call(c)}}Zl(e,o,t,s)}else o=EE(n,e,t,s,r);return wl(o)}D0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mi(e.pendingLanes);n!==0&&(eh(e,n|1),Mt(e,We()),!(we&6)&&(qs=We()+500,Nr()))}break;case 13:Zr(function(){var r=zn(t,1);if(r!==null){var s=Nt();cn(r,t,1,s)}}),jh(t,1)}};th=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=Nt();cn(e,t,134217728,n)}jh(t,134217728)}};V0=function(t){if(t.tag===13){var e=mr(t),n=zn(t,e);if(n!==null){var r=Nt();cn(n,t,e,r)}jh(t,e)}};M0=function(){return Te};L0=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Oc=function(t,e,n){switch(e){case"input":if(Cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gl(r);if(!s)throw Error(B(90));p0(r),Cc(r,s)}}}break;case"textarea":g0(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};k0=Ah;S0=Zr;var kE={usingClientEntryPoint:!1,Events:[Do,Ss,Gl,w0,E0,Ah]},Ri={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SE={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||wE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Bl=Ta.inject(SE),gn=Ta}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vh(e))throw Error(B(200));return xE(t,e,null,n)};Bt.createRoot=function(t,e){if(!Vh(t))throw Error(B(299));var n=!1,r="",s=iv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rh(t,1,!1,null,null,n,!1,r,s),t[Fn]=e.current,co(t.nodeType===8?t.parentNode:t),new Dh(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=b0(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Zr(t)};Bt.hydrate=function(t,e,n){if(!tu(e))throw Error(B(200));return nu(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Vh(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sv(e,null,t,1,n??null,s,!1,i,o),t[Fn]=e.current,co(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new eu(e)};Bt.render=function(t,e,n){if(!tu(e))throw Error(B(200));return nu(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!tu(t))throw Error(B(40));return t._reactRootContainer?(Zr(function(){nu(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Ah;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return nu(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function ov(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ov)}catch(t){console.error(t)}}ov(),o0.exports=Bt;var TE=o0.exports,Cm=TE;Sc.createRoot=Cm.createRoot,Sc.hydrateRoot=Cm.hydrateRoot;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=$.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...h},p)=>$.createElement("svg",{ref:p,...IE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${bE(t)}`,l].join(" "),...h},[...e.map(([m,_])=>$.createElement(m,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=ie("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ie("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=ie("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=ie("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=ie("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ie("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=ie("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=ie("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ie("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=ie("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=ie("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ie("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=ie("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=ie("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Lm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let _=(l&15)<<2|h>>6,I=h&63;c||(I=64,o||(_=64)),r.push(n[p],n[m],n[_],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new ik;const _=i<<2|l>>4;if(r.push(_),h!==64){const I=l<<4&240|h>>2;if(r.push(I),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ik extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ok=function(t){const e=hv(t);return fv.encodeByteArray(e,!0)},Sl=function(t){return ok(t).replace(/\./g,"")},pv=function(t){try{return fv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=()=>ak().__FIREBASE_DEFAULTS__,uk=()=>{if(typeof process>"u"||typeof Lm>"u")return;const t=Lm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ck=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pv(t[1]);return e&&JSON.parse(e)},ou=()=>{try{return lk()||uk()||ck()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mv=t=>{var e,n;return(n=(e=ou())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dk=t=>{const e=mv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gv=()=>{var t;return(t=ou())===null||t===void 0?void 0:t.config},yv=t=>{var e;return(e=ou())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sl(JSON.stringify(n)),Sl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function mk(){var t;const e=(t=ou())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _k(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xk(){return!mk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ek(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kk,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mo.prototype.create)}}class Mo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Sk(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new qn(s,l,r)}}function Sk(t,e){return t.replace(Tk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Tk=/\{\$([^}]+)}/g;function Ik(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Om(i)&&Om(o)){if(!Tl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Om(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bk(t,e){const n=new Ak(t,e);return n.subscribe.bind(n)}class Ak{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Nk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dc),s.error===void 0&&(s.error=dc),s.complete===void 0&&(s.complete=dc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rk(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ck(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ck(t){return t===Or?void 0:t}function Rk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Pk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Dk={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},Vk=ye.INFO,Mk={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},Lk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Mk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mh{constructor(e){this.name=e,this._logLevel=Vk,this._logHandler=Lk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const Ok=(t,e)=>e.some(n=>t instanceof n);let Fm,zm;function Fk(){return Fm||(Fm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zk(){return zm||(zm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vv=new WeakMap,vd=new WeakMap,_v=new WeakMap,hc=new WeakMap,Lh=new WeakMap;function Uk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(yr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vv.set(n,t)}).catch(()=>{}),Lh.set(e,t),e}function Bk(t){if(vd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vd.set(t,e)}let _d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_v.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $k(t){_d=t(_d)}function Hk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fc(this),e,...n);return _v.set(r,e.sort?e.sort():[e]),yr(r)}:zk().includes(t)?function(...e){return t.apply(fc(this),e),yr(vv.get(this))}:function(...e){return yr(t.apply(fc(this),e))}}function Wk(t){return typeof t=="function"?Hk(t):(t instanceof IDBTransaction&&Bk(t),Ok(t,Fk())?new Proxy(t,_d):t)}function yr(t){if(t instanceof IDBRequest)return Uk(t);if(hc.has(t))return hc.get(t);const e=Wk(t);return e!==t&&(hc.set(t,e),Lh.set(e,t)),e}const fc=t=>Lh.get(t);function Gk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=yr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(yr(o.result),c.oldVersion,c.newVersion,yr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const qk=["get","getKey","getAll","getAllKeys","count"],Kk=["put","add","delete","clear"],pc=new Map;function Um(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pc.get(e))return pc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Kk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qk.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return pc.set(e,i),i}$k(t=>({...t,get:(e,n,r)=>Um(e,n)||t.get(e,n,r),has:(e,n)=>!!Um(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xd="@firebase/app",Bm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Mh("@firebase/app"),Xk="@firebase/app-compat",Jk="@firebase/analytics-compat",Zk="@firebase/analytics",eS="@firebase/app-check-compat",tS="@firebase/app-check",nS="@firebase/auth",rS="@firebase/auth-compat",sS="@firebase/database",iS="@firebase/data-connect",oS="@firebase/database-compat",aS="@firebase/functions",lS="@firebase/functions-compat",uS="@firebase/installations",cS="@firebase/installations-compat",dS="@firebase/messaging",hS="@firebase/messaging-compat",fS="@firebase/performance",pS="@firebase/performance-compat",mS="@firebase/remote-config",gS="@firebase/remote-config-compat",yS="@firebase/storage",vS="@firebase/storage-compat",_S="@firebase/firestore",xS="@firebase/vertexai-preview",wS="@firebase/firestore-compat",ES="firebase",kS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="[DEFAULT]",SS={[xd]:"fire-core",[Xk]:"fire-core-compat",[Zk]:"fire-analytics",[Jk]:"fire-analytics-compat",[tS]:"fire-app-check",[eS]:"fire-app-check-compat",[nS]:"fire-auth",[rS]:"fire-auth-compat",[sS]:"fire-rtdb",[iS]:"fire-data-connect",[oS]:"fire-rtdb-compat",[aS]:"fire-fn",[lS]:"fire-fn-compat",[uS]:"fire-iid",[cS]:"fire-iid-compat",[dS]:"fire-fcm",[hS]:"fire-fcm-compat",[fS]:"fire-perf",[pS]:"fire-perf-compat",[mS]:"fire-rc",[gS]:"fire-rc-compat",[yS]:"fire-gcs",[vS]:"fire-gcs-compat",[_S]:"fire-fst",[wS]:"fire-fst-compat",[xS]:"fire-vertex","fire-js":"fire-js",[ES]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Map,TS=new Map,Ed=new Map;function $m(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(Ed.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Ed.set(e,t);for(const n of Il.values())$m(n,t);for(const n of TS.values())$m(n,t);return!0}function Oh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Mo("app","Firebase",IS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=kS;function xv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw vr.create("bad-app-name",{appName:String(s)});if(n||(n=gv()),!n)throw vr.create("no-options");const i=Il.get(s);if(i){if(Tl(n,i.options)&&Tl(r,i.config))return i;throw vr.create("duplicate-app",{appName:s})}const o=new jk(s);for(const c of Ed.values())o.addComponent(c);const l=new bS(n,r,o);return Il.set(s,l),l}function wv(t=wd){const e=Il.get(t);if(!e&&t===wd&&gv())return xv();if(!e)throw vr.create("no-app",{appName:t});return e}function _r(t,e,n){var r;let s=(r=SS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(l.join(" "));return}Ks(new es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firebase-heartbeat-database",NS=1,xo="firebase-heartbeat-store";let mc=null;function Ev(){return mc||(mc=Gk(AS,NS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),mc}async function PS(t){try{const n=(await Ev()).transaction(xo),r=await n.objectStore(xo).get(kv(t));return await n.done,r}catch(e){if(e instanceof qn)Bn.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function Hm(t,e){try{const r=(await Ev()).transaction(xo,"readwrite");await r.objectStore(xo).put(e,kv(t)),await r.done}catch(n){if(n instanceof qn)Bn.warn(n.message);else{const r=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(r.message)}}}function kv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1024,RS=30*24*60*60*1e3;class jS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Wm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=RS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wm(),{heartbeatsToSend:r,unsentEntries:s}=DS(this._heartbeatsCache.heartbeats),i=Sl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Bn.warn(n),""}}}function Wm(){return new Date().toISOString().substring(0,10)}function DS(t,e=CS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wk()?Ek().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gm(t){return Sl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t){Ks(new es("platform-logger",e=>new Qk(e),"PRIVATE")),Ks(new es("heartbeat",e=>new jS(e),"PRIVATE")),_r(xd,Bm,t),_r(xd,Bm,"esm2017"),_r("fire-js","")}MS("");var LS="firebase",OS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(LS,OS,"app");function Fh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Sv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FS=Sv,Tv=new Mo("auth","Firebase",Sv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new Mh("@firebase/auth");function zS(t,...e){bl.logLevel<=ye.WARN&&bl.warn(`Auth (${ai}): ${t}`,...e)}function $a(t,...e){bl.logLevel<=ye.ERROR&&bl.error(`Auth (${ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw Uh(t,...e)}function dn(t,...e){return Uh(t,...e)}function zh(t,e,n){const r=Object.assign(Object.assign({},FS()),{[e]:n});return new Mo("auth","Firebase",r).create(e,{appName:t.name})}function qr(t){return zh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function US(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wn(t,"argument-error"),zh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Tv.create(t,...e)}function le(t,e,...n){if(!t)throw Uh(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $a(e),new Error(e)}function $n(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BS(){return qm()==="http:"||qm()==="https:"}function qm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BS()||yk()||"connection"in navigator)?navigator.onLine:!0}function HS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=pk()||vk()}get(){return $S()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new Oo(3e4,6e4);function $h(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function li(t,e,n,r,s={}){return bv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Lo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return gk()||(h.referrerPolicy="no-referrer"),Iv.fetch()(Av(t,t.config.apiHost,n,l),h)})}async function bv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},WS),e);try{const s=new KS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ia(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ia(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ia(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ia(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zh(t,p,h);wn(t,p)}}catch(s){if(s instanceof qn)throw s;wn(t,"network-request-failed",{message:String(s)})}}async function qS(t,e,n,r,s={}){const i=await li(t,e,n,r,s);return"mfaPendingCredential"in i&&wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Av(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Bh(t.config,s):`${t.config.apiScheme}://${s}`}class KS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),GS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ia(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e){return li(t,"POST","/v1/accounts:delete",e)}async function Nv(t,e){return li(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YS(t,e=!1){const n=en(t),r=await n.getIdToken(e),s=Hh(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xi(gc(s.auth_time)),issuedAtTime:Xi(gc(s.iat)),expirationTime:Xi(gc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gc(t){return Number(t)*1e3}function Hh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $a("JWT malformed, contained fewer than 3 sections"),null;try{const s=pv(n);return s?JSON.parse(s):($a("Failed to decode base64 JWT payload"),null)}catch(s){return $a("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Km(t){const e=Hh(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&XS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xi(this.lastLoginAt),this.creationTime=Xi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wo(t,Nv(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Pv(i.providerUserInfo):[],l=eT(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Sd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function ZS(t){const e=en(t);await Al(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Pv(t){return t.map(e=>{var{providerId:n}=e,r=Fh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(t,e){const n=await bv(t,{},async()=>{const r=Lo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Av(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Iv.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nT(t,e){return li(t,"POST","/v2/accounts:revokeToken",$h(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Km(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Km(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await tT(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ls;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ls,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Fh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Sd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wo(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YS(this,e)}reload(){return ZS(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Al(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await wo(this,QS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,D=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(h=n.createdAt)!==null&&h!==void 0?h:void 0,w=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:T,emailVerified:N,isAnonymous:L,providerData:M,stsTokenManager:x}=n;le(T&&x,e,"internal-error");const y=Ls.fromJSON(this.name,x);le(typeof T=="string",e,"internal-error"),Jn(m,e.name),Jn(_,e.name),le(typeof N=="boolean",e,"internal-error"),le(typeof L=="boolean",e,"internal-error"),Jn(I,e.name),Jn(b,e.name),Jn(P,e.name),Jn(D,e.name),Jn(k,e.name),Jn(w,e.name);const E=new Dn({uid:T,auth:e,email:_,emailVerified:N,displayName:m,isAnonymous:L,photoURL:b,phoneNumber:I,tenantId:P,stsTokenManager:y,createdAt:k,lastLoginAt:w});return M&&Array.isArray(M)&&(E.providerData=M.map(S=>Object.assign({},S))),D&&(E._redirectEventId=D),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ls;s.updateFromServerResponse(n);const i=new Dn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Al(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Pv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ls;l.updateFromIdToken(r);const c=new Dn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Sd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=new Map;function Vn(t){$n(t instanceof Function,"Expected a class definition");let e=Qm.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Cv.type="NONE";const Ym=Cv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t,e,n){return`firebase:${t}:${e}:${n}`}class Os{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ha(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ha("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Os(Vn(Ym),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Vn(Ym);const o=Ha(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Dn._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Os(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Os(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lv(e))return"Blackberry";if(Ov(e))return"Webos";if(jv(e))return"Safari";if((e.includes("chrome/")||Dv(e))&&!e.includes("edge/"))return"Chrome";if(Mv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Rv(t=St()){return/firefox\//i.test(t)}function jv(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dv(t=St()){return/crios\//i.test(t)}function Vv(t=St()){return/iemobile/i.test(t)}function Mv(t=St()){return/android/i.test(t)}function Lv(t=St()){return/blackberry/i.test(t)}function Ov(t=St()){return/webos/i.test(t)}function Wh(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rT(t=St()){var e;return Wh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sT(){return _k()&&document.documentMode===10}function Fv(t=St()){return Wh(t)||Mv(t)||Ov(t)||Lv(t)||/windows phone/i.test(t)||Vv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e=[]){let n;switch(t){case"Browser":n=Xm(St());break;case"Worker":n=`${Xm(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(t,e={}){return li(t,"GET","/v2/passwordPolicy",$h(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=6;class lT{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jm(this),this.idTokenSubscription=new Jm(this),this.beforeStateQueue=new iT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Os.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nv(this,{idToken:e}),r=await Dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Al(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(qr(this));const n=e?en(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oT(this),n=new lT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Os.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function au(t){return en(t)}class Jm{constructor(e){this.auth=e,this.observer=null,this.addObserver=bk(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cT(t){Gh=t}function dT(t){return Gh.loadJS(t)}function hT(){return Gh.gapiScript}function fT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e){const n=Oh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Tl(i,e??{}))return s;wn(s,"already-initialized")}return n.initialize({options:e})}function mT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gT(t,e,n){const r=au(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Uv(e),{host:o,port:l}=yT(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),vT()}function Uv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yT(t){const e=Uv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Zm(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Zm(o)}}}function Zm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t,e){return qS(t,"POST","/v1/accounts:signInWithIdp",$h(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="http://localhost";class ts extends Bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Fh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ts(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fs(e,n)}buildRequest(){const e={requestUri:_T,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends qh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Fo{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nn.credential(n,r)}catch{return null}}}Nn.GOOGLE_SIGN_IN_METHOD="google.com";Nn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Fo{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Fo{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Dn._fromIdTokenResponse(e,r,s),o=eg(r);return new Qs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=eg(r);return new Qs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function eg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nl(e,n,r,s)}}function $v(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nl._fromErrorAndOperation(t,i,e,r):i})}async function xT(t,e,n=!1){const r=await wo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(t,e,n=!1){const{auth:r}=t;if(Rn(r.app))return Promise.reject(qr(r));const s="reauthenticate";try{const i=await wo(t,$v(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Hh(i.idToken);le(o,r,"internal-error");const{sub:l}=o;return le(t.uid===l,r,"user-mismatch"),Qs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t,e,n=!1){if(Rn(t.app))return Promise.reject(qr(t));const r="signIn",s=await $v(t,r,e),i=await Qs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function kT(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function ST(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function TT(t,e,n,r){return en(t).onAuthStateChanged(e,n,r)}function IT(t){return en(t).signOut()}const Pl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=1e3,AT=10;class Wv extends Hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);sT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AT):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wv.type="LOCAL";const NT=Wv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends Hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gv.type="SESSION";const qv=Gv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await PT(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Kh("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(_.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function RT(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function jT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VT(){return Kv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firebaseLocalStorageDb",MT=1,Cl="firebaseLocalStorage",Yv="fbase_key";class zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uu(t,e){return t.transaction([Cl],e?"readwrite":"readonly").objectStore(Cl)}function LT(){const t=indexedDB.deleteDatabase(Qv);return new zo(t).toPromise()}function Td(){const t=indexedDB.open(Qv,MT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cl,{keyPath:Yv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cl)?e(r):(r.close(),await LT(),e(await Td()))})})}async function tg(t,e,n){const r=uu(t,!0).put({[Yv]:e,value:n});return new zo(r).toPromise()}async function OT(t,e){const n=uu(t,!1).get(e),r=await new zo(n).toPromise();return r===void 0?null:r.value}function ng(t,e){const n=uu(t,!0).delete(e);return new zo(n).toPromise()}const FT=800,zT=3;class Xv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Td(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lu._getInstance(VT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jT(),!this.activeServiceWorker)return;this.sender=new CT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Td();return await tg(e,Pl,"1"),await ng(e,Pl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ng(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=uu(s,!1).getAll();return new zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xv.type="LOCAL";const UT=Xv;new Oo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e){return e?Vn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BT(t){return ET(t.auth,new Qh(t),t.bypassAuthState)}function $T(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),wT(n,new Qh(t),t.bypassAuthState)}async function HT(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),xT(n,new Qh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BT;case"linkViaPopup":case"linkViaRedirect":return HT;case"reauthViaPopup":case"reauthViaRedirect":return $T;default:wn(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Oo(2e3,1e4);async function GT(t,e,n){if(Rn(t.app))return Promise.reject(dn(t,"operation-not-supported-in-this-environment"));const r=au(t);US(t,e,qh);const s=Jv(r,n);return new $r(r,"signInViaPopup",e,s).executeNotNull()}class $r extends Zv{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=Kh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WT.get())};e()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="pendingRedirect",Wa=new Map;class KT extends Zv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wa.get(this.auth._key());if(!e){try{const r=await QT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wa.set(this.auth._key(),e)}return this.bypassAuthState||Wa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QT(t,e){const n=JT(e),r=XT(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function YT(t,e){Wa.set(t._key(),e)}function XT(t){return Vn(t._redirectPersistence)}function JT(t){return Ha(qT,t.config.apiKey,t.name)}async function ZT(t,e,n=!1){if(Rn(t.app))return Promise.reject(qr(t));const r=au(t),s=Jv(r,e),o=await new KT(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=10*60*1e3;class t2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!e_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e2&&this.cachedEventUids.clear(),this.cachedEventUids.has(rg(e))}saveEventToCache(e){this.cachedEventUids.add(rg(e)),this.lastProcessedEventTime=Date.now()}}function rg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function e_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function n2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e={}){return li(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i2=/^https?/;async function o2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await r2(t);for(const n of e)try{if(a2(n))return}catch{}wn(t,"unauthorized-domain")}function a2(t){const e=kd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!i2.test(n))return!1;if(s2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Oo(3e4,6e4);function sg(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u2(t){return new Promise((e,n)=>{var r,s,i;function o(){sg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sg(),n(dn(t,"network-request-failed"))},timeout:l2.get()})}if(!((s=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vn().gapi)===null||i===void 0)&&i.load)o();else{const l=fT("iframefcb");return vn()[l]=()=>{gapi.load?o():n(dn(t,"network-request-failed"))},dT(`${hT()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ga=null,e})}let Ga=null;function c2(t){return Ga=Ga||u2(t),Ga}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new Oo(5e3,15e3),h2="__/auth/iframe",f2="emulator/auth/iframe",p2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g2(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bh(e,f2):`https://${t.config.authDomain}/${h2}`,r={apiKey:e.apiKey,appName:t.name,v:ai},s=m2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Lo(r).slice(1)}`}async function y2(t){const e=await c2(t),n=vn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:g2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=dn(t,"network-request-failed"),l=vn().setTimeout(()=>{i(o)},d2.get());function c(){vn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_2=500,x2=600,w2="_blank",E2="http://localhost";class ig{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function k2(t,e,n,r=_2,s=x2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},v2),{width:r.toString(),height:s.toString(),top:i,left:o}),h=St().toLowerCase();n&&(l=Dv(h)?w2:n),Rv(h)&&(e=e||E2,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[I,b])=>`${_}${I}=${b},`,"");if(rT(h)&&l!=="_self")return S2(e||"",l),new ig(null);const m=window.open(e||"",l,p);le(m,t,"popup-blocked");try{m.focus()}catch{}return new ig(m)}function S2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="__/auth/handler",I2="emulator/auth/handler",b2=encodeURIComponent("fac");async function og(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ai,eventId:s};if(e instanceof qh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ik(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Fo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${b2}=${encodeURIComponent(c)}`:"";return`${A2(t)}?${Lo(l).slice(1)}${h}`}function A2({config:t}){return t.emulator?Bh(t,I2):`https://${t.authDomain}/${T2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="webStorageSupport";class N2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qv,this._completeRedirectFn=ZT,this._overrideRedirectResult=YT}async _openPopup(e,n,r,s){var i;$n((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await og(e,n,r,kd(),s);return k2(e,o,Kh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await og(e,n,r,kd(),s);return RT(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):($n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await y2(e),r=new t2(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yc,{type:yc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[yc];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fv()||jv()||Wh()}}const P2=N2;var ag="@firebase/auth",lg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j2(t){Ks(new es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zv(t)},h=new uT(r,s,i,c);return mT(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new es("auth-internal",e=>{const n=au(e.getProvider("auth").getImmediate());return(r=>new C2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(ag,lg,R2(t)),_r(ag,lg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=5*60,V2=yv("authIdTokenMaxAge")||D2;let ug=null;const M2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>V2)return;const s=n==null?void 0:n.token;ug!==s&&(ug=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function L2(t=wv()){const e=Oh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pT(t,{popupRedirectResolver:P2,persistence:[UT,NT,qv]}),r=yv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=M2(i.toString());ST(n,o,()=>o(n.currentUser)),kT(n,l=>o(l))}}const s=mv("auth");return s&&gT(n,`http://${s}`),n}function O2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",O2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j2("Browser");var cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kr,t_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function E(){}E.prototype=y.prototype,x.D=y.prototype,x.prototype=new E,x.prototype.constructor=x,x.C=function(S,A,C){for(var v=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)v[ee-2]=arguments[ee];return y.prototype[A].apply(S,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,E){E||(E=0);var S=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)S[A]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(A=0;16>A;++A)S[A]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=x.g[0],E=x.g[1],A=x.g[2];var C=x.g[3],v=y+(C^E&(A^C))+S[0]+3614090360&4294967295;y=E+(v<<7&4294967295|v>>>25),v=C+(A^y&(E^A))+S[1]+3905402710&4294967295,C=y+(v<<12&4294967295|v>>>20),v=A+(E^C&(y^E))+S[2]+606105819&4294967295,A=C+(v<<17&4294967295|v>>>15),v=E+(y^A&(C^y))+S[3]+3250441966&4294967295,E=A+(v<<22&4294967295|v>>>10),v=y+(C^E&(A^C))+S[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(A^y&(E^A))+S[5]+1200080426&4294967295,C=y+(v<<12&4294967295|v>>>20),v=A+(E^C&(y^E))+S[6]+2821735955&4294967295,A=C+(v<<17&4294967295|v>>>15),v=E+(y^A&(C^y))+S[7]+4249261313&4294967295,E=A+(v<<22&4294967295|v>>>10),v=y+(C^E&(A^C))+S[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(A^y&(E^A))+S[9]+2336552879&4294967295,C=y+(v<<12&4294967295|v>>>20),v=A+(E^C&(y^E))+S[10]+4294925233&4294967295,A=C+(v<<17&4294967295|v>>>15),v=E+(y^A&(C^y))+S[11]+2304563134&4294967295,E=A+(v<<22&4294967295|v>>>10),v=y+(C^E&(A^C))+S[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(A^y&(E^A))+S[13]+4254626195&4294967295,C=y+(v<<12&4294967295|v>>>20),v=A+(E^C&(y^E))+S[14]+2792965006&4294967295,A=C+(v<<17&4294967295|v>>>15),v=E+(y^A&(C^y))+S[15]+1236535329&4294967295,E=A+(v<<22&4294967295|v>>>10),v=y+(A^C&(E^A))+S[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^A&(y^E))+S[6]+3225465664&4294967295,C=y+(v<<9&4294967295|v>>>23),v=A+(y^E&(C^y))+S[11]+643717713&4294967295,A=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(A^C))+S[0]+3921069994&4294967295,E=A+(v<<20&4294967295|v>>>12),v=y+(A^C&(E^A))+S[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^A&(y^E))+S[10]+38016083&4294967295,C=y+(v<<9&4294967295|v>>>23),v=A+(y^E&(C^y))+S[15]+3634488961&4294967295,A=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(A^C))+S[4]+3889429448&4294967295,E=A+(v<<20&4294967295|v>>>12),v=y+(A^C&(E^A))+S[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^A&(y^E))+S[14]+3275163606&4294967295,C=y+(v<<9&4294967295|v>>>23),v=A+(y^E&(C^y))+S[3]+4107603335&4294967295,A=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(A^C))+S[8]+1163531501&4294967295,E=A+(v<<20&4294967295|v>>>12),v=y+(A^C&(E^A))+S[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^A&(y^E))+S[2]+4243563512&4294967295,C=y+(v<<9&4294967295|v>>>23),v=A+(y^E&(C^y))+S[7]+1735328473&4294967295,A=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(A^C))+S[12]+2368359562&4294967295,E=A+(v<<20&4294967295|v>>>12),v=y+(E^A^C)+S[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^A)+S[8]+2272392833&4294967295,C=y+(v<<11&4294967295|v>>>21),v=A+(C^y^E)+S[11]+1839030562&4294967295,A=C+(v<<16&4294967295|v>>>16),v=E+(A^C^y)+S[14]+4259657740&4294967295,E=A+(v<<23&4294967295|v>>>9),v=y+(E^A^C)+S[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^A)+S[4]+1272893353&4294967295,C=y+(v<<11&4294967295|v>>>21),v=A+(C^y^E)+S[7]+4139469664&4294967295,A=C+(v<<16&4294967295|v>>>16),v=E+(A^C^y)+S[10]+3200236656&4294967295,E=A+(v<<23&4294967295|v>>>9),v=y+(E^A^C)+S[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^A)+S[0]+3936430074&4294967295,C=y+(v<<11&4294967295|v>>>21),v=A+(C^y^E)+S[3]+3572445317&4294967295,A=C+(v<<16&4294967295|v>>>16),v=E+(A^C^y)+S[6]+76029189&4294967295,E=A+(v<<23&4294967295|v>>>9),v=y+(E^A^C)+S[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^A)+S[12]+3873151461&4294967295,C=y+(v<<11&4294967295|v>>>21),v=A+(C^y^E)+S[15]+530742520&4294967295,A=C+(v<<16&4294967295|v>>>16),v=E+(A^C^y)+S[2]+3299628645&4294967295,E=A+(v<<23&4294967295|v>>>9),v=y+(A^(E|~C))+S[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~A))+S[7]+1126891415&4294967295,C=y+(v<<10&4294967295|v>>>22),v=A+(y^(C|~E))+S[14]+2878612391&4294967295,A=C+(v<<15&4294967295|v>>>17),v=E+(C^(A|~y))+S[5]+4237533241&4294967295,E=A+(v<<21&4294967295|v>>>11),v=y+(A^(E|~C))+S[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~A))+S[3]+2399980690&4294967295,C=y+(v<<10&4294967295|v>>>22),v=A+(y^(C|~E))+S[10]+4293915773&4294967295,A=C+(v<<15&4294967295|v>>>17),v=E+(C^(A|~y))+S[1]+2240044497&4294967295,E=A+(v<<21&4294967295|v>>>11),v=y+(A^(E|~C))+S[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~A))+S[15]+4264355552&4294967295,C=y+(v<<10&4294967295|v>>>22),v=A+(y^(C|~E))+S[6]+2734768916&4294967295,A=C+(v<<15&4294967295|v>>>17),v=E+(C^(A|~y))+S[13]+1309151649&4294967295,E=A+(v<<21&4294967295|v>>>11),v=y+(A^(E|~C))+S[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~A))+S[11]+3174756917&4294967295,C=y+(v<<10&4294967295|v>>>22),v=A+(y^(C|~E))+S[2]+718787259&4294967295,A=C+(v<<15&4294967295|v>>>17),v=E+(C^(A|~y))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(A+(v<<21&4294967295|v>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+C&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var E=y-this.blockSize,S=this.B,A=this.h,C=0;C<y;){if(A==0)for(;C<=E;)s(this,x,C),C+=this.blockSize;if(typeof x=="string"){for(;C<y;)if(S[A++]=x.charCodeAt(C++),A==this.blockSize){s(this,S),A=0;break}}else for(;C<y;)if(S[A++]=x[C++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var E=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=E&255,E/=256;for(this.u(x),x=Array(16),y=E=0;4>y;++y)for(var S=0;32>S;S+=8)x[E++]=this.g[y]>>>S&255;return x};function i(x,y){var E=l;return Object.prototype.hasOwnProperty.call(E,x)?E[x]:E[x]=y(x)}function o(x,y){this.h=y;for(var E=[],S=!0,A=x.length-1;0<=A;A--){var C=x[A]|0;S&&C==y||(E[A]=C,S=!1)}this.g=E}var l={};function c(x){return-128<=x&&128>x?i(x,function(y){return new o([y|0],0>y?-1:0)}):new o([x|0],0>x?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return D(h(-x));for(var y=[],E=1,S=0;x>=E;S++)y[S]=x/E|0,E*=4294967296;return new o(y,0)}function p(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return D(p(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(y,8)),S=m,A=0;A<x.length;A+=8){var C=Math.min(8,x.length-A),v=parseInt(x.substring(A,A+C),y);8>C?(C=h(Math.pow(y,C)),S=S.j(C).add(h(v))):(S=S.j(E),S=S.add(h(v)))}return S}var m=c(0),_=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-D(this).m();for(var x=0,y=1,E=0;E<this.g.length;E++){var S=this.i(E);x+=(0<=S?S:4294967296+S)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(P(this))return"-"+D(this).toString(x);for(var y=h(Math.pow(x,6)),E=this,S="";;){var A=N(E,y).g;E=k(E,A.j(y));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(x);if(E=A,b(E))return C+S;for(;6>C.length;)C="0"+C;S=C+S}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function P(x){return x.h==-1}t.l=function(x){return x=k(this,x),P(x)?-1:b(x)?0:1};function D(x){for(var y=x.g.length,E=[],S=0;S<y;S++)E[S]=~x.g[S];return new o(E,~x.h).add(_)}t.abs=function(){return P(this)?D(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],S=0,A=0;A<=y;A++){var C=S+(this.i(A)&65535)+(x.i(A)&65535),v=(C>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);S=v>>>16,C&=65535,v&=65535,E[A]=v<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function k(x,y){return x.add(D(y))}t.j=function(x){if(b(this)||b(x))return m;if(P(this))return P(x)?D(this).j(D(x)):D(D(this).j(x));if(P(x))return D(this.j(D(x)));if(0>this.l(I)&&0>x.l(I))return h(this.m()*x.m());for(var y=this.g.length+x.g.length,E=[],S=0;S<2*y;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<x.g.length;A++){var C=this.i(S)>>>16,v=this.i(S)&65535,ee=x.i(A)>>>16,de=x.i(A)&65535;E[2*S+2*A]+=v*de,w(E,2*S+2*A),E[2*S+2*A+1]+=C*de,w(E,2*S+2*A+1),E[2*S+2*A+1]+=v*ee,w(E,2*S+2*A+1),E[2*S+2*A+2]+=C*ee,w(E,2*S+2*A+2)}for(S=0;S<y;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=y;S<2*y;S++)E[S]=0;return new o(E,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function T(x,y){this.g=x,this.h=y}function N(x,y){if(b(y))throw Error("division by zero");if(b(x))return new T(m,m);if(P(x))return y=N(D(x),y),new T(D(y.g),D(y.h));if(P(y))return y=N(x,D(y)),new T(D(y.g),y.h);if(30<x.g.length){if(P(x)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var E=_,S=y;0>=S.l(x);)E=L(E),S=L(S);var A=M(E,1),C=M(S,1);for(S=M(S,2),E=M(E,2);!b(S);){var v=C.add(S);0>=v.l(x)&&(A=A.add(E),C=v),S=M(S,1),E=M(E,1)}return y=k(x,A.j(y)),new T(A,y)}for(A=m;0<=x.l(y);){for(E=Math.max(1,Math.floor(x.m()/y.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),C=h(E),v=C.j(y);P(v)||0<v.l(x);)E-=S,C=h(E),v=C.j(y);b(C)&&(C=_),A=A.add(C),x=k(x,v)}return new T(A,x)}t.A=function(x){return N(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)&x.i(S);return new o(E,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)|x.i(S);return new o(E,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),E=[],S=0;S<y;S++)E[S]=this.i(S)^x.i(S);return new o(E,this.h^x.h)};function L(x){for(var y=x.g.length+1,E=[],S=0;S<y;S++)E[S]=x.i(S)<<1|x.i(S-1)>>>31;return new o(E,x.h)}function M(x,y){var E=y>>5;y%=32;for(var S=x.g.length-E,A=[],C=0;C<S;C++)A[C]=0<y?x.i(C+E)>>>y|x.i(C+E+1)<<32-y:x.i(C+E);return new o(A,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,t_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Kr=o}).apply(typeof cg<"u"?cg:typeof self<"u"?self:typeof window<"u"?window:{});var ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var n_,Fi,r_,qa,Id,s_,i_,o_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ba=="object"&&ba];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var j=a[g];if(!(j in f))break e;f=f[j]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,g=!1,j={next:function(){if(!g&&f<a.length){var V=f++;return{value:d(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,g),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,_.apply(null,arguments)}function I(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,j,V){for(var G=Array(arguments.length-2),be=2;be<arguments.length;be++)G[be-2]=arguments[be];return d.prototype[j].apply(g,G)}}function P(a){const d=a.length;if(0<d){const f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function D(a,d){for(let f=1;f<arguments.length;f++){const g=arguments[f];if(c(g)){const j=a.length||0,V=g.length||0;a.length=j+V;for(let G=0;G<V;G++)a[j+G]=g[G]}else a.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(a,d,f){for(const g in a)d.call(f,a[g],g,a)}function x(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let f,g;for(let j=1;j<arguments.length;j++){g=arguments[j];for(f in g)a[f]=g[f];for(let V=0;V<E.length;V++)f=E[V],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function v(){var a=re;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ee{constructor(){this.h=this.g=null}add(d,f){const g=de.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var de=new k(()=>new Oe,a=>a.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ge,H=!1,re=new ee,se=()=>{const a=l.Promise.resolve(void 0);Ge=()=>{a.then(ve)}};var ve=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(f){C(f)}var d=de;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}H=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var tt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function Ye(a,d){if(ge.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{N(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Fe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ye.aa.h.call(this)}}b(Ye,ge);var Fe={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function qe(a,d,f,g,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=j,this.key=++Ht,this.da=this.fa=!1}function O(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a){this.src=a,this.g={},this.h=0}K.prototype.add=function(a,d,f,g,j){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var G=X(a,d,g,j);return-1<G?(d=a[G],f||(d.fa=!1)):(d=new qe(d,this.src,V,!!g,j),d.fa=f,a.push(d)),d};function Z(a,d){var f=d.type;if(f in a.g){var g=a.g[f],j=Array.prototype.indexOf.call(g,d,void 0),V;(V=0<=j)&&Array.prototype.splice.call(g,j,1),V&&(O(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function X(a,d,f,g){for(var j=0;j<a.length;++j){var V=a[j];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==g)return j}return-1}var q="closure_lm_"+(1e6*Math.random()|0),Se={};function je(a,d,f,g,j){if(Array.isArray(d)){for(var V=0;V<d.length;V++)je(a,d[V],f,g,j);return null}return f=ne(f),a&&a[$e]?a.K(d,f,h(g)?!!g.capture:!1,j):tn(a,d,f,!1,g,j)}function tn(a,d,f,g,j,V){if(!d)throw Error("Invalid event type");var G=h(j)?!!j.capture:!!j,be=F(a);if(be||(a[q]=be=new K(a)),f=be.add(d,f,g,G,V),f.proxy)return f;if(g=it(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)tt||(j=G),j===void 0&&(j=!1),a.addEventListener(d.toString(),g,j);else if(a.attachEvent)a.attachEvent(R(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function it(){function a(f){return d.call(a.src,a.listener,f)}const d=W;return a}function pt(a,d,f,g,j){if(Array.isArray(d))for(var V=0;V<d.length;V++)pt(a,d[V],f,g,j);else g=h(g)?!!g.capture:!!g,f=ne(f),a&&a[$e]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],f=X(V,f,g,j),-1<f&&(O(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=F(a))&&(d=a.g[d.toString()],a=-1,d&&(a=X(d,f,g,j)),(f=-1<a?d[a]:null)&&Tt(f))}function Tt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[$e])Z(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(R(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=F(d))?(Z(f,a),f.h==0&&(f.src=null,d[q]=null)):O(a)}}}function R(a){return a in Se?Se[a]:Se[a]="on"+a}function W(a,d){if(a.da)a=!0;else{d=new Ye(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Tt(a),a=f.call(g,d)}return a}function F(a){return a=a[q],a instanceof K?a:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function ne(a){return typeof a=="function"?a:(a[Q]||(a[Q]=function(d){return a.handleEvent(d)}),a[Q])}function ue(){te.call(this),this.i=new K(this),this.M=this,this.F=null}b(ue,te),ue.prototype[$e]=!0,ue.prototype.removeEventListener=function(a,d,f,g){pt(this,a,d,f,g)};function _e(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new ge(d,a);else if(d instanceof ge)d.target=d.target||a;else{var j=d;d=new ge(g,a),S(d,j)}if(j=!0,f)for(var V=f.length-1;0<=V;V--){var G=d.g=f[V];j=It(G,g,!0,d)&&j}if(G=d.g=a,j=It(G,g,!0,d)&&j,j=It(G,g,!1,d)&&j,f)for(V=0;V<f.length;V++)G=d.g=f[V],j=It(G,g,!1,d)&&j}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)O(f[g]);delete a.g[d],a.h--}}this.F=null},ue.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},ue.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function It(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,V=0;V<d.length;++V){var G=d[V];if(G&&!G.da&&G.capture==f){var be=G.listener,ot=G.ha||G.src;G.fa&&Z(a.i,G),j=be.call(ot,g)!==!1&&j}}return j&&!g.defaultPrevented}function Wt(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Pr(a){a.g=Wt(()=>{a.g=null,a.i&&(a.i=!1,Pr(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class qo extends te{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(a){te.call(this),this.h=a,this.g={}}b(Cr,te);var Pf=[];function Cf(a){M(a.g,function(d,f){this.g.hasOwnProperty(f)&&Tt(d)},a),a.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),Cf(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xu=l.JSON.stringify,bx=l.JSON.parse,Ax=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function wu(){}wu.prototype.h=null;function Rf(a){return a.h||(a.h=a.i())}function jf(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Eu(){ge.call(this,"d")}b(Eu,ge);function ku(){ge.call(this,"c")}b(ku,ge);var Rr={},Df=null;function Ko(){return Df=Df||new ue}Rr.La="serverreachability";function Vf(a){ge.call(this,Rr.La,a)}b(Vf,ge);function pi(a){const d=Ko();_e(d,new Vf(d))}Rr.STAT_EVENT="statevent";function Mf(a,d){ge.call(this,Rr.STAT_EVENT,a),this.stat=d}b(Mf,ge);function bt(a){const d=Ko();_e(d,new Mf(d,a))}Rr.Ma="timingevent";function Lf(a,d){ge.call(this,Rr.Ma,a),this.size=d}b(Lf,ge);function mi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function Nx(a,d,f,g,j,V){a.info(function(){if(a.g)if(V)for(var G="",be=V.split("&"),ot=0;ot<be.length;ot++){var Ee=be[ot].split("=");if(1<Ee.length){var mt=Ee[0];Ee=Ee[1];var gt=mt.split("_");G=2<=gt.length&&gt[1]=="type"?G+(mt+"="+Ee+"&"):G+(mt+"=redacted&")}}else G=null;else G=V;return"XMLHTTP REQ ("+g+") [attempt "+j+"]: "+d+`
`+f+`
`+G})}function Px(a,d,f,g,j,V,G){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+j+"]: "+d+`
`+f+`
`+V+" "+G})}function ds(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Rx(a,f)+(g?" "+g:"")})}function Cx(a,d){a.info(function(){return"TIMEOUT: "+d})}gi.prototype.info=function(){};function Rx(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var j=g[1];if(Array.isArray(j)&&!(1>j.length)){var V=j[0];if(V!="noop"&&V!="stop"&&V!="close")for(var G=1;G<j.length;G++)j[G]=""}}}}return xu(f)}catch{return d}}var Qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Of={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Su;function Yo(){}b(Yo,wu),Yo.prototype.g=function(){return new XMLHttpRequest},Yo.prototype.i=function(){return{}},Su=new Yo;function Kn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ff}function Ff(){this.i=null,this.g="",this.h=!1}var zf={},Tu={};function Iu(a,d,f){a.L=1,a.v=ea(Tn(d)),a.m=f,a.P=!0,Uf(a,null)}function Uf(a,d){a.F=Date.now(),Xo(a),a.A=Tn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),tp(f.i,"t",g),a.C=0,f=a.j.J,a.h=new Ff,a.g=_p(a.j,f?d:null,!a.m),0<a.O&&(a.M=new qo(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(Pf[0]=j.toString()),j=Pf);for(var V=0;V<j.length;V++){var G=je(f,j[V],g||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),pi(),Nx(a.i,a.u,a.A,a.l,a.R,a.m)}Kn.prototype.ca=function(a){a=a.target;const d=this.M;d&&In(a)==3?d.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{const gt=In(this.g);var d=this.g.Ba();const ps=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||lp(this.g)))){this.J||gt!=4||d==7||(d==8||0>=ps?pi(3):pi(2)),bu(this);var f=this.g.Z();this.X=f;t:if(Bf(this)){var g=lp(this.g);a="";var j=g.length,V=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),yi(this);var G="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(V&&d==j-1)});g.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,Px(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ot=this.g;if((be=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(be)){var Ee=be;break t}}Ee=null}if(f=Ee)ds(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Au(this,f);else{this.o=!1,this.s=3,bt(12),jr(this),yi(this);break e}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<G.length;)if(nn=jx(this,G),nn==Tu){gt==4&&(this.s=4,bt(14),f=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==zf){this.s=4,bt(15),ds(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else ds(this.i,this.l,nn,null),Au(this,nn);if(Bf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||G.length!=0||this.h.h||(this.s=1,bt(16),f=!1),this.o=this.o&&f,!f)ds(this.i,this.l,G,"[Invalid Chunked Response]"),jr(this),yi(this);else if(0<G.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Du(mt),mt.M=!0,bt(11))}}else ds(this.i,this.l,G,null),Au(this,G);gt==4&&jr(this),this.o&&!this.J&&(gt==4?mp(this.j,this):(this.o=!1,Xo(this)))}else Yx(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),jr(this),yi(this)}}}catch{}finally{}};function Bf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function jx(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Tu:(f=Number(d.substring(f,g)),isNaN(f)?zf:(g+=1,g+f>d.length?Tu:(d=d.slice(g,g+f),a.C=g+f,d)))}Kn.prototype.cancel=function(){this.J=!0,jr(this)};function Xo(a){a.S=Date.now()+a.I,$f(a,a.I)}function $f(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=mi(_(a.ba,a),d)}function bu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Kn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Cx(this.i,this.A),this.L!=2&&(pi(),bt(17)),jr(this),this.s=2,yi(this)):$f(this,this.S-a)};function yi(a){a.j.G==0||a.J||mp(a.j,a)}function jr(a){bu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Cf(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Au(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Nu(f.h,a))){if(!a.K&&Nu(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var j=g;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)oa(f),sa(f);else break e;ju(f),bt(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=mi(_(f.Za,f),6e3));if(1>=Gf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Vr(f,11)}else if((a.K||f.g==a)&&oa(f),!w(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let Ee=j[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];const mt=Ee[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));const gt=Ee[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));const ps=Ee[5];ps!=null&&typeof ps=="number"&&0<ps&&(g=1.5*ps,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const nn=a.g;if(nn){const la=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var V=g.h;V.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Pu(V,V.h),V.h=null))}if(g.D){const Vu=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(g.ya=Vu,Ne(g.I,g.D,Vu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var G=a;if(g.qa=vp(g,g.J?g.ia:null,g.W),G.K){qf(g.h,G);var be=G,ot=g.L;ot&&(be.I=ot),be.B&&(bu(be),Xo(be)),g.g=G}else fp(g);0<f.i.length&&ia(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Vr(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Vr(f,7):Ru(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}pi(4)}catch{}}var Dx=class{constructor(a,d){this.g=a,this.map=d}};function Hf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Gf(a){return a.h?1:a.g?a.g.size:0}function Nu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Pu(a,d){a.g?a.g.add(d):a.h=d}function qf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Hf.prototype.cancel=function(){if(this.i=Kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Kf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return P(a.i)}function Vx(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function Mx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const g in a)d[f++]=g;return d}}}function Qf(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Mx(a),g=Vx(a),j=g.length,V=0;V<j;V++)d.call(void 0,g[V],f&&f[V],a)}var Yf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lx(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),j=null;if(0<=g){var V=a[f].substring(0,g);j=a[f].substring(g+1)}else V=a[f];d(V,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Dr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Dr){this.h=a.h,Jo(this,a.j),this.o=a.o,this.g=a.g,Zo(this,a.s),this.l=a.l;var d=a.i,f=new xi;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Xf(this,f),this.m=a.m}else a&&(d=String(a).match(Yf))?(this.h=!1,Jo(this,d[1]||"",!0),this.o=vi(d[2]||""),this.g=vi(d[3]||"",!0),Zo(this,d[4]),this.l=vi(d[5]||"",!0),Xf(this,d[6]||"",!0),this.m=vi(d[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}Dr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(_i(d,Jf,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(_i(d,Jf,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(_i(f,f.charAt(0)=="/"?zx:Fx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",_i(f,Bx)),a.join("")};function Tn(a){return new Dr(a)}function Jo(a,d,f){a.j=f?vi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Zo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Xf(a,d,f){d instanceof xi?(a.i=d,$x(a.i,a.h)):(f||(d=_i(d,Ux)),a.i=new xi(d,a.h))}function Ne(a,d,f){a.i.set(d,f)}function ea(a){return Ne(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function vi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function _i(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Ox),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ox(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Jf=/[#\/\?@]/g,Fx=/[#\?:]/g,zx=/[#\?]/g,Ux=/[#\?@]/g,Bx=/#/g;function xi(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Qn(a){a.g||(a.g=new Map,a.h=0,a.i&&Lx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=xi.prototype,t.add=function(a,d){Qn(this),this.i=null,a=hs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Zf(a,d){Qn(a),d=hs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function ep(a,d){return Qn(a),d=hs(a,d),a.g.has(d)}t.forEach=function(a,d){Qn(this),this.g.forEach(function(f,g){f.forEach(function(j){a.call(d,j,g,this)},this)},this)},t.na=function(){Qn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){const j=a[g];for(let V=0;V<j.length;V++)f.push(d[g])}return f},t.V=function(a){Qn(this);let d=[];if(typeof a=="string")ep(this,a)&&(d=d.concat(this.g.get(hs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Qn(this),this.i=null,a=hs(this,a),ep(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function tp(a,d,f){Zf(a,d),0<f.length&&(a.i=null,a.g.set(hs(a,d),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];const V=encodeURIComponent(String(g)),G=this.V(g);for(g=0;g<G.length;g++){var j=V;G[g]!==""&&(j+="="+encodeURIComponent(String(G[g]))),a.push(j)}}return this.i=a.join("&")};function hs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function $x(a,d){d&&!a.j&&(Qn(a),a.i=null,a.g.forEach(function(f,g){var j=g.toLowerCase();g!=j&&(Zf(this,g),tp(this,j,f))},a)),a.j=d}function Hx(a,d){const f=new gi;if(l.Image){const g=new Image;g.onload=I(Yn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=I(Yn,f,"TestLoadImage: error",!1,d,g),g.onabort=I(Yn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=I(Yn,f,"TestLoadImage: timeout",!1,d,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function Wx(a,d){const f=new gi,g=new AbortController,j=setTimeout(()=>{g.abort(),Yn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(j),V.ok?Yn(f,"TestPingServer: ok",!0,d):Yn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Yn(f,"TestPingServer: error",!1,d)})}function Yn(a,d,f,g,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),g(f)}catch{}}function Gx(){this.g=new Ax}function qx(a,d,f){const g=f||"";try{Qf(a,function(j,V){let G=j;h(j)&&(G=xu(j)),d.push(g+V+"="+encodeURIComponent(G))})}catch(j){throw d.push(g+"type="+encodeURIComponent("_badmap")),j}}function ta(a){this.l=a.Ub||null,this.j=a.eb||!1}b(ta,wu),ta.prototype.g=function(){return new na(this.l,this.j)},ta.prototype.i=function(a){return function(){return a}}({});function na(a,d){ue.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(na,ue),t=na.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ei(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;np(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function np(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?wi(this):Ei(this),this.readyState==3&&np(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,wi(this))},t.Qa=function(a){this.g&&(this.response=a,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ei(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function rp(a){let d="";return M(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Cu(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=rp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ne(a,d,f))}function ze(a){ue.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ze,ue);var Kx=/^https?$/i,Qx=["POST","PUT"];t=ze.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Su.g(),this.v=this.o?Rf(this.o):Rf(Su),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){sp(this,V);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var j in g)f.set(j,g[j]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())f.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Qx,d,void 0))||g||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,G]of f)this.g.setRequestHeader(V,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ap(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){sp(this,V)}};function sp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ip(a),ra(a)}function ip(a){a.A||(a.A=!0,_e(a,"complete"),_e(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,_e(this,"complete"),_e(this,"abort"),ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ra(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?op(this):this.bb())},t.bb=function(){op(this)};function op(a){if(a.h&&typeof o<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)Wt(a.Ea,0,a);else if(_e(a,"readystatechange"),In(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=G===0){var j=String(a.D).match(Yf)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),g=!Kx.test(j?j.toLowerCase():"")}f=g}if(f)_e(a,"complete"),_e(a,"success");else{a.m=6;try{var V=2<In(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",ip(a)}}finally{ra(a)}}}}function ra(a,d){if(a.g){ap(a);const f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||_e(a,"ready");try{f.onreadystatechange=g}catch{}}}function ap(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),bx(d)}};function lp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Yx(a){const d={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=A(a[g]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[j]||[];d[j]=V,V.push(f)}x(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function up(a){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ki("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ki("baseRetryDelayMs",5e3,a),this.cb=ki("retryDelaySeedMs",1e4,a),this.Wa=ki("forwardChannelMaxRetries",2,a),this.wa=ki("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Hf(a&&a.concurrentRequestLimit),this.Da=new Gx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=up.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){bt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=vp(this,null,this.W),ia(this)};function Ru(a){if(cp(a),a.G==3){var d=a.U++,f=Tn(a.I);if(Ne(f,"SID",a.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),Si(a,f),d=new Kn(a,a.j,d),d.L=2,d.v=ea(Tn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=_p(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Xo(d)}yp(a)}function sa(a){a.g&&(Du(a),a.g.cancel(),a.g=null)}function cp(a){sa(a),a.u&&(l.clearTimeout(a.u),a.u=null),oa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ia(a){if(!Wf(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ge||se(),H||(Ge(),H=!0),re.add(d,a),a.B=0}}function Xx(a,d){return Gf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=mi(_(a.Ga,a,d),gp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new Kn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(j.H=V,V=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=hp(this,j,d),f=Tn(this.I),Ne(f,"RID",a),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),Si(this,f),V&&(this.O?d="headers="+encodeURIComponent(String(rp(V)))+"&"+d:this.m&&Cu(f,this.m,V)),Pu(this.h,j),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),j.T=!0,Iu(j,f,null)):Iu(j,f,d),this.G=2}}else this.G==3&&(a?dp(this,a):this.i.length==0||Wf(this.h)||dp(this))};function dp(a,d){var f;d?f=d.l:f=a.U++;const g=Tn(a.I);Ne(g,"SID",a.K),Ne(g,"RID",f),Ne(g,"AID",a.T),Si(a,g),a.m&&a.o&&Cu(g,a.m,a.o),f=new Kn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=hp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Pu(a.h,f),Iu(f,g,d)}function Si(a,d){a.H&&M(a.H,function(f,g){Ne(d,g,f)}),a.l&&Qf({},function(f,g){Ne(d,g,f)})}function hp(a,d,f){f=Math.min(a.i.length,f);var g=a.l?_(a.l.Na,a.l,a):null;e:{var j=a.i;let V=-1;for(;;){const G=["count="+f];V==-1?0<f?(V=j[0].g,G.push("ofs="+V)):V=0:G.push("ofs="+V);let be=!0;for(let ot=0;ot<f;ot++){let Ee=j[ot].g;const mt=j[ot].map;if(Ee-=V,0>Ee)V=Math.max(0,j[ot].g-100),be=!1;else try{qx(mt,G,"req"+Ee+"_")}catch{g&&g(mt)}}if(be){g=G.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function fp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ge||se(),H||(Ge(),H=!0),re.add(d,a),a.v=0}}function ju(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=mi(_(a.Fa,a),gp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,pp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=mi(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),sa(this),pp(this))};function Du(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function pp(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Tn(a.qa);Ne(d,"RID","rpc"),Ne(d,"SID",a.K),Ne(d,"AID",a.T),Ne(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ne(d,"TO",a.ja),Ne(d,"TYPE","xmlhttp"),Si(a,d),a.m&&a.o&&Cu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ea(Tn(d)),f.m=null,f.P=!0,Uf(f,a)}t.Za=function(){this.C!=null&&(this.C=null,sa(this),ju(this),bt(19))};function oa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function mp(a,d){var f=null;if(a.g==d){oa(a),Du(a),a.g=null;var g=2}else if(Nu(a.h,d))f=d.D,qf(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;g=Ko(),_e(g,new Lf(g,f)),ia(a)}else fp(a);else if(j=d.s,j==3||j==0&&0<d.X||!(g==1&&Xx(a,d)||g==2&&ju(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:Vr(a,5);break;case 4:Vr(a,10);break;case 3:Vr(a,6);break;default:Vr(a,2)}}}function gp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Vr(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),g=a.Xa;const j=!g;g=new Dr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Jo(g,"https"),ea(g),j?Hx(g.toString(),f):Wx(g.toString(),f)}else bt(2);a.G=0,a.l&&a.l.sa(d),yp(a),cp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function yp(a){if(a.G=0,a.ka=[],a.l){const d=Kf(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ka,d),D(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function vp(a,d,f){var g=f instanceof Dr?Tn(f):new Dr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zo(g,g.s);else{var j=l.location;g=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var V=new Dr(null);g&&Jo(V,g),d&&(V.g=d),j&&Zo(V,j),f&&(V.l=f),g=V}return f=a.D,d=a.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",a.la),Si(a,g),g}function _p(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ze(new ta({eb:f})):new ze(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xp(){}t=xp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function aa(){}aa.prototype.g=function(a,d){return new Lt(a,d)};function Lt(a,d){ue.call(this),this.g=new up(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new fs(this)}b(Lt,ue),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ru(this.g)},Lt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=xu(a),a=f);d.i.push(new Dx(d.Ya++,a)),d.G==3&&ia(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ru(this.g),delete this.g,Lt.aa.N.call(this)};function wp(a){Eu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(wp,Eu);function Ep(){ku.call(this),this.status=1}b(Ep,ku);function fs(a){this.g=a}b(fs,xp),fs.prototype.ua=function(){_e(this.g,"a")},fs.prototype.ta=function(a){_e(this.g,new wp(a))},fs.prototype.sa=function(a){_e(this.g,new Ep)},fs.prototype.ra=function(){_e(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,o_=function(){return new aa},i_=function(){return Ko()},s_=Rr,Id={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,qa=Qo,Of.COMPLETE="complete",r_=Of,jf.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",ue.prototype.listen=ue.prototype.K,Fi=jf,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,n_=ze}).apply(typeof ba<"u"?ba:typeof self<"u"?self:typeof window<"u"?window:{});const dg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Mh("@firebase/firestore");function ji(){return ns.logLevel}function J(t,...e){if(ns.logLevel<=ye.DEBUG){const n=e.map(Yh);ns.debug(`Firestore (${ui}): ${t}`,...n)}}function Hn(t,...e){if(ns.logLevel<=ye.ERROR){const n=e.map(Yh);ns.error(`Firestore (${ui}): ${t}`,...n)}}function Ys(t,...e){if(ns.logLevel<=ye.WARN){const n=e.map(Yh);ns.warn(`Firestore (${ui}): ${t}`,...n)}}function Yh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: `+t;throw Hn(e),new Error(e)}function Ie(t,e){t||ce()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class z2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U2{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new a_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new xt(e)}}class B2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new B2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new H2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=G2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Xs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new oe(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new et(0,0))}static max(){return new he(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Eo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Eo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Eo{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends Eo{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new oe(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new oe(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Be.fromString(e))}static fromName(e){return new ae(Be.fromString(e).popFirst(5))}static empty(){return new ae(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Be(e.slice()))}}function K2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new kr(s,ae.empty(),e)}function Q2(t){return new kr(t.readTime,t.key,-1)}class kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kr(he.min(),ae.empty(),-1)}static max(){return new kr(he.max(),ae.empty(),-1)}}function Y2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==X2)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Z2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xh.oe=-1;function cu(t){return t==null}function Rl(t){return t===0&&1/t==-1/0}function eI(t){return typeof t=="number"&&Number.isInteger(t)&&!Rl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ci(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Aa(this.root,e,this.comparator,!0)}}class Aa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fg(this.data.getIterator())}getIteratorFrom(e){return new fg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class fg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new ln([])}unionWith(e){let n=new dt(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new c_("Invalid base64 string: "+i):i}}(e);return new ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const tI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=tI.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zh(t){const e=t.mapValue.fields.__previous_value__;return Jh(e)?Zh(e):e}function ko(t){const e=Sr(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class So{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new So("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof So&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na={mapValue:{}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jh(t)?4:sI(t)?9007199254740991:rI(t)?10:11:ce()}function En(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ko(t).isEqual(ko(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Sr(s.timestampValue),l=Sr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return rs(s.bytesValue).isEqual(rs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return He(s.geoPointValue.latitude)===He(i.geoPointValue.latitude)&&He(s.geoPointValue.longitude)===He(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return He(s.integerValue)===He(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=He(s.doubleValue),l=He(i.doubleValue);return o===l?Rl(o)===Rl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Xs(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(hg(o)!==hg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!En(o[c],l[c])))return!1;return!0}(t,e);default:return ce()}}function To(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function Js(t,e){if(t===e)return 0;const n=ss(t),r=ss(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=He(i.integerValue||i.doubleValue),c=He(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return pg(t.timestampValue,e.timestampValue);case 4:return pg(ko(t),ko(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(i,o){const l=rs(i),c=rs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=ke(l[h],c[h]);if(p!==0)return p}return ke(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ke(He(i.latitude),He(o.latitude));return l!==0?l:ke(He(i.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},_=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(c=_.value)===null||c===void 0?void 0:c.arrayValue,P=ke(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:mg(I,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Na.mapValue&&o===Na.mapValue)return 0;if(i===Na.mapValue)return 1;if(o===Na.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const _=ke(c[m],p[m]);if(_!==0)return _;const I=Js(l[c[m]],h[p[m]]);if(I!==0)return I}return ke(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ce()}}function pg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Sr(t),r=Sr(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function mg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Js(n[s],r[s]);if(i)return i}return ke(n.length,r.length)}function Zs(t){return bd(t)}function bd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bd(n.fields[o])}`;return s+"}"}(t.mapValue):ce()}function Ad(t){return!!t&&"integerValue"in t}function ef(t){return!!t&&"arrayValue"in t}function gg(t){return!!t&&"nullValue"in t}function yg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ka(t){return!!t&&"mapValue"in t}function rI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ji(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ji(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ji(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ka(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ji(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ji(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ka(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ka(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ci(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Kt(Ji(this.value))}}function d_(t){const e=[];return ci(t.fields,(n,r)=>{const s=new ut([n]);if(Ka(r)){const i=d_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Et(e,0,he.min(),he.min(),he.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,he.min(),he.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,he.min(),he.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.position=e,this.inclusive=n}}function vg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=Js(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _g(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function iI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{}class Je extends h_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aI(e,n,r):n==="array-contains"?new cI(e,r):n==="in"?new dI(e,r):n==="not-in"?new hI(e,r):n==="array-contains-any"?new fI(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lI(e,r):new uI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Js(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(Js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends h_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kn(e,n)}matches(e){return f_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function f_(t){return t.op==="and"}function p_(t){return oI(t)&&f_(t)}function oI(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Nd(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Zs(t.value);if(p_(t))return t.filters.map(e=>Nd(e)).join(",");{const e=t.filters.map(n=>Nd(n)).join(",");return`${t.op}(${e})`}}function m_(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&m_(o,s.filters[l]),!0):!1}(t,e):void ce()}function g_(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Zs(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(g_).join(" ,")+"}"}(t):"Filter"}class aI extends Je{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class lI extends Je{constructor(e,n){super(e,"in",n),this.keys=y_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uI extends Je{constructor(e,n){super(e,"not-in",n),this.keys=y_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function y_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class cI extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ef(n)&&To(n.arrayValue,this.value)}}class dI extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&To(this.value.arrayValue,n)}}class hI extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!To(this.value.arrayValue,n)}}class fI extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ef(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>To(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function xg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pI(t,e,n,r,s,i,o)}function tf(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),cu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zs(r)).join(",")),e.ue=n}return e.ue}function nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!m_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_g(t.startAt,e.startAt)&&_g(t.endAt,e.endAt)}function Pd(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mI(t,e,n,r,s,i,o,l){return new du(t,e,n,r,s,i,o,l)}function rf(t){return new du(t)}function wg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gI(t){return t.collectionGroup!==null}function Zi(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new dt(ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Dl(i,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new Dl(ut.keyField(),r))}return e.ce}function _n(t){const e=fe(t);return e.le||(e.le=yI(e,Zi(t))),e.le}function yI(t,e){if(t.limitType==="F")return xg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Dl(s.field,i)});const n=t.endAt?new jl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jl(t.startAt.position,t.startAt.inclusive):null;return xg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cd(t,e,n){return new du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hu(t,e){return nf(_n(t),_n(e))&&t.limitType===e.limitType}function v_(t){return`${tf(_n(t))}|lt:${t.limitType}`}function gs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>g_(s)).join(", ")}]`),cu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Zs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Zs(s)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function fu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Zi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=vg(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,Zi(r),s)||r.endAt&&!function(o,l,c){const h=vg(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,Zi(r),s))}(t,e)}function vI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __(t){return(e,n)=>{let r=!1;for(const s of Zi(t)){const i=_I(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _I(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Js(c,h):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Le(ae.comparator);function Wn(){return xI}const x_=new Le(ae.comparator);function zi(...t){let e=x_;for(const n of t)e=e.insert(n.key,n);return e}function w_(t){let e=x_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return eo()}function E_(){return eo()}function eo(){return new di(t=>t.toString(),(t,e)=>t.isEqual(e))}const wI=new Le(ae.comparator),EI=new dt(ae.comparator);function me(...t){let e=EI;for(const n of t)e=e.add(n);return e}const kI=new dt(ke);function SI(){return kI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rl(e)?"-0":e}}function k_(t){return{integerValue:""+t}}function TI(t,e){return eI(e)?k_(e):sf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this._=void 0}}function II(t,e,n){return t instanceof Vl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jh(i)&&(i=Zh(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Io?T_(t,e):t instanceof bo?I_(t,e):function(s,i){const o=S_(s,i),l=Eg(o)+Eg(s.Pe);return Ad(o)&&Ad(s.Pe)?k_(l):sf(s.serializer,l)}(t,e)}function bI(t,e,n){return t instanceof Io?T_(t,e):t instanceof bo?I_(t,e):n}function S_(t,e){return t instanceof Ml?function(r){return Ad(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Vl extends pu{}class Io extends pu{constructor(e){super(),this.elements=e}}function T_(t,e){const n=b_(e);for(const r of t.elements)n.some(s=>En(s,r))||n.push(r);return{arrayValue:{values:n}}}class bo extends pu{constructor(e){super(),this.elements=e}}function I_(t,e){let n=b_(e);for(const r of t.elements)n=n.filter(s=>!En(s,r));return{arrayValue:{values:n}}}class Ml extends pu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Eg(t){return He(t.integerValue||t.doubleValue)}function b_(t){return ef(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Io&&s instanceof Io||r instanceof bo&&s instanceof bo?Xs(r.elements,s.elements,En):r instanceof Ml&&s instanceof Ml?En(r.Pe,s.Pe):r instanceof Vl&&s instanceof Vl}(t.transform,e.transform)}class NI{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mu{}function A_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P_(t.key,Ln.none()):new $o(t.key,t.data,Ln.none());{const n=t.data,r=Kt.empty();let s=new dt(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new us(t.key,r,new ln(s.toArray()),Ln.none())}}function PI(t,e,n){t instanceof $o?function(s,i,o){const l=s.value.clone(),c=Sg(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof us?function(s,i,o){if(!Qa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Sg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(N_(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function to(t,e,n,r){return t instanceof $o?function(i,o,l,c){if(!Qa(i.precondition,o))return l;const h=i.value.clone(),p=Tg(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,o,l,c){if(!Qa(i.precondition,o))return l;const h=Tg(i.fieldTransforms,c,o),p=o.data;return p.setAll(N_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Qa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=S_(r.transform,s||null);i!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,i))}return n||null}function kg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Xs(r,s,(i,o)=>AI(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $o extends mu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends mu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function N_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sg(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,bI(o,l,n[s]))}return r}function Tg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,II(i,o,e))}return r}class P_ extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=to(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=to(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=A_(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(n,r)=>kg(n,r))&&Xs(this.baseMutations,e.baseMutations,(n,r)=>kg(n,r))}}class of{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return wI}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new of(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,xe;function MI(t){switch(t){default:return ce();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function C_(t){if(t===void 0)return Hn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ke.OK:return U.OK;case Ke.CANCELLED:return U.CANCELLED;case Ke.UNKNOWN:return U.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return U.INTERNAL;case Ke.UNAVAILABLE:return U.UNAVAILABLE;case Ke.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ke.NOT_FOUND:return U.NOT_FOUND;case Ke.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ke.ABORTED:return U.ABORTED;case Ke.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ke.DATA_LOSS:return U.DATA_LOSS;default:return ce()}}(xe=Ke||(Ke={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=new Kr([4294967295,4294967295],0);function Ig(t){const e=LI().encode(t),n=new t_;return n.update(e),new Uint8Array(n.digest())}function bg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Kr([n,r],0),new Kr([s,i],0)]}class af{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ui(`Invalid padding: ${n}`);if(r<0)throw new Ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ui(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ui(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Kr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Kr.fromNumber(r)));return s.compare(OI)===1&&(s=new Kr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ig(e),[r,s]=bg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new af(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ig(e),[r,s]=bg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ui extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ho.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gu(he.min(),s,new Le(ke),Wn(),me())}}class Ho{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ho(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class R_{constructor(e,n){this.targetId=e,this.me=n}}class j_{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ag{constructor(){this.fe=0,this.ge=Pg(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ce()}}),new Ho(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Pg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wn(),this.qe=Ng(),this.Qe=new Le(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Pd(i))if(r===0){const o=new ae(i.path);this.Ue(n,o,Et.newNoDocument(o,he.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=rs(r).toUint8Array()}catch(c){if(c instanceof c_)return Ys("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new af(o,s,i)}catch(c){return Ys(c instanceof Ui?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Pd(l.target)){const c=new ae(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Et.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=me();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new gu(e,n,this.Qe,this.ke,r);return this.ke=Wn(),this.qe=Ng(),this.Qe=new Le(ke),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ag,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ag),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ng(){return new Le(ae.comparator)}function Pg(){return new Le(ae.comparator)}const zI={asc:"ASCENDING",desc:"DESCENDING"},UI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BI={and:"AND",or:"OR"};class $I{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rd(t,e){return t.useProto3Json||cu(e)?e:{value:e}}function Ll(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HI(t,e){return Ll(t,e.toTimestamp())}function xn(t){return Ie(!!t),he.fromTimestamp(function(n){const r=Sr(n);return new et(r.seconds,r.nanos)}(t))}function lf(t,e){return jd(t,e).canonicalString()}function jd(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function V_(t){const e=Be.fromString(t);return Ie(z_(e)),e}function Dd(t,e){return lf(t.databaseId,e.path)}function vc(t,e){const n=V_(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(L_(n))}function M_(t,e){return lf(t.databaseId,e)}function WI(t){const e=V_(t);return e.length===4?Be.emptyPath():L_(e)}function Vd(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L_(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cg(t,e,n){return{name:Dd(t,e),fields:n.value.mapValue.fields}}function GI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Ie(p===void 0||typeof p=="string"),ft.fromBase64String(p||"")):(Ie(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ft.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?U.UNKNOWN:C_(h.code);return new oe(p,h.message||"")}(o);n=new j_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vc(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):he.min(),l=new Kt({mapValue:{fields:r.document.fields}}),c=Et.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Ya(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vc(t,r.document),i=r.readTime?xn(r.readTime):he.min(),o=Et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ya([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vc(t,r.document),i=r.removedTargetIds||[];n=new Ya([],i,s,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new VI(s,i),l=r.targetId;n=new R_(l,o)}}return n}function qI(t,e){let n;if(e instanceof $o)n={update:Cg(t,e.key,e.value)};else if(e instanceof P_)n={delete:Dd(t,e.key)};else if(e instanceof us)n={update:Cg(t,e.key,e.data),updateMask:nb(e.fieldMask)};else{if(!(e instanceof RI))return ce();n={verify:Dd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Vl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Io)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ml)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:HI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce()}(t,e.precondition)),n}function KI(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?xn(s.updateTime):xn(i);return o.isEqual(he.min())&&(o=xn(i)),new NI(o,s.transformResults||[])}(n,e))):[]}function QI(t,e){return{documents:[M_(t,e.path)]}}function YI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M_(t,s);const i=function(h){if(h.length!==0)return F_(kn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:ys(_.field),direction:ZI(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Rd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function XI(t){let e=WI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const _=O_(m);return _ instanceof kn&&p_(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(_=>function(b){return new Dl(vs(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(m){let _;return _=typeof m=="object"?m.value:m,cu(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){const _=!!m.before,I=m.values||[];return new jl(I,_)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const _=!m.before,I=m.values||[];return new jl(I,_)}(n.endAt)),mI(e,s,o,i,l,"F",c,h)}function JI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vs(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vs(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vs(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vs(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(vs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>O_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function ZI(t){return zI[t]}function eb(t){return UI[t]}function tb(t){return BI[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return ut.fromServerFormat(t.fieldPath)}function F_(t){return t instanceof Je?function(n){if(n.op==="=="){if(yg(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(gg(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yg(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(gg(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:eb(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>F_(s));return r.length===1?r[0]:{compositeFilter:{op:tb(n.op),filters:r}}}(t):ce()}function nb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,s,i=he.min(),o=he.min(),l=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.ct=e}}function sb(t){const e=XI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.un=new ob}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(kr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class ob{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new dt(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ei(0)}static kn(){return new ei(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.changes=new di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&to(r.mutation,s,ln.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=zi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Wn();const o=eo(),l=function(){return eo()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof us)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),to(p.mutation,h,p.mutation.getFieldMask(),et.now())):o.set(h.key,ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new lb(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=eo();let s=new Le((o,l)=>o-l),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||ln.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||me()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=E_();p.forEach(_=>{if(!i.has(_)){const I=A_(n.get(_),r.get(_));I!==null&&m.set(_,I),i=i.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Hr());let l=-1,c=i;return o.next(h=>z.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,me())).next(p=>({batchId:l,changes:w_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=zi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=zi();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,c=>{const h=function(m,_){return new du(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Et.newInvalidDocument(p)))});let l=zi();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&to(p.mutation,h,ln.empty(),et.now()),fu(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:sb(s.bundledQuery),readTime:xn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.overlays=new Le(ae.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new ae(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Hr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Hr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DI(n,r));let i=this.Ir.get(n);i===void 0&&(i=me(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this.Tr=new dt(nt.Er),this.dr=new dt(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new Be([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new Be([])),r=new nt(n,e),s=new nt(n,e+1);let i=me();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new dt(nt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jI(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(ke);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const o=new nt(new ae(i),0);let l=new dt(ke);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.Mr=e,this.docs=function(){return new Le(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wn();const o=n.path,l=new ae(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Y2(Q2(p),r)<=0||(s.has(p.key)||fu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ce()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mb(this)}getSize(e){return z.resolve(this.size)}}class mb extends ab{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.persistence=e,this.Nr=new di(n=>tf(n),nf),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uf,this.targetCount=0,this.kr=ei.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ei(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xh(0),this.Kr=!1,this.Kr=!0,this.$r=new hb,this.referenceDelegate=e(this),this.Ur=new gb(this),this.indexManager=new ib,this.remoteDocumentCache=function(s){return new pb(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rb(n),this.Gr=new cb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new db,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fb(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new vb(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class vb extends J2{constructor(e){super(),this.currentSequenceNumber=e}}class cf{constructor(e){this.persistence=e,this.Jr=new uf,this.Yr=null}static Zr(e){return new cf(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=ae.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new df(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xk()?8:Z2(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _b;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ji()<=ye.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(ji()<=ye.DEBUG&&J("QueryEngine","Query:",gs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ji()<=ye.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):z.resolve())}Yi(e,n){if(wg(n))return z.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Cd(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,Cd(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return wg(n)||s.isEqual(he.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(ji()<=ye.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gs(n)),this.rs(e,o,n,K2(s,-1)).next(l=>l))})}ts(e,n){let r=new dt(__(e));return n.forEach((s,i)=>{fu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ji()<=ye.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",gs(n)),this.Ji.getDocumentsMatchingQuery(e,n,kr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Le(ke),this._s=new di(i=>tf(i),nf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ub(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Eb(t,e,n,r){return new wb(t,e,n,r)}async function U_(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=me();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function kb(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,_=m.keys();let I=z.resolve();return _.forEach(b=>{I=I.next(()=>p.getEntry(c,b)).next(P=>{const D=h.docVersions.get(b);Ie(D!==null),P.version.compareTo(D)<0&&(m.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),p.addEntry(P)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=me();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function B_(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Sb(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const _=s.get(m);if(!_)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(ft.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(P,D,k){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,I,p)&&l.push(n.Ur.updateTargetData(i,I))});let c=Wn(),h=me();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(Tb(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(he.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function Tb(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):J("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function Ib(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bb(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Md(t,e,n){const r=fe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Bo(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Rg(t,e,n){const r=fe(t);let s=he.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=fe(c),_=m._s.get(p);return _!==void 0?z.resolve(m.os.get(_)):m.Ur.getTargetData(h,p)}(r,o,_n(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:me())).next(l=>(Ab(r,vI(e),l),{documents:l,Ts:i})))}function Ab(t,e,n){let r=t.us.get(e)||he.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class jg{constructor(){this.activeTargetIds=SI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nb{constructor(){this.so=new jg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=null;function _c(){return Pa===null?Pa=function(){return 268435456+Math.round(2147483648*Math.random())}():Pa++,"0x"+Pa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class jb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=_c(),c=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(J("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Ys("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ui}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Cb[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=_c();return new Promise((o,l)=>{const c=new n_;c.setWithCredentials(!0),c.listenOnce(r_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qa.NO_ERROR:const p=c.getResponseJson();J(_t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case qa.TIMEOUT:J(_t,`RPC '${e}' ${i} timed out`),l(new oe(U.DEADLINE_EXCEEDED,"Request time out"));break;case qa.HTTP_ERROR:const m=c.getStatus();if(J(_t,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const b=function(D){const k=D.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(k)>=0?k:U.UNKNOWN}(I.status);l(new oe(b,I.message))}else l(new oe(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new oe(U.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{J(_t,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);J(_t,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=_c(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=o_(),l=i_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");J(_t,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let _=!1,I=!1;const b=new Rb({Io:D=>{I?J(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(_||(J(_t,`Opening RPC '${e}' stream ${s} transport.`),m.open(),_=!0),J(_t,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},To:()=>m.close()}),P=(D,k,w)=>{D.listen(k,T=>{try{w(T)}catch(N){setTimeout(()=>{throw N},0)}})};return P(m,Fi.EventType.OPEN,()=>{I||(J(_t,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),P(m,Fi.EventType.CLOSE,()=>{I||(I=!0,J(_t,`RPC '${e}' stream ${s} transport closed`),b.So())}),P(m,Fi.EventType.ERROR,D=>{I||(I=!0,Ys(_t,`RPC '${e}' stream ${s} transport errored:`,D),b.So(new oe(U.UNAVAILABLE,"The operation could not be completed")))}),P(m,Fi.EventType.MESSAGE,D=>{var k;if(!I){const w=D.data[0];Ie(!!w);const T=w,N=T.error||((k=T[0])===null||k===void 0?void 0:k.error);if(N){J(_t,`RPC '${e}' stream ${s} received error:`,N);const L=N.status;let M=function(E){const S=Ke[E];if(S!==void 0)return C_(S)}(L),x=N.message;M===void 0&&(M=U.INTERNAL,x="Unknown error status: "+L+" with message "+N.message),I=!0,b.So(new oe(M,x)),m.close()}else J(_t,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),P(l,s_.STAT_EVENT,D=>{D.stat===Id.PROXY?J(_t,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Id.NOPROXY&&J(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function xc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){return new $I(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new oe(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Db extends H_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=GI(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?xn(o.readTime):he.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Vd(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Pd(c)?{documents:QI(i,c)}:{query:YI(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=D_(i,o.resumeToken);const h=Rd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=Ll(i,o.snapshotVersion.toTimestamp());const h=Rd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=JI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Vd(this.serializer),n.removeTarget=e,this.a_(n)}}class Vb extends H_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KI(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Vd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new oe(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,jd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,jd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Lb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hn(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{cs(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=fe(c);h.L_.add(4),await Wo(h),h.q_.set("Unknown"),h.L_.delete(4),await vu(h)}(this))})}),this.q_=new Lb(r,s)}}async function vu(t){if(cs(t))for(const e of t.B_)await e(!0)}async function Wo(t){for(const e of t.B_)await e(!1)}function W_(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mf(n)?pf(n):hi(n).r_()&&ff(n,e))}function hf(t,e){const n=fe(t),r=hi(n);n.N_.delete(e),r.r_()&&G_(n,e),n.N_.size===0&&(r.r_()?r.o_():cs(n)&&n.q_.set("Unknown"))}function ff(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hi(t).A_(e)}function G_(t,e){t.Q_.xe(e),hi(t).R_(e)}function pf(t){t.Q_=new FI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),hi(t).start(),t.q_.v_()}function mf(t){return cs(t)&&!hi(t).n_()&&t.N_.size>0}function cs(t){return fe(t).L_.size===0}function q_(t){t.Q_=void 0}async function Fb(t){t.q_.set("Online")}async function zb(t){t.N_.forEach((e,n)=>{ff(t,e)})}async function Ub(t,e){q_(t),mf(t)?(t.q_.M_(e),pf(t)):t.q_.set("Unknown")}async function Bb(t,e,n){if(t.q_.set("Online"),e instanceof j_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ol(t,r)}else if(e instanceof Ya?t.Q_.Ke(e):e instanceof R_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const r=await B_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(ft.EMPTY_BYTE_STRING,p.snapshotVersion)),G_(i,c);const m=new lr(p.target,c,h,p.sequenceNumber);ff(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Ol(t,r)}}async function Ol(t,e,n){if(!Bo(e))throw e;t.L_.add(1),await Wo(t),t.q_.set("Offline"),n||(n=()=>B_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vu(t)})}function K_(t,e){return e().catch(n=>Ol(t,n,e))}async function _u(t){const e=fe(t),n=Tr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$b(e);)try{const s=await Ib(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Hb(e,s)}catch(s){await Ol(e,s)}Q_(e)&&Y_(e)}function $b(t){return cs(t)&&t.O_.length<10}function Hb(t,e){t.O_.push(e);const n=Tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Q_(t){return cs(t)&&!Tr(t).n_()&&t.O_.length>0}function Y_(t){Tr(t).start()}async function Wb(t){Tr(t).p_()}async function Gb(t){const e=Tr(t);for(const n of t.O_)e.m_(n.mutations)}async function qb(t,e,n){const r=t.O_.shift(),s=of.from(r,e,n);await K_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _u(t)}async function Kb(t,e){e&&Tr(t).V_&&await async function(r,s){if(function(o){return MI(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Tr(r).s_(),await K_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await _u(r)}}(t,e),Q_(t)&&Y_(t)}async function Vg(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=cs(n);n.L_.add(3),await Wo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vu(n)}async function Qb(t,e){const n=fe(t);e?(n.L_.delete(2),await vu(n)):e||(n.L_.add(2),await Wo(n),n.q_.set("Unknown"))}function hi(t){return t.K_||(t.K_=function(n,r,s){const i=fe(n);return i.w_(),new Db(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Fb.bind(null,t),Ro:zb.bind(null,t),mo:Ub.bind(null,t),d_:Bb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mf(t)?pf(t):t.q_.set("Unknown")):(await t.K_.stop(),q_(t))})),t.K_}function Tr(t){return t.U_||(t.U_=function(n,r,s){const i=fe(n);return i.w_(),new Vb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Wb.bind(null,t),mo:Kb.bind(null,t),f_:Gb.bind(null,t),g_:qb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _u(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new gf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yf(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),Bo(t))return new oe(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=zi(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new zs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.W_=new Le(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ti{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ti(e,n,zs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Xb{constructor(){this.queries=Lg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=Lg(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new oe(U.ABORTED,"Firestore shutting down"))}}function Lg(){return new di(t=>v_(t),hu)}async function Jb(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Yb,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=yf(o,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&vf(n)}async function Zb(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eA(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&vf(n)}function tA(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function vf(t){t.Y_.forEach(e=>{e.next()})}var Ld,Og;(Og=Ld||(Ld={})).ea="default",Og.Cache="cache";class nA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ti(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ti.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.key=e}}class J_{constructor(e){this.key=e}}class rA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=__(e),this.Ra=new zs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Mg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const _=s.get(p),I=fu(this.query,m)?m:null,b=!!_&&this.mutatedKeys.has(_.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;_&&I?_.data.isEqual(I.data)?b!==P&&(r.track({type:3,doc:I}),D=!0):this.ga(_,I)||(r.track({type:2,doc:I}),D=!0,(c&&this.Aa(I,c)>0||h&&this.Aa(I,h)<0)&&(l=!0)):!_&&I?(r.track({type:0,doc:I}),D=!0):_&&!I&&(r.track({type:1,doc:_}),D=!0,(c||h)&&(l=!0)),D&&(I?(o=o.add(I),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,b){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return P(I)-P(b)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new ti(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new J_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new X_(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ti.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iA{constructor(e){this.key=e,this.va=!1}}class oA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new di(l=>v_(l),hu),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(ae.comparator),this.Na=new Map,this.La=new uf,this.Ba={},this.ka=new Map,this.qa=ei.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aA(t,e,n=!0){const r=sx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Z_(r,e,n,!0),s}async function lA(t,e){const n=sx(t);await Z_(n,e,!0,!1)}async function Z_(t,e,n,r){const s=await bb(t.localStore,_n(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await uA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&W_(t.remoteStore,s),l}async function uA(t,e,n,r,s){t.Ka=(m,_,I)=>async function(P,D,k,w){let T=D.view.ma(k);T.ns&&(T=await Rg(P.localStore,D.query,!1).then(({documents:x})=>D.view.ma(x,T)));const N=w&&w.targetChanges.get(D.targetId),L=w&&w.targetMismatches.get(D.targetId)!=null,M=D.view.applyChanges(T,P.isPrimaryClient,N,L);return zg(P,D.targetId,M.wa),M.snapshot}(t,m,_,I);const i=await Rg(t.localStore,e,!0),o=new rA(e,i.Ts),l=o.ma(i.documents),c=Ho.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);zg(t,n,h.wa);const p=new sA(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function cA(t,e,n){const r=fe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!hu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Md(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hf(r.remoteStore,s.targetId),Od(r,s.targetId)}).catch(Uo)):(Od(r,s.targetId),await Md(r.localStore,s.targetId,!0))}async function dA(t,e){const n=fe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hf(n.remoteStore,r.targetId))}async function hA(t,e,n){const r=_A(t);try{const s=await function(o,l){const c=fe(o),h=et.now(),p=l.reduce((I,b)=>I.add(b.key),me());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=Wn(),P=me();return c.cs.getEntries(I,p).next(D=>{b=D,b.forEach((k,w)=>{w.isValidDocument()||(P=P.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,b)).next(D=>{m=D;const k=[];for(const w of l){const T=CI(w,m.get(w.key).overlayedDocument);T!=null&&k.push(new us(w.key,T,d_(T.value.mapValue),Ln.exists(!0)))}return c.mutationQueue.addMutationBatch(I,h,k,l)}).next(D=>{_=D;const k=D.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(I,D.batchId,k)})}).then(()=>({batchId:_.batchId,changes:w_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Le(ke)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Go(r,s.changes),await _u(r.remoteStore)}catch(s){const i=yf(s,"Failed to persist write");n.reject(i)}}async function ex(t,e){const n=fe(t);try{const r=await Sb(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ie(o.va):s.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await Go(n,r,e)}catch(r){await Uo(r)}}function Fg(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const _ of m.j_)_.Z_(l)&&(h=!0)}),h&&vf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fA(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Le(ae.comparator);o=o.insert(i,Et.newNoDocument(i,he.min()));const l=me().add(i),c=new gu(he.min(),new Map,new Le(ke),o,l);await ex(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),_f(r)}else await Md(r.localStore,e,!1).then(()=>Od(r,e,n)).catch(Uo)}async function pA(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await kb(n.localStore,e);nx(n,r,null),tx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Go(n,s)}catch(s){await Uo(s)}}async function mA(t,e,n){const r=fe(t);try{const s=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Ie(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);nx(r,e,n),tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Go(r,s)}catch(s){await Uo(s)}}function tx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nx(t,e,n){const r=fe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Od(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||rx(t,r)})}function rx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(hf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_f(t))}function zg(t,e,n){for(const r of n)r instanceof X_?(t.La.addReference(r.key,e),gA(t,r)):r instanceof J_?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||rx(t,r.key)):ce()}function gA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),_f(t))}function _f(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new iA(n)),t.Oa=t.Oa.insert(n,r),W_(t.remoteStore,new lr(_n(rf(n.path)),r,"TargetPurposeLimboResolution",Xh.oe))}}async function Go(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=df.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=fe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(h,_=>z.forEach(_.$i,I=>p.persistence.referenceDelegate.addReference(m,_.targetId,I)).next(()=>z.forEach(_.Ui,I=>p.persistence.referenceDelegate.removeReference(m,_.targetId,I)))))}catch(m){if(!Bo(m))throw m;J("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const I=p.os.get(_),b=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(_,P)}}}(r.localStore,i))}async function yA(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await U_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new oe(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Go(n,r.hs)}}function vA(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let s=me();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function sx(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fA.bind(null,e),e.Ca.d_=eA.bind(null,e.eventManager),e.Ca.$a=tA.bind(null,e.eventManager),e}function _A(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mA.bind(null,e),e}class Fl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Eb(this.persistence,new xb,e.initialUser,this.serializer)}Ga(e){return new yb(cf.Zr,this.serializer)}Wa(e){return new Nb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fl.provider={build:()=>new Fl};class Fd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yA.bind(null,this.syncEngine),await Qb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xb}()}createDatastore(e){const n=yu(e.databaseInfo.databaseId),r=function(i){return new jb(i)}(e.databaseInfo);return function(i,o,l,c){return new Mb(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Ob(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Fg(this.syncEngine,n,0),function(){return Dg.D()?new Dg:new Pb}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new oA(s,i,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);J("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Wo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fd.provider={build:()=>new Fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=xt.UNAUTHENTICATED,this.clientId=l_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wc(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await U_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ug(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EA(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Vg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Vg(e.remoteStore,s)),t._onlineComponents=e}async function EA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await wc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ys("Error using user provided cache. Falling back to memory cache: "+n),await wc(t,new Fl)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await wc(t,new Fl);return t._offlineComponents}async function ix(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Ug(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Ug(t,new Fd))),t._onlineComponents}function kA(t){return ix(t).then(e=>e.syncEngine)}async function SA(t){const e=await ix(t),n=e.eventManager;return n.onListen=aA.bind(null,e.syncEngine),n.onUnlisten=cA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dA.bind(null,e.syncEngine),n}function TA(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new xA({next:_=>{p.Za(),o.enqueueAndForget(()=>Zb(i,m));const I=_.docs.has(l);!I&&_.fromCache?h.reject(new oe(U.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&c&&c.source==="server"?h.reject(new oe(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new nA(rf(l.path),p,{includeMetadataChanges:!0,_a:!0});return Jb(i,m)}(await SA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e,n){if(!n)throw new oe(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bA(t,e,n,r){if(e===!0&&r===!0)throw new oe(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $g(t){if(!ae.isDocumentKey(t))throw new oe(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function Ao(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xf(t);throw new oe(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ox((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new oe(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new oe(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new oe(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F2;switch(r.type){case"firstParty":return new $2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Bg.get(n);r&&(J("ComponentProvider","Removing Datastore"),Bg.delete(n),r.terminate())}(this),Promise.resolve()}}function AA(t,e,n,r={}){var s;const i=(t=Ao(t,wf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=xt.MOCK_USER;else{l=fk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new oe(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new xt(h)}t._authCredentials=new z2(new a_(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ef(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class No extends Ef{constructor(e,n,r){super(e,n,rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ae(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function Wg(t,e,...n){if(t=en(t),arguments.length===1&&(e=l_.newId()),IA("doc","path",e),t instanceof wf){const r=Be.fromString(e,...n);return $g(r),new Xt(t,null,new ae(r))}{if(!(t instanceof Xt||t instanceof No))throw new oe(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return $g(r),new Xt(t.firestore,t instanceof No?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $_(this,"async_queue_retry"),this.Vu=()=>{const r=xc();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Bo(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Hn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=gf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class kf extends wf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Gg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gg(e),this._firestoreClient=void 0,await e}}}function NA(t,e){const n=typeof t=="object"?t:wv(),r=typeof t=="string"?t:"(default)",s=Oh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dk("firestore");i&&AA(s,...i)}return s}function ax(t){if(t._terminated)throw new oe(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PA(t),t._firestoreClient}function PA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new nI(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,ox(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new wA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni(ft.fromBase64String(e))}catch(n){throw new oe(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ni(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=/^__.*__$/;class RA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new $o(e,this.data,n,this.fieldTransforms)}}function ux(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class bf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ux(this.Cu)&&CA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yu(e)}Qu(e,n,r,s=!1){return new bf({Cu:e,methodName:n,qu:r,path:ut.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DA(t){const e=t._freezeSettings(),n=yu(t._databaseId);return new jA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VA(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);fx("Data must be an object, but it was:",o,r);const l=dx(r,o);let c,h;if(i.merge)c=new ln(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const _=MA(e,m,n);if(!o.contains(_))throw new oe(U.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);OA(p,_)||p.push(_)}c=new ln(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new RA(new Kt(l),c,h)}function cx(t,e){if(hx(t=en(t)))return fx("Unsupported field value:",e,t),dx(t,e);if(t instanceof lx)return function(r,s){if(!ux(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=cx(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:Ll(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ll(s.serializer,i)}}if(r instanceof Tf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ni)return{bytesValue:D_(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof If)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return sf(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${xf(r)}`)}(t,e)}function dx(t,e){const n={};return u_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(r,s)=>{const i=cx(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Tf||t instanceof ni||t instanceof Xt||t instanceof lx||t instanceof If)}function fx(t,e,n){if(!hx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=xf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function MA(t,e,n){if((e=en(e))instanceof Sf)return e._internalPath;if(typeof e=="string")return px(t,e);throw zl("Field path arguments must be of type string or ",t,!1,void 0,n)}const LA=new RegExp("[~\\*/\\[\\]]");function px(t,e,n){if(e.search(LA)>=0)throw zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sf(...e.split("."))._internalPath}catch{throw zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new oe(U.INVALID_ARGUMENT,l+t+c)}function OA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FA extends mx{data(){return super.data()}}function gx(t,e){return typeof e=="string"?px(t,e):e instanceof Sf?e._internalPath:e._delegate._internalPath}class zA{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ci(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>He(o.doubleValue));return new If(i)}convertGeoPoint(e){return new Tf(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ko(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Ie(z_(r));const s=new So(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yx extends mx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $A(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $A extends yx{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){t=Ao(t,Xt);const e=Ao(t.firestore,kf);return TA(ax(e),t._key).then(n=>KA(e,t,n))}class WA extends zA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function GA(t,e,n){t=Ao(t,Xt);const r=Ao(t.firestore,kf),s=UA(t.converter,e,n);return qA(r,[VA(DA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ln.none())])}function qA(t,e){return function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget(async()=>hA(await kA(r),s,i)),i.promise}(ax(t),e)}function KA(t,e,n){const r=n.docs.get(e._key),s=new WA(t);return new yx(t,s,e._key,r,new BA(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ui=s})(ai),Ks(new es("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new kf(new U2(r.getProvider("auth-internal")),new W2(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new oe(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),_r(dg,"4.7.3",e),_r(dg,"4.7.3","esm2017")})();const QA={apiKey:"AIzaSyDq3lmHDACIejkIMshrYk5cd8nF5zGnA_A",authDomain:"pokerole-system-game.firebaseapp.com",projectId:"pokerole-system-game",storageBucket:"pokerole-system-game.firebasestorage.app",messagingSenderId:"1003513148425",appId:"1:1003513148425:web:2fb5b9ce999637c3c674d8",measurementId:"G-K1V0DY6Z5G"},vx=xv(QA),Ec=L2(vx),qg=NA(vx),_x=$.createContext(void 0),YA=({children:t})=>{const[e,n]=$.useState(null),[r,s]=$.useState(!0),[i,o]=$.useState(null);$.useEffect(()=>{const p=TT(Ec,m=>{n(m),s(!1)});return()=>p()},[]);const l=()=>o(null),c=async()=>{o(null);const p=new Nn;try{await GT(Ec,p)}catch(m){console.error("Error signing in with Google",m);const _=m;if(_.code==="auth/unauthorized-domain"){let I=window.location.hostname;I||(I=window.location.host),I||(I=window.location.origin),o(` Dominio Non Autorizzato: "${I||"Sconosciuto"}"

Devi autorizzare questo dominio su Firebase:
1. Vai su Firebase Console -> Authentication -> Settings -> Authorized Domains
2. Aggiungi il dominio: ${I||"localhost"}
3. Ricarica la pagina.`)}else _.code==="auth/popup-closed-by-user"?o("Login annullato dall'utente."):_.code==="auth/popup-blocked"?o("Popup bloccato. Per favore consenti i popup per questo sito nelle impostazioni del browser."):_.code==="auth/cancelled-popup-request"||o(`Login Fallito: ${_.message}`)}},h=async()=>{try{await IT(Ec),o(null)}catch(p){console.error("Error signing out",p),o(p.message)}};return u.jsx(_x.Provider,{value:{user:e,loading:r,signInWithGoogle:c,logout:h,error:i,clearError:l},children:t})},xx=()=>{const t=$.useContext(_x);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},XA=({region:t})=>{const e={width:120,height:120,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};switch(t){case"National":return u.jsx(OE,{...e});case"Kanto":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M2 17h20L19 9H5L2 17Z"}),u.jsx("path",{d:"M6 9V5h3v4"}),u.jsx("path",{d:"M15 9V4h3v5"}),u.jsx("path",{d:"M4 17v4"}),u.jsx("path",{d:"M20 17v4"}),u.jsx("path",{d:"M2 21h20"}),u.jsx("path",{d:"M9 13h6"})]});case"Johto":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2l-8 4h16l-8-4z"}),u.jsx("path",{d:"M4 6v4h16V6"}),u.jsx("path",{d:"M2 14l2-4h16l2 4H2z"}),u.jsx("path",{d:"M6 14v6h12v-6"}),u.jsx("path",{d:"M12 14v6"})]});case"Hoenn":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2c0 0-3 3-3 8v6c0 1.5 1 3 3 3s3-1.5 3-3v-6c0-5-3-8-3-8z"}),u.jsx("path",{d:"M9 16c-3 0-5 3-5 5h16c0-2-2-5-5-5"}),u.jsx("path",{d:"M12 6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})]});case"Sinnoh":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2L2 22h20L12 2z"}),u.jsx("path",{d:"M12 2l4 10-4 4-4-4 4-10z"}),u.jsx("path",{d:"M8 22l4-8 4 8"})]});case"Unova":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M4 21V9"}),u.jsx("path",{d:"M20 21V9"}),u.jsx("path",{d:"M4 9c8 6 8 6 16 0"}),u.jsx("path",{d:"M2 21h20"}),u.jsx("path",{d:"M7 12l2 2"}),u.jsx("path",{d:"M17 12l-2 2"})]});case"Kalos":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 2L4 22h16L12 2z"}),u.jsx("path",{d:"M12 2v20"}),u.jsx("path",{d:"M8 12h8"}),u.jsx("path",{d:"M6 17h12"}),u.jsx("path",{d:"M10 7h4"})]});case"Alola":return u.jsxs("svg",{...e,children:[u.jsx("circle",{cx:"18",cy:"6",r:"4"}),u.jsx("path",{d:"M12 22s-6-8-6-14c0-2 2-3 4-3"}),u.jsx("path",{d:"M12 22s6-8 6-14c0-2-2-3-4-3"}),u.jsx("path",{d:"M12 22v-8"})]});case"Galar":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M4 22V8l4-4 4 4 4-4 4 4v14H4z"}),u.jsx("path",{d:"M12 8v14"}),u.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),u.jsx("path",{d:"M12 4v4"})]});case"Paldea":return u.jsxs("svg",{...e,children:[u.jsx("path",{d:"M12 4l-8 6v12h16v-12z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"}),u.jsx("path",{d:"M12 9v4"}),u.jsx("path",{d:"M12 13l3 2"}),u.jsx("path",{d:"M2 22h20"})]});default:return u.jsx(WE,{...e})}},zd=t=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[u.jsx("path",{d:"M5 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v18a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V3z"}),u.jsx("path",{d:"M5 9h14"}),u.jsx("circle",{cx:"9",cy:"5",r:"2",fill:"currentColor"}),u.jsx("path",{d:"M16 4h1"}),u.jsx("path",{d:"M16 6h1"}),u.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),u.jsx("path",{d:"M8 20h2"}),u.jsx("path",{d:"M14 20h2"})]}),Ud=()=>u.jsxs("svg",{viewBox:"0 0 24 24",className:"w-full h-full text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M2 12h7"}),u.jsx("path",{d:"M15 12h7"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"})]}),JA=["Bug","Dark","Dragon","Electric","Fairy","Fighting","Fire","Flying","Ghost","Grass","Ground","Ice","Normal","Poison","Psychic","Rock","Steel","Water"],Fr=["Starter","Beginner","Amateur","Ace","Pro","Master","Champion"],ZA=["Neutral","Burn","Freeze","Paralysis","Poison","Bad Poison","Sleep","Confused","Infatuated","Fainted"],eN={Bug:{en:"Bug",it:"Coleottero",es:"Bicho",de:"Kfer",fr:"Insecte"},Dark:{en:"Dark",it:"Buio",es:"Siniestro",de:"Unlicht",fr:"Tnbres"},Dragon:{en:"Dragon",it:"Drago",es:"Dragn",de:"Drache",fr:"Dragon"},Electric:{en:"Electric",it:"Elettro",es:"Elctrico",de:"Elektro",fr:"lectrik"},Fairy:{en:"Fairy",it:"Folletto",es:"Hada",de:"Fee",fr:"Fe"},Fighting:{en:"Fighting",it:"Lotta",es:"Lucha",de:"Kampf",fr:"Combat"},Fire:{en:"Fire",it:"Fuoco",es:"Fuego",de:"Feuer",fr:"Feu"},Flying:{en:"Flying",it:"Volante",es:"Volador",de:"Flug",fr:"Vol"},Ghost:{en:"Ghost",it:"Spettro",es:"Fantasma",de:"Geist",fr:"Spectre"},Grass:{en:"Grass",it:"Erba",es:"Planta",de:"Pflanze",fr:"Plante"},Ground:{en:"Ground",it:"Terra",es:"Tierra",de:"Boden",fr:"Sol"},Ice:{en:"Ice",it:"Ghiaccio",es:"Hielo",de:"Eis",fr:"Glace"},Normal:{en:"Normal",it:"Normale",es:"Normal",de:"Normal",fr:"Normal"},Poison:{en:"Poison",it:"Veleno",es:"Veneno",de:"Gift",fr:"Poison"},Psychic:{en:"Psychic",it:"Psico",es:"Psquico",de:"Psycho",fr:"Psy"},Rock:{en:"Rock",it:"Roccia",es:"Roca",de:"Gestein",fr:"Roche"},Steel:{en:"Steel",it:"Acciaio",es:"Acero",de:"Stahl",fr:"Acier"},Water:{en:"Water",it:"Acqua",es:"Agua",de:"Wasser",fr:"Eau"}},tN={Starter:{en:"Starter",it:"Base",es:"Inicial",de:"Starter",fr:"Dpart"},Beginner:{en:"Beginner",it:"Principiante",es:"Principiante",de:"Anfnger",fr:"Dbutant"},Amateur:{en:"Amateur",it:"Dilettante",es:"Aficionado",de:"Amateur",fr:"Amateur"},Ace:{en:"Ace",it:"Asso",es:"As",de:"Ass",fr:"As"},Pro:{en:"Pro",it:"Pro",es:"Pro",de:"Profi",fr:"Pro"},Master:{en:"Master",it:"Maestro",es:"Maestro",de:"Meister",fr:"Matre"},Champion:{en:"Champion",it:"Campione",es:"Campen",de:"Champ",fr:"Champion"}},nN={Overgrow:{en:"Overgrow",it:"Erbaiuto",es:"Espesura",de:"Notdnger",fr:"Engrais"},Blaze:{en:"Blaze",it:"Aiutofuoco",es:"Mar Llamas",de:"Grobrand",fr:"Brasier"},Torrent:{en:"Torrent",it:"Acquaiuto",es:"Torrente",de:"Sturzbach",fr:"Torrent"},"Shield Dust":{en:"Shield Dust",it:"Polvoscudo",es:"Polvo Escudo",de:"Puderabwehr",fr:"cran Poudre"},"Shed Skin":{en:"Shed Skin",it:"Muta",es:"Mudar",de:"Hutung",fr:"Mue"},"Compound Eyes":{en:"Compound Eyes",it:"Insettocchi",es:"Ojo Compuesto",de:"Facettenauge",fr:"Oeil Compos"},Swarm:{en:"Swarm",it:"Aiutinsetto",es:"Enjambre",de:"Hexaplaga",fr:"Essaim"},"Keen Eye":{en:"Keen Eye",it:"Sguardofermo",es:"Vista Lince",de:"Adlerauge",fr:"Regard Vif"},"Run Away":{en:"Run Away",it:"Fugafacile",es:"Fuga",de:"Angsthase",fr:"Fuite"},Intimidate:{en:"Intimidate",it:"Prepotenza",es:"Intimidacin",de:"Bedroher",fr:"Intimidation"},Static:{en:"Static",it:"Statico",es:"Elec. Esttica",de:"Statik",fr:"Statik"},"Sand Veil":{en:"Sand Veil",it:"Sabbiavelo",es:"Velo Arena",de:"Sandschleier",fr:"Voile Sable"},"Poison Point":{en:"Poison Point",it:"Velenopunto",es:"Punto Txico",de:"Giftdorn",fr:"Point Poison"},"Cute Charm":{en:"Cute Charm",it:"Incantevole",es:"Gran Encanto",de:"Charmebolzen",fr:"Joli Sourire"},"Flash Fire":{en:"Flash Fire",it:"Fuocardore",es:"Absorbe Fuego",de:"Feuerfnger",fr:"Torche"},Pressure:{en:"Pressure",it:"Pressione",es:"Presin",de:"Erzwinger",fr:"Pression"},Levitate:{en:"Levitate",it:"Levitazione",es:"Levitacin",de:"Schwebe",fr:"Lvitation"},Synchronize:{en:"Synchronize",it:"Sincronismo",es:"Sincrona",de:"Synchro",fr:"Synchro"},Guts:{en:"Guts",it:"Dentistretti",es:"Agallas",de:"Adrenalin",fr:"Cran"},"Huge Power":{en:"Huge Power",it:"Macroforza",es:"Potencia",de:"Kraftkoloss",fr:"Coloforce"},Chlorophyll:{en:"Chlorophyll",it:"Clorofilla",es:"Clorofila",de:"Chlorophyll",fr:"Chlorophylle"},"Swift Swim":{en:"Swift Swim",it:"Nuotovelox",es:"Nado Rpido",de:"Wassertempo",fr:"Glissade"},"Solar Power":{en:"Solar Power",it:"Solarpotere",es:"Poder Solar",de:"Solarkraft",fr:"Force Soleil"},"Inner Focus":{en:"Inner Focus",it:"Fuocodentro",es:"Foco Interno",de:"Konzentrator",fr:"Attention"},Stench:{en:"Stench",it:"Tanfo",es:"Hedor",de:"Duftnote",fr:"Puanteur"},"Effect Spore":{en:"Effect Spore",it:"Spargispora",es:"Efec. Espora",de:"Sporenwirt",fr:"Pose Spore"},Damp:{en:"Damp",it:"Umidit",es:"Humedad",de:"Feuchtigkeit",fr:"Moiteur"},Limber:{en:"Limber",it:"Scioltezza",es:"Flexibilidad",de:"Flexibilitt",fr:"chauffement"},"Rock Head":{en:"Rock Head",it:"Testadura",es:"Cabeza Roca",de:"Steinhaupt",fr:"Tte de Roc"},Insomnia:{en:"Insomnia",it:"Insonnia",es:"Insomnio",de:"Insomnia",fr:"Insomnia"},Oblivious:{en:"Oblivious",it:"Indifferenza",es:"Despiste",de:"Dsigkeit",fr:"Bent"},"Magnet Pull":{en:"Magnet Pull",it:"Magnetismo",es:"Imn",de:"Magnetfalle",fr:"Magnpige"},"Early Bird":{en:"Early Bird",it:"Sveglialampo",es:"Madrugar",de:"Frhwecker",fr:"Matinal"},Hydration:{en:"Hydration",it:"Idratazione",es:"Hidratacin",de:"Hydration",fr:"Hydratation"},Gluttony:{en:"Gluttony",it:"Voracit",es:"Gula",de:"Vllerei",fr:"Gloutonnerie"},"Ice Body":{en:"Ice Body",it:"Corpogelo",es:"Glido",de:"Eishaut",fr:"Corps Gel"}},rN={Tackle:{en:"Tackle",it:"Azione",es:"Placaje",de:"Tackle",fr:"Charge"},Scratch:{en:"Scratch",it:"Graffio",es:"Araazo",de:"Kratzer",fr:"Griffe"},Growl:{en:"Growl",it:"Ruggito",es:"Gruido",de:"Heuler",fr:"Rugissement"},"Tail Whip":{en:"Tail Whip",it:"Colpocoda",es:"Ltigo",de:"Rutenschlag",fr:"Mimi-Queue"},Ember:{en:"Ember",it:"Braciere",es:"Ascuas",de:"Glut",fr:"Flammche"},"Water Gun":{en:"Water Gun",it:"Pistolacqua",es:"Pistola Agua",de:"Aquaknarre",fr:"Pistolet  O"},"Vine Whip":{en:"Vine Whip",it:"Frustata",es:"Ltigo Cepa",de:"Rankenhieb",fr:"Fouet Lianes"},"Leech Seed":{en:"Leech Seed",it:"Parassiseme",es:"Drenadoras",de:"Egelsamen",fr:"Vampigraine"},"Thunder Shock":{en:"Thunder Shock",it:"Tuonoshock",es:"Impactrueno",de:"Donnerschock",fr:"clair"},"Quick Attack":{en:"Quick Attack",it:"Attacco Rapido",es:"Ataque Rpido",de:"Ruckzuckhieb",fr:"Vive-Attaque"},Bite:{en:"Bite",it:"Morso",es:"Mordisco",de:"Biss",fr:"Morsure"},"Wing Attack":{en:"Wing Attack",it:"Attacco d'Ala",es:"Ataque Ala",de:"Flgelschlag",fr:"Cru-Ailes"},Gust:{en:"Gust",it:"Raffica",es:"Tornado",de:"Windsto",fr:"Tornade"},Peck:{en:"Peck",it:"Beccata",es:"Picotazo",de:"Schnabel",fr:"Picpic"},"Sand Attack":{en:"Sand Attack",it:"Turbosabbia",es:"Ataque Arena",de:"Sandwirbel",fr:"Jet de Sable"},"Double Kick":{en:"Double Kick",it:"Doppiocalcio",es:"Doble Patada",de:"Doppelkick",fr:"Double Pied"},"Razor Leaf":{en:"Razor Leaf",it:"Foglielama",es:"Hoja Afilada",de:"Rasierblatt",fr:"Tranch'Herbe"},Flamethrower:{en:"Flamethrower",it:"Lanciafiamme",es:"Lanzallamas",de:"Flammenwurf",fr:"Lance-Flammes"},"Hydro Pump":{en:"Hydro Pump",it:"Idropompa",es:"Hidrobomba",de:"Hydropumpe",fr:"Hydrocanon"},"Solar Beam":{en:"Solar Beam",it:"Solarraggio",es:"Rayo Solar",de:"Solarstrahl",fr:"Lance-Soleil"},Psychic:{en:"Psychic",it:"Psichico",es:"Psquico",de:"Psychokinese",fr:"Psyko"},Earthquake:{en:"Earthquake",it:"Terremoto",es:"Terremoto",de:"Erdbeben",fr:"Sisme"},Thunderbolt:{en:"Thunderbolt",it:"Fulmine",es:"Rayo",de:"Donnerblitz",fr:"Tonnerre"},"Ice Beam":{en:"Ice Beam",it:"Geloraggio",es:"Rayo Hielo",de:"Eisstrahl",fr:"Laser Glace"},"Hyper Beam":{en:"Hyper Beam",it:"Iperraggio",es:"Hiperrayo",de:"Hyperstrahl",fr:"Ultralaser"},Leer:{en:"Leer",it:"Fulmisguardo",es:"Malicioso",de:"Silberblick",fr:"Gros Yeux"},Pound:{en:"Pound",it:"Botta",es:"Destructor",de:"Pfund",fr:"cras'Face"},Supersonic:{en:"Supersonic",it:"Supersuono",es:"Supersnico",de:"Superschall",fr:"Ultrason"},Disable:{en:"Disable",it:"Inibitore",es:"Anulacin",de:"Aussetzer",fr:"Entrave"},Confusion:{en:"Confusion",it:"Confusione",es:"Confusin",de:"Konfusion",fr:"Choc Mental"},Hypnosis:{en:"Hypnosis",it:"Ipnosi",es:"Hipnosis",de:"Hypnose",fr:"Hypnose"},"String Shot":{en:"String Shot",it:"Millebave",es:"Disparo Demora",de:"Fadenschuss",fr:"Scrtion"},"Poison Sting":{en:"Poison Sting",it:"Velenospina",es:"Picotazo Ven",de:"Giftstachel",fr:"Dard-Venin"},Harden:{en:"Harden",it:"Rafforzatore",es:"Fortaleza",de:"Hrtner",fr:"Armure"},"Focus Energy":{en:"Focus Energy",it:"Focalenergia",es:"Foco Energa",de:"Energiefokus",fr:"Puissance"},Spark:{en:"Spark",it:"Scintilla",es:"Chispa",de:"Funkenflug",fr:"tincelle"},Crunch:{en:"Crunch",it:"Sgranocchio",es:"Triturar",de:"Knirscher",fr:"Mchouille"},Bubble:{en:"Bubble",it:"Bolla",es:"Burbuja",de:"Blubber",fr:"cume"},Withdraw:{en:"Withdraw",it:"Ritirata",es:"Refugio",de:"Panzerschutz",fr:"Repli"},"Sleep Powder":{en:"Sleep Powder",it:"Sonnifero",es:"Somnfero",de:"Schlafpuder",fr:"Poudre Dodo"},"Stun Spore":{en:"Stun Spore",it:"Paralizzante",es:"Paralizador",de:"Stachelspore",fr:"Para-Spore"},"Poison Powder":{en:"Poison Powder",it:"Velenpolvere",es:"Polvo Veneno",de:"Giftpuder",fr:"Poudre Toxik"},"Will-O-Wisp":{en:"Will-O-Wisp",it:"Fuocofatuo",es:"Fuego Fatuo",de:"Irrlicht",fr:"Feu Follet"},Protect:{en:"Protect",it:"Protezione",es:"Proteccin",de:"Schutzschild",fr:"Abri"},Surf:{en:"Surf",it:"Surf",es:"Surf",de:"Surfer",fr:"Surf"},Fly:{en:"Fly",it:"Volo",es:"Vuelo",de:"Fliegen",fr:"Vol"},Cut:{en:"Cut",it:"Taglio",es:"Corte",de:"Zerschneider",fr:"Coupe"}},Af=(t,e)=>{var r;if(!t)return"";const n=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();return((r=eN[n])==null?void 0:r[e])||t},wx=(t,e)=>{var n;return t?((n=tN[t])==null?void 0:n[e])||t:"Standard"},Xa=(t,e)=>{var n;return t?((n=nN[t])==null?void 0:n[e])||t:""},Po=(t,e)=>{var n;return t?((n=rN[t])==null?void 0:n[e])||t:""},is=t=>{if(!t)return"bg-slate-500";switch(t.toLowerCase()){case"bug":return"bg-lime-600";case"dark":return"bg-slate-800";case"dragon":return"bg-violet-600";case"electric":return"bg-yellow-500";case"fairy":return"bg-pink-400";case"fighting":return"bg-orange-700";case"fire":return"bg-red-500";case"flying":return"bg-sky-400";case"ghost":return"bg-purple-700";case"grass":return"bg-green-500";case"ground":return"bg-amber-600";case"ice":return"bg-cyan-400";case"normal":return"bg-slate-400";case"poison":return"bg-fuchsia-600";case"psychic":return"bg-pink-600";case"rock":return"bg-stone-500";case"steel":return"bg-slate-500";case"water":return"bg-blue-500";default:return"bg-slate-500"}},Sn={en:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Select a region to view the database.",appSubtitle:"Choose a tool to begin your adventure.",searchPlaceholder:"Search...",filters:"Filters",close:"Close",clear:"Clear",apply:"Apply Filters",nameSearch:"Name Search",type:"Type",allTypes:"All Types",minStats:"Min Stats",noResults:"No results found.",entriesFound:"Entries found",about:"About",height:"Height",weight:"Weight",rank:"Rank",role:"Role",baseStats:"Base Stats",hp:"Base HP",abilities:"Abilities",primary:"Primary",secondary:"Secondary",hidden:"Hidden",moveset:"Moveset",consulting:"Consulting Archives...",power:"Power",target:"Target",dicePools:"Dice Pools",accuracy:"Accuracy",damage:"Damage",effect:"Effect",starter:"Starter",wild:"Wild",strength:"Strength",dexterity:"Dexterity",vitality:"Vitality",special:"Special",insight:"Insight",rankFilter:"Rank",onlyStarter:"Only Starter",home:"Home",characterSheet:"Character Sheet",pokemonSheet:"Pokmon Sheet",pokedex:"Pokdex",comingSoon:"Coming Soon",comingSoonDesc:"This feature is currently under development. Please check back later!",backToHome:"Back to Home",party:"Belt",pc:"Bill's PC",box:"Box",emptySlot:"Empty",addToParty:"Add to Belt",removeFromParty:"Remove",selectPokemon:"Select Pokmon",nickname:"Nickname",sheet:{nature:"Nature",confidence:"Confidence",happiness:"Happiness",loyalty:"Loyalty",battles:"No of Battles",victories:"Victories",item:"Item",status:"Status",accessory:"Accessory",weakness:"Weakness",hp:"HP",will:"Will",fight:"Fight",survival:"Survival",social:"Social",brawl:"Brawl",channel:"Channel",clash:"Clash",evasion:"Evasion",alert:"Alert",athletic:"Athletic",stealth:"Stealth",allure:"Allure",etiquette:"Etiquette",intimidate:"Intimidate",perform:"Perform",tough:"Tough",cool:"Cool",beauty:"Beauty",cute:"Cute",clever:"Clever",quickRefs:"Quick References",initiative:"Initiative",def:"Def/S.Def",statuses:{Neutral:"Neutral",Burn:"Burn",Freeze:"Freeze",Paralysis:"Paralysis",Poison:"Poison","Bad Poison":"Bad Poison",Sleep:"Sleep",Confused:"Confused",Infatuated:"Infatuated",Fainted:"Fainted"}},regions:{National:"All Data",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},it:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Seleziona una regione per vedere il database.",appSubtitle:"Scegli uno strumento per iniziare l'avventura.",searchPlaceholder:"Cerca...",filters:"Filtri",close:"Chiudi",clear:"Pulisci",apply:"Applica Filtri",nameSearch:"Cerca Nome",type:"Tipo",allTypes:"Tutti i Tipi",minStats:"Stat. Minime",noResults:"Nessun risultato trovato.",entriesFound:"Voci trovate",about:"Info",height:"Altezza",weight:"Peso",rank:"Rango",role:"Ruolo",baseStats:"Statistiche Base",hp:"PV Base",abilities:"Abilit",primary:"Primaria",secondary:"Secondaria",hidden:"Nascosta",moveset:"Mosse",consulting:"Consultando gli Archivi...",power:"Potenza",target:"Bersaglio",dicePools:"Dadi",accuracy:"Precisione",damage:"Danno",effect:"Effetto",starter:"Starter",wild:"Selvatico",strength:"Forza",dexterity:"Destrezza",vitality:"Vitalit",special:"Speciale",insight:"Intuito",rankFilter:"Rango",onlyStarter:"Solo Starter",home:"Home",characterSheet:"Scheda Personaggio",pokemonSheet:"Scheda Pokmon",pokedex:"Pokdex",comingSoon:"Prossimamente",comingSoonDesc:"Questa funzionalit  in fase di sviluppo. Torna pi tardi!",backToHome:"Torna alla Home",party:"Cintura",pc:"PC di Bill",box:"Box",emptySlot:"Vuoto",addToParty:"Aggiungi",removeFromParty:"Rimuovi",selectPokemon:"Seleziona Pokmon",nickname:"Soprannome",sheet:{nature:"Natura",confidence:"Sicurezza",happiness:"Felicit",loyalty:"Lealt",battles:"N Battaglie",victories:"Vittorie",item:"Oggetto",status:"Stato",accessory:"Accessorio",weakness:"Debolezza",hp:"PV",will:"Volont",fight:"Lotta",survival:"Sopravvivenza",social:"Sociale",brawl:"Rissa",channel:"Incanalare",clash:"Scontro",evasion:"Evasione",alert:"Allerta",athletic:"Atletica",stealth:"Furtivit",allure:"Fascino",etiquette:"Etichetta",intimidate:"Intimidire",perform:"Esibirsi",tough:"Grinta",cool:"Classe",beauty:"Bellezza",cute:"Grazia",clever:"Acume",quickRefs:"Riferimenti Rapidi",initiative:"Iniziativa",def:"Dif/Dif.Sp",statuses:{Neutral:"Neutro",Burn:"Scottatura",Freeze:"Congelamento",Paralysis:"Paralisi",Poison:"Veleno","Bad Poison":"Iperveleno",Sleep:"Sonno",Confused:"Confusione",Infatuated:"Infatuazione",Fainted:"Esausto"}},regions:{National:"Tutti i Dati",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},es:{title:"Pokrole Dex",appTitle:"Herramientas Pokrole",subtitle:"Selecciona una regin para ver la base de datos.",appSubtitle:"Elige una herramienta para comenzar tu aventura.",searchPlaceholder:"Buscar...",filters:"Filtros",close:"Cerrar",clear:"Limpiar",apply:"Aplicar Filtros",nameSearch:"Buscar Nombre",type:"Tipo",allTypes:"Todos los Tipos",minStats:"Estad. Mnimas",noResults:"No se encontraron resultados.",entriesFound:"Entradas encontradas",about:"Info",height:"Altura",weight:"Peso",rank:"Rango",role:"Rol",baseStats:"Estadsticas Base",hp:"PS Base",abilities:"Habilidades",primary:"Primaria",secondary:"Secundaria",hidden:"Oculta",moveset:"Movimientos",consulting:"Consultando Archivos...",power:"Potencia",target:"Objetivo",dicePools:"Dados",accuracy:"Precisin",damage:"Dao",effect:"Efecto",starter:"Inicial",wild:"Salvaje",strength:"Fuerza",dexterity:"Destreza",vitality:"Vitalidad",special:"Especial",insight:"Intuicin",rankFilter:"Rango",onlyStarter:"Solo Inicial",home:"Inicio",characterSheet:"Hoja de Personaje",pokemonSheet:"Hoja de Pokmon",pokedex:"Pokdex",comingSoon:"Prximamente",comingSoonDesc:"Esta funcin est en desarrollo. Vuelve ms tarde!",backToHome:"Volver al Inicio",party:"Cinturn",pc:"PC de Bill",box:"Caja",emptySlot:"Vaco",addToParty:"Aadir",removeFromParty:"Quitar",selectPokemon:"Seleccionar Pokmon",nickname:"Apodo",sheet:{nature:"Naturaleza",confidence:"Confianza",happiness:"Felicidad",loyalty:"Lealtad",battles:"N Batallas",victories:"Victorias",item:"Objeto",status:"Estado",accessory:"Accesorio",weakness:"Debilidad",hp:"PS",will:"Voluntad",fight:"Pelea",survival:"Supervivencia",social:"Social",brawl:"Reyerta",channel:"Canalizar",clash:"Choque",evasion:"Evasin",alert:"Alerta",athletic:"Atletismo",stealth:"Sigilo",allure:"Seduccin",etiquette:"Etiqueta",intimidate:"Intimidar",perform:"Actuar",tough:"Dureza",cool:"Carisma",beauty:"Belleza",cute:"Dulzura",clever:"Ingenio",quickRefs:"Referencias Rpidas",initiative:"Iniciativa",def:"Def/Def.Esp",statuses:{Neutral:"Neutral",Burn:"Quemado",Freeze:"Congelado",Paralysis:"Parlisis",Poison:"Veneno","Bad Poison":"Gravemente Env.",Sleep:"Dormido",Confused:"Confuso",Infatuated:"Enamoramiento",Fainted:"Debilitado"}},regions:{National:"Todos los Datos",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},de:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Whle eine Region, um die Datenbank anzuzeigen.",appSubtitle:"Whle ein Werkzeug, um dein Abenteuer zu beginnen.",searchPlaceholder:"Suchen...",filters:"Filter",close:"Schlieen",clear:"Leeren",apply:"Filter anwenden",nameSearch:"Namenssuche",type:"Typ",allTypes:"Alle Typen",minStats:"Min. Werte",noResults:"Keine Ergebnisse gefunden.",entriesFound:"Eintrge gefunden",about:"ber",height:"Gre",weight:"Gewicht",rank:"Rang",role:"Rolle",baseStats:"Basiswerte",hp:"Basis KP",abilities:"Fhigkeiten",primary:"Primr",secondary:"Sekundr",hidden:"Versteckt",moveset:"Attacken",consulting:"Archive werden durchsucht...",power:"Strke",target:"Ziel",dicePools:"Wrfelpools",accuracy:"Genauigkeit",damage:"Schaden",effect:"Effekt",starter:"Starter",wild:"Wild",strength:"Strke",dexterity:"Geschick",vitality:"Vitalitt",special:"Spezial",insight:"Einsicht",rankFilter:"Rang",onlyStarter:"Nur Starter",home:"Startseite",characterSheet:"Charakterbogen",pokemonSheet:"Pokmon-Bogen",pokedex:"Pokdex",comingSoon:"Demnchst",comingSoonDesc:"Diese Funktion wird derzeit entwickelt. Schau spter wieder vorbei!",backToHome:"Zurck zur Startseite",party:"Grtel",pc:"Bills PC",box:"Box",emptySlot:"Leer",addToParty:"Hinzufgen",removeFromParty:"Entfernen",selectPokemon:"Pokmon auswhlen",nickname:"Spitzname",sheet:{nature:"Wesen",confidence:"Selbstvertr.",happiness:"Freundschaft",loyalty:"Loyalitt",battles:"Kmpfe",victories:"Siege",item:"Item",status:"Status",accessory:"Accessoire",weakness:"Schwche",hp:"KP",will:"Wille",fight:"Kampf",survival:"berleben",social:"Sozial",brawl:"Handgemenge",channel:"Kanalisieren",clash:"Zusammensto",evasion:"Ausweichen",alert:"Wachsamkeit",athletic:"Athletik",stealth:"Heimlichkeit",allure:"Anziehung",etiquette:"Etikette",intimidate:"Einschchtern",perform:"Auftritt",tough:"Strke",cool:"Coolness",beauty:"Schnheit",cute:"Anmut",clever:"Klugheit",quickRefs:"Schnellreferenz",initiative:"Initiative",def:"Vert/Sp.Vert",statuses:{Neutral:"Neutral",Burn:"Verbrennung",Freeze:"Frost",Paralysis:"Paralyse",Poison:"Vergiftung","Bad Poison":"Schwer vergiftet",Sleep:"Schlaf",Confused:"Verwirrt",Infatuated:"Anziehung",Fainted:"Besiegt"}},regions:{National:"Alle Daten",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},fr:{title:"Pokrole Dex",appTitle:"Outils Pokrole",subtitle:"Slectionnez une rgion pour voir la base de donnes.",appSubtitle:"Choisissez un outil pour commencer votre aventure.",searchPlaceholder:"Rechercher...",filters:"Filtres",close:"Fermer",clear:"Effacer",apply:"Appliquer",nameSearch:"Recherche par nom",type:"Type",allTypes:"Tous les Types",minStats:"Stats Min.",noResults:"Aucun rsultat trouv.",entriesFound:"Entres trouves",about:" propos",height:"Taille",weight:"Poids",rank:"Rang",role:"Rle",baseStats:"Stats de Base",hp:"PV de Base",abilities:"Talents",primary:"Primaire",secondary:"Secondaire",hidden:"Cach",moveset:"Capacits",consulting:"Consultation des archives...",power:"Puissance",target:"Cible",dicePools:"Ds",accuracy:"Prcision",damage:"Dgts",effect:"Effet",starter:"Starter",wild:"Sauvage",strength:"Force",dexterity:"Dextrit",vitality:"Vitalit",special:"Spcial",insight:"Intuition",rankFilter:"Rang",onlyStarter:"Seulement Starter",home:"Accueil",characterSheet:"Fiche Personnage",pokemonSheet:"Fiche Pokmon",pokedex:"Pokdex",comingSoon:"Bientt",comingSoonDesc:"Cette fonctionnalit est en cours de dveloppement. Revenez plus tard !",backToHome:"Retour  l'accueil",party:"Ceinture",pc:"PC de Lo",box:"Bote",emptySlot:"Vide",addToParty:"Ajouter",removeFromParty:"Retirer",selectPokemon:"Slectionner Pokmon",nickname:"Surnom",sheet:{nature:"Nature",confidence:"Confiance",happiness:"Bonheur",loyalty:"Loyaut",battles:"Nb Combats",victories:"Victoires",item:"Objet",status:"Statut",accessory:"Accessoire",weakness:"Faiblesse",hp:"PV",will:"Volont",fight:"Combat",survival:"Survie",social:"Social",brawl:"Bagarre",channel:"Canaliser",clash:"Affrontement",evasion:"vasion",alert:"Vigilance",athletic:"Athltisme",stealth:"Discrtion",allure:"Charme",etiquette:"tiquette",intimidate:"Intimidation",perform:"Performance",tough:"Robuste",cool:"Sang-froid",beauty:"Beaut",cute:"Mignon",clever:"Intelligence",quickRefs:"Rf. Rapides",initiative:"Initiative",def:"Df/Df.Sp",statuses:{Neutral:"Neutre",Burn:"Brlure",Freeze:"Gel",Paralysis:"Paralysie",Poison:"Poison","Bad Poison":"Gravement Empois.",Sleep:"Sommeil",Confused:"Confusion",Infatuated:"Attraction",Fainted:"K.O."}},regions:{National:"Toutes les donnes",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}}},sN="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ShuffleTokens",iN="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/BookSprites",oN="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites",Nf=t=>{const e=t.Image||`${t.Name}.png`;return`${sN}/${e}`},Ex=t=>{const e=t.Image||`${t.Name}.png`;return`${iN}/${e}`},aN=t=>`${oN}/${t._id}.png`,lN=(t,e)=>{const n=[];for(let r=0;r<e;r++)n.push(u.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r<t?"bg-slate-800 dark:bg-slate-200":"bg-slate-300 dark:bg-slate-700"}`},r));return u.jsx("div",{className:"flex items-center",children:n})},kc={en:"",it:"",es:"",de:"",fr:""},uN={en:"English",it:"Italiano",es:"Espaol",de:"Deutsch",fr:"Franais"},kx=({currentLanguage:t,onChange:e})=>{const[n,r]=$.useState(!1),s=$.useRef(null);$.useEffect(()=>{const o=l=>{s.current&&!s.current.contains(l.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=o=>{e(o),r(!1)};return u.jsxs("div",{className:"relative",ref:s,children:[u.jsx("button",{onClick:()=>r(!n),className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-2xl hover:scale-110 transition-transform shadow-md","aria-label":"Select Language",children:kc[t]}),n&&u.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in",children:u.jsx("div",{className:"py-1",children:Object.keys(kc).map(o=>u.jsxs("button",{onClick:()=>i(o),className:`w-full px-4 py-2 text-left flex items-center gap-3 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors ${t===o?"bg-slate-50 dark:bg-slate-700/50 font-bold":""}`,children:[u.jsx("span",{className:"text-xl",children:kc[o]}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:uN[o]})]},o))})})]})},cN=({onNavigate:t,isDark:e,toggleTheme:n,language:r,setLanguage:s})=>{const i=Sn[r],{user:o,signInWithGoogle:l,logout:c,error:h,clearError:p}=xx();return u.jsxs("div",{className:"p-6 max-w-6xl mx-auto min-h-screen flex flex-col animate-fade-in",children:[h&&u.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] w-full max-w-lg px-4",children:u.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-xl shadow-2xl flex items-start gap-3 animate-bounce-in border-2 border-red-600",children:[u.jsx(NE,{className:"shrink-0 mt-0.5",size:20}),u.jsx("div",{className:"flex-1 text-sm font-bold whitespace-pre-line leading-relaxed",children:h}),u.jsx("button",{onClick:p,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:u.jsx(ls,{size:20})})]})}),u.jsxs("header",{className:"mb-12 mt-4 flex flex-col md:flex-row items-center justify-between gap-4",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center justify-center md:justify-start gap-3",children:[u.jsx(zd,{className:"w-10 h-10 text-red-500"}),i.appTitle]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:i.appSubtitle})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[u.jsx(kx,{currentLanguage:r,onChange:s}),u.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:e?u.jsx(dv,{size:24}):u.jsx(uv,{size:24})}),o?u.jsxs("div",{className:"flex items-center gap-2 pl-2 bg-white dark:bg-slate-800 rounded-full pr-1 py-1 shadow-md border border-slate-200 dark:border-slate-700",children:[o.photoURL?u.jsx("img",{src:o.photoURL,alt:"User",className:"w-10 h-10 rounded-full border-2 border-green-500"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold text-lg",children:o.displayName?o.displayName[0].toUpperCase():"U"}),u.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 hidden sm:block px-2",children:o.displayName}),u.jsx("button",{onClick:()=>c(),className:"w-10 h-10 flex items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 hover:bg-red-500 hover:text-white transition-colors",title:"Logout",children:u.jsx(HE,{size:18})})]}):u.jsxs("button",{onClick:()=>l(),className:"flex items-center gap-2 px-5 py-3 rounded-full bg-slate-800 dark:bg-white text-white dark:text-slate-900 font-bold shadow-md hover:scale-105 transition-transform",children:[u.jsx($E,{size:20}),u.jsx("span",{children:"Login"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:[u.jsxs("button",{onClick:()=>t("character"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.characterSheet})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-blue-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(nk,{size:120,strokeWidth:1.5})})]}),u.jsxs("button",{onClick:()=>t("pokemon"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.pokemonSheet})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-amber-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(LE,{size:120,strokeWidth:1.5})})]}),u.jsxs("button",{onClick:()=>t("items"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:[i.sheet.item,"s"]})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-green-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(lv,{size:120,strokeWidth:1.5})})]}),u.jsxs("button",{onClick:()=>t("pokedex"),className:"group relative h-40 bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 text-white hover:scale-[1.02]",children:[u.jsx("div",{className:"relative z-10",children:u.jsx("h2",{className:"text-2xl font-bold mb-2",children:i.pokedex})}),u.jsx("div",{className:"absolute -right-6 -bottom-6 text-white opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:u.jsx(zd,{className:"w-[120px] h-[120px]"})})]})]})]})},dN=({onBack:t,language:e})=>{const n=Sn[e];return u.jsxs("div",{className:"min-h-screen flex flex-col p-6 animate-fade-in",children:[u.jsx("div",{className:"mb-8",children:u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors inline-flex",children:u.jsx(oi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})})}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[u.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/20 p-8 rounded-full mb-8",children:u.jsx(ME,{className:"w-20 h-20 text-amber-500"})}),u.jsx("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white mb-4",children:n.comingSoon}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl leading-relaxed",children:n.comingSoonDesc})]})]})},hN=({onSelect:t,onHome:e,isDark:n,toggleTheme:r,language:s,setLanguage:i})=>{const o=Sn[s],l=[{id:"National",color:"bg-indigo-500 dark:bg-indigo-700",desc:o.regions.National,range:"All"},{id:"Kanto",color:"bg-green-600 dark:bg-green-800",desc:o.regions.Kanto,range:"001-151"},{id:"Johto",color:"bg-yellow-600 dark:bg-yellow-800",desc:o.regions.Johto,range:"152-251"},{id:"Hoenn",color:"bg-red-600 dark:bg-red-800",desc:o.regions.Hoenn,range:"252-386"},{id:"Sinnoh",color:"bg-cyan-600 dark:bg-cyan-800",desc:o.regions.Sinnoh,range:"387-493"},{id:"Unova",color:"bg-stone-600 dark:bg-stone-800",desc:o.regions.Unova,range:"494-649"},{id:"Kalos",color:"bg-blue-600 dark:bg-blue-800",desc:o.regions.Kalos,range:"650-721"},{id:"Alola",color:"bg-orange-500 dark:bg-orange-700",desc:o.regions.Alola,range:"722-809"},{id:"Galar",color:"bg-pink-600 dark:bg-pink-800",desc:o.regions.Galar,range:"810-905"},{id:"Paldea",color:"bg-purple-600 dark:bg-purple-800",desc:o.regions.Paldea,range:"906+"}];return u.jsxs("div",{className:"p-6 max-w-6xl mx-auto animate-fade-in",children:[u.jsxs("header",{className:"mb-10 mt-4 flex flex-col md:flex-row items-center md:items-start justify-between gap-4",children:[u.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[u.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white transition-colors mb-2 font-medium",children:[u.jsx(zE,{size:18})," ",o.backToHome]}),u.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center gap-3",children:[u.jsx(zd,{className:"w-10 h-10 text-red-500"}),o.title]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:o.subtitle})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(kx,{currentLanguage:s,onChange:i}),u.jsx("button",{onClick:r,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:n?u.jsx(dv,{size:24}):u.jsx(uv,{size:24})})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(c=>u.jsxs("button",{onClick:()=>t(c.id),className:`${c.color} text-white p-6 rounded-3xl shadow-xl hover:scale-[1.02] hover:shadow-2xl transition-all duration-300 text-left relative overflow-hidden group h-40`,children:[u.jsx("div",{className:"absolute -right-6 -bottom-6 opacity-20 group-hover:opacity-30 transition-opacity",children:u.jsx(XA,{region:c.id})}),u.jsxs("h2",{className:"text-2xl font-bold relative z-10",children:[c.id," Dex"]}),u.jsxs("div",{className:"flex flex-col mt-1 relative z-10",children:[u.jsx("span",{className:"text-white/90 font-medium",children:c.desc}),u.jsx("span",{className:"text-white/60 text-sm",children:c.range})]})]},c.id))})]})},Ir=({type:t,language:e})=>t?u.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold text-white bg-white/25 rounded-full backdrop-blur-sm mb-2 capitalize w-max shadow-sm",children:Af(t,e)}):null,fN=({progress:t,total:e,status:n})=>{const r=e>0?Math.min(100,Math.round(t/e*100)):0;return u.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/90 backdrop-blur-sm text-white p-8",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between mb-2 items-end",children:[u.jsx("span",{className:"font-bold text-lg",children:n}),u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:"block font-mono text-2xl font-bold text-red-400",children:[r,"%"]}),u.jsxs("span",{className:"block text-xs text-slate-400 font-mono mt-1",children:[t," / ",e," files"]})]})]}),u.jsx("div",{className:"h-4 w-full bg-slate-700 rounded-full overflow-hidden border border-slate-600",children:u.jsx("div",{className:"h-full bg-red-500 transition-all duration-200 ease-out shadow-[0_0_10px_rgba(239,68,68,0.5)]",style:{width:`${r}%`}})}),u.jsx("p",{className:"text-slate-400 mt-4 text-center text-sm animate-pulse",children:"Retrieving data from GitHub..."})]})})},pN=({region:t,onBack:e,onSelectPokemon:n,data:r,language:s})=>{const i=Sn[s],[o,l]=$.useState(!1),[c,h]=$.useState({types:!0,ranks:!1,stats:!1}),[p,m]=$.useState(""),[_,I]=$.useState([]),[b,P]=$.useState([]),[D,k]=$.useState(!1),[w,T]=$.useState({strength:"",dexterity:"",vitality:"",special:"",insight:""}),[N,L]=$.useState({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}}),M=v=>{h(ee=>({...ee,[v]:!ee[v]}))},x=()=>{m(""),I([]),P([]),k(!1),T({strength:"",dexterity:"",vitality:"",special:"",insight:""}),L({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}})},y=()=>{L({name:p,type:_,ranks:b,isStarter:D,stats:{...w}})},E=(v,ee)=>{T(de=>({...de,[v]:ee}))},S=v=>{P(ee=>ee.includes(v)?ee.filter(de=>de!==v):[...ee,v])},A=v=>{I(ee=>ee.includes(v)?ee.filter(de=>de!==v):[...ee,v])},C=$.useMemo(()=>{let v=r;if(t!=="National"){const Oe={Kanto:[1,151],Johto:[152,251],Hoenn:[252,386],Sinnoh:[387,493],Unova:[494,649],Kalos:[650,721],Alola:[722,809],Galar:[810,905],Paldea:[906,2e3]}[t];Oe&&(v=v.filter(Ge=>{const H=Ge.Name.toLowerCase(),re=H.includes("alolan"),se=H.includes("galarian"),ve=H.includes("paldean"),te=H.includes("hisuian");return re?t==="Alola":se?t==="Galar":ve?t==="Paldea":te?t==="Sinnoh":Ge.Number>=Oe[0]&&Ge.Number<=Oe[1]}))}if(N.name.trim()){const de=N.name.toLowerCase();v=v.filter(Oe=>Oe.Name.toLowerCase().includes(de))}N.type.length>0&&(v=v.filter(de=>N.type.includes(de.Type1)||de.Type2&&N.type.includes(de.Type2))),N.ranks.length>0&&(v=v.filter(de=>N.ranks.includes(de.RecommendedRank))),N.isStarter&&(v=v.filter(de=>de.GoodStarter));const ee=N.stats;return ee.strength&&(v=v.filter(de=>de.Strength>=Number(ee.strength))),ee.dexterity&&(v=v.filter(de=>de.Dexterity>=Number(ee.dexterity))),ee.vitality&&(v=v.filter(de=>de.Vitality>=Number(ee.vitality))),ee.special&&(v=v.filter(de=>de.Special>=Number(ee.special))),ee.insight&&(v=v.filter(de=>de.Insight>=Number(ee.insight))),v},[t,r,N]);return u.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen",children:[u.jsxs("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300",children:[u.jsxs("div",{className:"flex items-center justify-between p-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:u.jsx(oi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white",children:[t," Dex"]}),u.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:[C.length," ",i.entriesFound]})]})]}),u.jsxs("button",{onClick:()=>l(!o),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${o?"bg-red-500 text-white":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"}`,children:[o?u.jsx(ls,{size:20}):u.jsx(yd,{size:20}),u.jsx("span",{className:"hidden md:inline",children:o?i.close:i.filters})]})]}),o&&u.jsxs("div",{className:"p-4 md:p-6 border-t border-slate-200 dark:border-slate-800 animate-fade-in bg-slate-50 dark:bg-slate-900/50 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(kl,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:i.searchPlaceholder,value:p,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),u.jsxs("button",{onClick:x,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg flex items-center justify-center gap-2 transition-colors font-medium whitespace-nowrap",children:[u.jsx(cv,{size:18})," ",i.clear]})]}),u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[u.jsxs("button",{onClick:()=>M("types"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[u.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.type}),c.types?u.jsx(uc,{size:18,className:"text-slate-400"}):u.jsx(lc,{size:18,className:"text-slate-400"})]}),c.types&&u.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:u.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:JA.map(v=>{const ee=_.includes(v);return u.jsx("button",{onClick:()=>A(v),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${ee?`${is(v)} text-white font-semibold shadow-md border-transparent`:"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Af(v,s)},v)})})})]}),u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[u.jsxs("button",{onClick:()=>M("ranks"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[u.jsxs("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:[i.rank," & ",i.role]}),c.ranks?u.jsx(uc,{size:18,className:"text-slate-400"}):u.jsx(lc,{size:18,className:"text-slate-400"})]}),c.ranks&&u.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.rankFilter}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Fr.map(v=>{const ee=b.includes(v);return u.jsx("button",{onClick:()=>S(v),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${ee?"bg-red-500 border-red-500 text-white font-semibold shadow-md":"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:wx(v,s)},v)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.role}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors w-max border border-transparent hover:border-slate-200 dark:hover:border-slate-700",children:[u.jsx("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-colors ${D?"bg-red-500 border-red-500":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 group-hover:border-red-400"}`,children:D&&u.jsx(jm,{size:16,className:"text-white"})}),u.jsx("input",{type:"checkbox",checked:D,onChange:()=>k(!D),className:"hidden"}),u.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium select-none",children:i.onlyStarter})]})]})]})})]}),u.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[u.jsxs("button",{onClick:()=>M("stats"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[u.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.minStats}),c.stats?u.jsx(uc,{size:18,className:"text-slate-400"}):u.jsx(lc,{size:18,className:"text-slate-400"})]}),c.stats&&u.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mt-4",children:["strength","dexterity","vitality","special","insight"].map(v=>u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:i[v]}),u.jsx("input",{type:"number",min:"0",max:"10",placeholder:"0",value:w[v],onChange:ee=>E(v,ee.target.value),className:"w-full px-3 py-2 text-center rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]},v))})})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("button",{onClick:y,className:"w-full md:w-auto px-8 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg shadow-red-500/20 font-bold text-lg flex items-center justify-center gap-2 transition-all transform hover:scale-105",children:[u.jsx(jm,{size:24})," ",i.apply]})})]})]}),C.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(ru,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-xl",children:i.noResults}),u.jsx("button",{onClick:x,className:"mt-4 text-red-500 hover:underline",children:i.clear})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20 mt-8",children:C.map(v=>u.jsxs("div",{onClick:()=>n(v),className:`relative h-40 rounded-3xl p-5 shadow-lg cursor-pointer transform hover:-translate-y-1 transition-all duration-300 overflow-hidden ${is(v.Type1)}`,children:[u.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:u.jsx(Ud,{})}),u.jsxs("div",{className:"flex justify-between h-full relative z-10",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:v.Name}),u.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[u.jsx(Ir,{type:v.Type1,language:s}),v.Type2&&u.jsx(Ir,{type:v.Type2,language:s})]})]}),u.jsxs("div",{className:"flex flex-col items-end justify-between",children:[u.jsxs("span",{className:"text-white/80 font-bold text-lg drop-shadow-sm",children:["#",v.Number.toString().padStart(3,"0")]}),u.jsx("img",{loading:"lazy",src:Nf(v),alt:v.Name,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg",onError:ee=>{ee.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})]})]})]},`${v.Number}-${v.Name}`))})]})},Sx=({moveName:t,filePath:e,onClose:n,language:r,onRoll:s})=>{const i=Sn[r],[o,l]=$.useState(null),[c,h]=$.useState(!0),[p,m]=$.useState(null);$.useEffect(()=>{e&&(async()=>{try{h(!0);const P=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(w=>encodeURIComponent(w)).join("/")}`,D=await fetch(P);if(!D.ok)throw new Error("Could not fetch move data");const k=await D.json();l(k)}catch{m("Failed to load move details.")}finally{h(!1)}})()},[e]),$.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const _=I=>{I.target===I.currentTarget&&n()};return e?u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:_,children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up",children:[u.jsxs("div",{className:`p-6 ${o?is(o.Type):"bg-slate-500"} text-white relative transition-colors duration-300`,children:[u.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:u.jsx(ls,{size:20})}),o?u.jsxs(u.Fragment,{children:[u.jsx("h2",{className:"text-3xl font-extrabold tracking-tight pr-8",children:Po(o.Name,r)}),u.jsx("span",{className:"inline-block px-3 py-1 mt-2 text-xs font-bold bg-white/25 rounded-full backdrop-blur-md uppercase tracking-wider",children:Af(o.Type,r)})]}):u.jsx("h2",{className:"text-2xl font-bold",children:Po(t,r)})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:c?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[u.jsx(su,{className:"w-10 h-10 animate-spin mb-3 text-red-500"}),u.jsx("p",{children:i.consulting})]}):p||!o?u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[u.jsx(av,{className:"w-12 h-12 mb-3 text-red-400"}),u.jsx("p",{children:p||"Move data not found."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:u.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',o.Description,'"']})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 rounded-2xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 flex flex-col items-center justify-center text-center",children:[u.jsxs("span",{className:"text-xs font-bold text-red-400 uppercase mb-1 flex items-center gap-1",children:[u.jsx(JE,{size:14})," ",i.power]}),u.jsx("span",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:o.Power})]}),u.jsxs("div",{className:"p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 flex flex-col items-center justify-center text-center",children:[u.jsxs("span",{className:"text-xs font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[u.jsx(ek,{size:14})," ",i.target]}),u.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:o.Target})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(Oi,{className:"w-4 h-4"})," ",i.dicePools,s&&u.jsx("span",{className:"text-[10px] bg-green-500 text-white px-2 py-0.5 rounded-full ml-auto",children:"Click to Roll"})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("button",{disabled:!s||!o.Accuracy1,onClick:()=>{if(s&&o.Accuracy1){const I=o.Accuracy2?`${o.Accuracy1} + ${o.Accuracy2}`:o.Accuracy1;s(I,o)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[u.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.accuracy,s&&u.jsx(Dm,{size:14,className:"text-green-500"})]}),u.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[u.jsx("span",{className:"capitalize",children:o.Accuracy1}),o.Accuracy2&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-slate-300",children:"+"}),u.jsx("span",{className:"capitalize",children:o.Accuracy2})]})]})]}),u.jsxs("button",{disabled:!s||!o.Damage1,onClick:()=>{if(s&&o.Damage1){const I=o.Damage2?`${o.Damage1} + ${o.Damage2}`:o.Damage1;s(I)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-red-50 dark:hover:bg-red-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[u.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.damage,s&&u.jsx(Dm,{size:14,className:"text-green-500"})]}),u.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[u.jsx("span",{className:"capitalize",children:o.Damage1||"None"}),o.Damage2&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-slate-300",children:"+"}),u.jsx("span",{className:"capitalize",children:o.Damage2})]})]})]})]})]}),o.Effect&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(iu,{className:"w-4 h-4"})," ",i.effect]}),u.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-xl text-slate-700 dark:text-slate-300 text-sm leading-relaxed",children:o.Effect})]})]})})]})}):null},Tx=({abilityName:t,filePath:e,onClose:n,language:r})=>{const s=Sn[r],[i,o]=$.useState(null),[l,c]=$.useState(!0),[h,p]=$.useState(null);$.useEffect(()=>{e&&(async()=>{try{c(!0);const P=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(w=>encodeURIComponent(w)).join("/")}`,D=await fetch(P);if(!D.ok)throw new Error("Could not fetch ability data");const k=await D.json();o(k)}catch{p("Failed to load ability details.")}finally{c(!1)}})()},[e]),$.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const m=I=>{I.target===I.currentTarget&&n()};if(!e)return null;const _=Xa((i==null?void 0:i.Name)||t,r);return u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:m,children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up border border-slate-200 dark:border-slate-800",children:[u.jsxs("div",{className:"p-6 bg-indigo-600 dark:bg-indigo-800 text-white relative transition-colors duration-300",children:[u.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:u.jsx(ls,{size:20})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(YE,{className:"text-indigo-200",size:28}),u.jsx("h2",{className:"text-3xl font-extrabold tracking-tight",children:_})]}),u.jsx("span",{className:"inline-block mt-2 text-xs font-bold text-indigo-100 uppercase tracking-wider opacity-80",children:s.abilities})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:l?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[u.jsx(su,{className:"w-10 h-10 animate-spin mb-3 text-indigo-500"}),u.jsx("p",{children:s.consulting})]}):h||!i?u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[u.jsx(av,{className:"w-12 h-12 mb-3 text-red-400"}),u.jsx("p",{children:h||"Ability data not found."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[u.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2",children:[u.jsx(ru,{size:14})," ",s.about]}),u.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',i.Description,'"']})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(iu,{className:"w-4 h-4"})," ",s.effect]}),u.jsx("div",{className:"p-5 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-900/30 rounded-xl text-slate-800 dark:text-slate-200 text-sm leading-relaxed shadow-sm",children:i.Effect})]})]})})]})})},mN=({pokemon:t,onBack:e,moveMap:n,abilityMap:r,language:s})=>{var I,b;const i=Sn[s],o=is(t.Type1),[l,c]=$.useState(null),[h,p]=$.useState(null);$.useEffect(()=>{window.scrollTo(0,0)},[]);const m=P=>{let D=n[P];if(!D){const k=P.replace(/[\s-]/g,""),w=Object.keys(n).find(T=>T.toLowerCase()===k.toLowerCase()||T.toLowerCase()===P.toLowerCase());w&&(D=n[w])}D?c({name:P,path:D}):(console.warn(`Move path not found for: ${P}`),c({name:P,path:""}))},_=P=>{if(!P)return;let D=r[P];if(!D){const k=P.replace(/[\s-]/g,""),w=Object.keys(r).find(T=>T.toLowerCase()===k.toLowerCase()||T.toLowerCase()===P.toLowerCase());w&&(D=r[w])}D?p({name:P,path:D}):console.warn(`Ability path not found for: ${P}`)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`min-h-screen ${o} transition-colors duration-500 overflow-x-hidden`,children:[u.jsxs("div",{className:"p-6 pt-8 pb-48 relative",children:[u.jsxs("div",{className:"flex justify-between items-center text-white max-w-4xl mx-auto z-50 relative",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors backdrop-blur-md",children:u.jsx(oi,{size:32})}),u.jsxs("span",{className:"font-bold text-2xl",children:["#",t.Number.toString().padStart(3,"0")]})]}),u.jsxs("div",{className:"max-w-4xl mx-auto mt-6 flex justify-between items-center px-4 relative z-30",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white tracking-tight drop-shadow-md",children:t.Name}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx(Ir,{type:t.Type1,language:s}),t.Type2&&u.jsx(Ir,{type:t.Type2,language:s})]})]}),u.jsx("div",{className:"text-white/90 font-semibold text-lg hidden md:block backdrop-blur-sm bg-white/10 px-4 py-2 rounded-lg",children:t.DexCategory})]}),u.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-12 z-40 pointer-events-none",children:u.jsx("img",{src:Ex(t),alt:t.Name,className:"w-64 h-64 md:w-80 md:h-80 object-contain drop-shadow-2xl",onError:P=>{const D=P.target,k=Nf(t);D.src!==k?D.src=k:D.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})}),u.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 pointer-events-none translate-y-1/4 translate-x-1/4 z-10",children:u.jsx("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-96 h-96 filter invert",alt:"bg"})})]}),u.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-t-[3rem] min-h-[calc(100vh-300px)] p-6 pt-16 md:px-12 pb-20 relative z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] transition-colors duration-300",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-10",children:[u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(ru,{className:"w-5 h-5"})," ",i.about]}),u.jsxs("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-lg italic",children:['"',t.DexDescription||"No description available.",'"']}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.height}),u.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((I=t.Height)==null?void 0:I.Meters)||"?","m"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.weight}),u.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((b=t.Weight)==null?void 0:b.Kilograms)||"?","kg"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.rank}),u.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.RecommendedRank||"Unknown"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.role}),u.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.GoodStarter?i.starter:i.wild})]})]})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(AE,{className:"w-5 h-5"})," ",i.baseStats]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4",children:[u.jsxs("div",{className:"col-span-1 md:col-span-2 flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-700",children:[u.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:i.hp}),u.jsxs("div",{className:"flex-1 flex items-center",children:[u.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 mr-4 w-8",children:t.BaseHP}),u.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${Math.min(100,t.BaseHP/15*100)}%`}})})]})]}),[{label:i.strength,val:t.Strength,max:t.MaxStrength},{label:i.dexterity,val:t.Dexterity,max:t.MaxDexterity},{label:i.vitality,val:t.Vitality,max:t.MaxVitality},{label:i.special,val:t.Special,max:t.MaxSpecial},{label:i.insight,val:t.Insight,max:t.MaxInsight}].map(P=>u.jsxs("div",{className:"flex items-center justify-between py-2",children:[u.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:P.label}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[P.val,"/",P.max]}),lN(P.val,P.max)]})]},P.label))]})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(XE,{className:"w-5 h-5"})," ",i.abilities]}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.Ability1&&u.jsxs("button",{onClick:()=>_(t.Ability1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[u.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.primary}),u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:Xa(t.Ability1,s)})]}),t.Ability2&&u.jsxs("button",{onClick:()=>_(t.Ability2),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[u.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.secondary}),u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:Xa(t.Ability2,s)})]}),t.HiddenAbility&&u.jsxs("button",{onClick:()=>_(t.HiddenAbility),className:"px-4 py-2 bg-purple-50 dark:bg-purple-900/30 rounded-lg border border-purple-100 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors text-left",children:[u.jsx("span",{className:"text-xs text-purple-400 dark:text-purple-300 block uppercase font-bold",children:i.hidden}),u.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-200",children:Xa(t.HiddenAbility,s)})]})]})]}),u.jsxs("section",{children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[u.jsx(iu,{className:"w-5 h-5"})," ",i.moveset]}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-4 overflow-hidden border border-slate-100 dark:border-slate-700",children:t.Moves&&t.Moves.length>0?u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:t.Moves.map((P,D)=>{let k="text-slate-500 dark:text-slate-400",w="bg-white dark:bg-slate-800",T="hover:bg-slate-100 dark:hover:bg-slate-700";const N=P.Learned||"Standard",L=wx(N,s),M=Po(P.Name,s);return N==="Starter"&&(k="text-green-600 dark:text-green-400",w="bg-green-50 dark:bg-green-900/20",T="hover:bg-green-100 dark:hover:bg-green-900/30"),(N==="Expert"||N==="Ace"||N==="Master")&&(k="text-orange-600 dark:text-orange-400",w="bg-orange-50 dark:bg-orange-900/20",T="hover:bg-orange-100 dark:hover:bg-orange-900/30"),u.jsxs("button",{onClick:()=>m(P.Name),className:`${w} ${T} p-3 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm flex flex-col text-left transition-all duration-200 active:scale-95`,children:[u.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${k} mb-1`,children:L}),u.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm truncate w-full",children:M})]},D)})}):u.jsx("p",{className:"text-slate-400 text-center italic",children:"No moves data available."})})]})]})})]}),l&&u.jsx(Sx,{moveName:l.name,filePath:l.path,onClose:()=>c(null),language:s}),h&&u.jsx(Tx,{abilityName:h.name,filePath:h.path,onClose:()=>p(null),language:s})]})},gN=({character:t,baseData:e,moveFileMap:n,abilityFileMap:r,onSave:s,onClose:i,language:o,natureMap:l})=>{const c=Sn[o],[h,p]=$.useState(t),[m,_]=$.useState(!0),I=is(h.type1),[b,P]=$.useState({step:"setup",mode:"attribute",isOpen:!1,statName:"",statValue:0,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0,total:0}),[D,k]=$.useState(null),[w,T]=$.useState(null),[N,L]=$.useState(null),[M,x]=$.useState(null),[y,E]=$.useState(!1);$.useEffect(()=>{if(!h.nature||!l)return;const R=l[h.nature];if(R){const F=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${R.split("/").map(Q=>encodeURIComponent(Q)).join("/")}`;fetch(F).then(Q=>Q.json()).then(Q=>{x(Q),!m&&Q.Confidence&&p(ne=>({...ne,confidence:Q.Confidence}))}).catch(Q=>console.error("Failed to fetch nature",Q))}else x(null)},[h.nature,l,m]);const S=()=>{s(h)},A=()=>{m||S(),_(!m)},C=(R,W)=>{if(m)return;const F=h.moves||[],Q=F.includes(R),ne=h.attributes.insight.current+2;if(Q)p(ue=>({...ue,moves:ue.moves.filter(_e=>_e!==R)}));else{if(F.length>=ne){alert(`You can only learn ${ne} moves (Insight + 2)!`);return}const ue=Fr.indexOf(h.rank);if(Fr.indexOf(W)>ue&&F.filter(Wt=>{const Pr=e==null?void 0:e.Moves.find(Cr=>Cr.Name===Wt);return Pr?Fr.indexOf(Pr.Learned)>ue:!1}).length>=1){alert("You can only learn one move from a higher rank!");return}p(It=>({...It,moves:[...It.moves,R]}))}},v=(R,W)=>{!m||W<=0||P({step:"setup",mode:"attribute",isOpen:!0,statName:R,statValue:W,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0})},ee=(R,W)=>{b.selectedSkillName===R?P(F=>({...F,selectedSkillName:null,selectedSkillValue:0})):P(F=>({...F,selectedSkillName:R,selectedSkillValue:W}))},de=()=>{const W=b.mode==="initiative"?1:b.statValue+b.selectedSkillValue;P(F=>({...F,step:"rolling",results:Array(W).fill(1)}))},Oe=R=>{const W=parseInt(R);if(!isNaN(W)&&String(W)===R)return W;const F=R.toLowerCase().trim();if(h.attributes[F])return h.attributes[F].current;for(const Q of["fight","survival","social"])if(h.skills[Q][F])return h.skills[Q][F];return h.contest[F]!==void 0?h.contest[F]:0},Ge=(R,W)=>{const F=R.split("+").map(ue=>ue.trim());let Q=F[0],ne=F[1]||"";if(Q.includes("/")){const ue=Q.split("/").map(_e=>_e.trim());L({isOpen:!0,options:ue,modifier:ne?`+ ${ne}`:"",moveData:W}),k(null);return}H(Q,ne,W)},H=(R,W,F)=>{const Q=Oe(R),ne=W?Oe(W):0;let ue;if(F&&F.Damage1){const _e=F.Damage2?`${F.Damage1} + ${F.Damage2}`:F.Damage1;ue={name:F.Name,type:F.Type,damagePool:_e}}P({step:"setup",mode:"move",isOpen:!0,statName:R,statValue:Q,selectedSkillName:W||null,selectedSkillValue:ne,results:[],successes:0,activeMove:ue}),k(null),L(null)},re=()=>{if(!b.activeMove||!b.activeMove.damagePool)return;const W=b.activeMove.damagePool.split("+").map(qo=>qo.trim()),F=W[0],Q=Oe(F);let ne=0;W[1]&&(ne=Oe(W[1]));let ue=0;(h.type1===b.activeMove.type||h.type2&&h.type2===b.activeMove.type)&&(ue=1);let _e=0;b.successes>3&&(_e=2);const It=ne+ue+_e,Wt=[];ne>0&&Wt.push(`Base(${ne})`),ue>0&&Wt.push("STAB(+1)"),_e>0&&Wt.push("Crit(+2)");const Pr=Wt.length>0?Wt.join(" "):"Bonus";P({step:"setup",mode:"move",isOpen:!0,statName:"Damage",statValue:Q,selectedSkillName:Pr,selectedSkillValue:It,results:[],successes:0,activeMove:void 0})},se=()=>{const R=h.attributes.dexterity.current,W=h.skills.survival.alert,F=R+W;P({step:"setup",mode:"initiative",isOpen:!0,statName:"Initiative",statValue:1,selectedSkillName:"Dexterity + Alert",selectedSkillValue:F,results:[],successes:0,total:0})};$.useEffect(()=>{let R,W;if(b.isOpen&&b.step==="rolling"){const F=b.mode==="initiative",Q=F?1:b.statValue+b.selectedSkillValue;R=setInterval(()=>{P(ne=>({...ne,results:Array(Q).fill(0).map(()=>Math.floor(Math.random()*6)+1)}))},80),W=setTimeout(()=>{clearInterval(R);const ne=Array(Q).fill(0).map(()=>Math.floor(Math.random()*6)+1);if(F){const ue=ne[0];P(_e=>({..._e,step:"result",results:ne,total:ue+_e.selectedSkillValue,successes:0}))}else{const ue=ne.filter(_e=>_e>3).length;P(_e=>({..._e,step:"result",results:ne,successes:ue}))}},2e3)}return()=>{clearInterval(R),clearTimeout(W)}},[b.isOpen,b.step,b.statValue,b.selectedSkillValue,b.mode]);const ve=(R,W,F)=>{m||p(Q=>({...Q,attributes:{...Q.attributes,[R]:{...Q.attributes[R],[W]:F}}}))},te=(R,W,F)=>{m||p(Q=>({...Q,skills:{...Q.skills,[R]:{...Q.skills[R],[W]:F}}}))},ge=(R,W)=>{m||p(F=>({...F,[R]:W}))},tt=(R,W)=>{p(F=>({...F,[R]:Math.max(0,(F[R]||0)+W)}))},Ye=(R,W,F)=>{p(Q=>({...Q,[R]:{...Q[R],[W]:F}}))},Fe=(R,W)=>{m||p(F=>({...F,contest:{...F.contest,[R]:W}}))},$e=({label:R,current:W,max:F,onChangeCurrent:Q})=>{const ne=m?"button":"div",ue=m?{onClick:()=>v(R,W),className:"w-full bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center hover:bg-slate-50 hover:border-blue-500 hover:scale-[1.02] active:scale-95 transition-all cursor-pointer group relative"}:{className:"bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center"};return u.jsxs(ne,{...ue,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:`font-black uppercase tracking-widest text-sm ${m?"text-slate-800 group-hover:text-blue-600":"text-slate-800"}`,children:R}),m&&u.jsx(Oi,{size:14,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity absolute right-3"})]}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2 px-1",children:Array.from({length:F}).map((_e,It)=>u.jsx("div",{onClick:Wt=>{m||(Wt.stopPropagation(),Q(It+1))},className:`w-4 h-4 rounded-full border border-slate-300 transition-all duration-150 ${It<W?"bg-slate-900":"bg-slate-200"} ${m?"":"cursor-pointer hover:bg-slate-400"}`,title:m?"":`${R}: ${It+1}`},It))})]})},Ht=({label:R,value:W,onChange:F})=>u.jsxs("div",{className:`bg-white/50 rounded-xl px-3 py-2 flex items-center justify-between mb-2 ${m?"opacity-90":"hover:bg-white/80 transition-colors"}`,children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:R}),u.jsx("div",{className:"flex gap-1.5",children:Array.from({length:5}).map((Q,ne)=>u.jsx("button",{disabled:m,onClick:()=>F(ne+1===W?0:ne+1),className:`w-3 h-3 rounded-full border border-pink-400 transition-all duration-150 ${ne<W?"bg-pink-500 scale-125 border-pink-500":"bg-white"} ${m?"cursor-default":"hover:bg-pink-200 cursor-pointer"}`,title:`${R}: ${ne+1}`},ne))})]}),qe=({label:R,value:W,onChange:F})=>u.jsxs("div",{className:"flex items-center justify-between mb-1.5 group",children:[u.jsx("span",{className:"text-xs font-bold text-white uppercase group-hover:text-amber-200 transition-colors truncate mr-2",children:R}),u.jsx("div",{className:"flex gap-1 shrink-0",children:Array.from({length:5}).map((Q,ne)=>u.jsx("button",{disabled:m,onClick:()=>F(ne+1===W?0:ne+1),className:`w-3.5 h-3.5 rounded-full border border-white/20 transition-all duration-150 ${ne<W?"bg-white scale-110 shadow-sm":"bg-black/20"} ${m?"cursor-default":"hover:bg-white/20"}`},ne))})]}),O=({label:R,value:W,onChange:F})=>u.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[u.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:u.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:R})}),u.jsx("input",{type:"text",value:W,readOnly:m,onChange:Q=>F(Q.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none ${m?"bg-slate-100 cursor-default":"bg-blue-50 focus:bg-white"}`})]}),K=({label:R,current:W,max:F,onChangeCurrent:Q,icon:ne})=>u.jsxs("div",{className:"bg-slate-800 rounded-2xl p-1.5 flex items-center justify-between gap-3 mb-3 border-4 border-slate-700 shadow-md",children:[u.jsxs("div",{className:"flex-1 pl-3 overflow-hidden flex items-center gap-2",children:[u.jsx("span",{className:"text-lg font-black text-white uppercase tracking-wider truncate",children:R}),ne]}),u.jsxs("div",{className:"w-28 bg-white rounded-xl h-10 flex items-center px-2 relative overflow-hidden shrink-0",children:[u.jsx("input",{type:"number",value:W,onChange:ue=>Q(parseInt(ue.target.value)||0),className:"w-full text-2xl font-bold text-slate-800 bg-transparent relative z-10 outline-none"}),u.jsxs("span",{className:"text-slate-400 text-sm font-mono absolute right-2 top-1/2 transform -translate-y-1/2",children:["/",F]})]})]}),Z=({label:R,value:W,onChange:F,isReadOnly:Q=!1,onRoll:ne})=>u.jsxs("div",{className:"flex rounded-full border-4 border-slate-700 bg-white overflow-hidden h-9 shadow-sm",children:[u.jsxs("div",{className:"flex-1 flex items-center pl-3 font-black text-slate-700 uppercase text-[10px] tracking-wider whitespace-nowrap overflow-hidden",children:[R,":"]}),Q||m?u.jsxs("div",{onClick:()=>m&&ne&&ne(),className:`w-20 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 
                   ${m?"bg-slate-100":"bg-blue-100"}
                   ${m&&ne?"cursor-pointer hover:bg-green-100 hover:text-green-800 transition-colors":""}
                   `,children:[W,m&&ne&&u.jsx(Oi,{size:12,className:"ml-1 opacity-50"})]}):u.jsx("input",{type:"number",value:W,onChange:ue=>F&&F(parseInt(ue.target.value)||0),className:"w-20 bg-blue-100 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 text-center outline-none"})]}),X=h.attributes.dexterity.current+h.skills.survival.alert,q=h.attributes.vitality.current,Se=h.attributes.insight.current,je=h.attributes.dexterity.current+h.skills.fight.evasion,tn=h.attributes.strength.current+h.skills.fight.clash;h.combat;const it=h.attributes.insight.current+2,pt=$.useMemo(()=>{if(!e)return{currentRank:[],nextRank:[]};const R=Fr.indexOf(h.rank),W=e.Moves.filter(Q=>{const ne=Fr.indexOf(Q.Learned);return ne!==-1&&ne<=R}),F=e.Moves.filter(Q=>Fr.indexOf(Q.Learned)===R+1);return{currentRank:W,nextRank:F}},[e,h.rank]),Tt=$.useMemo(()=>l?Object.keys(l).sort():[],[l]);return u.jsxs("div",{className:"fixed inset-0 z-50 bg-[#e74c3c] overflow-y-auto animate-fade-in custom-scrollbar",children:[u.jsxs("div",{className:"sticky top-0 z-50 bg-[#c0392b] p-4 shadow-md flex justify-between items-center text-white",children:[u.jsxs("button",{onClick:()=>{S(),i()},className:"flex items-center gap-2 hover:bg-white/20 px-3 py-1 rounded-full transition-colors",children:[u.jsx(oi,{})," ",c.close]}),u.jsx("h1",{className:"text-xl font-bold uppercase tracking-widest hidden md:block",children:c.pokemonSheet}),u.jsxs("button",{onClick:A,className:`flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg border transition-all ${m?"bg-slate-800 border-slate-600 hover:bg-slate-700 text-white":"bg-yellow-400 border-yellow-500 hover:bg-yellow-300 text-slate-900"}`,children:[m?u.jsx(BE,{size:18}):u.jsx(tk,{size:18}),u.jsx("span",{className:"font-bold",children:m?"Game Mode":"Edit Mode"})]})]}),u.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-center bg-slate-800/20 p-6 rounded-3xl border-4 border-slate-800/30",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-32 h-32 rounded-full ${I} border-4 border-white shadow-xl flex items-center justify-center overflow-hidden bg-white`,children:u.jsx("img",{src:h.image,alt:h.nickname,className:"w-24 h-24 object-contain"})}),u.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-slate-800 text-white text-xs font-bold px-2 py-1 rounded-lg border-2 border-white",children:["#",h.dexId]})]}),u.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[u.jsx("input",{type:"text",value:h.nickname,readOnly:m,onChange:R=>ge("nickname",R.target.value),className:`text-4xl md:text-5xl font-black text-white bg-transparent border-b-4 focus:border-white outline-none w-full mb-2 placeholder-white/50 ${m?"border-transparent cursor-default":"border-white/20"}`,placeholder:c.nickname}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-2",children:[u.jsx("span",{className:"text-xl text-white font-bold opacity-80",children:h.speciesName}),u.jsx("div",{className:"h-6 w-px bg-white/40 hidden md:block"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx(Ir,{type:h.type1,language:o}),h.type2&&u.jsx(Ir,{type:h.type2,language:o})]}),u.jsx("div",{className:"ml-0 md:ml-4 bg-black/20 rounded-lg p-2 border border-white/10",children:u.jsxs("div",{className:"flex items-center gap-4 px-2 py-1",children:[u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx("span",{className:"text-[10px] font-bold text-yellow-400 uppercase tracking-wider",children:"Win"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>tt("victories",-1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:u.jsx(cc,{size:14})}),u.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:h.victories||0}),u.jsx("button",{onClick:()=>tt("victories",1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:u.jsx(El,{size:14})})]})]}),u.jsx("div",{className:"w-px h-8 bg-white/20"}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx("span",{className:"text-[10px] font-bold text-white/60 uppercase tracking-wider",children:"Fight"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>tt("battles",-1),className:"p-1 hover:text-white text-white/40 transition-colors",children:u.jsx(cc,{size:14})}),u.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:h.battles||0}),u.jsx("button",{onClick:()=>tt("battles",1),className:"p-1 hover:text-white text-white/40 transition-colors",children:u.jsx(El,{size:14})})]})]})]})})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[u.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[u.jsxs("div",{className:"bg-red-900/80 p-4 rounded-3xl border-4 border-red-800 shadow-lg",children:[u.jsx($e,{label:c.strength,current:h.attributes.strength.current,max:h.attributes.strength.max,onChangeCurrent:R=>ve("strength","current",R)}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[u.jsxs("h4",{className:"text-red-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[u.jsx(Vm,{size:12})," ",c.sheet.fight]}),u.jsx(qe,{label:c.sheet.brawl,value:h.skills.fight.brawl,onChange:R=>te("fight","brawl",R)}),u.jsx(qe,{label:c.sheet.channel,value:h.skills.fight.channel,onChange:R=>te("fight","channel",R)}),u.jsx(qe,{label:c.sheet.clash,value:h.skills.fight.clash,onChange:R=>te("fight","clash",R)}),u.jsx(qe,{label:c.sheet.evasion,value:h.skills.fight.evasion,onChange:R=>te("fight","evasion",R)})]})]}),u.jsxs("div",{className:"bg-green-900/80 p-4 rounded-3xl border-4 border-green-800 shadow-lg",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx($e,{label:c.dexterity,current:h.attributes.dexterity.current,max:h.attributes.dexterity.max,onChangeCurrent:R=>ve("dexterity","current",R)}),u.jsx($e,{label:c.vitality,current:h.attributes.vitality.current,max:h.attributes.vitality.max,onChangeCurrent:R=>ve("vitality","current",R)})]}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[u.jsxs("h4",{className:"text-green-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[u.jsx(UE,{size:12})," ",c.sheet.survival]}),u.jsx(qe,{label:c.sheet.alert,value:h.skills.survival.alert,onChange:R=>te("survival","alert",R)}),u.jsx(qe,{label:c.sheet.athletic,value:h.skills.survival.athletic,onChange:R=>te("survival","athletic",R)}),u.jsx(qe,{label:c.sheet.nature,value:h.skills.survival.nature,onChange:R=>te("survival","nature",R)}),u.jsx(qe,{label:c.sheet.stealth,value:h.skills.survival.stealth,onChange:R=>te("survival","stealth",R)})]})]}),u.jsxs("div",{className:"bg-purple-900/80 p-4 rounded-3xl border-4 border-purple-800 shadow-lg",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx($e,{label:c.special,current:h.attributes.special.current,max:h.attributes.special.max,onChangeCurrent:R=>ve("special","current",R)}),u.jsx($e,{label:c.insight,current:h.attributes.insight.current,max:h.attributes.insight.max,onChangeCurrent:R=>ve("insight","current",R)})]}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[u.jsxs("h4",{className:"text-purple-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[u.jsx(GE,{size:12})," ",c.sheet.social]}),u.jsx(qe,{label:c.sheet.allure,value:h.skills.social.allure,onChange:R=>te("social","allure",R)}),u.jsx(qe,{label:c.sheet.etiquette,value:h.skills.social.etiquette,onChange:R=>te("social","etiquette",R)}),u.jsx(qe,{label:c.sheet.intimidate,value:h.skills.social.intimidate,onChange:R=>te("social","intimidate",R)}),u.jsx(qe,{label:c.sheet.perform,value:h.skills.social.perform,onChange:R=>te("social","perform",R)})]})]})]}),u.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-4",children:[u.jsxs("div",{children:[u.jsx(K,{label:c.sheet.hp,current:h.hp.current,max:h.hp.max,onChangeCurrent:R=>Ye("hp","current",R),icon:u.jsx(FE,{className:"text-red-500 fill-red-500"})}),u.jsx(K,{label:c.sheet.will,current:h.will.current,max:h.will.max,onChangeCurrent:R=>Ye("will","current",R),icon:u.jsx(PE,{className:"text-blue-500 fill-blue-500"})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx(Z,{label:c.sheet.initiative,value:X,isReadOnly:!0,onRoll:()=>se()}),u.jsx(Z,{label:c.sheet.def,value:`${q}/${Se}`,isReadOnly:!0})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx(Z,{label:c.sheet.evasion,value:je,isReadOnly:!0}),u.jsx(Z,{label:c.sheet.clash,value:tn,isReadOnly:!0})]})]}),u.jsxs("div",{className:"bg-slate-800 rounded-3xl border-4 border-slate-700 p-4 flex-1",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h3",{className:"text-white font-bold uppercase flex items-center gap-2",children:[u.jsx(iu,{className:"text-yellow-400"})," ",c.moveset]}),u.jsxs("span",{className:"text-xs font-mono text-slate-400",children:[h.moves.length,"/",it]})]}),u.jsx("div",{className:"space-y-2",children:Array.from({length:it}).map((R,W)=>{const F=h.moves[W];return F?u.jsxs("button",{onClick:()=>{var Q;if(m){if(n){const ne=n[F]||((Q=Object.entries(n).find(([ue])=>ue.toLowerCase()===F.toLowerCase()))==null?void 0:Q[1]);ne&&k({name:F,path:ne})}}else C(F,"")},className:"w-full bg-white rounded-xl p-3 flex justify-between items-center shadow-md hover:scale-[1.01] active:scale-95 transition-all text-left group",children:[u.jsx("span",{className:"font-bold text-slate-800",children:Po(F,o)}),m?u.jsx(Oi,{className:"text-slate-300 group-hover:text-blue-500 transition-colors",size:20}):u.jsx(cc,{className:"text-red-500",size:20})]},W):u.jsx("div",{className:"w-full bg-slate-700/50 rounded-xl p-3 flex justify-center items-center border-2 border-dashed border-slate-600",children:u.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:"Empty Slot"})},W)})}),!m&&e&&u.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[u.jsxs("h4",{className:"text-white/60 font-bold uppercase text-xs mb-3",children:["Learnable Moves (Current Rank: ",h.rank,")"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:pt.currentRank.map(R=>{const W=h.moves.includes(R.Name);return u.jsx("button",{onClick:()=>C(R.Name,R.Learned),disabled:W,className:`p-2 rounded-lg text-xs font-bold uppercase border transition-all ${W?"bg-green-500 border-green-500 text-white opacity-50 cursor-not-allowed":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:Po(R.Name,o)},R.Name)})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-slate-100 rounded-3xl p-4 border-4 border-slate-300",children:[u.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[u.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:u.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:c.sheet.nature})}),m?u.jsx("div",{className:"w-full px-2 py-1 text-slate-800 font-bold bg-slate-100 cursor-default min-h-[32px] flex items-center",children:h.nature||"-"}):u.jsxs("select",{value:h.nature,onChange:R=>ge("nature",R.target.value),className:"w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none bg-blue-50 focus:bg-white",children:[u.jsx("option",{value:"",children:"- Select -"}),Tt.map(R=>u.jsx("option",{value:R,children:R},R))]})]}),u.jsx(O,{label:c.sheet.confidence,value:h.confidence,onChange:R=>ge("confidence",R)}),u.jsx(O,{label:c.sheet.item,value:h.item,onChange:R=>ge("item",R)}),u.jsxs("div",{className:"bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm",children:[u.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:u.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:c.sheet.status})}),u.jsx("select",{value:h.status,disabled:m,onChange:R=>ge("status",R.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none ${m?"bg-slate-100":"bg-blue-50"}`,children:ZA.map(R=>u.jsx("option",{value:R,children:c.sheet.statuses[R]||R},R))})]})]}),u.jsxs("div",{className:"bg-pink-100 rounded-3xl p-4 border-4 border-pink-300 flex flex-col",children:[u.jsx("h4",{className:"text-pink-400 font-bold uppercase text-center text-xs mb-3 tracking-widest",children:"Contest"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx(Ht,{label:c.sheet.cool,value:h.contest.cool,onChange:R=>Fe("cool",R)}),u.jsx(Ht,{label:c.sheet.beauty,value:h.contest.beauty,onChange:R=>Fe("beauty",R)}),u.jsx(Ht,{label:c.sheet.cute,value:h.contest.cute,onChange:R=>Fe("cute",R)}),u.jsx(Ht,{label:c.sheet.clever,value:h.contest.clever,onChange:R=>Fe("clever",R)}),u.jsx(Ht,{label:c.sheet.tough,value:h.contest.tough,onChange:R=>Fe("tough",R)})]})]})]})]})]}),w&&u.jsx(Tx,{abilityName:w.name,filePath:w.path,onClose:()=>T(null),language:o}),D&&u.jsx(Sx,{moveName:D.name,filePath:D.path,onClose:()=>k(null),language:o,onRoll:Ge}),N&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Choose Attribute"}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:N.options.map(R=>u.jsx("button",{onClick:()=>H(R,N.modifier.replace("+","").trim(),N.moveData),className:"w-full py-4 bg-slate-100 hover:bg-blue-500 hover:text-white rounded-xl font-bold text-lg transition-colors border-2 border-slate-200",children:R},R))}),u.jsx("button",{onClick:()=>L(null),className:"mt-4 text-slate-400 font-bold",children:"Cancel"})]})}),b.isOpen&&u.jsx("div",{className:"fixed inset-0 z-[110] bg-black/80 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in p-4",onClick:()=>{b.step==="result"&&P(R=>({...R,isOpen:!1}))},children:u.jsxs("div",{className:"bg-white rounded-[3rem] p-8 md:p-12 w-full max-w-2xl text-center shadow-2xl relative overflow-hidden",onClick:R=>R.stopPropagation(),children:[u.jsx("button",{onClick:()=>P(R=>({...R,isOpen:!1})),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200",children:u.jsx(ls,{size:24})}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h2",{className:"text-4xl font-black text-slate-800 uppercase tracking-tighter mb-2",children:[b.statName," Check"]}),u.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 px-4 py-2 rounded-full font-bold text-slate-500",children:[u.jsx("span",{className:"text-blue-600",children:b.statValue}),b.selectedSkillName&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"+"}),u.jsxs("span",{className:"text-purple-600",children:[b.selectedSkillName," (",b.selectedSkillValue,")"]})]})]})]}),b.step==="setup"&&u.jsxs("div",{className:"animate-fade-in",children:[b.mode==="attribute"&&u.jsxs("div",{className:"mb-8",children:[u.jsx("p",{className:"text-slate-400 font-bold uppercase text-sm mb-4",children:"Add a Skill?"}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-h-48 overflow-y-auto custom-scrollbar p-2",children:Object.entries(h.skills).flatMap(([R,W])=>Object.entries(W).map(([F,Q])=>u.jsxs("button",{onClick:()=>ee(F,Q),className:`px-4 py-2 rounded-lg font-bold border-2 transition-all capitalize ${b.selectedSkillName===F?"bg-purple-600 border-purple-600 text-white shadow-lg scale-105":"bg-white border-slate-200 text-slate-600 hover:border-purple-300"}`,children:[F," (",Q,")"]},F)))})]}),u.jsxs("button",{onClick:de,className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-black text-2xl shadow-xl hover:scale-[1.02] transition-transform flex items-center justify-center gap-3",children:[u.jsx(Oi,{size:32})," ROLL ",b.statValue+b.selectedSkillValue," DICE"]})]}),b.step==="rolling"&&u.jsx("div",{className:"flex flex-wrap justify-center gap-4 py-8",children:b.results.map((R,W)=>u.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-xl flex items-center justify-center text-white text-3xl font-black animate-pulse",children:R},W))}),b.step==="result"&&u.jsxs("div",{className:"animate-scale-up",children:[u.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:b.results.map((R,W)=>u.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center text-2xl font-black border-4 ${R>=4?"bg-green-500 border-green-600 text-white shadow-lg":"bg-slate-200 border-slate-300 text-slate-400"}`,children:R},W))}),b.mode==="initiative"?u.jsxs("div",{className:"bg-yellow-50 border-4 border-yellow-200 rounded-2xl p-6",children:[u.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Total Initiative"}),u.jsx("span",{className:"text-6xl font-black text-yellow-500",children:b.total})]}):u.jsxs("div",{className:"bg-green-50 border-4 border-green-200 rounded-2xl p-6",children:[u.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Successes"}),u.jsx("span",{className:"text-6xl font-black text-green-600",children:b.successes})]}),u.jsxs("div",{className:"flex gap-4 mt-6",children:[u.jsx("button",{onClick:()=>P(R=>({...R,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Done"}),b.mode==="move"&&b.activeMove&&b.activeMove.damagePool&&u.jsxs("button",{onClick:re,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors flex items-center justify-center gap-2",children:[u.jsx(Vm,{size:20})," Roll Damage"]})]})]})]})})]})]})},yN=({onBack:t,allPokemon:e,language:n,natureMap:r,moveFileMap:s,abilityFileMap:i})=>{const o=Sn[n],{user:l}=xx(),[c,h]=$.useState(Array(6).fill(null)),[p,m]=$.useState(Array(20).fill(null).map(()=>Array(30).fill(null))),[_,I]=$.useState(0),[b,P]=$.useState(!1),[D,k]=$.useState(null),w=$.useRef(!1),[T,N]=$.useState(!1),[L,M]=$.useState(null),[x,y]=$.useState(null),[E,S]=$.useState(null),[A,C]=$.useState(null),[v,ee]=$.useState(""),[de,Oe]=$.useState("");$.useEffect(()=>{(async()=>{if(P(!0),l)try{const K=Wg(qg,"users",l.uid),Z=await HA(K);if(Z.exists()){const X=Z.data();X.party&&h(X.party),X.pcBoxes&&m(X.pcBoxes)}else{const X=localStorage.getItem("pokerole-party"),q=localStorage.getItem("pokerole-pc");X&&h(JSON.parse(X)),q&&m(JSON.parse(q))}}catch(K){console.error("Error loading from cloud",K)}else{const K=localStorage.getItem("pokerole-party");if(K)try{const X=JSON.parse(K);Array.isArray(X)&&X.length===6&&h(X)}catch(X){console.error("Failed to load party",X)}const Z=localStorage.getItem("pokerole-pc");if(Z)try{const X=JSON.parse(Z);Array.isArray(X)&&X.length===20&&m(X)}catch(X){console.error("Failed to load PC",X)}}w.current=!0,P(!1)})()},[l]),$.useEffect(()=>{if(!w.current)return;const K=setTimeout(async()=>{if(l){P(!0);try{await GA(Wg(qg,"users",l.uid),{party:c,pcBoxes:p,lastUpdated:new Date},{merge:!0}),k(new Date)}catch(Z){console.error("Error saving to cloud",Z)}finally{P(!1)}}else localStorage.setItem("pokerole-party",JSON.stringify(c)),localStorage.setItem("pokerole-pc",JSON.stringify(p)),k(new Date)},2e3);return()=>clearTimeout(K)},[c,p,l]);const Ge=(O,K,Z,X)=>{C({source:K,boxIndex:Z,slotIndex:X}),O.dataTransfer.effectAllowed="move"},H=O=>{O.preventDefault(),O.dataTransfer.dropEffect="move"},re=(O,K,Z,X)=>{if(O.preventDefault(),!A)return;const{source:q,boxIndex:Se,slotIndex:je}=A;if(q===K&&Se===Z&&je===X){C(null);return}let tn=null;if(q==="party"?tn=c[je]:tn=p[Se][je],!tn){C(null);return}let it=null;K==="party"?it=c[X]:it=p[Z][X];const pt=[...c],Tt=[...p],R=(W,F,Q,ne)=>{W==="party"?pt[Q]=ne:(Tt[F]===p[F]&&(Tt[F]=[...p[F]]),Tt[F][Q]=ne)};R(q,Se,je,null),R(K,Z,X,tn),it&&R(q,Se,je,it),h(pt),m(Tt),C(null)},se=(O,K)=>{const Z=O===-1?c[K]:p[O][K];Z===null?(M({boxIndex:O,slotIndex:K}),N(!0),ee(""),Oe("")):(S({boxIndex:O,slotIndex:K}),y(Z))},ve=O=>{var K,Z,X,q;return{id:crypto.randomUUID(),dexId:O.Number,nickname:O.Name,speciesName:O.Name,type1:O.Type1,type2:O.Type2,rank:O.RecommendedRank||"Starter",attributes:{strength:{current:O.Strength,max:O.MaxStrength},dexterity:{current:O.Dexterity,max:O.MaxDexterity},vitality:{current:O.Vitality,max:O.MaxVitality},special:{current:O.Special,max:O.MaxSpecial},insight:{current:O.Insight,max:O.MaxInsight}},skills:{fight:{brawl:0,channel:0,clash:0,evasion:0},survival:{alert:0,athletic:0,nature:0,stealth:0},social:{allure:0,etiquette:0,intimidate:0,perform:0}},hp:{current:O.BaseHP,max:O.BaseHP},will:{current:O.Insight+2,max:O.Insight+2},moves:[],nature:"",confidence:"",happiness:2,loyalty:2,battles:0,victories:0,item:"",status:"Neutral",accessory:"",contest:{tough:1,cool:1,beauty:1,cute:1,clever:1},combat:{accuracy:0,damage:0},size:((Z=(K=O.Height)==null?void 0:K.Meters)==null?void 0:Z.toString())||"0",weight:((q=(X=O.Weight)==null?void 0:X.Kilograms)==null?void 0:q.toString())||"0",image:Ex(O)}},te=O=>{if(L){const K=ve(O),{boxIndex:Z,slotIndex:X}=L;if(Z===-1){const q=[...c];q[X]=K,h(q)}else{const q=[...p],Se=[...q[Z]];Se[X]=K,q[Z]=Se,m(q)}N(!1),M(null)}},ge=(O,K,Z)=>{if(O.stopPropagation(),K===-1){const X=[...c];X[Z]=null,h(X)}else{const X=[...p],q=[...X[K]];q[Z]=null,X[K]=q,m(X)}},tt=O=>{if(E){const{boxIndex:K,slotIndex:Z}=E;if(K===-1){const X=[...c];X[Z]=O,h(X)}else{const X=[...p],q=[...X[K]];q[Z]=O,X[K]=q,m(X)}}},Ye=()=>I(O=>(O+1)%20),Fe=()=>I(O=>(O-1+20)%20),$e=()=>{Oe(v)},Ht=O=>{O.key==="Enter"&&$e()},qe=e.filter(O=>de.trim()?O.Name.toLowerCase().includes(de.toLowerCase()):!0).sort((O,K)=>{if(!de.trim())return O.Number-K.Number;const Z=de.toLowerCase(),X=O.Name.toLowerCase(),q=K.Name.toLowerCase();if(X===Z&&q!==Z)return-1;if(q===Z&&X!==Z)return 1;const Se=X.startsWith(Z),je=q.startsWith(Z);return Se&&!je?-1:!Se&&je?1:X.length!==q.length?X.length-q.length:X.localeCompare(q)}).slice(0,50);return u.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen pb-32",children:[u.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:u.jsx(oi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:o.party})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-3 py-1.5 rounded-full shadow-sm border border-slate-200 dark:border-slate-700",children:[b?u.jsx(su,{className:"animate-spin text-blue-500",size:16}):l?u.jsx(DE,{className:"text-green-500",size:16}):u.jsx(jE,{className:"text-slate-400",size:16}),u.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 hidden sm:inline",children:b?"Syncing...":l?"Cloud Saved":"Local Save"}),D&&!b&&u.jsx("span",{className:"text-[10px] text-slate-300 ml-1",children:D.toLocaleTimeString()})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:c.map((O,K)=>u.jsx("div",{className:"relative",onDragOver:H,onDrop:Z=>re(Z,"party",-1,K),children:O?u.jsxs("div",{draggable:!0,onDragStart:Z=>Ge(Z,"party",-1,K),onClick:()=>se(-1,K),className:`relative h-40 rounded-3xl p-5 shadow-lg overflow-hidden ${is(O.type1)} group cursor-grab active:cursor-grabbing transform hover:scale-[1.02] transition-all`,children:[u.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:u.jsx(Ud,{})}),u.jsxs("div",{className:"flex justify-between h-full relative z-10 pointer-events-none",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:O.nickname}),O.nickname!==O.speciesName&&u.jsx("span",{className:"text-white/70 text-xs font-bold uppercase",children:O.speciesName}),u.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[u.jsx(Ir,{type:O.type1,language:n}),O.type2&&u.jsx(Ir,{type:O.type2,language:n})]})]}),u.jsxs("div",{className:"flex flex-col items-end justify-between",children:[u.jsx("div",{className:"bg-black/20 px-2 py-1 rounded-lg",children:u.jsxs("span",{className:"text-white font-mono text-sm",children:["HP ",O.hp.current,"/",O.hp.max]})}),u.jsx("img",{loading:"lazy",src:O.image,alt:O.nickname,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg"})]})]}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity z-20 pointer-events-none",children:u.jsxs("div",{className:"bg-white/20 backdrop-blur-md px-4 py-2 rounded-full flex items-center gap-2",children:[u.jsx(KE,{className:"text-white",size:20}),u.jsx("span",{className:"text-white font-bold",children:"Edit Sheet"})]})}),u.jsx("button",{onClick:Z=>ge(Z,-1,K),className:"absolute top-3 right-3 p-2 bg-black/20 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all duration-200 z-30 pointer-events-auto",title:o.removeFromParty,children:u.jsx(Mm,{size:16})})]}):u.jsxs("div",{onClick:()=>se(-1,K),className:"h-40 rounded-3xl border-4 border-dashed border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/30 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 hover:border-slate-400 dark:hover:border-slate-600 transition-all duration-200 group",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:u.jsx(El,{size:24})}),u.jsx("span",{className:"font-bold text-lg",children:o.emptySlot})]})},K))}),u.jsxs("div",{className:"mt-8 border-t-2 border-slate-200 dark:border-slate-700 pt-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(qE,{className:"text-slate-500 dark:text-slate-400",size:32}),u.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:o.pc})]}),u.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-2 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsx("button",{onClick:Fe,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:u.jsx(CE,{})}),u.jsxs("div",{className:"flex flex-col items-center w-32",children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:o.box}),u.jsx("div",{className:"relative",children:u.jsx("select",{value:_,onChange:O=>I(parseInt(O.target.value)),className:"appearance-none bg-transparent font-black text-xl text-center outline-none cursor-pointer text-slate-800 dark:text-white w-full z-10 relative",children:Array.from({length:20}).map((O,K)=>u.jsx("option",{value:K,className:"text-slate-800",children:K+1},K))})})]}),u.jsx("button",{onClick:Ye,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:u.jsx(RE,{})})]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-900/50 p-4 rounded-3xl border-4 border-slate-300 dark:border-slate-800",children:u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:p[_].map((O,K)=>u.jsx("div",{className:"aspect-square relative group",onDragOver:H,onDrop:Z=>re(Z,"pc",_,K),children:O?u.jsxs("div",{draggable:!0,onDragStart:Z=>Ge(Z,"pc",_,K),onClick:()=>se(_,K),className:`w-full h-full rounded-xl shadow-md overflow-hidden ${is(O.type1)} cursor-grab active:cursor-grabbing transition-transform hover:scale-105 border-2 border-white/20`,children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none",children:u.jsx(Ud,{})}),u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 pointer-events-none",children:[u.jsx("img",{src:O.image,alt:O.nickname,className:"w-16 h-16 object-contain drop-shadow-md mb-1"}),u.jsx("span",{className:"text-[10px] font-bold text-white uppercase truncate w-full text-center bg-black/20 rounded px-1",children:O.nickname})]}),u.jsx("button",{onClick:Z=>ge(Z,_,K),className:"absolute top-1 right-1 p-1 bg-black/40 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all z-10 pointer-events-auto",title:o.removeFromParty,children:u.jsx(Mm,{size:12})})]}):u.jsx("div",{onClick:()=>se(_,K),className:"w-full h-full rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-white/50 dark:bg-slate-800/50 flex flex-col items-center justify-center text-slate-400 hover:bg-white hover:border-slate-400 transition-colors cursor-pointer",children:u.jsx(El,{size:20,className:"opacity-50"})})},K))})})]}),T&&u.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl flex flex-col max-h-[80vh] animate-scale-up",children:[u.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:o.selectPokemon}),u.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500",children:u.jsx(ls,{size:24})})]}),u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(kl,{className:"absolute left-3 top-3 text-slate-400",size:20}),u.jsx("input",{type:"text",autoFocus:!0,placeholder:o.searchPlaceholder,value:v,onChange:O=>ee(O.target.value),onKeyDown:Ht,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),u.jsx("button",{onClick:$e,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition-colors shadow-lg",children:u.jsx(kl,{size:24})})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[qe.map(O=>u.jsxs("button",{onClick:()=>te(O),className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-700 text-left",children:[u.jsx("img",{src:Nf(O),alt:O.Name,className:"w-12 h-12 object-contain"}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-slate-800 dark:text-white",children:O.Name}),u.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["#",O.Number]})]})]},O.Number)),qe.length===0&&u.jsx("div",{className:"col-span-full text-center py-8 text-slate-400",children:o.noResults})]})})]})}),x&&u.jsx(gN,{character:x,baseData:e.find(O=>O.Number===x.dexId),moveFileMap:s,abilityFileMap:i,language:n,onSave:tt,onClose:()=>{y(null),S(null)},natureMap:r})]})},vN=({items:t,onBack:e,language:n})=>{const r=Sn[n],[s,i]=$.useState(""),[o,l]=$.useState(null),[c,h]=$.useState(!1),[p,m]=$.useState({}),_=["Name","Description","Image","_id"],I=["Name","Description","Effect","Cost","_id","Image","Type"],b=["Boost","Category","Cures","ForTypes","ForTipes","Pocket"],P=$.useMemo(()=>{const N=new Map;return t.forEach(L=>{Object.keys(L).forEach(M=>{if(_.includes(M))return;const x=L[M];if(x==null||x==="")return;if(!N.has(M)){let E="string";b.includes(M)?E="select":typeof x=="boolean"&&(E="boolean"),N.set(M,{type:E,options:new Set})}const y=N.get(M);y.type==="select"&&y.options.add(String(x))})}),Array.from(N.entries()).sort((L,M)=>L[0].localeCompare(M[0])).map(([L,M])=>({key:L,type:M.type,options:Array.from(M.options).sort()}))},[t]),D=$.useMemo(()=>t.filter(N=>{if(s&&!N.Name.toLowerCase().includes(s.toLowerCase()))return!1;for(const[L,M]of Object.entries(p)){if(M===""||M===!1||M===null)continue;const x=N[L];if(x==null)return!1;if(typeof M=="boolean"){if(x!==!0)return!1}else if(b.includes(L)){if(String(x)!==String(M))return!1}else{const y=String(x).toLowerCase(),E=String(M).toLowerCase();if(!y.includes(E))return!1}}return!0}),[t,s,p]),k=(N,L)=>{m(M=>({...M,[N]:L}))},w=()=>{i(""),m({})},T=Object.values(p).filter(N=>N!==""&&N!==!1&&N!==null).length;return u.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto min-h-screen pb-20",children:[u.jsx("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300 -mx-4 px-4 pt-4 pb-4 mb-6",children:u.jsxs("div",{className:"flex flex-col gap-4 max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:u.jsx(oi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),u.jsxs("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[u.jsx(lv,{className:"text-green-500"}),r.sheet.item,"s"]})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[u.jsxs("div",{className:"relative w-full md:w-80",children:[u.jsx(kl,{className:"absolute left-3 top-3 text-slate-400",size:20}),u.jsx("input",{type:"text",placeholder:r.searchPlaceholder,value:s,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm"})]}),u.jsxs("button",{onClick:()=>h(!c),className:`p-3 rounded-xl border transition-all flex items-center gap-2 font-bold ${c||T>0?"bg-green-500 border-green-500 text-white shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50"}`,children:[c?u.jsx(ls,{size:20}):u.jsx(yd,{size:20}),u.jsx("span",{className:"hidden md:inline",children:r.filters}),T>0&&u.jsx("span",{className:"bg-white text-green-600 text-[10px] px-1.5 py-0.5 rounded-full min-w-[20px] text-center",children:T})]})]})]}),c&&u.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 shadow-lg animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-slate-100 dark:border-slate-800",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 uppercase text-sm tracking-wider",children:"Advanced Filters"}),u.jsxs("button",{onClick:w,className:"text-xs font-bold text-red-500 hover:text-red-600 flex items-center gap-1 uppercase",children:[u.jsx(cv,{size:12})," ",r.clear]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar p-1",children:P.map(({key:N,type:L,options:M})=>u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate",title:N,children:N}),L==="select"?u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:p[N]||"",onChange:x=>k(N,x.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",children:[u.jsx("option",{value:"",children:"Any"}),M.map(x=>u.jsx("option",{value:x,children:x},x))]}),u.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",children:u.jsx(yd,{size:12})})]}):L==="boolean"?u.jsxs("button",{onClick:()=>k(N,!p[N]),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-bold transition-all ${p[N]?"bg-green-500 border-green-500 text-white":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-400"}`,children:[p[N]?u.jsx(Rm,{size:16}):u.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-300"}),p[N]?"Yes":"No / Any"]}):u.jsx("input",{type:"text",placeholder:`Filter ${N}...`,value:p[N]||"",onChange:x=>k(N,x.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]},N))})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map((N,L)=>u.jsxs("div",{onClick:()=>l(o===N?null:N),className:`bg-white dark:bg-slate-800 rounded-2xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md ${o===N?"border-green-500 ring-2 ring-green-500/20":"border-slate-200 dark:border-slate-700 hover:border-green-300 dark:hover:border-green-700"}`,children:[u.jsxs("div",{className:"flex items-start gap-4 mb-2",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-100 dark:bg-slate-900 rounded-xl p-1 border border-slate-200 dark:border-slate-700 flex items-center justify-center shrink-0",children:u.jsx("img",{src:aN(N),alt:N.Name,className:"w-full h-full object-contain",onError:M=>{M.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",M.target.style.opacity="0.3"}})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight mb-1",children:N.Name}),N.Type&&u.jsxs("span",{className:"inline-flex text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-0.5 rounded-full items-center gap-1",children:[u.jsx(ZE,{size:10})," ",N.Type]})]})]}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-2 mt-2",children:N.Description}),o===N&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700 animate-fade-in space-y-3",children:[u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-200",children:N.Description}),N.Effect&&u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30",children:[u.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 uppercase block mb-1",children:"Effect"}),u.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200",children:N.Effect})]}),N.Cost!==void 0&&u.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400 font-bold text-sm bg-yellow-50 dark:bg-yellow-900/10 px-3 py-2 rounded-lg w-max",children:[u.jsx(VE,{size:16}),u.jsxs("span",{children:[N.Cost," "]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg",children:Object.entries(N).map(([M,x])=>{if(I.includes(M)||x==null||x==="")return null;let y=x;return typeof x=="boolean"&&(y=x?u.jsx(Rm,{size:14,className:"text-green-500"}):u.jsx(rk,{size:14,className:"text-red-500"})),typeof x=="object"?null:u.jsxs("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-700/50 last:border-0 pb-1 last:pb-0",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:M}),u.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1",children:y})]},M)})})]})]},L))}),D.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(ru,{size:48,className:"mb-4"}),u.jsx("p",{className:"text-xl",children:r.noResults}),(s||T>0)&&u.jsxs("button",{onClick:w,className:"mt-4 text-green-500 font-bold hover:underline",children:[r.clear," Filters"]})]})]})},_N="https://api.github.com/repos/Pokerole-Software-Development/Pokerole-Data/git/trees/master?recursive=1",Kg="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/";function xN(){const[t,e]=$.useState("home"),[n,r]=$.useState("regions"),[s,i]=$.useState("National"),[o,l]=$.useState(null),[c,h]=$.useState(0),[p,m]=$.useState([]),[_,I]=$.useState([]),[b,P]=$.useState({}),[D,k]=$.useState({}),[w,T]=$.useState({}),[N,L]=$.useState(!0),[M,x]=$.useState(0),[y,E]=$.useState(0),[S,A]=$.useState(null),[C,v]=$.useState(()=>{if(typeof window<"u"){const te=localStorage.getItem("theme");return te==="dark"||!te&&window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[ee,de]=$.useState("en"),Oe=()=>{v(te=>!te)};$.useEffect(()=>{const te=document.documentElement;C?(te.classList.add("dark"),localStorage.setItem("theme","dark")):(te.classList.remove("dark"),localStorage.setItem("theme","light"))},[C]),$.useEffect(()=>{(async()=>{try{const ge=await fetch(_N);if(!ge.ok)throw new Error("GitHub API request failed. Limit might be reached.");const tt=await ge.json(),Ye=[],Fe=[],$e={},Ht={},qe={};tt.tree.forEach(q=>{if(q.type==="blob"){if(q.path.includes("v2.0/Pokedex")&&q.path.endsWith(".json")&&Ye.push(q),q.path.includes("v2.0/Items")&&q.path.endsWith(".json")&&Fe.push(q),q.path.includes("v2.0/Moves")&&q.path.endsWith(".json")){const Se=q.path.split("/"),je=Se[Se.length-1].replace(".json","");$e[je]=q.path}if(q.path.includes("v2.0/Abilities")&&q.path.endsWith(".json")){const Se=q.path.split("/"),je=Se[Se.length-1].replace(".json","");Ht[je]=q.path}if(q.path.includes("v2.0/Natures")&&q.path.endsWith(".json")){const Se=q.path.split("/"),je=Se[Se.length-1].replace(".json","");qe[je]=q.path}}});const O=Ye.length+Fe.length;E(O),P($e),k(Ht),T(qe);const K=20,Z=[];for(let q=0;q<Ye.length;q+=K){const je=Ye.slice(q,q+K).map(async pt=>{try{const Tt=pt.path.split("/").map(Q=>encodeURIComponent(Q)).join("/"),R=`${Kg}${Tt}`,W=await fetch(R);if(!W.ok)return null;const F=await W.json();if(F&&F.Name){const Q=F.BaseHP!==void 0?F.BaseHP:F.HP,ne=typeof F.Number=="number"?F.Number:parseInt(F.Number||F.DexID||"0");return{...F,Number:ne,BaseHP:Q,Image:F.Image||`${F.Name}.png`}}return null}catch{return null}}),it=(await Promise.all(je)).filter(pt=>pt!==null);Z.push(...it),x(pt=>Math.min(pt+K,O))}const X=[];for(let q=0;q<Fe.length;q+=K){const je=Fe.slice(q,q+K).map(async it=>{try{const pt=it.path.split("/").map(W=>encodeURIComponent(W)).join("/"),Tt=`${Kg}${pt}`,R=await fetch(Tt);return R.ok?await R.json():null}catch{return null}}),tn=await Promise.all(je);X.push(...tn.filter(it=>it!==null)),x(it=>Math.min(it+K,O))}Z.sort((q,Se)=>q.Number-Se.Number),X.sort((q,Se)=>q.Name.localeCompare(Se.Name)),m(Z),I(X),L(!1)}catch(ge){console.error(ge),A("Failed to load data. Please check your connection or try again later."),L(!1)}})()},[]);const Ge=te=>{i(te),r("list"),window.scrollTo(0,0)},H=te=>{h(window.scrollY),l(te),r("detail")},re=()=>{r("regions"),i("National"),h(0)},se=()=>{r("list"),l(null)};return $.useEffect(()=>{t==="pokedex"&&n==="list"&&setTimeout(()=>{window.scrollTo(0,c)},0)},[t,n,c]),N&&(t==="pokedex"||t==="pokemon"||t==="items")?u.jsx(fN,{progress:M,total:y,status:"Syncing Database (v2.0)..."}):S&&(t==="pokedex"||t==="pokemon"||t==="items")?u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 text-center text-slate-600 dark:text-slate-300",children:[u.jsx(su,{className:"w-12 h-12 mb-4 text-red-500 animate-spin"}),u.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Oops!"}),u.jsx("p",{children:S}),u.jsxs("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-slate-800 dark:bg-slate-700 text-white rounded-lg hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[u.jsx(QE,{size:18})," Retry"]})]}):u.jsx(YA,{children:u.jsxs("div",{className:"min-h-screen bg-[#f3f4f6] dark:bg-slate-950 transition-colors duration-300",children:[t==="home"&&u.jsx(cN,{onNavigate:e,isDark:C,toggleTheme:Oe,language:ee,setLanguage:de}),t==="character"&&u.jsx(dN,{onBack:()=>e("home"),language:ee}),t==="items"&&u.jsx(vN,{items:_,onBack:()=>e("home"),language:ee}),t==="pokemon"&&u.jsx(yN,{onBack:()=>e("home"),allPokemon:p,language:ee,natureMap:w,moveFileMap:b,abilityFileMap:D}),t==="pokedex"&&u.jsxs(u.Fragment,{children:[n==="regions"&&u.jsx(hN,{onSelect:Ge,onHome:()=>e("home"),isDark:C,toggleTheme:Oe,language:ee,setLanguage:de}),(n==="list"||n==="detail")&&u.jsx("div",{className:n==="detail"?"hidden":"block",children:u.jsx(pN,{region:s,onBack:re,onSelectPokemon:H,data:p,language:ee})}),n==="detail"&&o&&u.jsx(mN,{pokemon:o,onBack:se,moveMap:b,abilityMap:D,language:ee})]})]})})}const Ix=document.getElementById("root");if(!Ix)throw new Error("Could not find root element to mount to");const wN=Sc.createRoot(Ix);wN.render(u.jsx(pw.StrictMode,{children:u.jsx(xN,{})}));
