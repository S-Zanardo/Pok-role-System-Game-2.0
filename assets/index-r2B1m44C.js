(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jg={exports:{}},Yl={},Zg={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),uw=Symbol.for("react.portal"),cw=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),hw=Symbol.for("react.profiler"),fw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),mw=Symbol.for("react.forward_ref"),gw=Symbol.for("react.suspense"),yw=Symbol.for("react.memo"),vw=Symbol.for("react.lazy"),Np=Symbol.iterator;function xw(t){return t===null||typeof t!="object"?null:(t=Np&&t[Np]||t["@@iterator"],typeof t=="function"?t:null)}var e0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t0=Object.assign,n0={};function pi(t,e,n){this.props=t,this.context=e,this.refs=n0,this.updater=n||e0}pi.prototype.isReactComponent={};pi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r0(){}r0.prototype=pi.prototype;function Qd(t,e,n){this.props=t,this.context=e,this.refs=n0,this.updater=n||e0}var Yd=Qd.prototype=new r0;Yd.constructor=Qd;t0(Yd,pi.prototype);Yd.isPureReactComponent=!0;var Ap=Array.isArray,s0=Object.prototype.hasOwnProperty,Xd={current:null},i0={key:!0,ref:!0,__self:!0,__source:!0};function o0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)s0.call(e,r)&&!i0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:$o,type:t,key:i,ref:o,props:s,_owner:Xd.current}}function _w(t,e){return{$$typeof:$o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jd(t){return typeof t=="object"&&t!==null&&t.$$typeof===$o}function ww(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cp=/\/+/g;function $u(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ww(""+t.key):e.toString(36)}function Ba(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $o:case uw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$u(o,0):r,Ap(s)?(n="",t!=null&&(n=t.replace(Cp,"$&/")+"/"),Ba(s,e,n,"",function(d){return d})):s!=null&&(Jd(s)&&(s=_w(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ap(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+$u(i,u);o+=Ba(i,e,n,c,s)}else if(c=xw(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+$u(i,u++),o+=Ba(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _a(t,e,n){if(t==null)return t;var r=[],s=0;return Ba(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},$a={transition:null},bw={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:$a,ReactCurrentOwner:Xd};function a0(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:_a,forEach:function(t,e,n){_a(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _a(t,function(){e++}),e},toArray:function(t){return _a(t,function(e){return e})||[]},only:function(t){if(!Jd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=pi;pe.Fragment=cw;pe.Profiler=hw;pe.PureComponent=Qd;pe.StrictMode=dw;pe.Suspense=gw;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bw;pe.act=a0;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=t0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)s0.call(e,c)&&!i0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:$o,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:pw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fw,_context:t},t.Consumer=t};pe.createElement=o0;pe.createFactory=function(t){var e=o0.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:mw,render:t}};pe.isValidElement=Jd;pe.lazy=function(t){return{$$typeof:vw,_payload:{_status:-1,_result:t},_init:kw}};pe.memo=function(t,e){return{$$typeof:yw,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=$a.transition;$a.transition={};try{t()}finally{$a.transition=e}};pe.unstable_act=a0;pe.useCallback=function(t,e){return Rt.current.useCallback(t,e)};pe.useContext=function(t){return Rt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Rt.current.useEffect(t,e)};pe.useId=function(){return Rt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Rt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};pe.useRef=function(t){return Rt.current.useRef(t)};pe.useState=function(t){return Rt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Rt.current.useTransition()};pe.version="18.3.1";Zg.exports=pe;var B=Zg.exports;const Ew=lw(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=B,Tw=Symbol.for("react.element"),Iw=Symbol.for("react.fragment"),Nw=Object.prototype.hasOwnProperty,Aw=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cw={key:!0,ref:!0,__self:!0,__source:!0};function l0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Nw.call(e,r)&&!Cw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Tw,type:t,key:i,ref:o,props:s,_owner:Aw.current}}Yl.Fragment=Iw;Yl.jsx=l0;Yl.jsxs=l0;Jg.exports=Yl;var l=Jg.exports,Cc={},u0={exports:{}},Qt={},c0={exports:{}},d0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ee){var oe=W.length;W.push(ee);e:for(;0<oe;){var ve=oe-1>>>1,me=W[ve];if(0<s(me,ee))W[ve]=ee,W[oe]=me,oe=ve;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],oe=W.pop();if(oe!==ee){W[0]=oe;e:for(var ve=0,me=W.length,_e=me>>>1;ve<_e;){var nt=2*(ve+1)-1,We=W[nt],gt=nt+1,at=W[gt];if(0>s(We,oe))gt<me&&0>s(at,We)?(W[ve]=at,W[gt]=oe,ve=gt):(W[ve]=We,W[nt]=oe,ve=nt);else if(gt<me&&0>s(at,oe))W[ve]=at,W[gt]=oe,ve=gt;else break e}}return ee}function s(W,ee){var oe=W.sortIndex-ee.sortIndex;return oe!==0?oe:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],p=1,m=null,x=3,I=!1,N=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(W){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=W)r(d),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(d)}}function P(W){if(R=!1,T(W),!N)if(n(c)!==null)N=!0,Ie(L);else{var ee=n(d);ee!==null&&Ge(P,ee.startTime-W)}}function L(W,ee){N=!1,R&&(R=!1,S(v),v=-1),I=!0;var oe=x;try{for(T(ee),m=n(c);m!==null&&(!(m.expirationTime>ee)||W&&!_());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,x=m.priorityLevel;var me=ve(m.expirationTime<=ee);ee=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(c)&&r(c),T(ee)}else r(c);m=n(c)}if(m!==null)var _e=!0;else{var nt=n(d);nt!==null&&Ge(P,nt.startTime-ee),_e=!1}return _e}finally{m=null,x=oe,I=!1}}var V=!1,w=null,v=-1,b=5,E=-1;function _(){return!(t.unstable_now()-E<b)}function A(){if(w!==null){var W=t.unstable_now();E=W;var ee=!0;try{ee=w(!0,W)}finally{ee?g():(V=!1,w=null)}}else V=!1}var g;if(typeof k=="function")g=function(){k(A)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=A,g=function(){ne.postMessage(null)}}else g=function(){D(A,0)};function Ie(W){w=W,V||(V=!0,g())}function Ge(W,ee){v=D(function(){W(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||I||(N=!0,Ie(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(W){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var oe=x;x=ee;try{return W()}finally{x=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var oe=x;x=W;try{return ee()}finally{x=oe}},t.unstable_scheduleCallback=function(W,ee,oe){var ve=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ve+oe:ve):oe=ve,W){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=oe+me,W={id:p++,callback:ee,priorityLevel:W,startTime:oe,expirationTime:me,sortIndex:-1},oe>ve?(W.sortIndex=oe,e(d,W),n(c)===null&&W===n(d)&&(R?(S(v),v=-1):R=!0,Ge(P,oe-ve))):(W.sortIndex=me,e(c,W),N||I||(N=!0,Ie(L))),W},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(W){var ee=x;return function(){var oe=x;x=ee;try{return W.apply(this,arguments)}finally{x=oe}}}})(d0);c0.exports=d0;var Pw=c0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=B,Kt=Pw;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h0=new Set,mo={};function ms(t,e){Xs(t,e),Xs(t+"Capture",e)}function Xs(t,e){for(mo[t]=e,t=0;t<e.length;t++)h0.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=Object.prototype.hasOwnProperty,jw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pp={},Rp={};function Dw(t){return Pc.call(Rp,t)?!0:Pc.call(Pp,t)?!1:jw.test(t)?Rp[t]=!0:(Pp[t]=!0,!1)}function Vw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mw(t,e,n,r){if(e===null||typeof e>"u"||Vw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zd=/[\-:]([a-z])/g;function eh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zd,eh);pt[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zd,eh);pt[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zd,eh);pt[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function th(t,e,n,r){var s=pt.hasOwnProperty(e)?pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mw(e,n,s,r)&&(n=null),r||s===null?Dw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tr=Rw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wa=Symbol.for("react.element"),As=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),nh=Symbol.for("react.strict_mode"),Rc=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),p0=Symbol.for("react.context"),rh=Symbol.for("react.forward_ref"),jc=Symbol.for("react.suspense"),Dc=Symbol.for("react.suspense_list"),sh=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),m0=Symbol.for("react.offscreen"),jp=Symbol.iterator;function Mi(t){return t===null||typeof t!="object"?null:(t=jp&&t[jp]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Hu;function Gi(t){if(Hu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hu=e&&e[1]||""}return`
`+Hu+t}var Gu=!1;function Wu(t,e){if(!t||Gu)return"";Gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gi(t):""}function Lw(t){switch(t.tag){case 5:return Gi(t.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return t=Wu(t.type,!1),t;case 11:return t=Wu(t.type.render,!1),t;case 1:return t=Wu(t.type,!0),t;default:return""}}function Vc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case As:return"Portal";case Rc:return"Profiler";case nh:return"StrictMode";case jc:return"Suspense";case Dc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case p0:return(t.displayName||"Context")+".Consumer";case f0:return(t._context.displayName||"Context")+".Provider";case rh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sh:return e=t.displayName||null,e!==null?e:Vc(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return Vc(t(e))}catch{}}return null}function Ow(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vc(e);case 8:return e===nh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function g0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fw(t){var e=g0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=Fw(t))}function y0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=g0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mc(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Dp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function v0(t,e){e=e.checked,e!=null&&th(t,"checked",e,!1)}function Lc(t,e){v0(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oc(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oc(t,e,n){(e!=="number"||ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wi=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Wi(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function x0(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ba,w0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ba=ba||document.createElement("div"),ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zw=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){zw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});function k0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+e).trim():e+"px"}function b0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=k0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Uw=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uc(t,e){if(e){if(Uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $c=null;function ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hc=null,Bs=null,$s=null;function Op(t){if(t=Wo(t)){if(typeof Hc!="function")throw Error(G(280));var e=t.stateNode;e&&(e=tu(e),Hc(t.stateNode,t.type,e))}}function E0(t){Bs?$s?$s.push(t):$s=[t]:Bs=t}function S0(){if(Bs){var t=Bs,e=$s;if($s=Bs=null,Op(t),e)for(t=0;t<e.length;t++)Op(e[t])}}function T0(t,e){return t(e)}function I0(){}var qu=!1;function N0(t,e,n){if(qu)return t(e,n);qu=!0;try{return T0(t,e,n)}finally{qu=!1,(Bs!==null||$s!==null)&&(I0(),S0())}}function yo(t,e){var n=t.stateNode;if(n===null)return null;var r=tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Gc=!1;if(qn)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{Gc=!1}function Bw(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var eo=!1,ul=null,cl=!1,Wc=null,$w={onError:function(t){eo=!0,ul=t}};function Hw(t,e,n,r,s,i,o,u,c){eo=!1,ul=null,Bw.apply($w,arguments)}function Gw(t,e,n,r,s,i,o,u,c){if(Hw.apply(this,arguments),eo){if(eo){var d=ul;eo=!1,ul=null}else throw Error(G(198));cl||(cl=!0,Wc=d)}}function gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fp(t){if(gs(t)!==t)throw Error(G(188))}function Ww(t){var e=t.alternate;if(!e){if(e=gs(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Fp(s),t;if(i===r)return Fp(s),e;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function C0(t){return t=Ww(t),t!==null?P0(t):null}function P0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P0(t);if(e!==null)return e;t=t.sibling}return null}var R0=Kt.unstable_scheduleCallback,zp=Kt.unstable_cancelCallback,qw=Kt.unstable_shouldYield,Kw=Kt.unstable_requestPaint,Ke=Kt.unstable_now,Qw=Kt.unstable_getCurrentPriorityLevel,oh=Kt.unstable_ImmediatePriority,j0=Kt.unstable_UserBlockingPriority,dl=Kt.unstable_NormalPriority,Yw=Kt.unstable_LowPriority,D0=Kt.unstable_IdlePriority,Xl=null,Sn=null;function Xw(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Xl,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:e1,Jw=Math.log,Zw=Math.LN2;function e1(t){return t>>>=0,t===0?32:31-(Jw(t)/Zw|0)|0}var Ea=64,Sa=4194304;function qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=qi(u):(i&=o,i!==0&&(r=qi(i)))}else o=n&~s,o!==0?r=qi(o):i!==0&&(r=qi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),s=1<<n,r|=t[n],e&=~s;return r}function t1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=t1(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V0(){var t=Ea;return Ea<<=1,!(Ea&4194240)&&(Ea=64),t}function Ku(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function r1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ah(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function M0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L0,lh,O0,F0,z0,Kc=!1,Ta=[],xr=null,_r=null,wr=null,vo=new Map,xo=new Map,dr=[],s1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Up(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(e.pointerId)}}function Oi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wo(e),e!==null&&lh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function i1(t,e,n,r,s){switch(e){case"focusin":return xr=Oi(xr,t,e,n,r,s),!0;case"dragenter":return _r=Oi(_r,t,e,n,r,s),!0;case"mouseover":return wr=Oi(wr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return vo.set(i,Oi(vo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xo.set(i,Oi(xo.get(i)||null,t,e,n,r,s)),!0}return!1}function U0(t){var e=Qr(t.target);if(e!==null){var n=gs(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,z0(t.priority,function(){O0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$c=r,n.target.dispatchEvent(r),$c=null}else return e=Wo(n),e!==null&&lh(e),t.blockedOn=n,!1;e.shift()}return!0}function Bp(t,e,n){Ha(t)&&n.delete(e)}function o1(){Kc=!1,xr!==null&&Ha(xr)&&(xr=null),_r!==null&&Ha(_r)&&(_r=null),wr!==null&&Ha(wr)&&(wr=null),vo.forEach(Bp),xo.forEach(Bp)}function Fi(t,e){t.blockedOn===e&&(t.blockedOn=null,Kc||(Kc=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,o1)))}function _o(t){function e(s){return Fi(s,t)}if(0<Ta.length){Fi(Ta[0],t);for(var n=1;n<Ta.length;n++){var r=Ta[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Fi(xr,t),_r!==null&&Fi(_r,t),wr!==null&&Fi(wr,t),vo.forEach(e),xo.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)U0(n),n.blockedOn===null&&dr.shift()}var Hs=tr.ReactCurrentBatchConfig,fl=!0;function a1(t,e,n,r){var s=Se,i=Hs.transition;Hs.transition=null;try{Se=1,uh(t,e,n,r)}finally{Se=s,Hs.transition=i}}function l1(t,e,n,r){var s=Se,i=Hs.transition;Hs.transition=null;try{Se=4,uh(t,e,n,r)}finally{Se=s,Hs.transition=i}}function uh(t,e,n,r){if(fl){var s=Qc(t,e,n,r);if(s===null)sc(t,e,r,pl,n),Up(t,r);else if(i1(s,t,e,n,r))r.stopPropagation();else if(Up(t,r),e&4&&-1<s1.indexOf(t)){for(;s!==null;){var i=Wo(s);if(i!==null&&L0(i),i=Qc(t,e,n,r),i===null&&sc(t,e,r,pl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sc(t,e,r,null,n)}}var pl=null;function Qc(t,e,n,r){if(pl=null,t=ih(r),t=Qr(t),t!==null)if(e=gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pl=t,null}function B0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qw()){case oh:return 1;case j0:return 4;case dl:case Yw:return 16;case D0:return 536870912;default:return 16}default:return 16}}var gr=null,ch=null,Ga=null;function $0(){if(Ga)return Ga;var t,e=ch,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ga=s.slice(t,1<r?1-r:void 0)}function Wa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function $p(){return!1}function Yt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ia:$p,this.isPropagationStopped=$p,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),e}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dh=Yt(mi),Go=Fe({},mi,{view:0,detail:0}),u1=Yt(Go),Qu,Yu,zi,Jl=Fe({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zi&&(zi&&t.type==="mousemove"?(Qu=t.screenX-zi.screenX,Yu=t.screenY-zi.screenY):Yu=Qu=0,zi=t),Qu)},movementY:function(t){return"movementY"in t?t.movementY:Yu}}),Hp=Yt(Jl),c1=Fe({},Jl,{dataTransfer:0}),d1=Yt(c1),h1=Fe({},Go,{relatedTarget:0}),Xu=Yt(h1),f1=Fe({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),p1=Yt(f1),m1=Fe({},mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=Yt(m1),y1=Fe({},mi,{data:0}),Gp=Yt(y1),v1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_1[t])?!!e[t]:!1}function hh(){return w1}var k1=Fe({},Go,{key:function(t){if(t.key){var e=v1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?x1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hh,charCode:function(t){return t.type==="keypress"?Wa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),b1=Yt(k1),E1=Fe({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wp=Yt(E1),S1=Fe({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hh}),T1=Yt(S1),I1=Fe({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N1=Yt(I1),A1=Fe({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C1=Yt(A1),P1=[9,13,27,32],fh=qn&&"CompositionEvent"in window,to=null;qn&&"documentMode"in document&&(to=document.documentMode);var R1=qn&&"TextEvent"in window&&!to,H0=qn&&(!fh||to&&8<to&&11>=to),qp=" ",Kp=!1;function G0(t,e){switch(t){case"keyup":return P1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function j1(t,e){switch(t){case"compositionend":return W0(e);case"keypress":return e.which!==32?null:(Kp=!0,qp);case"textInput":return t=e.data,t===qp&&Kp?null:t;default:return null}}function D1(t,e){if(Ps)return t==="compositionend"||!fh&&G0(t,e)?(t=$0(),Ga=ch=gr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H0&&e.locale!=="ko"?null:e.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V1[t.type]:e==="textarea"}function q0(t,e,n,r){E0(r),e=ml(e,"onChange"),0<e.length&&(n=new dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var no=null,wo=null;function M1(t){sy(t,0)}function Zl(t){var e=Ds(t);if(y0(e))return t}function L1(t,e){if(t==="change")return e}var K0=!1;if(qn){var Ju;if(qn){var Zu="oninput"in document;if(!Zu){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Zu=typeof Yp.oninput=="function"}Ju=Zu}else Ju=!1;K0=Ju&&(!document.documentMode||9<document.documentMode)}function Xp(){no&&(no.detachEvent("onpropertychange",Q0),wo=no=null)}function Q0(t){if(t.propertyName==="value"&&Zl(wo)){var e=[];q0(e,wo,t,ih(t)),N0(M1,e)}}function O1(t,e,n){t==="focusin"?(Xp(),no=e,wo=n,no.attachEvent("onpropertychange",Q0)):t==="focusout"&&Xp()}function F1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zl(wo)}function z1(t,e){if(t==="click")return Zl(e)}function U1(t,e){if(t==="input"||t==="change")return Zl(e)}function B1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:B1;function ko(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pc.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function Jp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zp(t,e){var n=Jp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jp(n)}}function Y0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Y0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X0(){for(var t=window,e=ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ll(t.document)}return e}function ph(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $1(t){var e=X0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Y0(n.ownerDocument.documentElement,n)){if(r!==null&&ph(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zp(n,i);var o=Zp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H1=qn&&"documentMode"in document&&11>=document.documentMode,Rs=null,Yc=null,ro=null,Xc=!1;function em(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xc||Rs==null||Rs!==ll(r)||(r=Rs,"selectionStart"in r&&ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ro&&ko(ro,r)||(ro=r,r=ml(Yc,"onSelect"),0<r.length&&(e=new dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rs)))}function Na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var js={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},ec={},J0={};qn&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function eu(t){if(ec[t])return ec[t];if(!js[t])return t;var e=js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J0)return ec[t]=e[n];return t}var Z0=eu("animationend"),ey=eu("animationiteration"),ty=eu("animationstart"),ny=eu("transitionend"),ry=new Map,tm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){ry.set(t,e),ms(e,[t])}for(var tc=0;tc<tm.length;tc++){var nc=tm[tc],G1=nc.toLowerCase(),W1=nc[0].toUpperCase()+nc.slice(1);Or(G1,"on"+W1)}Or(Z0,"onAnimationEnd");Or(ey,"onAnimationIteration");Or(ty,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(ny,"onTransitionEnd");Xs("onMouseEnter",["mouseout","mouseover"]);Xs("onMouseLeave",["mouseout","mouseover"]);Xs("onPointerEnter",["pointerout","pointerover"]);Xs("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function nm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gw(r,e,void 0,t),t.currentTarget=null}function sy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;nm(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;nm(s,u,d),i=c}}}if(cl)throw t=Wc,cl=!1,Wc=null,t}function De(t,e){var n=e[nd];n===void 0&&(n=e[nd]=new Set);var r=t+"__bubble";n.has(r)||(iy(e,t,2,!1),n.add(r))}function rc(t,e,n){var r=0;e&&(r|=4),iy(n,t,r,e)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function bo(t){if(!t[Aa]){t[Aa]=!0,h0.forEach(function(n){n!=="selectionchange"&&(q1.has(n)||rc(n,!1,t),rc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Aa]||(e[Aa]=!0,rc("selectionchange",!1,e))}}function iy(t,e,n,r){switch(B0(e)){case 1:var s=a1;break;case 4:s=l1;break;default:s=uh}n=s.bind(null,e,n,t),s=void 0,!Gc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Qr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}N0(function(){var d=i,p=ih(n),m=[];e:{var x=ry.get(t);if(x!==void 0){var I=dh,N=t;switch(t){case"keypress":if(Wa(n)===0)break e;case"keydown":case"keyup":I=b1;break;case"focusin":N="focus",I=Xu;break;case"focusout":N="blur",I=Xu;break;case"beforeblur":case"afterblur":I=Xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=d1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=T1;break;case Z0:case ey:case ty:I=p1;break;case ny:I=N1;break;case"scroll":I=u1;break;case"wheel":I=C1;break;case"copy":case"cut":case"paste":I=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Wp}var R=(e&4)!==0,D=!R&&t==="scroll",S=R?x!==null?x+"Capture":null:x;R=[];for(var k=d,T;k!==null;){T=k;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,S!==null&&(P=yo(k,S),P!=null&&R.push(Eo(k,P,T)))),D)break;k=k.return}0<R.length&&(x=new I(x,N,null,n,p),m.push({event:x,listeners:R}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",x&&n!==$c&&(N=n.relatedTarget||n.fromElement)&&(Qr(N)||N[Kn]))break e;if((I||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,I?(N=n.relatedTarget||n.toElement,I=d,N=N?Qr(N):null,N!==null&&(D=gs(N),N!==D||N.tag!==5&&N.tag!==6)&&(N=null)):(I=null,N=d),I!==N)){if(R=Hp,P="onMouseLeave",S="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(R=Wp,P="onPointerLeave",S="onPointerEnter",k="pointer"),D=I==null?x:Ds(I),T=N==null?x:Ds(N),x=new R(P,k+"leave",I,n,p),x.target=D,x.relatedTarget=T,P=null,Qr(p)===d&&(R=new R(S,k+"enter",N,n,p),R.target=T,R.relatedTarget=D,P=R),D=P,I&&N)t:{for(R=I,S=N,k=0,T=R;T;T=Ss(T))k++;for(T=0,P=S;P;P=Ss(P))T++;for(;0<k-T;)R=Ss(R),k--;for(;0<T-k;)S=Ss(S),T--;for(;k--;){if(R===S||S!==null&&R===S.alternate)break t;R=Ss(R),S=Ss(S)}R=null}else R=null;I!==null&&rm(m,x,I,R,!1),N!==null&&D!==null&&rm(m,D,N,R,!0)}}e:{if(x=d?Ds(d):window,I=x.nodeName&&x.nodeName.toLowerCase(),I==="select"||I==="input"&&x.type==="file")var L=L1;else if(Qp(x))if(K0)L=U1;else{L=F1;var V=O1}else(I=x.nodeName)&&I.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(L=z1);if(L&&(L=L(t,d))){q0(m,L,n,p);break e}V&&V(t,x,d),t==="focusout"&&(V=x._wrapperState)&&V.controlled&&x.type==="number"&&Oc(x,"number",x.value)}switch(V=d?Ds(d):window,t){case"focusin":(Qp(V)||V.contentEditable==="true")&&(Rs=V,Yc=d,ro=null);break;case"focusout":ro=Yc=Rs=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,em(m,n,p);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":em(m,n,p)}var w;if(fh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ps?G0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(H0&&n.locale!=="ko"&&(Ps||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ps&&(w=$0()):(gr=p,ch="value"in gr?gr.value:gr.textContent,Ps=!0)),V=ml(d,v),0<V.length&&(v=new Gp(v,t,null,n,p),m.push({event:v,listeners:V}),w?v.data=w:(w=W0(n),w!==null&&(v.data=w)))),(w=R1?j1(t,n):D1(t,n))&&(d=ml(d,"onBeforeInput"),0<d.length&&(p=new Gp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=w))}sy(m,e)})}function Eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yo(t,n),i!=null&&r.unshift(Eo(t,i,s)),i=yo(t,e),i!=null&&r.push(Eo(t,i,s))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=yo(n,i),c!=null&&o.unshift(Eo(n,c,u))):s||(c=yo(n,i),c!=null&&o.push(Eo(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var K1=/\r\n?/g,Q1=/\u0000|\uFFFD/g;function sm(t){return(typeof t=="string"?t:""+t).replace(K1,`
`).replace(Q1,"")}function Ca(t,e,n){if(e=sm(e),sm(t)!==e&&n)throw Error(G(425))}function gl(){}var Jc=null,Zc=null;function ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var td=typeof setTimeout=="function"?setTimeout:void 0,Y1=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(t){return im.resolve(null).then(t).catch(J1)}:td;function J1(t){setTimeout(function(){throw t})}function ic(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_o(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_o(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gi=Math.random().toString(36).slice(2),En="__reactFiber$"+gi,So="__reactProps$"+gi,Kn="__reactContainer$"+gi,nd="__reactEvents$"+gi,Z1="__reactListeners$"+gi,ek="__reactHandles$"+gi;function Qr(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=om(t);t!==null;){if(n=t[En])return n;t=om(t)}return e}t=n,n=t.parentNode}return null}function Wo(t){return t=t[En]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function tu(t){return t[So]||null}var rd=[],Vs=-1;function Fr(t){return{current:t}}function Ve(t){0>Vs||(t.current=rd[Vs],rd[Vs]=null,Vs--)}function Re(t,e){Vs++,rd[Vs]=t.current,t.current=e}var Rr={},St=Fr(Rr),Ut=Fr(!1),is=Rr;function Js(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(t){return t=t.childContextTypes,t!=null}function yl(){Ve(Ut),Ve(St)}function am(t,e,n){if(St.current!==Rr)throw Error(G(168));Re(St,e),Re(Ut,n)}function oy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,Ow(t)||"Unknown",s));return Fe({},n,r)}function vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,is=St.current,Re(St,t),Re(Ut,Ut.current),!0}function lm(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=oy(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,Ve(Ut),Ve(St),Re(St,t)):Ve(Ut),Re(Ut,n)}var Ln=null,nu=!1,oc=!1;function ay(t){Ln===null?Ln=[t]:Ln.push(t)}function tk(t){nu=!0,ay(t)}function zr(){if(!oc&&Ln!==null){oc=!0;var t=0,e=Se;try{var n=Ln;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ln=null,nu=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(t+1)),R0(oh,zr),s}finally{Se=e,oc=!1}}return null}var Ms=[],Ls=0,xl=null,_l=0,Zt=[],en=0,os=null,Fn=1,zn="";function Gr(t,e){Ms[Ls++]=_l,Ms[Ls++]=xl,xl=t,_l=e}function ly(t,e,n){Zt[en++]=Fn,Zt[en++]=zn,Zt[en++]=os,os=t;var r=Fn;t=zn;var s=32-vn(r)-1;r&=~(1<<s),n+=1;var i=32-vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fn=1<<32-vn(e)+s|n<<s|r,zn=i+t}else Fn=1<<i|n<<s|r,zn=t}function mh(t){t.return!==null&&(Gr(t,1),ly(t,1,0))}function gh(t){for(;t===xl;)xl=Ms[--Ls],Ms[Ls]=null,_l=Ms[--Ls],Ms[Ls]=null;for(;t===os;)os=Zt[--en],Zt[en]=null,zn=Zt[--en],Zt[en]=null,Fn=Zt[--en],Zt[en]=null}var qt=null,Wt=null,Me=!1,gn=null;function uy(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function um(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Wt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:Fn,overflow:zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Wt=null,!0):!1;default:return!1}}function sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function id(t){if(Me){var e=Wt;if(e){var n=e;if(!um(t,e)){if(sd(t))throw Error(G(418));e=kr(n.nextSibling);var r=qt;e&&um(t,e)?uy(r,n):(t.flags=t.flags&-4097|2,Me=!1,qt=t)}}else{if(sd(t))throw Error(G(418));t.flags=t.flags&-4097|2,Me=!1,qt=t}}}function cm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Pa(t){if(t!==qt)return!1;if(!Me)return cm(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ed(t.type,t.memoizedProps)),e&&(e=Wt)){if(sd(t))throw cy(),Error(G(418));for(;e;)uy(t,e),e=kr(e.nextSibling)}if(cm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=qt?kr(t.stateNode.nextSibling):null;return!0}function cy(){for(var t=Wt;t;)t=kr(t.nextSibling)}function Zs(){Wt=qt=null,Me=!1}function yh(t){gn===null?gn=[t]:gn.push(t)}var nk=tr.ReactCurrentBatchConfig;function Ui(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Ra(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dm(t){var e=t._init;return e(t._payload)}function dy(t){function e(S,k){if(t){var T=S.deletions;T===null?(S.deletions=[k],S.flags|=16):T.push(k)}}function n(S,k){if(!t)return null;for(;k!==null;)e(S,k),k=k.sibling;return null}function r(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function s(S,k){return S=Tr(S,k),S.index=0,S.sibling=null,S}function i(S,k,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<k?(S.flags|=2,k):T):(S.flags|=2,k)):(S.flags|=1048576,k)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,k,T,P){return k===null||k.tag!==6?(k=fc(T,S.mode,P),k.return=S,k):(k=s(k,T),k.return=S,k)}function c(S,k,T,P){var L=T.type;return L===Cs?p(S,k,T.props.children,P,T.key):k!==null&&(k.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ur&&dm(L)===k.type)?(P=s(k,T.props),P.ref=Ui(S,k,T),P.return=S,P):(P=Za(T.type,T.key,T.props,null,S.mode,P),P.ref=Ui(S,k,T),P.return=S,P)}function d(S,k,T,P){return k===null||k.tag!==4||k.stateNode.containerInfo!==T.containerInfo||k.stateNode.implementation!==T.implementation?(k=pc(T,S.mode,P),k.return=S,k):(k=s(k,T.children||[]),k.return=S,k)}function p(S,k,T,P,L){return k===null||k.tag!==7?(k=ts(T,S.mode,P,L),k.return=S,k):(k=s(k,T),k.return=S,k)}function m(S,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return k=fc(""+k,S.mode,T),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wa:return T=Za(k.type,k.key,k.props,null,S.mode,T),T.ref=Ui(S,null,k),T.return=S,T;case As:return k=pc(k,S.mode,T),k.return=S,k;case ur:var P=k._init;return m(S,P(k._payload),T)}if(Wi(k)||Mi(k))return k=ts(k,S.mode,T,null),k.return=S,k;Ra(S,k)}return null}function x(S,k,T,P){var L=k!==null?k.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:u(S,k,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wa:return T.key===L?c(S,k,T,P):null;case As:return T.key===L?d(S,k,T,P):null;case ur:return L=T._init,x(S,k,L(T._payload),P)}if(Wi(T)||Mi(T))return L!==null?null:p(S,k,T,P,null);Ra(S,T)}return null}function I(S,k,T,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(T)||null,u(k,S,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case wa:return S=S.get(P.key===null?T:P.key)||null,c(k,S,P,L);case As:return S=S.get(P.key===null?T:P.key)||null,d(k,S,P,L);case ur:var V=P._init;return I(S,k,T,V(P._payload),L)}if(Wi(P)||Mi(P))return S=S.get(T)||null,p(k,S,P,L,null);Ra(k,P)}return null}function N(S,k,T,P){for(var L=null,V=null,w=k,v=k=0,b=null;w!==null&&v<T.length;v++){w.index>v?(b=w,w=null):b=w.sibling;var E=x(S,w,T[v],P);if(E===null){w===null&&(w=b);break}t&&w&&E.alternate===null&&e(S,w),k=i(E,k,v),V===null?L=E:V.sibling=E,V=E,w=b}if(v===T.length)return n(S,w),Me&&Gr(S,v),L;if(w===null){for(;v<T.length;v++)w=m(S,T[v],P),w!==null&&(k=i(w,k,v),V===null?L=w:V.sibling=w,V=w);return Me&&Gr(S,v),L}for(w=r(S,w);v<T.length;v++)b=I(w,S,v,T[v],P),b!==null&&(t&&b.alternate!==null&&w.delete(b.key===null?v:b.key),k=i(b,k,v),V===null?L=b:V.sibling=b,V=b);return t&&w.forEach(function(_){return e(S,_)}),Me&&Gr(S,v),L}function R(S,k,T,P){var L=Mi(T);if(typeof L!="function")throw Error(G(150));if(T=L.call(T),T==null)throw Error(G(151));for(var V=L=null,w=k,v=k=0,b=null,E=T.next();w!==null&&!E.done;v++,E=T.next()){w.index>v?(b=w,w=null):b=w.sibling;var _=x(S,w,E.value,P);if(_===null){w===null&&(w=b);break}t&&w&&_.alternate===null&&e(S,w),k=i(_,k,v),V===null?L=_:V.sibling=_,V=_,w=b}if(E.done)return n(S,w),Me&&Gr(S,v),L;if(w===null){for(;!E.done;v++,E=T.next())E=m(S,E.value,P),E!==null&&(k=i(E,k,v),V===null?L=E:V.sibling=E,V=E);return Me&&Gr(S,v),L}for(w=r(S,w);!E.done;v++,E=T.next())E=I(w,S,v,E.value,P),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?v:E.key),k=i(E,k,v),V===null?L=E:V.sibling=E,V=E);return t&&w.forEach(function(A){return e(S,A)}),Me&&Gr(S,v),L}function D(S,k,T,P){if(typeof T=="object"&&T!==null&&T.type===Cs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case wa:e:{for(var L=T.key,V=k;V!==null;){if(V.key===L){if(L=T.type,L===Cs){if(V.tag===7){n(S,V.sibling),k=s(V,T.props.children),k.return=S,S=k;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ur&&dm(L)===V.type){n(S,V.sibling),k=s(V,T.props),k.ref=Ui(S,V,T),k.return=S,S=k;break e}n(S,V);break}else e(S,V);V=V.sibling}T.type===Cs?(k=ts(T.props.children,S.mode,P,T.key),k.return=S,S=k):(P=Za(T.type,T.key,T.props,null,S.mode,P),P.ref=Ui(S,k,T),P.return=S,S=P)}return o(S);case As:e:{for(V=T.key;k!==null;){if(k.key===V)if(k.tag===4&&k.stateNode.containerInfo===T.containerInfo&&k.stateNode.implementation===T.implementation){n(S,k.sibling),k=s(k,T.children||[]),k.return=S,S=k;break e}else{n(S,k);break}else e(S,k);k=k.sibling}k=pc(T,S.mode,P),k.return=S,S=k}return o(S);case ur:return V=T._init,D(S,k,V(T._payload),P)}if(Wi(T))return N(S,k,T,P);if(Mi(T))return R(S,k,T,P);Ra(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,k!==null&&k.tag===6?(n(S,k.sibling),k=s(k,T),k.return=S,S=k):(n(S,k),k=fc(T,S.mode,P),k.return=S,S=k),o(S)):n(S,k)}return D}var ei=dy(!0),hy=dy(!1),wl=Fr(null),kl=null,Os=null,vh=null;function xh(){vh=Os=kl=null}function _h(t){var e=wl.current;Ve(wl),t._currentValue=e}function od(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){kl=t,vh=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(vh!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(kl===null)throw Error(G(308));Os=t,kl.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var Yr=null;function wh(t){Yr===null?Yr=[t]:Yr.push(t)}function fy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function py(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,wh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function qa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ah(t,n)}}function hm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bl(t,e,n,r){var s=t.updateQueue;cr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=d=c=null,u=i;do{var x=u.lane,I=u.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=t,R=u;switch(x=e,I=n,R.tag){case 1:if(N=R.payload,typeof N=="function"){m=N.call(I,m,x);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=R.payload,x=typeof N=="function"?N.call(I,m,x):N,x==null)break e;m=Fe({},m,x);break e;case 2:cr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[u]:x.push(u))}else I={eventTime:I,lane:x,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=I,c=m):p=p.next=I,o|=x;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;x=u,u=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ls|=o,t.lanes=o,t.memoizedState=m}}function fm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var qo={},Tn=Fr(qo),To=Fr(qo),Io=Fr(qo);function Xr(t){if(t===qo)throw Error(G(174));return t}function bh(t,e){switch(Re(Io,e),Re(To,t),Re(Tn,qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zc(e,t)}Ve(Tn),Re(Tn,e)}function ti(){Ve(Tn),Ve(To),Ve(Io)}function my(t){Xr(Io.current);var e=Xr(Tn.current),n=zc(e,t.type);e!==n&&(Re(To,t),Re(Tn,n))}function Eh(t){To.current===t&&(Ve(Tn),Ve(To))}var Le=Fr(0);function El(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function Sh(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Ka=tr.ReactCurrentDispatcher,lc=tr.ReactCurrentBatchConfig,as=0,Oe=null,Je=null,it=null,Sl=!1,so=!1,No=0,rk=0;function xt(){throw Error(G(321))}function Th(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Ih(t,e,n,r,s,i){if(as=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?ak:lk,t=n(r,s),so){i=0;do{if(so=!1,No=0,25<=i)throw Error(G(301));i+=1,it=Je=null,e.updateQueue=null,Ka.current=uk,t=n(r,s)}while(so)}if(Ka.current=Tl,e=Je!==null&&Je.next!==null,as=0,it=Je=Oe=null,Sl=!1,e)throw Error(G(300));return t}function Nh(){var t=No!==0;return No=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Oe.memoizedState=it=t:it=it.next=t,it}function an(){if(Je===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=it===null?Oe.memoizedState:it.next;if(e!==null)it=e,Je=t;else{if(t===null)throw Error(G(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},it===null?Oe.memoizedState=it=t:it=it.next=t}return it}function Ao(t,e){return typeof e=="function"?e(t):e}function uc(t){var e=an(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var p=d.lane;if((as&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,Oe.lanes|=p,ls|=p}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,wn(r,e.memoizedState)||(zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cc(t){var e=an(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gy(){}function yy(t,e){var n=Oe,r=an(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,zt=!0),r=r.queue,Ah(_y.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Co(9,xy.bind(null,n,r,s,e),void 0,null),ot===null)throw Error(G(349));as&30||vy(n,e,s)}return s}function vy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xy(t,e,n,r){e.value=n,e.getSnapshot=r,wy(e)&&ky(t)}function _y(t,e,n){return n(function(){wy(e)&&ky(t)})}function wy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function ky(t){var e=Qn(t,1);e!==null&&xn(e,t,1,-1)}function pm(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:t},e.queue=t,t=t.dispatch=ok.bind(null,Oe,t),[e.memoizedState,t]}function Co(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function by(){return an().memoizedState}function Qa(t,e,n,r){var s=bn();Oe.flags|=t,s.memoizedState=Co(1|e,n,void 0,r===void 0?null:r)}function ru(t,e,n,r){var s=an();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&Th(r,o.deps)){s.memoizedState=Co(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=Co(1|e,n,i,r)}function mm(t,e){return Qa(8390656,8,t,e)}function Ah(t,e){return ru(2048,8,t,e)}function Ey(t,e){return ru(4,2,t,e)}function Sy(t,e){return ru(4,4,t,e)}function Ty(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Iy(t,e,n){return n=n!=null?n.concat([t]):null,ru(4,4,Ty.bind(null,e,t),n)}function Ch(){}function Ny(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Th(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ay(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Th(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cy(t,e,n){return as&21?(wn(n,e)||(n=V0(),Oe.lanes|=n,ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=n)}function sk(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=lc.transition;lc.transition={};try{t(!1),e()}finally{Se=n,lc.transition=r}}function Py(){return an().memoizedState}function ik(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ry(t))jy(e,n);else if(n=fy(t,e,n,r),n!==null){var s=Pt();xn(n,t,r,s),Dy(n,e,r)}}function ok(t,e,n){var r=Sr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ry(t))jy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,wn(u,o)){var c=e.interleaved;c===null?(s.next=s,wh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=fy(t,e,s,r),n!==null&&(s=Pt(),xn(n,t,r,s),Dy(n,e,r))}}function Ry(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function jy(t,e){so=Sl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ah(t,n)}}var Tl={readContext:on,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},ak={readContext:on,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:mm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qa(4194308,4,Ty.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qa(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ik.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:pm,useDebugValue:Ch,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=pm(!1),e=t[0];return t=sk.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=bn();if(Me){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),ot===null)throw Error(G(349));as&30||vy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,mm(_y.bind(null,r,i,t),[t]),r.flags|=2048,Co(9,xy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=bn(),e=ot.identifierPrefix;if(Me){var n=zn,r=Fn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lk={readContext:on,useCallback:Ny,useContext:on,useEffect:Ah,useImperativeHandle:Iy,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:Ay,useReducer:uc,useRef:by,useState:function(){return uc(Ao)},useDebugValue:Ch,useDeferredValue:function(t){var e=an();return Cy(e,Je.memoizedState,t)},useTransition:function(){var t=uc(Ao)[0],e=an().memoizedState;return[t,e]},useMutableSource:gy,useSyncExternalStore:yy,useId:Py,unstable_isNewReconciler:!1},uk={readContext:on,useCallback:Ny,useContext:on,useEffect:Ah,useImperativeHandle:Iy,useInsertionEffect:Ey,useLayoutEffect:Sy,useMemo:Ay,useReducer:cc,useRef:by,useState:function(){return cc(Ao)},useDebugValue:Ch,useDeferredValue:function(t){var e=an();return Je===null?e.memoizedState=t:Cy(e,Je.memoizedState,t)},useTransition:function(){var t=cc(Ao)[0],e=an().memoizedState;return[t,e]},useMutableSource:gy,useSyncExternalStore:yy,useId:Py,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ad(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var su={isMounted:function(t){return(t=t._reactInternals)?gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Sr(t),i=Gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(xn(e,t,s,r),qa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Sr(t),i=Gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(xn(e,t,s,r),qa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Sr(t),s=Gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(xn(e,t,r,n),qa(e,t,r))}};function gm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ko(n,r)||!ko(s,i):!0}function Vy(t,e,n){var r=!1,s=Rr,i=e.contextType;return typeof i=="object"&&i!==null?i=on(i):(s=Bt(e)?is:St.current,r=e.contextTypes,i=(r=r!=null)?Js(t,s):Rr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ym(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&su.enqueueReplaceState(e,e.state,null)}function ld(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},kh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=on(i):(i=Bt(e)?is:St.current,s.context=Js(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ad(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&su.enqueueReplaceState(s,s.state,null),bl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e){try{var n="",r=e;do n+=Lw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ud(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ck=typeof WeakMap=="function"?WeakMap:Map;function My(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nl||(Nl=!0,xd=r),ud(t,e)},n}function Ly(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ud(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ud(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ck;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ek.bind(null,t,e,n),e.then(t,t))}function xm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _m(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var dk=tr.ReactCurrentOwner,zt=!1;function Ct(t,e,n,r){e.child=t===null?hy(e,null,n,r):ei(e,t.child,n,r)}function wm(t,e,n,r,s){n=n.render;var i=e.ref;return Gs(e,s),r=Ih(t,e,n,r,i,s),n=Nh(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(Me&&n&&mh(e),e.flags|=1,Ct(t,e,r,s),e.child)}function km(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Oy(t,e,i,r,s)):(t=Za(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ko,n(o,r)&&t.ref===e.ref)return Yn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Oy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ko(i,r)&&t.ref===e.ref)if(zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(zt=!0);else return e.lanes=t.lanes,Yn(t,e,s)}return cd(t,e,n,r,s)}function Fy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(zs,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(zs,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(zs,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Re(zs,Gt),Gt|=r;return Ct(t,e,s,n),e.child}function zy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cd(t,e,n,r,s){var i=Bt(n)?is:St.current;return i=Js(e,i),Gs(e,s),n=Ih(t,e,n,r,i,s),r=Nh(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(Me&&r&&mh(e),e.flags|=1,Ct(t,e,n,s),e.child)}function bm(t,e,n,r,s){if(Bt(n)){var i=!0;vl(e)}else i=!1;if(Gs(e,s),e.stateNode===null)Ya(t,e),Vy(e,n,r),ld(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=on(d):(d=Bt(n)?is:St.current,d=Js(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&ym(e,o,r,d),cr=!1;var x=e.memoizedState;o.state=x,bl(e,r,o,s),c=e.memoizedState,u!==r||x!==c||Ut.current||cr?(typeof p=="function"&&(ad(e,n,p,r),c=e.memoizedState),(u=cr||gm(e,n,u,r,x,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,py(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:fn(e.type,u),o.props=d,m=e.pendingProps,x=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=on(c):(c=Bt(n)?is:St.current,c=Js(e,c));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||x!==c)&&ym(e,o,r,c),cr=!1,x=e.memoizedState,o.state=x,bl(e,r,o,s);var N=e.memoizedState;u!==m||x!==N||Ut.current||cr?(typeof I=="function"&&(ad(e,n,I,r),N=e.memoizedState),(d=cr||gm(e,n,d,r,x,N,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return dd(t,e,n,r,i,s)}function dd(t,e,n,r,s,i){zy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lm(e,n,!1),Yn(t,e,i);r=e.stateNode,dk.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ei(e,t.child,null,i),e.child=ei(e,null,u,i)):Ct(t,e,u,i),e.memoizedState=r.state,s&&lm(e,n,!0),e.child}function Uy(t){var e=t.stateNode;e.pendingContext?am(t,e.pendingContext,e.pendingContext!==e.context):e.context&&am(t,e.context,!1),bh(t,e.containerInfo)}function Em(t,e,n,r,s){return Zs(),yh(s),e.flags|=256,Ct(t,e,n,r),e.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function fd(t){return{baseLanes:t,cachePool:null,transitions:null}}function By(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(Le,s&1),t===null)return id(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=au(o,r,0,null),t=ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fd(n),e.memoizedState=hd,t):Ph(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return hk(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Tr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Tr(u,i):(i=ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hd,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ph(t,e){return e=au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ja(t,e,n,r){return r!==null&&yh(r),ei(e,t.child,null,n),t=Ph(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dc(Error(G(422))),ja(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=au({mode:"visible",children:r.children},s,0,null),i=ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ei(e,t.child,null,o),e.child.memoizedState=fd(o),e.memoizedState=hd,i);if(!(e.mode&1))return ja(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(G(419)),r=dc(i,r,void 0),ja(t,e,o,r)}if(u=(o&t.childLanes)!==0,zt||u){if(r=ot,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),xn(r,t,s,-1))}return Lh(),r=dc(Error(G(421))),ja(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Sk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=kr(s.nextSibling),qt=e,Me=!0,gn=null,t!==null&&(Zt[en++]=Fn,Zt[en++]=zn,Zt[en++]=os,Fn=t.id,zn=t.overflow,os=e),e=Ph(e,r.children),e.flags|=4096,e)}function Sm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),od(t.return,e,n)}function hc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $y(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ct(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sm(t,n,e);else if(t.tag===19)Sm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&El(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&El(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hc(e,!0,n,null,i);break;case"together":hc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fk(t,e,n){switch(e.tag){case 3:Uy(e),Zs();break;case 5:my(e);break;case 1:Bt(e.type)&&vl(e);break;case 4:bh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(wl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?By(t,e,n):(Re(Le,Le.current&1),t=Yn(t,e,n),t!==null?t.sibling:null);Re(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $y(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,Fy(t,e,n)}return Yn(t,e,n)}var Hy,pd,Gy,Wy;Hy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pd=function(){};Gy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xr(Tn.current);var i=null;switch(n){case"input":s=Mc(t,s),r=Mc(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=Fc(t,s),r=Fc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gl)}Uc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Wy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bi(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pk(t,e,n){var r=e.pendingProps;switch(gh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Bt(e.type)&&yl(),_t(e),null;case 3:return r=e.stateNode,ti(),Ve(Ut),Ve(St),Sh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(kd(gn),gn=null))),pd(t,e),_t(e),null;case 5:Eh(e);var s=Xr(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)Gy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return _t(e),null}if(t=Xr(Tn.current),Pa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[En]=e,r[So]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Ki.length;s++)De(Ki[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Dp(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":Mp(r,i),De("invalid",r)}Uc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ca(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ca(r.textContent,u,t),s=["children",""+u]):mo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":ka(r),Vp(r,i,!0);break;case"textarea":ka(r),Lp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[En]=e,t[So]=r,Hy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bc(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ki.length;s++)De(Ki[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":Dp(t,r),s=Mc(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),De("invalid",t);break;case"textarea":Mp(t,r),s=Fc(t,r),De("invalid",t);break;default:s=r}Uc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?b0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&w0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&go(t,c):typeof c=="number"&&go(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&De("scroll",t):c!=null&&th(t,i,c,o))}switch(n){case"input":ka(t),Vp(t,r,!1);break;case"textarea":ka(t),Lp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Us(t,!!r.multiple,i,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)Wy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Xr(Io.current),Xr(Tn.current),Pa(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Ca(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return _t(e),null;case 13:if(Ve(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Wt!==null&&e.mode&1&&!(e.flags&128))cy(),Zs(),e.flags|=98560,i=!1;else if(i=Pa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[En]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),i=!1}else gn!==null&&(kd(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?et===0&&(et=3):Lh())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return ti(),pd(t,e),t===null&&bo(e.stateNode.containerInfo),_t(e),null;case 10:return _h(e.type._context),_t(e),null;case 17:return Bt(e.type)&&yl(),_t(e),null;case 19:if(Ve(Le),i=e.memoizedState,i===null)return _t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Bi(i,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=El(t),o!==null){for(e.flags|=128,Bi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>ri&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304)}else{if(!r)if(t=El(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return _t(e),null}else 2*Ke()-i.renderingStartTime>ri&&n!==1073741824&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Le.current,Re(Le,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Mh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function mk(t,e){switch(gh(e),e.tag){case 1:return Bt(e.type)&&yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ti(),Ve(Ut),Ve(St),Sh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eh(e),null;case 13:if(Ve(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Le),null;case 4:return ti(),null;case 10:return _h(e.type._context),null;case 22:case 23:return Mh(),null;case 24:return null;default:return null}}var Da=!1,bt=!1,gk=typeof WeakSet=="function"?WeakSet:Set,J=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function md(t,e,n){try{n()}catch(r){$e(t,e,r)}}var Tm=!1;function yk(t,e){if(Jc=fl,t=X0(),ph(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,p=0,m=t,x=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)x=m,m=I;for(;;){if(m===t)break t;if(x===n&&++d===s&&(u=o),x===i&&++p===r&&(c=o),(I=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=I}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zc={focusedElem:t,selectionRange:n},fl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,D=N.memoizedState,S=e.stateNode,k=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:fn(e.type,R),D);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(P){$e(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return N=Tm,Tm=!1,N}function io(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&md(e,n,i)}s=s.next}while(s!==r)}}function iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qy(t){var e=t.alternate;e!==null&&(t.alternate=null,qy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[So],delete e[nd],delete e[Z1],delete e[ek])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ky(t){return t.tag===5||t.tag===3||t.tag===4}function Im(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gl));else if(r!==4&&(t=t.child,t!==null))for(yd(t,e,n),t=t.sibling;t!==null;)yd(t,e,n),t=t.sibling}function vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vd(t,e,n),t=t.sibling;t!==null;)vd(t,e,n),t=t.sibling}var ut=null,pn=!1;function ar(t,e,n){for(n=n.child;n!==null;)Qy(t,e,n),n=n.sibling}function Qy(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Xl,n)}catch{}switch(n.tag){case 5:bt||Fs(n,e);case 6:var r=ut,s=pn;ut=null,ar(t,e,n),ut=r,pn=s,ut!==null&&(pn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(pn?(t=ut,n=n.stateNode,t.nodeType===8?ic(t.parentNode,n):t.nodeType===1&&ic(t,n),_o(t)):ic(ut,n.stateNode));break;case 4:r=ut,s=pn,ut=n.stateNode.containerInfo,pn=!0,ar(t,e,n),ut=r,pn=s;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&md(n,e,o),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!bt&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){$e(n,e,u)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,ar(t,e,n),bt=r):ar(t,e,n);break;default:ar(t,e,n)}}function Nm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gk),e.forEach(function(r){var s=Tk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ut=u.stateNode,pn=!1;break e;case 3:ut=u.stateNode.containerInfo,pn=!0;break e;case 4:ut=u.stateNode.containerInfo,pn=!0;break e}u=u.return}if(ut===null)throw Error(G(160));Qy(i,o,s),ut=null,pn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){$e(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yy(e,t),e=e.sibling}function Yy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),kn(t),r&4){try{io(3,t,t.return),iu(3,t)}catch(R){$e(t,t.return,R)}try{io(5,t,t.return)}catch(R){$e(t,t.return,R)}}break;case 1:hn(e,t),kn(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(hn(e,t),kn(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var s=t.stateNode;try{go(s,"")}catch(R){$e(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&v0(s,i),Bc(u,o);var d=Bc(u,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?b0(s,m):p==="dangerouslySetInnerHTML"?w0(s,m):p==="children"?go(s,m):th(s,p,m,d)}switch(u){case"input":Lc(s,i);break;case"textarea":x0(s,i);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Us(s,!!i.multiple,I,!1):x!==!!i.multiple&&(i.defaultValue!=null?Us(s,!!i.multiple,i.defaultValue,!0):Us(s,!!i.multiple,i.multiple?[]:"",!1))}s[So]=i}catch(R){$e(t,t.return,R)}}break;case 6:if(hn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){$e(t,t.return,R)}}break;case 3:if(hn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(e.containerInfo)}catch(R){$e(t,t.return,R)}break;case 4:hn(e,t),kn(t);break;case 13:hn(e,t),kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Dh=Ke())),r&4&&Nm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(d=bt)||p,hn(e,t),bt=d):hn(e,t),kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(m=J=p;J!==null;){switch(x=J,I=x.child,x.tag){case 0:case 11:case 14:case 15:io(4,x,x.return);break;case 1:Fs(x,x.return);var N=x.stateNode;if(typeof N.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(R){$e(r,n,R)}}break;case 5:Fs(x,x.return);break;case 22:if(x.memoizedState!==null){Cm(m);continue}}I!==null?(I.return=x,J=I):Cm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=k0("display",o))}catch(R){$e(t,t.return,R)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){$e(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:hn(e,t),kn(t),r&4&&Nm(t);break;case 21:break;default:hn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ky(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(go(s,""),r.flags&=-33);var i=Im(t);vd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Im(t);yd(t,u,o);break;default:throw Error(G(161))}}catch(c){$e(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vk(t,e,n){J=t,Xy(t)}function Xy(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Da;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||bt;u=Da;var d=bt;if(Da=o,(bt=c)&&!d)for(J=s;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?Pm(s):c!==null?(c.return=o,J=c):Pm(s);for(;i!==null;)J=i,Xy(i),i=i.sibling;J=s,Da=u,bt=d}Am(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):Am(t)}}function Am(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&_o(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}bt||e.flags&512&&gd(e)}catch(x){$e(e,e.return,x)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Cm(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Pm(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iu(4,e)}catch(c){$e(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){$e(e,s,c)}}var i=e.return;try{gd(e)}catch(c){$e(e,i,c)}break;case 5:var o=e.return;try{gd(e)}catch(c){$e(e,o,c)}}}catch(c){$e(e,e.return,c)}if(e===t){J=null;break}var u=e.sibling;if(u!==null){u.return=e.return,J=u;break}J=e.return}}var xk=Math.ceil,Il=tr.ReactCurrentDispatcher,Rh=tr.ReactCurrentOwner,rn=tr.ReactCurrentBatchConfig,we=0,ot=null,Ye=null,ht=0,Gt=0,zs=Fr(0),et=0,Po=null,ls=0,ou=0,jh=0,oo=null,Ft=null,Dh=0,ri=1/0,Mn=null,Nl=!1,xd=null,Er=null,Va=!1,yr=null,Al=0,ao=0,_d=null,Xa=-1,Ja=0;function Pt(){return we&6?Ke():Xa!==-1?Xa:Xa=Ke()}function Sr(t){return t.mode&1?we&2&&ht!==0?ht&-ht:nk.transition!==null?(Ja===0&&(Ja=V0()),Ja):(t=Se,t!==0||(t=window.event,t=t===void 0?16:B0(t.type)),t):1}function xn(t,e,n,r){if(50<ao)throw ao=0,_d=null,Error(G(185));Ho(t,n,r),(!(we&2)||t!==ot)&&(t===ot&&(!(we&2)&&(ou|=n),et===4&&hr(t,ht)),$t(t,r),n===1&&we===0&&!(e.mode&1)&&(ri=Ke()+500,nu&&zr()))}function $t(t,e){var n=t.callbackNode;n1(t,e);var r=hl(t,t===ot?ht:0);if(r===0)n!==null&&zp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zp(n),e===1)t.tag===0?tk(Rm.bind(null,t)):ay(Rm.bind(null,t)),X1(function(){!(we&6)&&zr()}),n=null;else{switch(M0(r)){case 1:n=oh;break;case 4:n=j0;break;case 16:n=dl;break;case 536870912:n=D0;break;default:n=dl}n=iv(n,Jy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jy(t,e){if(Xa=-1,Ja=0,we&6)throw Error(G(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=hl(t,t===ot?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cl(t,r);else{e=r;var s=we;we|=2;var i=ev();(ot!==t||ht!==e)&&(Mn=null,ri=Ke()+500,es(t,e));do try{kk();break}catch(u){Zy(t,u)}while(!0);xh(),Il.current=i,we=s,Ye!==null?e=0:(ot=null,ht=0,e=et)}if(e!==0){if(e===2&&(s=qc(t),s!==0&&(r=s,e=wd(t,s))),e===1)throw n=Po,es(t,0),hr(t,r),$t(t,Ke()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!_k(s)&&(e=Cl(t,r),e===2&&(i=qc(t),i!==0&&(r=i,e=wd(t,i))),e===1))throw n=Po,es(t,0),hr(t,r),$t(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Wr(t,Ft,Mn);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=Dh+500-Ke(),10<e)){if(hl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=td(Wr.bind(null,t,Ft,Mn),e);break}Wr(t,Ft,Mn);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xk(r/1960))-r,10<r){t.timeoutHandle=td(Wr.bind(null,t,Ft,Mn),r);break}Wr(t,Ft,Mn);break;case 5:Wr(t,Ft,Mn);break;default:throw Error(G(329))}}}return $t(t,Ke()),t.callbackNode===n?Jy.bind(null,t):null}function wd(t,e){var n=oo;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&kd(e)),t}function kd(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function _k(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~jh,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function Rm(t){if(we&6)throw Error(G(327));Ws();var e=hl(t,0);if(!(e&1))return $t(t,Ke()),null;var n=Cl(t,e);if(t.tag!==0&&n===2){var r=qc(t);r!==0&&(e=r,n=wd(t,r))}if(n===1)throw n=Po,es(t,0),hr(t,e),$t(t,Ke()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wr(t,Ft,Mn),$t(t,Ke()),null}function Vh(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(ri=Ke()+500,nu&&zr())}}function us(t){yr!==null&&yr.tag===0&&!(we&6)&&Ws();var e=we;we|=1;var n=rn.transition,r=Se;try{if(rn.transition=null,Se=1,t)return t()}finally{Se=r,rn.transition=n,we=e,!(we&6)&&zr()}}function Mh(){Gt=zs.current,Ve(zs)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Y1(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(gh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yl();break;case 3:ti(),Ve(Ut),Ve(St),Sh();break;case 5:Eh(r);break;case 4:ti();break;case 13:Ve(Le);break;case 19:Ve(Le);break;case 10:_h(r.type._context);break;case 22:case 23:Mh()}n=n.return}if(ot=t,Ye=t=Tr(t.current,null),ht=Gt=e,et=0,Po=null,jh=ou=ls=0,Ft=oo=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yr=null}return t}function Zy(t,e){do{var n=Ye;try{if(xh(),Ka.current=Tl,Sl){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sl=!1}if(as=0,it=Je=Oe=null,so=!1,No=0,Rh.current=null,n===null||n.return===null){et=1,Po=e,Ye=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ht,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=xm(o);if(I!==null){I.flags&=-257,_m(I,o,u,i,e),I.mode&1&&vm(i,d,e),e=I,c=d;var N=e.updateQueue;if(N===null){var R=new Set;R.add(c),e.updateQueue=R}else N.add(c);break e}else{if(!(e&1)){vm(i,d,e),Lh();break e}c=Error(G(426))}}else if(Me&&u.mode&1){var D=xm(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),_m(D,o,u,i,e),yh(ni(c,u));break e}}i=c=ni(c,u),et!==4&&(et=2),oo===null?oo=[i]:oo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=My(i,c,e);hm(i,S);break e;case 1:u=c;var k=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Er===null||!Er.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Ly(i,u,e);hm(i,P);break e}}i=i.return}while(i!==null)}nv(n)}catch(L){e=L,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function ev(){var t=Il.current;return Il.current=Tl,t===null?Tl:t}function Lh(){(et===0||et===3||et===2)&&(et=4),ot===null||!(ls&268435455)&&!(ou&268435455)||hr(ot,ht)}function Cl(t,e){var n=we;we|=2;var r=ev();(ot!==t||ht!==e)&&(Mn=null,es(t,e));do try{wk();break}catch(s){Zy(t,s)}while(!0);if(xh(),we=n,Il.current=r,Ye!==null)throw Error(G(261));return ot=null,ht=0,et}function wk(){for(;Ye!==null;)tv(Ye)}function kk(){for(;Ye!==null&&!qw();)tv(Ye)}function tv(t){var e=sv(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?nv(t):Ye=e,Rh.current=null}function nv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mk(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ye=null;return}}else if(n=pk(n,e,Gt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);et===0&&(et=5)}function Wr(t,e,n){var r=Se,s=rn.transition;try{rn.transition=null,Se=1,bk(t,e,n,r)}finally{rn.transition=s,Se=r}return null}function bk(t,e,n,r){do Ws();while(yr!==null);if(we&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(r1(t,i),t===ot&&(Ye=ot=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Va||(Va=!0,iv(dl,function(){return Ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rn.transition,rn.transition=null;var o=Se;Se=1;var u=we;we|=4,Rh.current=null,yk(t,n),Yy(n,t),$1(Zc),fl=!!Jc,Zc=Jc=null,t.current=n,vk(n),Kw(),we=u,Se=o,rn.transition=i}else t.current=n;if(Va&&(Va=!1,yr=t,Al=s),i=t.pendingLanes,i===0&&(Er=null),Xw(n.stateNode),$t(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nl)throw Nl=!1,t=xd,xd=null,t;return Al&1&&t.tag!==0&&Ws(),i=t.pendingLanes,i&1?t===_d?ao++:(ao=0,_d=t):ao=0,zr(),null}function Ws(){if(yr!==null){var t=M0(Al),e=rn.transition,n=Se;try{if(rn.transition=null,Se=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,Al=0,we&6)throw Error(G(331));var s=we;for(we|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(J=d;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:io(8,p,i)}var m=p.child;if(m!==null)m.return=p,J=m;else for(;J!==null;){p=J;var x=p.sibling,I=p.return;if(qy(p),p===d){J=null;break}if(x!==null){x.return=I,J=x;break}J=I}}}var N=i.alternate;if(N!==null){var R=N.child;if(R!==null){N.child=null;do{var D=R.sibling;R.sibling=null,R=D}while(R!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:io(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,J=S;break e}J=i.return}}var k=t.current;for(J=k;J!==null;){o=J;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,J=T;else e:for(o=k;J!==null;){if(u=J,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(L){$e(u,u.return,L)}if(u===o){J=null;break e}var P=u.sibling;if(P!==null){P.return=u.return,J=P;break e}J=u.return}}if(we=s,zr(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Xl,t)}catch{}r=!0}return r}finally{Se=n,rn.transition=e}}return!1}function jm(t,e,n){e=ni(n,e),e=My(t,e,1),t=br(t,e,1),e=Pt(),t!==null&&(Ho(t,1,e),$t(t,e))}function $e(t,e,n){if(t.tag===3)jm(t,t,n);else for(;e!==null;){if(e.tag===3){jm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=ni(n,t),t=Ly(e,t,1),e=br(e,t,1),t=Pt(),e!==null&&(Ho(e,1,t),$t(e,t));break}}e=e.return}}function Ek(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ht&n)===n&&(et===4||et===3&&(ht&130023424)===ht&&500>Ke()-Dh?es(t,0):jh|=n),$t(t,e)}function rv(t,e){e===0&&(t.mode&1?(e=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):e=1);var n=Pt();t=Qn(t,e),t!==null&&(Ho(t,e,n),$t(t,n))}function Sk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rv(t,n)}function Tk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),rv(t,n)}var sv;sv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zt=!1,fk(t,e,n);zt=!!(t.flags&131072)}else zt=!1,Me&&e.flags&1048576&&ly(e,_l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ya(t,e),t=e.pendingProps;var s=Js(e,St.current);Gs(e,n),s=Ih(null,e,r,t,s,n);var i=Nh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(r)?(i=!0,vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kh(e),s.updater=su,e.stateNode=s,s._reactInternals=e,ld(e,r,t,n),e=dd(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&mh(e),Ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ya(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Nk(r),t=fn(r,t),s){case 0:e=cd(null,e,r,t,n);break e;case 1:e=bm(null,e,r,t,n);break e;case 11:e=wm(null,e,r,t,n);break e;case 14:e=km(null,e,r,fn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),cd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),bm(t,e,r,s,n);case 3:e:{if(Uy(e),t===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,py(t,e),bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ni(Error(G(423)),e),e=Em(t,e,r,n,s);break e}else if(r!==s){s=ni(Error(G(424)),e),e=Em(t,e,r,n,s);break e}else for(Wt=kr(e.stateNode.containerInfo.firstChild),qt=e,Me=!0,gn=null,n=hy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===s){e=Yn(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return my(e),t===null&&id(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ed(r,s)?o=null:i!==null&&ed(r,i)&&(e.flags|=32),zy(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&id(e),null;case 13:return By(t,e,n);case 4:return bh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ei(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),wm(t,e,r,s,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Re(wl,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Ut.current){e=Yn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Gn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),od(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),od(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gs(e,n),s=on(s),r=r(s),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),km(t,e,r,s,n);case 15:return Oy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Ya(t,e),e.tag=1,Bt(r)?(t=!0,vl(e)):t=!1,Gs(e,n),Vy(e,r,s),ld(e,r,s,n),dd(null,e,r,!0,t,n);case 19:return $y(t,e,n);case 22:return Fy(t,e,n)}throw Error(G(156,e.tag))};function iv(t,e){return R0(t,e)}function Ik(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new Ik(t,e,n,r)}function Oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nk(t){if(typeof t=="function")return Oh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rh)return 11;if(t===sh)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Za(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return ts(n.children,s,i,e);case nh:o=8,s|=8;break;case Rc:return t=nn(12,n,e,s|2),t.elementType=Rc,t.lanes=i,t;case jc:return t=nn(13,n,e,s),t.elementType=jc,t.lanes=i,t;case Dc:return t=nn(19,n,e,s),t.elementType=Dc,t.lanes=i,t;case m0:return au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f0:o=10;break e;case p0:o=9;break e;case rh:o=11;break e;case sh:o=14;break e;case ur:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ts(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function au(t,e,n,r){return t=nn(22,t,r,e),t.elementType=m0,t.lanes=n,t.stateNode={isHidden:!1},t}function fc(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function pc(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ak(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ku(0),this.expirationTimes=Ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ku(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fh(t,e,n,r,s,i,o,u,c){return t=new Ak(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(i),t}function Ck(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ov(t){if(!t)return Rr;t=t._reactInternals;e:{if(gs(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Bt(n))return oy(t,n,e)}return e}function av(t,e,n,r,s,i,o,u,c){return t=Fh(n,r,!0,t,s,i,o,u,c),t.context=ov(null),n=t.current,r=Pt(),s=Sr(n),i=Gn(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,Ho(t,s,r),$t(t,r),t}function lu(t,e,n,r){var s=e.current,i=Pt(),o=Sr(s);return n=ov(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,o),t!==null&&(xn(t,s,o,i),qa(t,s,o)),o}function Pl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Dm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zh(t,e){Dm(t,e),(t=t.alternate)&&Dm(t,e)}function Pk(){return null}var lv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uh(t){this._internalRoot=t}uu.prototype.render=Uh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));lu(t,e,null,null)};uu.prototype.unmount=Uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){lu(null,t,null,null)}),e[Kn]=null}};function uu(t){this._internalRoot=t}uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=F0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&U0(t)}};function Bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vm(){}function Rk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Pl(o);i.call(d)}}var o=av(e,r,t,0,null,!1,!1,"",Vm);return t._reactRootContainer=o,t[Kn]=o.current,bo(t.nodeType===8?t.parentNode:t),us(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Pl(c);u.call(d)}}var c=Fh(t,0,!1,null,null,!1,!1,"",Vm);return t._reactRootContainer=c,t[Kn]=c.current,bo(t.nodeType===8?t.parentNode:t),us(function(){lu(e,c,n,r)}),c}function du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Pl(o);u.call(c)}}lu(e,o,t,s)}else o=Rk(n,e,t,s,r);return Pl(o)}L0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qi(e.pendingLanes);n!==0&&(ah(e,n|1),$t(e,Ke()),!(we&6)&&(ri=Ke()+500,zr()))}break;case 13:us(function(){var r=Qn(t,1);if(r!==null){var s=Pt();xn(r,t,1,s)}}),zh(t,1)}};lh=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=Pt();xn(e,t,134217728,n)}zh(t,134217728)}};O0=function(t){if(t.tag===13){var e=Sr(t),n=Qn(t,e);if(n!==null){var r=Pt();xn(n,t,e,r)}zh(t,e)}};F0=function(){return Se};z0=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Hc=function(t,e,n){switch(e){case"input":if(Lc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tu(r);if(!s)throw Error(G(90));y0(r),Lc(r,s)}}}break;case"textarea":x0(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};T0=Vh;I0=us;var jk={usingClientEntryPoint:!1,Events:[Wo,Ds,tu,E0,S0,Vh]},$i={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dk={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C0(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||Pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{Xl=Ma.inject(Dk),Sn=Ma}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jk;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bh(e))throw Error(G(200));return Ck(t,e,null,n)};Qt.createRoot=function(t,e){if(!Bh(t))throw Error(G(299));var n=!1,r="",s=lv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fh(t,1,!1,null,null,n,!1,r,s),t[Kn]=e.current,bo(t.nodeType===8?t.parentNode:t),new Uh(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=C0(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return us(t)};Qt.hydrate=function(t,e,n){if(!cu(e))throw Error(G(200));return du(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!Bh(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=av(e,null,t,1,n??null,s,!1,i,o),t[Kn]=e.current,bo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uu(e)};Qt.render=function(t,e,n){if(!cu(e))throw Error(G(200));return du(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!cu(t))throw Error(G(40));return t._reactRootContainer?(us(function(){du(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};Qt.unstable_batchedUpdates=Vh;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cu(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return du(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uv)}catch(t){console.error(t)}}uv(),u0.exports=Qt;var Vk=u0.exports,Mm=Vk;Cc.createRoot=Mm.createRoot,Cc.hydrateRoot=Mm.hydrateRoot;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},p)=>B.createElement("svg",{ref:p,...Mk,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Lk(t)}`,u].join(" "),...d},[...e.map(([m,x])=>B.createElement(m,x)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=te("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=te("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=te("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=te("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=te("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=te("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=te("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=te("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=te("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=te("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=te("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=te("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=te("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=te("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Um={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ub=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|u>>4;let x=(u&15)<<2|d>>6,I=d&63;c||(I=64,o||(x=64)),r.push(n[p],n[m],n[x],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ub(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||m==null)throw new cb;const x=i<<2|u>>4;if(r.push(x),d!==64){const I=u<<4&240|d>>2;if(r.push(I),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const db=function(t){const e=bv(t);return Ev.encodeByteArray(e,!0)},jl=function(t){return db(t).replace(/\./g,"")},Sv=function(t){try{return Ev.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=()=>hb().__FIREBASE_DEFAULTS__,pb=()=>{if(typeof process>"u"||typeof Um>"u")return;const t=Um.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sv(t[1]);return e&&JSON.parse(e)},pu=()=>{try{return fb()||pb()||mb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tv=t=>{var e,n;return(n=(e=pu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gb=t=>{const e=Tv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Iv=()=>{var t;return(t=pu())===null||t===void 0?void 0:t.config},Nv=t=>{var e;return(e=pu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jl(JSON.stringify(n)),jl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function _b(){var t;const e=(t=pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Eb(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Sb(){return!_b()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tb(){try{return typeof indexedDB=="object"}catch{return!1}}function Ib(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Nb,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ab(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new nr(s,u,r)}}function Ab(t,e){return t.replace(Cb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Cb=/\{\$([^}]+)}/g;function Pb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Bm(i)&&Bm(o)){if(!Dl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rb(t,e){const n=new jb(t,e);return n.subscribe.bind(n)}class jb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Db(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=yc),s.error===void 0&&(s.error=yc),s.complete===void 0&&(s.complete=yc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Db(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lb(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mb(t){return t===qr?void 0:t}function Lb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Fb={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},zb=ye.INFO,Ub={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},Bb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ub[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hh{constructor(e){this.name=e,this._logLevel=zb,this._logHandler=Bb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const $b=(t,e)=>e.some(n=>t instanceof n);let $m,Hm;function Hb(){return $m||($m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gb(){return Hm||(Hm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Av=new WeakMap,Sd=new WeakMap,Cv=new WeakMap,vc=new WeakMap,Gh=new WeakMap;function Wb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ir(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Av.set(n,t)}).catch(()=>{}),Gh.set(e,t),e}function qb(t){if(Sd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sd.set(t,e)}let Td={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Kb(t){Td=t(Td)}function Qb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xc(this),e,...n);return Cv.set(r,e.sort?e.sort():[e]),Ir(r)}:Gb().includes(t)?function(...e){return t.apply(xc(this),e),Ir(Av.get(this))}:function(...e){return Ir(t.apply(xc(this),e))}}function Yb(t){return typeof t=="function"?Qb(t):(t instanceof IDBTransaction&&qb(t),$b(t,Hb())?new Proxy(t,Td):t)}function Ir(t){if(t instanceof IDBRequest)return Wb(t);if(vc.has(t))return vc.get(t);const e=Yb(t);return e!==t&&(vc.set(t,e),Gh.set(e,t)),e}const xc=t=>Gh.get(t);function Xb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Ir(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ir(o.result),c.oldVersion,c.newVersion,Ir(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const Jb=["get","getKey","getAll","getAllKeys","count"],Zb=["put","add","delete","clear"],_c=new Map;function Gm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_c.get(e))return _c.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Zb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Jb.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return _c.set(e,i),i}Kb(t=>({...t,get:(e,n,r)=>Gm(e,n)||t.get(e,n,r),has:(e,n)=>!!Gm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Id="@firebase/app",Wm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new Hh("@firebase/app"),nE="@firebase/app-compat",rE="@firebase/analytics-compat",sE="@firebase/analytics",iE="@firebase/app-check-compat",oE="@firebase/app-check",aE="@firebase/auth",lE="@firebase/auth-compat",uE="@firebase/database",cE="@firebase/data-connect",dE="@firebase/database-compat",hE="@firebase/functions",fE="@firebase/functions-compat",pE="@firebase/installations",mE="@firebase/installations-compat",gE="@firebase/messaging",yE="@firebase/messaging-compat",vE="@firebase/performance",xE="@firebase/performance-compat",_E="@firebase/remote-config",wE="@firebase/remote-config-compat",kE="@firebase/storage",bE="@firebase/storage-compat",EE="@firebase/firestore",SE="@firebase/vertexai-preview",TE="@firebase/firestore-compat",IE="firebase",NE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="[DEFAULT]",AE={[Id]:"fire-core",[nE]:"fire-core-compat",[sE]:"fire-analytics",[rE]:"fire-analytics-compat",[oE]:"fire-app-check",[iE]:"fire-app-check-compat",[aE]:"fire-auth",[lE]:"fire-auth-compat",[uE]:"fire-rtdb",[cE]:"fire-data-connect",[dE]:"fire-rtdb-compat",[hE]:"fire-fn",[fE]:"fire-fn-compat",[pE]:"fire-iid",[mE]:"fire-iid-compat",[gE]:"fire-fcm",[yE]:"fire-fcm-compat",[vE]:"fire-perf",[xE]:"fire-perf-compat",[_E]:"fire-rc",[wE]:"fire-rc-compat",[kE]:"fire-gcs",[bE]:"fire-gcs-compat",[EE]:"fire-fst",[TE]:"fire-fst-compat",[SE]:"fire-vertex","fire-js":"fire-js",[IE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Map,CE=new Map,Ad=new Map;function qm(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){const e=t.name;if(Ad.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,t);for(const n of Vl.values())qm(n,t);for(const n of CE.values())qm(n,t);return!0}function Wh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Ko("app","Firebase",PE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=NE;function Pv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Nr.create("bad-app-name",{appName:String(s)});if(n||(n=Iv()),!n)throw Nr.create("no-options");const i=Vl.get(s);if(i){if(Dl(n,i.options)&&Dl(r,i.config))return i;throw Nr.create("duplicate-app",{appName:s})}const o=new Ob(s);for(const c of Ad.values())o.addComponent(c);const u=new RE(n,r,o);return Vl.set(s,u),u}function Rv(t=Nd){const e=Vl.get(t);if(!e&&t===Nd&&Iv())return Pv();if(!e)throw Nr.create("no-app",{appName:t});return e}function Ar(t,e,n){var r;let s=(r=AE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(u.join(" "));return}ii(new cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebase-heartbeat-database",DE=1,Ro="firebase-heartbeat-store";let wc=null;function jv(){return wc||(wc=Xb(jE,DE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),wc}async function VE(t){try{const n=(await jv()).transaction(Ro),r=await n.objectStore(Ro).get(Dv(t));return await n.done,r}catch(e){if(e instanceof nr)Xn.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function Km(t,e){try{const r=(await jv()).transaction(Ro,"readwrite");await r.objectStore(Ro).put(e,Dv(t)),await r.done}catch(n){if(n instanceof nr)Xn.warn(n.message);else{const r=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function Dv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=1024,LE=30*24*60*60*1e3;class OE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=LE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qm(),{heartbeatsToSend:r,unsentEntries:s}=FE(this._heartbeatsCache.heartbeats),i=jl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xn.warn(n),""}}}function Qm(){return new Date().toISOString().substring(0,10)}function FE(t,e=ME){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ym(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ym(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tb()?Ib().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Km(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Km(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ym(t){return jl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){ii(new cs("platform-logger",e=>new eE(e),"PRIVATE")),ii(new cs("heartbeat",e=>new OE(e),"PRIVATE")),Ar(Id,Wm,t),Ar(Id,Wm,"esm2017"),Ar("fire-js","")}UE("");var BE="firebase",$E="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(BE,$E,"app");function qh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HE=Vv,Mv=new Ko("auth","Firebase",Vv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Hh("@firebase/auth");function GE(t,...e){Ml.logLevel<=ye.WARN&&Ml.warn(`Auth (${vi}): ${t}`,...e)}function el(t,...e){Ml.logLevel<=ye.ERROR&&Ml.error(`Auth (${vi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw Qh(t,...e)}function _n(t,...e){return Qh(t,...e)}function Kh(t,e,n){const r=Object.assign(Object.assign({},HE()),{[e]:n});return new Ko("auth","Firebase",r).create(e,{appName:t.name})}function ns(t){return Kh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cn(t,"argument-error"),Kh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mv.create(t,...e)}function le(t,e,...n){if(!t)throw Qh(e,...n)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw el(e),new Error(e)}function Jn(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qE(){return Xm()==="http:"||Xm()==="https:"}function Xm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qE()||kb()||"connection"in navigator)?navigator.onLine:!0}function QE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=xb()||bb()}get(){return KE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Yo(3e4,6e4);function Xh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xi(t,e,n,r,s={}){return Ov(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Qo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return wb()||(d.referrerPolicy="no-referrer"),Lv.fetch()(Fv(t,t.config.apiHost,n,u),d)})}async function Ov(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},YE),e);try{const s=new ZE(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw La(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw La(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw La(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw La(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Kh(t,p,d);Cn(t,p)}}catch(s){if(s instanceof nr)throw s;Cn(t,"network-request-failed",{message:String(s)})}}async function JE(t,e,n,r,s={}){const i=await xi(t,e,n,r,s);return"mfaPendingCredential"in i&&Cn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Fv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Yh(t.config,s):`${t.config.apiScheme}://${s}`}class ZE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),XE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function La(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_n(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e){return xi(t,"POST","/v1/accounts:delete",e)}async function zv(t,e){return xi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t2(t,e=!1){const n=ln(t),r=await n.getIdToken(e),s=Jh(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:uo(kc(s.auth_time)),issuedAtTime:uo(kc(s.iat)),expirationTime:uo(kc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function kc(t){return Number(t)*1e3}function Jh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return el("JWT malformed, contained fewer than 3 sections"),null;try{const s=Sv(n);return s?JSON.parse(s):(el("Failed to decode base64 JWT payload"),null)}catch(s){return el("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Jm(t){const e=Jh(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&n2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function n2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uo(this.lastLoginAt),this.creationTime=uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){var e;const n=t.auth,r=await t.getIdToken(),s=await jo(t,zv(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Uv(i.providerUserInfo):[],u=i2(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),p=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Pd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function s2(t){const e=ln(t);await Ll(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Uv(t){return t.map(e=>{var{providerId:n}=e,r=qh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e){const n=await Ov(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Fv(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Lv.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function a2(t,e){return xi(t,"POST","/v2/accounts:revokeToken",Xh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Jm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await o2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new qs;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $n{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=qh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new r2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await jo(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t2(this,e)}reload(){return s2(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ll(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await jo(this,e2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(u=n.tenantId)!==null&&u!==void 0?u:void 0,D=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(d=n.createdAt)!==null&&d!==void 0?d:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:T,emailVerified:P,isAnonymous:L,providerData:V,stsTokenManager:w}=n;le(T&&w,e,"internal-error");const v=qs.fromJSON(this.name,w);le(typeof T=="string",e,"internal-error"),lr(m,e.name),lr(x,e.name),le(typeof P=="boolean",e,"internal-error"),le(typeof L=="boolean",e,"internal-error"),lr(I,e.name),lr(N,e.name),lr(R,e.name),lr(D,e.name),lr(S,e.name),lr(k,e.name);const b=new $n({uid:T,auth:e,email:x,emailVerified:P,displayName:m,isAnonymous:L,photoURL:N,phoneNumber:I,tenantId:R,stsTokenManager:v,createdAt:S,lastLoginAt:k});return V&&Array.isArray(V)&&(b.providerData=V.map(E=>Object.assign({},E))),D&&(b._redirectEventId=D),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new qs;s.updateFromServerResponse(n);const i=new $n({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ll(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Uv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new qs;u.updateFromIdToken(r);const c=new $n({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Pd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new Map;function Hn(t){Jn(t instanceof Function,"Expected a class definition");let e=Zm.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bv.type="NONE";const eg=Bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ks{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=tl(this.userKey,s.apiKey,i),this.fullPersistenceKey=tl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$n._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ks(Hn(eg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Hn(eg);const o=tl(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(o);if(p){const m=$n._fromJSON(e,p);d!==i&&(u=m),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ks(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ks(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($v(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kv(e))return"Blackberry";if(Qv(e))return"Webos";if(Hv(e))return"Safari";if((e.includes("chrome/")||Gv(e))&&!e.includes("edge/"))return"Chrome";if(qv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $v(t=Tt()){return/firefox\//i.test(t)}function Hv(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gv(t=Tt()){return/crios\//i.test(t)}function Wv(t=Tt()){return/iemobile/i.test(t)}function qv(t=Tt()){return/android/i.test(t)}function Kv(t=Tt()){return/blackberry/i.test(t)}function Qv(t=Tt()){return/webos/i.test(t)}function Zh(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l2(t=Tt()){var e;return Zh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u2(){return Eb()&&document.documentMode===10}function Yv(t=Tt()){return Zh(t)||qv(t)||Qv(t)||Kv(t)||/windows phone/i.test(t)||Wv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t,e=[]){let n;switch(t){case"Browser":n=tg(Tt());break;case"Worker":n=`${tg(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e={}){return xi(t,"GET","/v2/passwordPolicy",Xh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=6;class f2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:h2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ng(this),this.idTokenSubscription=new ng(this),this.beforeStateQueue=new c2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ks.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zv(this,{idToken:e}),r=await $n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ll(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(ns(this));const n=e?ln(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d2(this),n=new f2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await a2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Ks.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GE(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function mu(t){return ln(t)}class ng{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rb(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m2(t){ef=t}function g2(t){return ef.loadJS(t)}function y2(){return ef.gapiScript}function v2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e){const n=Wh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Dl(i,e??{}))return s;Cn(s,"already-initialized")}return n.initialize({options:e})}function _2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w2(t,e,n){const r=mu(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Jv(e),{host:o,port:u}=k2(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),b2()}function Jv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function k2(t){const e=Jv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:rg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:rg(o)}}}function rg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function b2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t,e){return JE(t,"POST","/v1/accounts:signInWithIdp",Xh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="http://localhost";class ds extends Zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=qh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qs(e,n)}buildRequest(){const e={requestUri:E2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Xo{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends Xo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Xo{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Xo{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await $n._fromIdTokenResponse(e,r,s),o=sg(r);return new oi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=sg(r);return new oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function sg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ol.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ol(e,n,r,s)}}function ex(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ol._fromErrorAndOperation(t,i,e,r):i})}async function S2(t,e,n=!1){const r=await jo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e,n=!1){const{auth:r}=t;if(Un(r.app))return Promise.reject(ns(r));const s="reauthenticate";try{const i=await jo(t,ex(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Jh(i.idToken);le(o,r,"internal-error");const{sub:u}=o;return le(t.uid===u,r,"user-mismatch"),oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Cn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(t,e,n=!1){if(Un(t.app))return Promise.reject(ns(t));const r="signIn",s=await ex(t,r,e),i=await oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function N2(t,e,n,r){return ln(t).onIdTokenChanged(e,n,r)}function A2(t,e,n){return ln(t).beforeAuthStateChanged(e,n)}function C2(t,e,n,r){return ln(t).onAuthStateChanged(e,n,r)}function P2(t){return ln(t).signOut()}const Fl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fl,"1"),this.storage.removeItem(Fl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1e3,j2=10;class nx extends tx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);u2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,j2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},R2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nx.type="LOCAL";const D2=nx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends tx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rx.type="SESSION";const sx=rx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),c=await V2(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const d=nf("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const x=m;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(x.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function L2(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function O2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function z2(){return ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebaseLocalStorageDb",U2=1,zl="firebaseLocalStorage",ax="fbase_key";class Jo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yu(t,e){return t.transaction([zl],e?"readwrite":"readonly").objectStore(zl)}function B2(){const t=indexedDB.deleteDatabase(ox);return new Jo(t).toPromise()}function Rd(){const t=indexedDB.open(ox,U2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zl,{keyPath:ax})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zl)?e(r):(r.close(),await B2(),e(await Rd()))})})}async function ig(t,e,n){const r=yu(t,!0).put({[ax]:e,value:n});return new Jo(r).toPromise()}async function $2(t,e){const n=yu(t,!1).get(e),r=await new Jo(n).toPromise();return r===void 0?null:r.value}function og(t,e){const n=yu(t,!0).delete(e);return new Jo(n).toPromise()}const H2=800,G2=3;class lx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>G2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gu._getInstance(z2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await O2(),!this.activeServiceWorker)return;this.sender=new M2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rd();return await ig(e,Fl,"1"),await og(e,Fl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ig(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>og(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=yu(s,!1).getAll();return new Jo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lx.type="LOCAL";const W2=lx;new Yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){return e?Hn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends Zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function q2(t){return I2(t.auth,new rf(t),t.bypassAuthState)}function K2(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),T2(n,new rf(t),t.bypassAuthState)}async function Q2(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),S2(n,new rf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q2;case"linkViaPopup":case"linkViaRedirect":return Q2;case"reauthViaPopup":case"reauthViaRedirect":return K2;default:Cn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Yo(2e3,1e4);async function X2(t,e,n){if(Un(t.app))return Promise.reject(_n(t,"operation-not-supported-in-this-environment"));const r=mu(t);WE(t,e,tf);const s=ux(r,n);return new Jr(r,"signInViaPopup",e,s).executeNotNull()}class Jr extends cx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y2.get())};e()}}Jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="pendingRedirect",nl=new Map;class Z2 extends cx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nl.get(this.auth._key());if(!e){try{const r=await eS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eS(t,e){const n=rS(e),r=nS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function tS(t,e){nl.set(t._key(),e)}function nS(t){return Hn(t._redirectPersistence)}function rS(t){return tl(J2,t.config.apiKey,t.name)}async function sS(t,e,n=!1){if(Un(t.app))return Promise.reject(ns(t));const r=mu(t),s=ux(r,e),o=await new Z2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=10*60*1e3;class oS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ag(e))}saveEventToCache(e){this.cachedEventUids.add(ag(e)),this.lastProcessedEventTime=Date.now()}}function ag(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t,e={}){return xi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cS=/^https?/;async function dS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lS(t);for(const n of e)try{if(hS(n))return}catch{}Cn(t,"unauthorized-domain")}function hS(t){const e=Cd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cS.test(n))return!1;if(uS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new Yo(3e4,6e4);function lg(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pS(t){return new Promise((e,n)=>{var r,s,i;function o(){lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lg(),n(_n(t,"network-request-failed"))},timeout:fS.get()})}if(!((s=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=In().gapi)===null||i===void 0)&&i.load)o();else{const u=v2("iframefcb");return In()[u]=()=>{gapi.load?o():n(_n(t,"network-request-failed"))},g2(`${y2()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw rl=null,e})}let rl=null;function mS(t){return rl=rl||pS(t),rl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Yo(5e3,15e3),yS="__/auth/iframe",vS="emulator/auth/iframe",xS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_S=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wS(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yh(e,vS):`https://${t.config.authDomain}/${yS}`,r={apiKey:e.apiKey,appName:t.name,v:vi},s=_S.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qo(r).slice(1)}`}async function kS(t){const e=await mS(t),n=In().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:wS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),u=In().setTimeout(()=>{i(o)},gS.get());function c(){In().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ES=500,SS=600,TS="_blank",IS="http://localhost";class ug{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NS(t,e,n,r=ES,s=SS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},bS),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Tt().toLowerCase();n&&(u=Gv(d)?TS:n),$v(d)&&(e=e||IS,c.scrollbars="yes");const p=Object.entries(c).reduce((x,[I,N])=>`${x}${I}=${N},`,"");if(l2(d)&&u!=="_self")return AS(e||"",u),new ug(null);const m=window.open(e||"",u,p);le(m,t,"popup-blocked");try{m.focus()}catch{}return new ug(m)}function AS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="__/auth/handler",PS="emulator/auth/handler",RS=encodeURIComponent("fac");async function cg(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vi,eventId:s};if(e instanceof tf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Pb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Xo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),d=c?`#${RS}=${encodeURIComponent(c)}`:"";return`${jS(t)}?${Qo(u).slice(1)}${d}`}function jS({config:t}){return t.emulator?Yh(t,PS):`https://${t.authDomain}/${CS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="webStorageSupport";class DS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sx,this._completeRedirectFn=sS,this._overrideRedirectResult=tS}async _openPopup(e,n,r,s){var i;Jn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await cg(e,n,r,Cd(),s);return NS(e,o,nf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await cg(e,n,r,Cd(),s);return L2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kS(e),r=new oS(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bc,{type:bc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[bc];o!==void 0&&n(!!o),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Yv()||Hv()||Zh()}}const VS=DS;var dg="@firebase/auth",hg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OS(t){ii(new cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xv(t)},d=new p2(r,s,i,c);return _2(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new cs("auth-internal",e=>{const n=mu(e.getProvider("auth").getImmediate());return(r=>new MS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(dg,hg,LS(t)),Ar(dg,hg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=5*60,zS=Nv("authIdTokenMaxAge")||FS;let fg=null;const US=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zS)return;const s=n==null?void 0:n.token;fg!==s&&(fg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function BS(t=Rv()){const e=Wh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=x2(t,{popupRedirectResolver:VS,persistence:[W2,D2,sx]}),r=Nv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=US(i.toString());A2(n,o,()=>o(n.currentUser)),N2(n,u=>o(u))}}const s=Tv("auth");return s&&w2(n,`http://${s}`),n}function $S(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}m2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=_n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$S().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OS("Browser");var pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,hx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function b(){}b.prototype=v.prototype,w.D=v.prototype,w.prototype=new b,w.prototype.constructor=w,w.C=function(E,_,A){for(var g=Array(arguments.length-2),K=2;K<arguments.length;K++)g[K-2]=arguments[K];return v.prototype[_].apply(E,g)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,b){b||(b=0);var E=Array(16);if(typeof v=="string")for(var _=0;16>_;++_)E[_]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(_=0;16>_;++_)E[_]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=w.g[0],b=w.g[1],_=w.g[2];var A=w.g[3],g=v+(A^b&(_^A))+E[0]+3614090360&4294967295;v=b+(g<<7&4294967295|g>>>25),g=A+(_^v&(b^_))+E[1]+3905402710&4294967295,A=v+(g<<12&4294967295|g>>>20),g=_+(b^A&(v^b))+E[2]+606105819&4294967295,_=A+(g<<17&4294967295|g>>>15),g=b+(v^_&(A^v))+E[3]+3250441966&4294967295,b=_+(g<<22&4294967295|g>>>10),g=v+(A^b&(_^A))+E[4]+4118548399&4294967295,v=b+(g<<7&4294967295|g>>>25),g=A+(_^v&(b^_))+E[5]+1200080426&4294967295,A=v+(g<<12&4294967295|g>>>20),g=_+(b^A&(v^b))+E[6]+2821735955&4294967295,_=A+(g<<17&4294967295|g>>>15),g=b+(v^_&(A^v))+E[7]+4249261313&4294967295,b=_+(g<<22&4294967295|g>>>10),g=v+(A^b&(_^A))+E[8]+1770035416&4294967295,v=b+(g<<7&4294967295|g>>>25),g=A+(_^v&(b^_))+E[9]+2336552879&4294967295,A=v+(g<<12&4294967295|g>>>20),g=_+(b^A&(v^b))+E[10]+4294925233&4294967295,_=A+(g<<17&4294967295|g>>>15),g=b+(v^_&(A^v))+E[11]+2304563134&4294967295,b=_+(g<<22&4294967295|g>>>10),g=v+(A^b&(_^A))+E[12]+1804603682&4294967295,v=b+(g<<7&4294967295|g>>>25),g=A+(_^v&(b^_))+E[13]+4254626195&4294967295,A=v+(g<<12&4294967295|g>>>20),g=_+(b^A&(v^b))+E[14]+2792965006&4294967295,_=A+(g<<17&4294967295|g>>>15),g=b+(v^_&(A^v))+E[15]+1236535329&4294967295,b=_+(g<<22&4294967295|g>>>10),g=v+(_^A&(b^_))+E[1]+4129170786&4294967295,v=b+(g<<5&4294967295|g>>>27),g=A+(b^_&(v^b))+E[6]+3225465664&4294967295,A=v+(g<<9&4294967295|g>>>23),g=_+(v^b&(A^v))+E[11]+643717713&4294967295,_=A+(g<<14&4294967295|g>>>18),g=b+(A^v&(_^A))+E[0]+3921069994&4294967295,b=_+(g<<20&4294967295|g>>>12),g=v+(_^A&(b^_))+E[5]+3593408605&4294967295,v=b+(g<<5&4294967295|g>>>27),g=A+(b^_&(v^b))+E[10]+38016083&4294967295,A=v+(g<<9&4294967295|g>>>23),g=_+(v^b&(A^v))+E[15]+3634488961&4294967295,_=A+(g<<14&4294967295|g>>>18),g=b+(A^v&(_^A))+E[4]+3889429448&4294967295,b=_+(g<<20&4294967295|g>>>12),g=v+(_^A&(b^_))+E[9]+568446438&4294967295,v=b+(g<<5&4294967295|g>>>27),g=A+(b^_&(v^b))+E[14]+3275163606&4294967295,A=v+(g<<9&4294967295|g>>>23),g=_+(v^b&(A^v))+E[3]+4107603335&4294967295,_=A+(g<<14&4294967295|g>>>18),g=b+(A^v&(_^A))+E[8]+1163531501&4294967295,b=_+(g<<20&4294967295|g>>>12),g=v+(_^A&(b^_))+E[13]+2850285829&4294967295,v=b+(g<<5&4294967295|g>>>27),g=A+(b^_&(v^b))+E[2]+4243563512&4294967295,A=v+(g<<9&4294967295|g>>>23),g=_+(v^b&(A^v))+E[7]+1735328473&4294967295,_=A+(g<<14&4294967295|g>>>18),g=b+(A^v&(_^A))+E[12]+2368359562&4294967295,b=_+(g<<20&4294967295|g>>>12),g=v+(b^_^A)+E[5]+4294588738&4294967295,v=b+(g<<4&4294967295|g>>>28),g=A+(v^b^_)+E[8]+2272392833&4294967295,A=v+(g<<11&4294967295|g>>>21),g=_+(A^v^b)+E[11]+1839030562&4294967295,_=A+(g<<16&4294967295|g>>>16),g=b+(_^A^v)+E[14]+4259657740&4294967295,b=_+(g<<23&4294967295|g>>>9),g=v+(b^_^A)+E[1]+2763975236&4294967295,v=b+(g<<4&4294967295|g>>>28),g=A+(v^b^_)+E[4]+1272893353&4294967295,A=v+(g<<11&4294967295|g>>>21),g=_+(A^v^b)+E[7]+4139469664&4294967295,_=A+(g<<16&4294967295|g>>>16),g=b+(_^A^v)+E[10]+3200236656&4294967295,b=_+(g<<23&4294967295|g>>>9),g=v+(b^_^A)+E[13]+681279174&4294967295,v=b+(g<<4&4294967295|g>>>28),g=A+(v^b^_)+E[0]+3936430074&4294967295,A=v+(g<<11&4294967295|g>>>21),g=_+(A^v^b)+E[3]+3572445317&4294967295,_=A+(g<<16&4294967295|g>>>16),g=b+(_^A^v)+E[6]+76029189&4294967295,b=_+(g<<23&4294967295|g>>>9),g=v+(b^_^A)+E[9]+3654602809&4294967295,v=b+(g<<4&4294967295|g>>>28),g=A+(v^b^_)+E[12]+3873151461&4294967295,A=v+(g<<11&4294967295|g>>>21),g=_+(A^v^b)+E[15]+530742520&4294967295,_=A+(g<<16&4294967295|g>>>16),g=b+(_^A^v)+E[2]+3299628645&4294967295,b=_+(g<<23&4294967295|g>>>9),g=v+(_^(b|~A))+E[0]+4096336452&4294967295,v=b+(g<<6&4294967295|g>>>26),g=A+(b^(v|~_))+E[7]+1126891415&4294967295,A=v+(g<<10&4294967295|g>>>22),g=_+(v^(A|~b))+E[14]+2878612391&4294967295,_=A+(g<<15&4294967295|g>>>17),g=b+(A^(_|~v))+E[5]+4237533241&4294967295,b=_+(g<<21&4294967295|g>>>11),g=v+(_^(b|~A))+E[12]+1700485571&4294967295,v=b+(g<<6&4294967295|g>>>26),g=A+(b^(v|~_))+E[3]+2399980690&4294967295,A=v+(g<<10&4294967295|g>>>22),g=_+(v^(A|~b))+E[10]+4293915773&4294967295,_=A+(g<<15&4294967295|g>>>17),g=b+(A^(_|~v))+E[1]+2240044497&4294967295,b=_+(g<<21&4294967295|g>>>11),g=v+(_^(b|~A))+E[8]+1873313359&4294967295,v=b+(g<<6&4294967295|g>>>26),g=A+(b^(v|~_))+E[15]+4264355552&4294967295,A=v+(g<<10&4294967295|g>>>22),g=_+(v^(A|~b))+E[6]+2734768916&4294967295,_=A+(g<<15&4294967295|g>>>17),g=b+(A^(_|~v))+E[13]+1309151649&4294967295,b=_+(g<<21&4294967295|g>>>11),g=v+(_^(b|~A))+E[4]+4149444226&4294967295,v=b+(g<<6&4294967295|g>>>26),g=A+(b^(v|~_))+E[11]+3174756917&4294967295,A=v+(g<<10&4294967295|g>>>22),g=_+(v^(A|~b))+E[2]+718787259&4294967295,_=A+(g<<15&4294967295|g>>>17),g=b+(A^(_|~v))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(_+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+_&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var b=v-this.blockSize,E=this.B,_=this.h,A=0;A<v;){if(_==0)for(;A<=b;)s(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<v;)if(E[_++]=w.charCodeAt(A++),_==this.blockSize){s(this,E),_=0;break}}else for(;A<v;)if(E[_++]=w[A++],_==this.blockSize){s(this,E),_=0;break}}this.h=_,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var b=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=b&255,b/=256;for(this.u(w),w=Array(16),v=b=0;4>v;++v)for(var E=0;32>E;E+=8)w[b++]=this.g[v]>>>E&255;return w};function i(w,v){var b=u;return Object.prototype.hasOwnProperty.call(b,w)?b[w]:b[w]=v(w)}function o(w,v){this.h=v;for(var b=[],E=!0,_=w.length-1;0<=_;_--){var A=w[_]|0;E&&A==v||(b[_]=A,E=!1)}this.g=b}var u={};function c(w){return-128<=w&&128>w?i(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return D(d(-w));for(var v=[],b=1,E=0;w>=b;E++)v[E]=w/b|0,b*=4294967296;return new o(v,0)}function p(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return D(p(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(v,8)),E=m,_=0;_<w.length;_+=8){var A=Math.min(8,w.length-_),g=parseInt(w.substring(_,_+A),v);8>A?(A=d(Math.pow(v,A)),E=E.j(A).add(d(g))):(E=E.j(b),E=E.add(d(g)))}return E}var m=c(0),x=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-D(this).m();for(var w=0,v=1,b=0;b<this.g.length;b++){var E=this.i(b);w+=(0<=E?E:4294967296+E)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(R(this))return"-"+D(this).toString(w);for(var v=d(Math.pow(w,6)),b=this,E="";;){var _=P(b,v).g;b=S(b,_.j(v));var A=((0<b.g.length?b.g[0]:b.h)>>>0).toString(w);if(b=_,N(b))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=S(this,w),R(w)?-1:N(w)?0:1};function D(w){for(var v=w.g.length,b=[],E=0;E<v;E++)b[E]=~w.g[E];return new o(b,~w.h).add(x)}t.abs=function(){return R(this)?D(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),b=[],E=0,_=0;_<=v;_++){var A=E+(this.i(_)&65535)+(w.i(_)&65535),g=(A>>>16)+(this.i(_)>>>16)+(w.i(_)>>>16);E=g>>>16,A&=65535,g&=65535,b[_]=g<<16|A}return new o(b,b[b.length-1]&-2147483648?-1:0)};function S(w,v){return w.add(D(v))}t.j=function(w){if(N(this)||N(w))return m;if(R(this))return R(w)?D(this).j(D(w)):D(D(this).j(w));if(R(w))return D(this.j(D(w)));if(0>this.l(I)&&0>w.l(I))return d(this.m()*w.m());for(var v=this.g.length+w.g.length,b=[],E=0;E<2*v;E++)b[E]=0;for(E=0;E<this.g.length;E++)for(var _=0;_<w.g.length;_++){var A=this.i(E)>>>16,g=this.i(E)&65535,K=w.i(_)>>>16,ne=w.i(_)&65535;b[2*E+2*_]+=g*ne,k(b,2*E+2*_),b[2*E+2*_+1]+=A*ne,k(b,2*E+2*_+1),b[2*E+2*_+1]+=g*K,k(b,2*E+2*_+1),b[2*E+2*_+2]+=A*K,k(b,2*E+2*_+2)}for(E=0;E<v;E++)b[E]=b[2*E+1]<<16|b[2*E];for(E=v;E<2*v;E++)b[E]=0;return new o(b,0)};function k(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function T(w,v){this.g=w,this.h=v}function P(w,v){if(N(v))throw Error("division by zero");if(N(w))return new T(m,m);if(R(w))return v=P(D(w),v),new T(D(v.g),D(v.h));if(R(v))return v=P(w,D(v)),new T(D(v.g),v.h);if(30<w.g.length){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var b=x,E=v;0>=E.l(w);)b=L(b),E=L(E);var _=V(b,1),A=V(E,1);for(E=V(E,2),b=V(b,2);!N(E);){var g=A.add(E);0>=g.l(w)&&(_=_.add(b),A=g),E=V(E,1),b=V(b,1)}return v=S(w,_.j(v)),new T(_,v)}for(_=m;0<=w.l(v);){for(b=Math.max(1,Math.floor(w.m()/v.m())),E=Math.ceil(Math.log(b)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=d(b),g=A.j(v);R(g)||0<g.l(w);)b-=E,A=d(b),g=A.j(v);N(A)&&(A=x),_=_.add(A),w=S(w,g)}return new T(_,w)}t.A=function(w){return P(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),b=[],E=0;E<v;E++)b[E]=this.i(E)&w.i(E);return new o(b,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),b=[],E=0;E<v;E++)b[E]=this.i(E)|w.i(E);return new o(b,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),b=[],E=0;E<v;E++)b[E]=this.i(E)^w.i(E);return new o(b,this.h^w.h)};function L(w){for(var v=w.g.length+1,b=[],E=0;E<v;E++)b[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(b,w.h)}function V(w,v){var b=v>>5;v%=32;for(var E=w.g.length-b,_=[],A=0;A<E;A++)_[A]=0<v?w.i(A+b)>>>v|w.i(A+b+1)<<32-v:w.i(A+b);return new o(_,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,rs=o}).apply(typeof pg<"u"?pg:typeof self<"u"?self:typeof window<"u"?window:{});var Oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fx,Qi,px,sl,jd,mx,gx,yx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oa=="object"&&Oa];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var j=a[y];if(!(j in f))break e;f=f[j]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,y=!1,j={next:function(){if(!y&&f<a.length){var M=f++;return{value:h(M,a[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,y),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function x(a,h,f){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function I(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function N(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,j,M){for(var q=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)q[Ae-2]=arguments[Ae];return h.prototype[j].apply(y,q)}}function R(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function D(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(c(y)){const j=a.length||0,M=y.length||0;a.length=j+M;for(let q=0;q<M;q++)a[j+q]=y[q]}else a.push(y)}}class S{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function w(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function v(a){const h={};for(const f in a)h[f]=a[f];return h}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,h){let f,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(f in y)a[f]=y[f];for(let M=0;M<b.length;M++)f=b[M],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function _(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function A(a){u.setTimeout(()=>{throw a},0)}function g(){var a=ee;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class K{constructor(){this.h=this.g=null}add(h,f){const y=ne.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var ne=new S(()=>new Ie,a=>a.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ge,W=!1,ee=new K,oe=()=>{const a=u.Promise.resolve(void 0);Ge=()=>{a.then(ve)}};var ve=()=>{for(var a;a=g();){try{a.h.call(a.g)}catch(f){A(f)}var h=ne;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}W=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var nt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,h),u.removeEventListener("test",f,h)}catch{}return a}();function We(a,h){if(_e.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{P(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:gt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&We.aa.h.call(this)}}N(We,_e);var gt={2:"touch",3:"pen",4:"mouse"};We.prototype.h=function(){We.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),Xt=0;function rt(a,h,f,y,j){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=j,this.key=++Xt,this.da=this.fa=!1}function Dt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Vt(a){this.src=a,this.g={},this.h=0}Vt.prototype.add=function(a,h,f,y,j){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var q=Mt(a,h,y,j);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new rt(h,this.src,M,!!y,j),h.fa=f,a.push(h)),h};function un(a,h){var f=h.type;if(f in a.g){var y=a.g[f],j=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=j)&&Array.prototype.splice.call(y,j,1),M&&(Dt(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Mt(a,h,f,y){for(var j=0;j<a.length;++j){var M=a[j];if(!M.da&&M.listener==h&&M.capture==!!f&&M.ha==y)return j}return-1}var F="closure_lm_"+(1e6*Math.random()|0),O={};function Q(a,h,f,y,j){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Q(a,h[M],f,y,j);return null}return f=Ot(f),a&&a[at]?a.K(h,f,d(y)?!!y.capture:!1,j):ae(a,h,f,!1,y,j)}function ae(a,h,f,y,j,M){if(!h)throw Error("Invalid event type");var q=d(j)?!!j.capture:!!j,Ae=Lt(a);if(Ae||(a[F]=Ae=new Vt(a)),f=Ae.add(h,f,y,q,M),f.proxy)return f;if(y=he(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)nt||(j=q),j===void 0&&(j=!1),a.addEventListener(h.toString(),y,j);else if(a.attachEvent)a.attachEvent(Jt(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function he(){function a(f){return h.call(a.src,a.listener,f)}const h=cn;return a}function Ce(a,h,f,y,j){if(Array.isArray(h))for(var M=0;M<h.length;M++)Ce(a,h[M],f,y,j);else y=d(y)?!!y.capture:!!y,f=Ot(f),a&&a[at]?(a=a.i,h=String(h).toString(),h in a.g&&(M=a.g[h],f=Mt(M,f,y,j),-1<f&&(Dt(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete a.g[h],a.h--)))):a&&(a=Lt(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Mt(h,f,y,j)),(f=-1<a?h[a]:null)&&Xe(f))}function Xe(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[at])un(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Jt(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=Lt(h))?(un(f,a),f.h==0&&(f.src=null,h[F]=null)):Dt(a)}}}function Jt(a){return a in O?O[a]:O[a]="on"+a}function cn(a,h){if(a.da)a=!0;else{h=new We(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&Xe(a),a=f.call(y,h)}return a}function Lt(a){return a=a[F],a instanceof Vt?a:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(a){return typeof a=="function"?a:(a[It]||(a[It]=function(h){return a.handleEvent(h)}),a[It])}function Pe(){me.call(this),this.i=new Vt(this),this.M=this,this.F=null}N(Pe,me),Pe.prototype[at]=!0,Pe.prototype.removeEventListener=function(a,h,f,y){Ce(this,a,h,f,y)};function re(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new _e(h,a);else if(h instanceof _e)h.target=h.target||a;else{var j=h;h=new _e(y,a),E(h,j)}if(j=!0,f)for(var M=f.length-1;0<=M;M--){var q=h.g=f[M];j=C(q,y,!0,h)&&j}if(q=h.g=a,j=C(q,y,!0,h)&&j,j=C(q,y,!1,h)&&j,f)for(M=0;M<f.length;M++)q=h.g=f[M],j=C(q,y,!1,h)&&j}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)Dt(f[y]);delete a.g[h],a.h--}}this.F=null},Pe.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},Pe.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function C(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,M=0;M<h.length;++M){var q=h[M];if(q&&!q.da&&q.capture==f){var Ae=q.listener,lt=q.ha||q.src;q.fa&&un(a.i,q),j=Ae.call(lt,y)!==!1&&j}}return j&&!y.defaultPrevented}function U(a,h,f){if(typeof a=="function")f&&(a=x(a,f));else if(a&&typeof a.handleEvent=="function")a=x(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function H(a){a.g=U(()=>{a.g=null,a.i&&(a.i=!1,H(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Y extends me{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:H(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function X(a){me.call(this),this.h=a,this.g={}}N(X,me);var fe=[];function Ee(a){V(a.g,function(h,f){this.g.hasOwnProperty(f)&&Xe(h)},a),a.g={}}X.prototype.N=function(){X.aa.N.call(this),Ee(this)},X.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ne=u.JSON.stringify,Ue=u.JSON.parse,Nt=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function rr(){}rr.prototype.h=null;function _s(a){return a.h||(a.h=a.i())}function Of(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Au(){_e.call(this,"d")}N(Au,_e);function Cu(){_e.call(this,"c")}N(Cu,_e);var Ur={},Ff=null;function ia(){return Ff=Ff||new Pe}Ur.La="serverreachability";function zf(a){_e.call(this,Ur.La,a)}N(zf,_e);function Si(a){const h=ia();re(h,new zf(h))}Ur.STAT_EVENT="statevent";function Uf(a,h){_e.call(this,Ur.STAT_EVENT,a),this.stat=h}N(Uf,_e);function At(a){const h=ia();re(h,new Uf(h,a))}Ur.Ma="timingevent";function Bf(a,h){_e.call(this,Ur.Ma,a),this.size=h}N(Bf,_e);function Ti(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function F_(a,h,f,y,j,M){a.info(function(){if(a.g)if(M)for(var q="",Ae=M.split("&"),lt=0;lt<Ae.length;lt++){var ke=Ae[lt].split("=");if(1<ke.length){var yt=ke[0];ke=ke[1];var vt=yt.split("_");q=2<=vt.length&&vt[1]=="type"?q+(yt+"="+ke+"&"):q+(yt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+h+`
`+f+`
`+q})}function z_(a,h,f,y,j,M,q){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+h+`
`+f+`
`+M+" "+q})}function ws(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+B_(a,f)+(y?" "+y:"")})}function U_(a,h){a.info(function(){return"TIMEOUT: "+h})}Ii.prototype.info=function(){};function B_(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var j=y[1];if(Array.isArray(j)&&!(1>j.length)){var M=j[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<j.length;q++)j[q]=""}}}}return Ne(f)}catch{return h}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$f={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pu;function aa(){}N(aa,rr),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},Pu=new aa;function sr(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new X(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hf}function Hf(){this.i=null,this.g="",this.h=!1}var Gf={},Ru={};function ju(a,h,f){a.L=1,a.v=da(Dn(h)),a.m=f,a.P=!0,Wf(a,null)}function Wf(a,h){a.F=Date.now(),la(a),a.A=Dn(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),op(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Hf,a.g=Ep(a.j,f?h:null,!a.m),0<a.O&&(a.M=new Y(x(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(fe[0]=j.toString()),j=fe);for(var M=0;M<j.length;M++){var q=Q(f,j[M],y||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Si(),F_(a.i,a.u,a.A,a.l,a.R,a.m)}sr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Vn(a)==3?h.j():this.Y(a)},sr.prototype.Y=function(a){try{if(a==this.g)e:{const vt=Vn(this.g);var h=this.g.Ba();const Es=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||fp(this.g)))){this.J||vt!=4||h==7||(h==8||0>=Es?Si(3):Si(2)),Du(this);var f=this.g.Z();this.X=f;t:if(qf(this)){var y=fp(this.g);a="";var j=y.length,M=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),Ni(this);var q="";break t}this.h.i=new u.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(M&&h==j-1)});y.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,z_(this.i,this.u,this.A,this.l,this.R,vt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,lt=this.g;if((Ae=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ae)){var ke=Ae;break t}}ke=null}if(f=ke)ws(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vu(this,f);else{this.o=!1,this.s=3,At(12),Br(this),Ni(this);break e}}if(this.P){f=!0;let dn;for(;!this.J&&this.C<q.length;)if(dn=$_(this,q),dn==Ru){vt==4&&(this.s=4,At(14),f=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Gf){this.s=4,At(15),ws(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else ws(this.i,this.l,dn,null),Vu(this,dn);if(qf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||q.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)ws(this.i,this.l,q,"[Invalid Chunked Response]"),Br(this),Ni(this);else if(0<q.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Uu(yt),yt.M=!0,At(11))}}else ws(this.i,this.l,q,null),Vu(this,q);vt==4&&Br(this),this.o&&!this.J&&(vt==4?_p(this.j,this):(this.o=!1,la(this)))}else ow(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Br(this),Ni(this)}}}catch{}finally{}};function qf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function $_(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?Ru:(f=Number(h.substring(f,y)),isNaN(f)?Gf:(y+=1,y+f>h.length?Ru:(h=h.slice(y,y+f),a.C=y+f,h)))}sr.prototype.cancel=function(){this.J=!0,Br(this)};function la(a){a.S=Date.now()+a.I,Kf(a,a.I)}function Kf(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ti(x(a.ba,a),h)}function Du(a){a.B&&(u.clearTimeout(a.B),a.B=null)}sr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(U_(this.i,this.A),this.L!=2&&(Si(),At(17)),Br(this),this.s=2,Ni(this)):Kf(this,this.S-a)};function Ni(a){a.j.G==0||a.J||_p(a.j,a)}function Br(a){Du(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Ee(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Vu(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Mu(f.h,a))){if(!a.K&&Mu(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ya(f),ma(f);else break e;zu(f),At(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ti(x(f.Za,f),6e3));if(1>=Xf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Hr(f,11)}else if((a.K||f.g==a)&&ya(f),!k(h))for(j=f.Da.g.parse(h),h=0;h<j.length;h++){let ke=j[h];if(f.T=ke[0],ke=ke[1],f.G==2)if(ke[0]=="c"){f.K=ke[1],f.ia=ke[2];const yt=ke[3];yt!=null&&(f.la=yt,f.j.info("VER="+f.la));const vt=ke[4];vt!=null&&(f.Aa=vt,f.j.info("SVER="+f.Aa));const Es=ke[5];Es!=null&&typeof Es=="number"&&0<Es&&(y=1.5*Es,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const dn=a.g;if(dn){const xa=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var M=y.h;M.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Lu(M,M.h),M.h=null))}if(y.D){const Bu=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bu&&(y.ya=Bu,je(y.I,y.D,Bu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var q=a;if(y.qa=bp(y,y.J?y.ia:null,y.W),q.K){Jf(y.h,q);var Ae=q,lt=y.L;lt&&(Ae.I=lt),Ae.B&&(Du(Ae),la(Ae)),y.g=q}else vp(y);0<f.i.length&&ga(f)}else ke[0]!="stop"&&ke[0]!="close"||Hr(f,7);else f.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Hr(f,7):Fu(f):ke[0]!="noop"&&f.l&&f.l.ta(ke),f.v=0)}}Si(4)}catch{}}var H_=class{constructor(a,h){this.g=a,this.map=h}};function Qf(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Xf(a){return a.h?1:a.g?a.g.size:0}function Mu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Lu(a,h){a.g?a.g.add(h):a.h=h}function Jf(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Qf.prototype.cancel=function(){if(this.i=Zf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Zf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return R(a.i)}function G_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function W_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function ep(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=W_(a),y=G_(a),j=y.length,M=0;M<j;M++)h.call(void 0,y[M],f&&f[M],a)}var tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q_(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),j=null;if(0<=y){var M=a[f].substring(0,y);j=a[f].substring(y+1)}else M=a[f];h(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function $r(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof $r){this.h=a.h,ua(this,a.j),this.o=a.o,this.g=a.g,ca(this,a.s),this.l=a.l;var h=a.i,f=new Pi;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),np(this,f),this.m=a.m}else a&&(h=String(a).match(tp))?(this.h=!1,ua(this,h[1]||"",!0),this.o=Ai(h[2]||""),this.g=Ai(h[3]||"",!0),ca(this,h[4]),this.l=Ai(h[5]||"",!0),np(this,h[6]||"",!0),this.m=Ai(h[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}$r.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ci(h,rp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ci(h,rp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ci(f,f.charAt(0)=="/"?Y_:Q_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ci(f,J_)),a.join("")};function Dn(a){return new $r(a)}function ua(a,h,f){a.j=f?Ai(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ca(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function np(a,h,f){h instanceof Pi?(a.i=h,Z_(a.i,a.h)):(f||(h=Ci(h,X_)),a.i=new Pi(h,a.h))}function je(a,h,f){a.i.set(h,f)}function da(a){return je(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ai(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ci(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,K_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function K_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var rp=/[#\/\?@]/g,Q_=/[#\?:]/g,Y_=/[#\?]/g,X_=/[#\?@]/g,J_=/#/g;function Pi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function ir(a){a.g||(a.g=new Map,a.h=0,a.i&&q_(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Pi.prototype,t.add=function(a,h){ir(this),this.i=null,a=ks(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function sp(a,h){ir(a),h=ks(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ip(a,h){return ir(a),h=ks(a,h),a.g.has(h)}t.forEach=function(a,h){ir(this),this.g.forEach(function(f,y){f.forEach(function(j){a.call(h,j,y,this)},this)},this)},t.na=function(){ir(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const j=a[y];for(let M=0;M<j.length;M++)f.push(h[y])}return f},t.V=function(a){ir(this);let h=[];if(typeof a=="string")ip(this,a)&&(h=h.concat(this.g.get(ks(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return ir(this),this.i=null,a=ks(this,a),ip(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function op(a,h,f){sp(a,h),0<f.length&&(a.i=null,a.g.set(ks(a,h),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const M=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var j=M;q[y]!==""&&(j+="="+encodeURIComponent(String(q[y]))),a.push(j)}}return this.i=a.join("&")};function ks(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Z_(a,h){h&&!a.j&&(ir(a),a.i=null,a.g.forEach(function(f,y){var j=y.toLowerCase();y!=j&&(sp(this,y),op(this,j,f))},a)),a.j=h}function ew(a,h){const f=new Ii;if(u.Image){const y=new Image;y.onload=I(or,f,"TestLoadImage: loaded",!0,h,y),y.onerror=I(or,f,"TestLoadImage: error",!1,h,y),y.onabort=I(or,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=I(or,f,"TestLoadImage: timeout",!1,h,y),u.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function tw(a,h){const f=new Ii,y=new AbortController,j=setTimeout(()=>{y.abort(),or(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(M=>{clearTimeout(j),M.ok?or(f,"TestPingServer: ok",!0,h):or(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),or(f,"TestPingServer: error",!1,h)})}function or(a,h,f,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(f)}catch{}}function nw(){this.g=new Nt}function rw(a,h,f){const y=f||"";try{ep(a,function(j,M){let q=j;d(j)&&(q=Ne(j)),h.push(y+M+"="+encodeURIComponent(q))})}catch(j){throw h.push(y+"type="+encodeURIComponent("_badmap")),j}}function ha(a){this.l=a.Ub||null,this.j=a.eb||!1}N(ha,rr),ha.prototype.g=function(){return new fa(this.l,this.j)},ha.prototype.i=function(a){return function(){return a}}({});function fa(a,h){Pe.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(fa,Pe),t=fa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ji(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ap(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ap(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ri(this):ji(this),this.readyState==3&&ap(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ri(this))},t.Qa=function(a){this.g&&(this.response=a,Ri(this))},t.ga=function(){this.g&&Ri(this)};function Ri(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ji(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function ji(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function lp(a){let h="";return V(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function Ou(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=lp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):je(a,h,f))}function Be(a){Pe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Be,Pe);var sw=/^https?$/i,iw=["POST","PUT"];t=Be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pu.g(),this.v=this.o?_s(this.o):_s(Pu),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(M){up(this,M);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)f.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())f.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),j=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(iw,h,void 0))||y||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of f)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hp(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){up(this,M)}};function up(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,cp(a),pa(a)}function cp(a){a.A||(a.A=!0,re(a,"complete"),re(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,re(this,"complete"),re(this,"abort"),pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pa(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dp(this):this.bb())},t.bb=function(){dp(this)};function dp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Vn(a)!=4||a.Z()!=2)){if(a.u&&Vn(a)==4)U(a.Ea,0,a);else if(re(a,"readystatechange"),Vn(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=q===0){var j=String(a.D).match(tp)[1]||null;!j&&u.self&&u.self.location&&(j=u.self.location.protocol.slice(0,-1)),y=!sw.test(j?j.toLowerCase():"")}f=y}if(f)re(a,"complete"),re(a,"success");else{a.m=6;try{var M=2<Vn(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",cp(a)}}finally{pa(a)}}}}function pa(a,h){if(a.g){hp(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||re(a,"ready");try{f.onreadystatechange=y}catch{}}}function hp(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Vn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Ue(h)}};function fp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ow(a){const h={};a=(a.g&&2<=Vn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(k(a[y]))continue;var f=_(a[y]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=h[j]||[];h[j]=M,M.push(f)}w(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function pp(a){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Di("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Di("baseRetryDelayMs",5e3,a),this.cb=Di("retryDelaySeedMs",1e4,a),this.Wa=Di("forwardChannelMaxRetries",2,a),this.wa=Di("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Qf(a&&a.concurrentRequestLimit),this.Da=new nw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pp.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,y){At(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=bp(this,null,this.W),ga(this)};function Fu(a){if(mp(a),a.G==3){var h=a.U++,f=Dn(a.I);if(je(f,"SID",a.K),je(f,"RID",h),je(f,"TYPE","terminate"),Vi(a,f),h=new sr(a,a.j,h),h.L=2,h.v=da(Dn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=h.v,f=!0),f||(h.g=Ep(h.j,null),h.g.ea(h.v)),h.F=Date.now(),la(h)}kp(a)}function ma(a){a.g&&(Uu(a),a.g.cancel(),a.g=null)}function mp(a){ma(a),a.u&&(u.clearTimeout(a.u),a.u=null),ya(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function ga(a){if(!Yf(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ge||oe(),W||(Ge(),W=!0),ee.add(h,a),a.B=0}}function aw(a,h){return Xf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ti(x(a.Ga,a,h),wp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new sr(this,this.j,a);let M=this.o;if(this.S&&(M?(M=v(M),E(M,this.S)):M=this.S),this.m!==null||this.O||(j.H=M,M=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=yp(this,j,h),f=Dn(this.I),je(f,"RID",a),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),Vi(this,f),M&&(this.O?h="headers="+encodeURIComponent(String(lp(M)))+"&"+h:this.m&&Ou(f,this.m,M)),Lu(this.h,j),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",h),je(f,"SID","null"),j.T=!0,ju(j,f,null)):ju(j,f,h),this.G=2}}else this.G==3&&(a?gp(this,a):this.i.length==0||Yf(this.h)||gp(this))};function gp(a,h){var f;h?f=h.l:f=a.U++;const y=Dn(a.I);je(y,"SID",a.K),je(y,"RID",f),je(y,"AID",a.T),Vi(a,y),a.m&&a.o&&Ou(y,a.m,a.o),f=new sr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=yp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Lu(a.h,f),ju(f,y,h)}function Vi(a,h){a.H&&V(a.H,function(f,y){je(h,y,f)}),a.l&&ep({},function(f,y){je(h,y,f)})}function yp(a,h,f){f=Math.min(a.i.length,f);var y=a.l?x(a.l.Na,a.l,a):null;e:{var j=a.i;let M=-1;for(;;){const q=["count="+f];M==-1?0<f?(M=j[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Ae=!0;for(let lt=0;lt<f;lt++){let ke=j[lt].g;const yt=j[lt].map;if(ke-=M,0>ke)M=Math.max(0,j[lt].g-100),Ae=!1;else try{rw(yt,q,"req"+ke+"_")}catch{y&&y(yt)}}if(Ae){y=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function vp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ge||oe(),W||(Ge(),W=!0),ee.add(h,a),a.v=0}}function zu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ti(x(a.Fa,a),wp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,xp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ti(x(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),ma(this),xp(this))};function Uu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function xp(a){a.g=new sr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Dn(a.qa);je(h,"RID","rpc"),je(h,"SID",a.K),je(h,"AID",a.T),je(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&je(h,"TO",a.ja),je(h,"TYPE","xmlhttp"),Vi(a,h),a.m&&a.o&&Ou(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=da(Dn(h)),f.m=null,f.P=!0,Wf(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),zu(this),At(19))};function ya(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function _p(a,h){var f=null;if(a.g==h){ya(a),Uu(a),a.g=null;var y=2}else if(Mu(a.h,h))f=h.D,Jf(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;y=ia(),re(y,new Bf(y,f)),ga(a)}else vp(a);else if(j=h.s,j==3||j==0&&0<h.X||!(y==1&&aw(a,h)||y==2&&zu(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),j){case 1:Hr(a,5);break;case 4:Hr(a,10);break;case 3:Hr(a,6);break;default:Hr(a,2)}}}function wp(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Hr(a,h){if(a.j.info("Error code "+h),h==2){var f=x(a.fb,a),y=a.Xa;const j=!y;y=new $r(y||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ua(y,"https"),da(y),j?ew(y.toString(),f):tw(y.toString(),f)}else At(2);a.G=0,a.l&&a.l.sa(h),kp(a),mp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function kp(a){if(a.G=0,a.ka=[],a.l){const h=Zf(a.h);(h.length!=0||a.i.length!=0)&&(D(a.ka,h),D(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function bp(a,h,f){var y=f instanceof $r?Dn(f):new $r(f);if(y.g!="")h&&(y.g=h+"."+y.g),ca(y,y.s);else{var j=u.location;y=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var M=new $r(null);y&&ua(M,y),h&&(M.g=h),j&&ca(M,j),f&&(M.l=f),y=M}return f=a.D,h=a.ya,f&&h&&je(y,f,h),je(y,"VER",a.la),Vi(a,y),y}function Ep(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Be(new ha({eb:f})):new Be(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sp(){}t=Sp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function va(){}va.prototype.g=function(a,h){return new Ht(a,h)};function Ht(a,h){Pe.call(this),this.g=new pp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!k(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new bs(this)}N(Ht,Pe),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Fu(this.g)},Ht.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ne(a),a=f);h.i.push(new H_(h.Ya++,a)),h.G==3&&ga(h)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Fu(this.g),delete this.g,Ht.aa.N.call(this)};function Tp(a){Au.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}N(Tp,Au);function Ip(){Cu.call(this),this.status=1}N(Ip,Cu);function bs(a){this.g=a}N(bs,Sp),bs.prototype.ua=function(){re(this.g,"a")},bs.prototype.ta=function(a){re(this.g,new Tp(a))},bs.prototype.sa=function(a){re(this.g,new Ip)},bs.prototype.ra=function(){re(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,yx=function(){return new va},gx=function(){return ia()},mx=Ur,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,sl=oa,$f.COMPLETE="complete",px=$f,Of.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Qi=Of,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,fx=Be}).apply(typeof Oa<"u"?Oa:typeof self<"u"?self:typeof window<"u"?window:{});const mg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Hh("@firebase/firestore");function Hi(){return hs.logLevel}function Z(t,...e){if(hs.logLevel<=ye.DEBUG){const n=e.map(sf);hs.debug(`Firestore (${_i}): ${t}`,...n)}}function Zn(t,...e){if(hs.logLevel<=ye.ERROR){const n=e.map(sf);hs.error(`Firestore (${_i}): ${t}`,...n)}}function ai(t,...e){if(hs.logLevel<=ye.WARN){const n=e.map(sf);hs.warn(`Firestore (${_i}): ${t}`,...n)}}function sf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: `+t;throw Zn(e),new Error(e)}function Te(t,e){t||ue()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class GS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WS{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new vx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new kt(e)}}class qS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new QS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=XS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function li(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new tt(0,0))}static max(){return new ce(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends Do{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const JS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Do{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return JS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new se($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new se($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(He.fromString(e))}static fromName(e){return new ie(He.fromString(e).popFirst(5))}static empty(){return new ie(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new He(e.slice()))}}function ZS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new jr(s,ie.empty(),e)}function eT(t){return new jr(t.readTime,t.key,-1)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(ce.min(),ie.empty(),-1)}static max(){return new jr(ce.max(),ie.empty(),-1)}}function tT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==nT)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(p=>{o[d]=p,++u,u===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}of.oe=-1;function vu(t){return t==null}function Ul(t){return t===0&&1/t==-1/0}function iT(t){return typeof t=="number"&&Number.isInteger(t)&&!Ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _x(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}}class Fa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ct.RED,this.left=s??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ct(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yg(this.data.getIterator())}getIteratorFrom(e){return new yg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class yg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new ft(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return li(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wx("Invalid base64 string: "+i):i}}(e);return new mt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const oT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(Te(!!t),typeof t=="string"){let e=0;const n=oT.exec(t);if(Te(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fs(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lf(t){const e=t.mapValue.fields.__previous_value__;return af(e)?lf(e):e}function Vo(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za={mapValue:{}};function ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?af(t)?4:uT(t)?9007199254740991:lT(t)?10:11:ue()}function Pn(t,e){if(t===e)return!0;const n=ps(t);if(n!==ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Dr(s.timestampValue),u=Dr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return fs(s.bytesValue).isEqual(fs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qe(s.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(s.geoPointValue.longitude)===qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qe(s.integerValue)===qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qe(s.doubleValue),u=qe(i.doubleValue);return o===u?Ul(o)===Ul(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return li(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(gg(o)!==gg(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Pn(o[c],u[c])))return!1;return!0}(t,e);default:return ue()}}function Lo(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function ui(t,e){if(t===e)return 0;const n=ps(t),r=ps(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=qe(i.integerValue||i.doubleValue),c=qe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return vg(t.timestampValue,e.timestampValue);case 4:return vg(Vo(t),Vo(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(i,o){const u=fs(i),c=fs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const p=be(u[d],c[d]);if(p!==0)return p}return be(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=be(qe(i.latitude),qe(o.latitude));return u!==0?u:be(qe(i.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,p;const m=i.fields||{},x=o.fields||{},I=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=(c=x.value)===null||c===void 0?void 0:c.arrayValue,R=be(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:xg(I,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===za.mapValue&&o===za.mapValue)return 0;if(i===za.mapValue)return 1;if(o===za.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const x=be(c[m],p[m]);if(x!==0)return x;const I=ui(u[c[m]],d[p[m]]);if(I!==0)return I}return be(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ue()}}function vg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Dr(t),r=Dr(e),s=be(n.seconds,r.seconds);return s!==0?s:be(n.nanos,r.nanos)}function xg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ui(n[s],r[s]);if(i)return i}return be(n.length,r.length)}function ci(t){return Dd(t)}function Dd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Dd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Dd(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function Vd(t){return!!t&&"integerValue"in t}function uf(t){return!!t&&"arrayValue"in t}function _g(t){return!!t&&"nullValue"in t}function wg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function il(t){return!!t&&"mapValue"in t}function lT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!il(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=co(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());il(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];il(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){wi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new tn(co(this.value))}}function kx(t){const e=[];return wi(t.fields,(n,r)=>{const s=new dt([n]);if(il(r)){const i=kx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Et(e,0,ce.min(),ce.min(),ce.min(),tn.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,ce.min(),ce.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,ce.min(),ce.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.position=e,this.inclusive=n}}function kg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function bg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function cT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{}class Ze extends bx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hT(e,n,r):n==="array-contains"?new mT(e,r):n==="in"?new gT(e,r):n==="not-in"?new yT(e,r):n==="array-contains-any"?new vT(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fT(e,r):new pT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&ps(this.value)===ps(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rn extends bx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Rn(e,n)}matches(e){return Ex(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ex(t){return t.op==="and"}function Sx(t){return dT(t)&&Ex(t)}function dT(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function Md(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+ci(t.value);if(Sx(t))return t.filters.map(e=>Md(e)).join(",");{const e=t.filters.map(n=>Md(n)).join(",");return`${t.op}(${e})`}}function Tx(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&Pn(r.value,s.value)}(t,e):t instanceof Rn?function(r,s){return s instanceof Rn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Tx(o,s.filters[u]),!0):!1}(t,e):void ue()}function Ix(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${ci(n.value)}`}(t):t instanceof Rn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ix).join(" ,")+"}"}(t):"Filter"}class hT extends Ze{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class fT extends Ze{constructor(e,n){super(e,"in",n),this.keys=Nx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pT extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=Nx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Nx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class mT extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uf(n)&&Lo(n.arrayValue,this.value)}}class gT extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class yT extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class vT extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function Eg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xT(t,e,n,r,s,i,o)}function cf(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Md(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ci(r)).join(",")),e.ue=n}return e.ue}function df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Tx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bg(t.startAt,e.startAt)&&bg(t.endAt,e.endAt)}function Ld(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _T(t,e,n,r,s,i,o,u){return new xu(t,e,n,r,s,i,o,u)}function hf(t){return new xu(t)}function Sg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wT(t){return t.collectionGroup!==null}function ho(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new ft(dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $l(i,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new $l(dt.keyField(),r))}return e.ce}function Nn(t){const e=de(t);return e.le||(e.le=kT(e,ho(t))),e.le}function kT(t,e){if(t.limitType==="F")return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $l(s.field,i)});const n=t.endAt?new Bl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bl(t.startAt.position,t.startAt.inclusive):null;return Eg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Od(t,e,n){return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _u(t,e){return df(Nn(t),Nn(e))&&t.limitType===e.limitType}function Ax(t){return`${cf(Nn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Ix(s)).join(", ")}]`),vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ci(s)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function wu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ho(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=kg(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,ho(r),s)||r.endAt&&!function(o,u,c){const d=kg(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,ho(r),s))}(t,e)}function bT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Cx(t){return(e,n)=>{let r=!1;for(const s of ho(t)){const i=ET(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ET(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?ui(c,d):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return _x(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new ze(ie.comparator);function er(){return ST}const Px=new ze(ie.comparator);function Yi(...t){let e=Px;for(const n of t)e=e.insert(n.key,n);return e}function Rx(t){let e=Px;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return fo()}function jx(){return fo()}function fo(){return new ki(t=>t.toString(),(t,e)=>t.isEqual(e))}const TT=new ze(ie.comparator),IT=new ft(ie.comparator);function ge(...t){let e=IT;for(const n of t)e=e.add(n);return e}const NT=new ft(be);function AT(){return NT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function Dx(t){return{integerValue:""+t}}function CT(t,e){return iT(e)?Dx(e):ff(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this._=void 0}}function PT(t,e,n){return t instanceof Hl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&af(i)&&(i=lf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Oo?Mx(t,e):t instanceof Fo?Lx(t,e):function(s,i){const o=Vx(s,i),u=Tg(o)+Tg(s.Pe);return Vd(o)&&Vd(s.Pe)?Dx(u):ff(s.serializer,u)}(t,e)}function RT(t,e,n){return t instanceof Oo?Mx(t,e):t instanceof Fo?Lx(t,e):n}function Vx(t,e){return t instanceof Gl?function(r){return Vd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hl extends ku{}class Oo extends ku{constructor(e){super(),this.elements=e}}function Mx(t,e){const n=Ox(e);for(const r of t.elements)n.some(s=>Pn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fo extends ku{constructor(e){super(),this.elements=e}}function Lx(t,e){let n=Ox(e);for(const r of t.elements)n=n.filter(s=>!Pn(s,r));return{arrayValue:{values:n}}}class Gl extends ku{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tg(t){return qe(t.integerValue||t.doubleValue)}function Ox(t){return uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oo&&s instanceof Oo||r instanceof Fo&&s instanceof Fo?li(r.elements,s.elements,Pn):r instanceof Gl&&s instanceof Gl?Pn(r.Pe,s.Pe):r instanceof Hl&&s instanceof Hl}(t.transform,e.transform)}class DT{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bu{}function Fx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ux(t.key,Wn.none()):new ta(t.key,t.data,Wn.none());{const n=t.data,r=tn.empty();let s=new ft(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new vs(t.key,r,new yn(s.toArray()),Wn.none())}}function VT(t,e,n){t instanceof ta?function(s,i,o){const u=s.value.clone(),c=Ng(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof vs?function(s,i,o){if(!ol(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Ng(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(zx(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function po(t,e,n,r){return t instanceof ta?function(i,o,u,c){if(!ol(i.precondition,o))return u;const d=i.value.clone(),p=Ag(i.fieldTransforms,c,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof vs?function(i,o,u,c){if(!ol(i.precondition,o))return u;const d=Ag(i.fieldTransforms,c,o),p=o.data;return p.setAll(zx(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return ol(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function MT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Vx(r.transform,s||null);i!=null&&(n===null&&(n=tn.empty()),n.set(r.field,i))}return n||null}function Ig(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&li(r,s,(i,o)=>jT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ta extends bu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vs extends bu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ng(t,e,n){const r=new Map;Te(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,RT(o,u,n[s]))}return r}function Ag(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PT(i,o,e))}return r}class Ux extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&VT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=po(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=po(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Fx(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&li(this.mutations,e.mutations,(n,r)=>Ig(n,r))&&li(this.baseMutations,e.baseMutations,(n,r)=>Ig(n,r))}}class pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length);let s=function(){return TT}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,xe;function UT(t){switch(t){default:return ue();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function Bx(t){if(t===void 0)return Zn("GRPC error has no .code"),$.UNKNOWN;switch(t){case Qe.OK:return $.OK;case Qe.CANCELLED:return $.CANCELLED;case Qe.UNKNOWN:return $.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return $.INTERNAL;case Qe.UNAVAILABLE:return $.UNAVAILABLE;case Qe.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Qe.NOT_FOUND:return $.NOT_FOUND;case Qe.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Qe.ABORTED:return $.ABORTED;case Qe.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Qe.DATA_LOSS:return $.DATA_LOSS;default:return ue()}}(xe=Qe||(Qe={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=new rs([4294967295,4294967295],0);function Cg(t){const e=BT().encode(t),n=new hx;return n.update(e),new Uint8Array(n.digest())}function Pg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new rs([n,r],0),new rs([s,i],0)]}class mf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xi(`Invalid padding: ${n}`);if(r<0)throw new Xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=rs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(rs.fromNumber(r)));return s.compare($T)===1&&(s=new rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Cg(e),[r,s]=Pg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mf(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Cg(e),[r,s]=Pg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eu(ce.min(),s,new ze(be),er(),ge())}}class na{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new na(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class $x{constructor(e,n){this.targetId=e,this.me=n}}class Hx{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rg{constructor(){this.fe=0,this.ge=Dg(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new na(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Dg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class HT{constructor(e){this.Le=e,this.Be=new Map,this.ke=er(),this.qe=jg(),this.Qe=new ze(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Ld(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,Et.newNoDocument(o,ce.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=fs(r).toUint8Array()}catch(c){if(c instanceof wx)return ai("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new mf(o,s,i)}catch(c){return ai(c instanceof Xi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Ld(u.target)){const c=new ie(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Et.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ge();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Eu(e,n,this.Qe,this.ke,r);return this.ke=er(),this.qe=jg(),this.Qe=new ze(be),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Rg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function jg(){return new ze(ie.comparator)}function Dg(){return new ze(ie.comparator)}const GT={asc:"ASCENDING",desc:"DESCENDING"},WT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qT={and:"AND",or:"OR"};class KT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fd(t,e){return t.useProto3Json||vu(e)?e:{value:e}}function Wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QT(t,e){return Wl(t,e.toTimestamp())}function An(t){return Te(!!t),ce.fromTimestamp(function(n){const r=Dr(n);return new tt(r.seconds,r.nanos)}(t))}function gf(t,e){return zd(t,e).canonicalString()}function zd(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Wx(t){const e=He.fromString(t);return Te(Xx(e)),e}function Ud(t,e){return gf(t.databaseId,e.path)}function Ec(t,e){const n=Wx(e);if(n.get(1)!==t.databaseId.projectId)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(Kx(n))}function qx(t,e){return gf(t.databaseId,e)}function YT(t){const e=Wx(t);return e.length===4?He.emptyPath():Kx(e)}function Bd(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kx(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vg(t,e,n){return{name:Ud(t,e),fields:n.value.mapValue.fields}}function XT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(Te(p===void 0||typeof p=="string"),mt.fromBase64String(p||"")):(Te(p===void 0||p instanceof Buffer||p instanceof Uint8Array),mt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const p=d.code===void 0?$.UNKNOWN:Bx(d.code);return new se(p,d.message||"")}(o);n=new Hx(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ec(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):ce.min(),u=new tn({mapValue:{fields:r.document.fields}}),c=Et.newFoundDocument(s,i,o,u),d=r.targetIds||[],p=r.removedTargetIds||[];n=new al(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ec(t,r.document),i=r.readTime?An(r.readTime):ce.min(),o=Et.newNoDocument(s,i),u=r.removedTargetIds||[];n=new al([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ec(t,r.document),i=r.removedTargetIds||[];n=new al([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zT(s,i),u=r.targetId;n=new $x(u,o)}}return n}function JT(t,e){let n;if(e instanceof ta)n={update:Vg(t,e.key,e.value)};else if(e instanceof Ux)n={delete:Ud(t,e.key)};else if(e instanceof vs)n={update:Vg(t,e.key,e.data),updateMask:aI(e.fieldMask)};else{if(!(e instanceof LT))return ue();n={verify:Ud(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gl)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function ZT(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(ce.min())&&(o=An(i)),new DT(o,s.transformResults||[])}(n,e))):[]}function eI(t,e){return{documents:[qx(t,e.path)]}}function tI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qx(t,s);const i=function(d){if(d.length!==0)return Yx(Rn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(x){return{field:Is(x.field),direction:sI(x.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Fd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function nI(t){let e=YT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const x=Qx(m);return x instanceof Rn&&Sx(x)?x.getFilters():[x]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(x=>function(N){return new $l(Ns(N.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(m){let x;return x=typeof m=="object"?m.value:m,vu(x)?null:x}(n.limit));let c=null;n.startAt&&(c=function(m){const x=!!m.before,I=m.values||[];return new Bl(I,x)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const x=!m.before,I=m.values||[];return new Bl(I,x)}(n.endAt)),_T(e,s,o,i,u,"F",c,d)}function rI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ns(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ns(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ns(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rn.create(n.compositeFilter.filters.map(r=>Qx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function sI(t){return GT[t]}function iI(t){return WT[t]}function oI(t){return qT[t]}function Is(t){return{fieldPath:t.canonicalString()}}function Ns(t){return dt.fromServerFormat(t.fieldPath)}function Yx(t){return t instanceof Ze?function(n){if(n.op==="=="){if(wg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(_g(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wg(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(_g(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:iI(n.op),value:n.value}}}(t):t instanceof Rn?function(n){const r=n.getFilters().map(s=>Yx(s));return r.length===1?r[0]:{compositeFilter:{op:oI(n.op),filters:r}}}(t):ue()}function aI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Xx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,s,i=ce.min(),o=ce.min(),u=mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.ct=e}}function uI(t){const e=nI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.un=new dI}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(jr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class dI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ft(He.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ft(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new di(0)}static kn(){return new di(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.changes=new ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&po(r.mutation,s,yn.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Zr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Yi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=er();const o=fo(),u=function(){return fo()}();return n.forEach((c,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof vs)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),po(p.mutation,d,p.mutation.getFieldMask(),tt.now())):o.set(d.key,yn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return u.set(d,new fI(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=fo();let s=new ze((o,u)=>o-u),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=r.get(c)||yn.empty();p=u.applyToLocalView(d,p),r.set(c,p);const m=(s.get(u.batchId)||ge()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,m=jx();p.forEach(x=>{if(!i.has(x)){const I=Fx(n.get(x),r.get(x));I!==null&&m.set(x,I),i=i.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Zr());let u=-1,c=i;return o.next(d=>z.forEach(d,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(x=>{c=c.insert(p,x)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ge())).next(p=>({batchId:u,changes:Rx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Yi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Yi();return this.indexManager.getCollectionParents(e,i).next(u=>z.forEach(u,c=>{const d=function(m,x){return new xu(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,x)=>{o=o.insert(m,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,Et.newInvalidDocument(p)))});let u=Yi();return o.forEach((c,d)=>{const p=i.get(c);p!==void 0&&po(p.mutation,d,yn.empty(),tt.now()),wu(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:uI(s.bundledQuery),readTime:An(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.overlays=new ze(ie.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Zr(),i=n.length+1,o=new ie(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Zr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Zr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=s)););return z.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FT(n,r));let i=this.Ir.get(n);i===void 0&&(i=ge(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this.Tr=new ft(st.Er),this.dr=new ft(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new st(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new He([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new He([])),r=new st(n,e),s=new st(n,e+1);let i=ge();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new st(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(st.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OT(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new st(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(be);return n.forEach(s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new st(new ie(i),0);let u=new ft(be);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),z.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new st(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.Mr=e,this.docs=function(){return new ze(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=er();const o=n.path,u=new ie(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tT(eT(p),r)<=0||(s.has(p.key)||wu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _I(this)}getSize(e){return z.resolve(this.size)}}class _I extends hI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.persistence=e,this.Nr=new ki(n=>cf(n),df),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yf,this.targetCount=0,this.kr=di.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new di(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.qr={},this.overlays={},this.Qr=new of(0),this.Kr=!1,this.Kr=!0,this.$r=new yI,this.referenceDelegate=e(this),this.Ur=new wI(this),this.indexManager=new cI,this.remoteDocumentCache=function(s){return new xI(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lI(n),this.Gr=new mI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new bI(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class bI extends rT{constructor(e){super(),this.currentSequenceNumber=e}}class vf{constructor(e){this.persistence=e,this.Jr=new yf,this.Yr=null}static Zr(e){return new vf(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Sb()?8:sT(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new EI;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Hi()<=ye.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Hi()<=ye.DEBUG&&Z("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Hi()<=ye.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):z.resolve())}Yi(e,n){if(Sg(n))return z.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Od(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,Od(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Sg(n)||s.isEqual(ce.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(Hi()<=ye.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ts(n)),this.rs(e,o,n,ZS(s,-1)).next(u=>u))})}ts(e,n){let r=new ft(Cx(e));return n.forEach((s,i)=>{wu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Hi()<=ye.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.Ji.getDocumentsMatchingQuery(e,n,jr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ze(be),this._s=new ki(i=>cf(i),df),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function II(t,e,n,r){return new TI(t,e,n,r)}async function Jx(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ge();for(const d of s){o.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of i){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function NI(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,p){const m=d.batch,x=m.keys();let I=z.resolve();return x.forEach(N=>{I=I.next(()=>p.getEntry(c,N)).next(R=>{const D=d.docVersions.get(N);Te(D!==null),R.version.compareTo(D)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),p.addEntry(R)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ge();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zx(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function AI(t,e){const n=de(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const x=s.get(m);if(!x)return;u.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(mt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(R,D,S){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(x,I,p)&&u.push(n.Ur.updateTargetData(i,I))});let c=er(),d=ge();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),u.push(CI(i,o,e.documentUpdates).next(p=>{c=p.Ps,d=p.Is})),!r.isEqual(ce.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(p)}return z.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function CI(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=er();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):Z("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function PI(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RI(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $d(t,e,n){const r=de(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ea(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Mg(t,e,n){const r=de(t);let s=ce.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,p){const m=de(c),x=m._s.get(p);return x!==void 0?z.resolve(m.os.get(x)):m.Ur.getTargetData(d,p)}(r,o,Nn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:ge())).next(u=>(jI(r,bT(e),u),{documents:u,Ts:i})))}function jI(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Lg{constructor(){this.activeTargetIds=AT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DI{constructor(){this.so=new Lg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua=null;function Sc(){return Ua===null?Ua=function(){return 268435456+Math.round(2147483648*Math.random())}():Ua++,"0x"+Ua.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class OI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=Sc(),c=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(p=>(Z("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw ai("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=MI[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Sc();return new Promise((o,u)=>{const c=new fx;c.setWithCredentials(!0),c.listenOnce(px.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case sl.NO_ERROR:const p=c.getResponseJson();Z(wt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case sl.TIMEOUT:Z(wt,`RPC '${e}' ${i} timed out`),u(new se($.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:const m=c.getStatus();if(Z(wt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let x=c.getResponseJson();Array.isArray(x)&&(x=x[0]);const I=x==null?void 0:x.error;if(I&&I.status&&I.message){const N=function(D){const S=D.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(S)>=0?S:$.UNKNOWN}(I.status);u(new se(N,I.message))}else u(new se($.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new se($.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Z(wt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Z(wt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Sc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yx(),u=gx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");Z(wt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let x=!1,I=!1;const N=new LI({Io:D=>{I?Z(wt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(x||(Z(wt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),x=!0),Z(wt,`RPC '${e}' stream ${s} sending:`,D),m.send(D))},To:()=>m.close()}),R=(D,S,k)=>{D.listen(S,T=>{try{k(T)}catch(P){setTimeout(()=>{throw P},0)}})};return R(m,Qi.EventType.OPEN,()=>{I||(Z(wt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),R(m,Qi.EventType.CLOSE,()=>{I||(I=!0,Z(wt,`RPC '${e}' stream ${s} transport closed`),N.So())}),R(m,Qi.EventType.ERROR,D=>{I||(I=!0,ai(wt,`RPC '${e}' stream ${s} transport errored:`,D),N.So(new se($.UNAVAILABLE,"The operation could not be completed")))}),R(m,Qi.EventType.MESSAGE,D=>{var S;if(!I){const k=D.data[0];Te(!!k);const T=k,P=T.error||((S=T[0])===null||S===void 0?void 0:S.error);if(P){Z(wt,`RPC '${e}' stream ${s} received error:`,P);const L=P.status;let V=function(b){const E=Qe[b];if(E!==void 0)return Bx(E)}(L),w=P.message;V===void 0&&(V=$.INTERNAL,w="Unknown error status: "+L+" with message "+P.message),I=!0,N.So(new se(V,w)),m.close()}else Z(wt,`RPC '${e}' stream ${s} received:`,k),N.bo(k)}}),R(u,mx.STAT_EVENT,D=>{D.stat===jd.PROXY?Z(wt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===jd.NOPROXY&&Z(wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new KT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new e_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new se($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FI extends t_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XT(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?An(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Bd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Ld(c)?{documents:eI(i,c)}:{query:tI(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Gx(i,o.resumeToken);const d=Fd(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(ce.min())>0){u.readTime=Wl(i,o.snapshotVersion.toTimestamp());const d=Fd(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=rI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Bd(this.serializer),n.removeTarget=e,this.a_(n)}}class zI extends t_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZT(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Bd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,zd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se($.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,zd(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zn(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{xs(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=de(c);d.L_.add(4),await ra(d),d.q_.set("Unknown"),d.L_.delete(4),await Tu(d)}(this))})}),this.q_=new BI(r,s)}}async function Tu(t){if(xs(t))for(const e of t.B_)await e(!0)}async function ra(t){for(const e of t.B_)await e(!1)}function n_(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),bf(n)?kf(n):bi(n).r_()&&wf(n,e))}function _f(t,e){const n=de(t),r=bi(n);n.N_.delete(e),r.r_()&&r_(n,e),n.N_.size===0&&(r.r_()?r.o_():xs(n)&&n.q_.set("Unknown"))}function wf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bi(t).A_(e)}function r_(t,e){t.Q_.xe(e),bi(t).R_(e)}function kf(t){t.Q_=new HT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bi(t).start(),t.q_.v_()}function bf(t){return xs(t)&&!bi(t).n_()&&t.N_.size>0}function xs(t){return de(t).L_.size===0}function s_(t){t.Q_=void 0}async function HI(t){t.q_.set("Online")}async function GI(t){t.N_.forEach((e,n)=>{wf(t,e)})}async function WI(t,e){s_(t),bf(t)?(t.q_.M_(e),kf(t)):t.q_.set("Unknown")}async function qI(t,e,n){if(t.q_.set("Online"),e instanceof Hx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ql(t,r)}else if(e instanceof al?t.Q_.Ke(e):e instanceof $x?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await Zx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(mt.EMPTY_BYTE_STRING,p.snapshotVersion)),r_(i,c);const m=new vr(p.target,c,d,p.sequenceNumber);wf(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await ql(t,r)}}async function ql(t,e,n){if(!ea(e))throw e;t.L_.add(1),await ra(t),t.q_.set("Offline"),n||(n=()=>Zx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tu(t)})}function i_(t,e){return e().catch(n=>ql(t,n,e))}async function Iu(t){const e=de(t),n=Vr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KI(e);)try{const s=await PI(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,QI(e,s)}catch(s){await ql(e,s)}o_(e)&&a_(e)}function KI(t){return xs(t)&&t.O_.length<10}function QI(t,e){t.O_.push(e);const n=Vr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function o_(t){return xs(t)&&!Vr(t).n_()&&t.O_.length>0}function a_(t){Vr(t).start()}async function YI(t){Vr(t).p_()}async function XI(t){const e=Vr(t);for(const n of t.O_)e.m_(n.mutations)}async function JI(t,e,n){const r=t.O_.shift(),s=pf.from(r,e,n);await i_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Iu(t)}async function ZI(t,e){e&&Vr(t).V_&&await async function(r,s){if(function(o){return UT(o)&&o!==$.ABORTED}(s.code)){const i=r.O_.shift();Vr(r).s_(),await i_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Iu(r)}}(t,e),o_(t)&&a_(t)}async function Fg(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=xs(n);n.L_.add(3),await ra(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tu(n)}async function eN(t,e){const n=de(t);e?(n.L_.delete(2),await Tu(n)):e||(n.L_.add(2),await ra(n),n.q_.set("Unknown"))}function bi(t){return t.K_||(t.K_=function(n,r,s){const i=de(n);return i.w_(),new FI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:HI.bind(null,t),Ro:GI.bind(null,t),mo:WI.bind(null,t),d_:qI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),bf(t)?kf(t):t.q_.set("Unknown")):(await t.K_.stop(),s_(t))})),t.K_}function Vr(t){return t.U_||(t.U_=function(n,r,s){const i=de(n);return i.w_(),new zI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:YI.bind(null,t),mo:ZI.bind(null,t),f_:XI.bind(null,t),g_:JI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Iu(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Ef(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sf(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),ea(t))return new se($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Yi(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new Ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.W_=new ze(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class hi{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new hi(e,n,Ys.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nN{constructor(){this.queries=Ug(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=de(n),i=s.queries;s.queries=Ug(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new se($.ABORTED,"Firestore shutting down"))}}function Ug(){return new ki(t=>Ax(t),_u)}async function rN(t,e){const n=de(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new tN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Sf(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Tf(n)}async function sN(t,e){const n=de(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iN(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Tf(n)}function oN(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Tf(t){t.Y_.forEach(e=>{e.next()})}var Hd,Bg;(Bg=Hd||(Hd={})).ea="default",Bg.Cache="cache";class aN{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.key=e}}class u_{constructor(e){this.key=e}}class lN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=Cx(e),this.Ra=new Ys(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new zg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const x=s.get(p),I=wu(this.query,m)?m:null,N=!!x&&this.mutatedKeys.has(x.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;x&&I?x.data.isEqual(I.data)?N!==R&&(r.track({type:3,doc:I}),D=!0):this.ga(x,I)||(r.track({type:2,doc:I}),D=!0,(c&&this.Aa(I,c)>0||d&&this.Aa(I,d)<0)&&(u=!0)):!x&&I?(r.track({type:0,doc:I}),D=!0):x&&!I&&(r.track({type:1,doc:x}),D=!0,(c||d)&&(u=!0)),D&&(I?(o=o.add(I),i=R?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,N){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return R(I)-R(N)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new hi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new u_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new l_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return hi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cN{constructor(e){this.key=e,this.va=!1}}class dN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ki(u=>Ax(u),_u),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(ie.comparator),this.Na=new Map,this.La=new yf,this.Ba={},this.ka=new Map,this.qa=di.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hN(t,e,n=!0){const r=m_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await c_(r,e,n,!0),s}async function fN(t,e){const n=m_(t);await c_(n,e,!0,!1)}async function c_(t,e,n,r){const s=await RI(t.localStore,Nn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await pN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&n_(t.remoteStore,s),u}async function pN(t,e,n,r,s){t.Ka=(m,x,I)=>async function(R,D,S,k){let T=D.view.ma(S);T.ns&&(T=await Mg(R.localStore,D.query,!1).then(({documents:w})=>D.view.ma(w,T)));const P=k&&k.targetChanges.get(D.targetId),L=k&&k.targetMismatches.get(D.targetId)!=null,V=D.view.applyChanges(T,R.isPrimaryClient,P,L);return Hg(R,D.targetId,V.wa),V.snapshot}(t,m,x,I);const i=await Mg(t.localStore,e,!0),o=new lN(e,i.Ts),u=o.ma(i.documents),c=na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);Hg(t,n,d.wa);const p=new uN(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function mN(t,e,n){const r=de(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!_u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $d(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_f(r.remoteStore,s.targetId),Gd(r,s.targetId)}).catch(Zo)):(Gd(r,s.targetId),await $d(r.localStore,s.targetId,!0))}async function gN(t,e){const n=de(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_f(n.remoteStore,r.targetId))}async function yN(t,e,n){const r=EN(t);try{const s=await function(o,u){const c=de(o),d=tt.now(),p=u.reduce((I,N)=>I.add(N.key),ge());let m,x;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=er(),R=ge();return c.cs.getEntries(I,p).next(D=>{N=D,N.forEach((S,k)=>{k.isValidDocument()||(R=R.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,N)).next(D=>{m=D;const S=[];for(const k of u){const T=MT(k,m.get(k.key).overlayedDocument);T!=null&&S.push(new vs(k.key,T,kx(T.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,d,S,u)}).next(D=>{x=D;const S=D.applyToLocalDocumentSet(m,R);return c.documentOverlayCache.saveOverlays(I,D.batchId,S)})}).then(()=>({batchId:x.batchId,changes:Rx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new ze(be)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await sa(r,s.changes),await Iu(r.remoteStore)}catch(s){const i=Sf(s,"Failed to persist write");n.reject(i)}}async function d_(t,e){const n=de(t);try{const r=await AI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Te(o.va):s.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await sa(n,r,e)}catch(r){await Zo(r)}}function $g(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=de(o);c.onlineState=u;let d=!1;c.queries.forEach((p,m)=>{for(const x of m.j_)x.Z_(u)&&(d=!0)}),d&&Tf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vN(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ze(ie.comparator);o=o.insert(i,Et.newNoDocument(i,ce.min()));const u=ge().add(i),c=new Eu(ce.min(),new Map,new ze(be),o,u);await d_(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),If(r)}else await $d(r.localStore,e,!1).then(()=>Gd(r,e,n)).catch(Zo)}async function xN(t,e){const n=de(t),r=e.batch.batchId;try{const s=await NI(n.localStore,e);f_(n,r,null),h_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sa(n,s)}catch(s){await Zo(s)}}async function _N(t,e,n){const r=de(t);try{const s=await function(o,u){const c=de(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,u).next(m=>(Te(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);f_(r,e,n),h_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sa(r,s)}catch(s){await Zo(s)}}function h_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function f_(t,e,n){const r=de(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||p_(t,r)})}function p_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_f(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),If(t))}function Hg(t,e,n){for(const r of n)r instanceof l_?(t.La.addReference(r.key,e),wN(t,r)):r instanceof u_?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||p_(t,r.key)):ue()}function wN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),If(t))}function If(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(He.fromString(e)),r=t.qa.next();t.Na.set(r,new cN(n)),t.Oa=t.Oa.insert(n,r),n_(t.remoteStore,new vr(Nn(hf(n.path)),r,"TargetPurposeLimboResolution",of.oe))}}async function sa(t,e,n){const r=de(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=xf.Wi(c.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const p=de(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(d,x=>z.forEach(x.$i,I=>p.persistence.referenceDelegate.addReference(m,x.targetId,I)).next(()=>z.forEach(x.Ui,I=>p.persistence.referenceDelegate.removeReference(m,x.targetId,I)))))}catch(m){if(!ea(m))throw m;Z("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const x=m.targetId;if(!m.fromCache){const I=p.os.get(x),N=I.snapshotVersion,R=I.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(x,R)}}}(r.localStore,i))}async function kN(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await Jx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new se($.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sa(n,r.hs)}}function bN(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let s=ge();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function m_(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vN.bind(null,e),e.Ca.d_=iN.bind(null,e.eventManager),e.Ca.$a=oN.bind(null,e.eventManager),e}function EN(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_N.bind(null,e),e}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return II(this.persistence,new SI,e.initialUser,this.serializer)}Ga(e){return new kI(vf.Zr,this.serializer)}Wa(e){return new DI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class Wd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$g(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await eN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nN}()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),r=function(i){return new OI(i)}(e.databaseInfo);return function(i,o,u,c){return new UI(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new $I(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>$g(this.syncEngine,n,0),function(){return Og.D()?new Og:new VI}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,p){const m=new dN(s,i,o,u,c,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=de(s);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ra(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=kt.UNAUTHENTICATED,this.clientId=xx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ic(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IN(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Fg(e.remoteStore,s)),t._onlineComponents=e}async function IN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ic(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),await Ic(t,new Kl)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Ic(t,new Kl);return t._offlineComponents}async function g_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Gg(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Gg(t,new Wd))),t._onlineComponents}function NN(t){return g_(t).then(e=>e.syncEngine)}async function AN(t){const e=await g_(t),n=e.eventManager;return n.onListen=hN.bind(null,e.syncEngine),n.onUnlisten=mN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gN.bind(null,e.syncEngine),n}function CN(t,e,n={}){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const p=new SN({next:x=>{p.Za(),o.enqueueAndForget(()=>sN(i,m));const I=x.docs.has(u);!I&&x.fromCache?d.reject(new se($.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&x.fromCache&&c&&c.source==="server"?d.reject(new se($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(x)},error:x=>d.reject(x)}),m=new aN(hf(u.path),p,{includeMetadataChanges:!0,_a:!0});return rN(i,m)}(await AN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t,e,n){if(!n)throw new se($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RN(t,e,n,r){if(e===!0&&r===!0)throw new se($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qg(t){if(!ie.isDocumentKey(t))throw new se($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function zo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nf(t);throw new se($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HS;switch(r.type){case"firstParty":return new KS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wg.get(n);r&&(Z("ComponentProvider","Removing Datastore"),Wg.delete(n),r.terminate())}(this),Promise.resolve()}}function jN(t,e,n,r={}){var s;const i=(t=zo(t,Af))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=kt.MOCK_USER;else{u=vb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new se($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new kt(d)}t._authCredentials=new GS(new vx(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cf(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class Uo extends Cf{constructor(e,n,r){super(e,n,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ie(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function v_(t,e,...n){if(t=ln(t),arguments.length===1&&(e=xx.newId()),PN("doc","path",e),t instanceof Af){const r=He.fromString(e,...n);return qg(r),new sn(t,null,new ie(r))}{if(!(t instanceof sn||t instanceof Uo))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return qg(r),new sn(t.firestore,t instanceof Uo?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new e_(this,"async_queue_retry"),this.Vu=()=>{const r=Tc();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Tc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Tc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ea(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw Zn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ef.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Pf extends Af{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Qg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qg(e),this._firestoreClient=void 0,await e}}}function DN(t,e){const n=typeof t=="object"?t:Rv(),r=typeof t=="string"?t:"(default)",s=Wh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gb("firestore");i&&jN(s,...i)}return s}function x_(t){if(t._terminated)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VN(t),t._firestoreClient}function VN(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,p){return new aT(u,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,y_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(mt.fromBase64String(e))}catch(n){throw new se($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fi(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=/^__.*__$/;class LN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ta(e,this.data,n,this.fieldTransforms)}}function w_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Vf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ql(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(w_(this.Cu)&&MN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ON{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Su(e)}Qu(e,n,r,s=!1){return new Vf({Cu:e,methodName:n,qu:r,path:dt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FN(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new ON(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);S_("Data must be an object, but it was:",o,r);const u=b_(r,o);let c,d;if(i.merge)c=new yn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=UN(e,m,n);if(!o.contains(x))throw new se($.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);$N(p,x)||p.push(x)}c=new yn(p),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new LN(new tn(u),c,d)}function k_(t,e){if(E_(t=ln(t)))return S_("Unsupported field value:",e,t),b_(t,e);if(t instanceof __)return function(r,s){if(!w_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=k_(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:Wl(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wl(s.serializer,i)}}if(r instanceof jf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:Gx(s.serializer,r._byteString)};if(r instanceof sn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Df)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return ff(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Nf(r)}`)}(t,e)}function b_(t,e){const n={};return _x(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(t,(r,s)=>{const i=k_(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function E_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof jf||t instanceof fi||t instanceof sn||t instanceof __||t instanceof Df)}function S_(t,e,n){if(!E_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function UN(t,e,n){if((e=ln(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return T_(t,e);throw Ql("Field path arguments must be of type string or ",t,!1,void 0,n)}const BN=new RegExp("[~\\*/\\[\\]]");function T_(t,e,n){if(e.search(BN)>=0)throw Ql(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rf(...e.split("."))._internalPath}catch{throw Ql(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ql(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new se($.INVALID_ARGUMENT,u+t+c)}function $N(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(N_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HN extends I_{data(){return super.data()}}function N_(t,e){return typeof e=="string"?T_(t,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}class GN{convertValue(e,n="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qe(o.doubleValue));return new Df(i)}convertGeoPoint(e){return new jf(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Te(Xx(r));const s=new Mo(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A_ extends I_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new KN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(N_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class KN extends A_{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){t=zo(t,sn);const e=zo(t.firestore,Pf);return CN(x_(e),t._key).then(n=>ZN(e,t,n))}class YN extends GN{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function XN(t,e,n){t=zo(t,sn);const r=zo(t.firestore,Pf),s=WN(t.converter,e,n);return JN(r,[zN(FN(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wn.none())])}function JN(t,e){return function(r,s){const i=new Cr;return r.asyncQueue.enqueueAndForget(async()=>yN(await NN(r),s,i)),i.promise}(x_(t),e)}function ZN(t,e,n){const r=n.docs.get(e._key),s=new YN(t);return new A_(t,s,e._key,r,new qN(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){_i=s})(vi),ii(new cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new Pf(new WS(r.getProvider("auth-internal")),new YS(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new se($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Ar(mg,"4.7.3",e),Ar(mg,"4.7.3","esm2017")})();const eA={apiKey:"AIzaSyDq3lmHDACIejkIMshrYk5cd8nF5zGnA_A",authDomain:"pokerole-system-game.firebaseapp.com",projectId:"pokerole-system-game",storageBucket:"pokerole-system-game.firebasestorage.app",messagingSenderId:"1003513148425",appId:"1:1003513148425:web:2fb5b9ce999637c3c674d8",measurementId:"G-K1V0DY6Z5G"},C_=Pv(eA),Nc=BS(C_),P_=DN(C_),R_=B.createContext(void 0),tA=({children:t})=>{const[e,n]=B.useState(null),[r,s]=B.useState(!0),[i,o]=B.useState(null);B.useEffect(()=>{const p=C2(Nc,m=>{n(m),s(!1)});return()=>p()},[]);const u=()=>o(null),c=async()=>{o(null);const p=new On;try{await X2(Nc,p)}catch(m){console.error("Error signing in with Google",m);const x=m;if(x.code==="auth/unauthorized-domain"){let I=window.location.hostname;I||(I=window.location.host),I||(I=window.location.origin),o(` Dominio Non Autorizzato: "${I||"Sconosciuto"}"

Devi autorizzare questo dominio su Firebase:
1. Vai su Firebase Console -> Authentication -> Settings -> Authorized Domains
2. Aggiungi il dominio: ${I||"localhost"}
3. Ricarica la pagina.`)}else x.code==="auth/popup-closed-by-user"?o("Login annullato dall'utente."):x.code==="auth/popup-blocked"?o("Popup bloccato. Per favore consenti i popup per questo sito nelle impostazioni del browser."):x.code==="auth/cancelled-popup-request"||o(`Login Fallito: ${x.message}`)}},d=async()=>{try{await P2(Nc),o(null)}catch(p){console.error("Error signing out",p),o(p.message)}};return l.jsx(R_.Provider,{value:{user:e,loading:r,signInWithGoogle:c,logout:d,error:i,clearError:u},children:t})},Nu=()=>{const t=B.useContext(R_);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},nA=["Bug","Dark","Dragon","Electric","Fairy","Fighting","Fire","Flying","Ghost","Grass","Ground","Ice","Normal","Poison","Psychic","Rock","Steel","Water"],Kr=["Starter","Beginner","Amateur","Ace","Pro","Master","Champion"],rA=["Hardy","Lonely","Brave","Adamant","Naughty","Bold","Docile","Relaxed","Impish","Lax","Timid","Hasty","Serious","Jolly","Naive","Modest","Mild","Quiet","Bashful","Rash","Calm","Gentle","Sassy","Careful","Quirky"],sA=["Neutral","Burn","Freeze","Paralysis","Poison","Bad Poison","Sleep","Confused","Infatuated","Fainted"],iA={Bug:{en:"Bug",it:"Coleottero",es:"Bicho",de:"Kfer",fr:"Insecte"},Dark:{en:"Dark",it:"Buio",es:"Siniestro",de:"Unlicht",fr:"Tnbres"},Dragon:{en:"Dragon",it:"Drago",es:"Dragn",de:"Drache",fr:"Dragon"},Electric:{en:"Electric",it:"Elettro",es:"Elctrico",de:"Elektro",fr:"lectrik"},Fairy:{en:"Fairy",it:"Folletto",es:"Hada",de:"Fee",fr:"Fe"},Fighting:{en:"Fighting",it:"Lotta",es:"Lucha",de:"Kampf",fr:"Combat"},Fire:{en:"Fire",it:"Fuoco",es:"Fuego",de:"Feuer",fr:"Feu"},Flying:{en:"Flying",it:"Volante",es:"Volador",de:"Flug",fr:"Vol"},Ghost:{en:"Ghost",it:"Spettro",es:"Fantasma",de:"Geist",fr:"Spectre"},Grass:{en:"Grass",it:"Erba",es:"Planta",de:"Pflanze",fr:"Plante"},Ground:{en:"Ground",it:"Terra",es:"Tierra",de:"Boden",fr:"Sol"},Ice:{en:"Ice",it:"Ghiaccio",es:"Hielo",de:"Eis",fr:"Glace"},Normal:{en:"Normal",it:"Normale",es:"Normal",de:"Normal",fr:"Normal"},Poison:{en:"Poison",it:"Veleno",es:"Veneno",de:"Gift",fr:"Poison"},Psychic:{en:"Psychic",it:"Psico",es:"Psquico",de:"Psycho",fr:"Psy"},Rock:{en:"Rock",it:"Roccia",es:"Roca",de:"Gestein",fr:"Roche"},Steel:{en:"Steel",it:"Acciaio",es:"Acero",de:"Stahl",fr:"Acier"},Water:{en:"Water",it:"Acqua",es:"Agua",de:"Wasser",fr:"Eau"}},oA={Starter:{en:"Starter",it:"Base",es:"Inicial",de:"Starter",fr:"Dpart"},Beginner:{en:"Beginner",it:"Principiante",es:"Principiante",de:"Anfnger",fr:"Dbutant"},Amateur:{en:"Amateur",it:"Dilettante",es:"Aficionado",de:"Amateur",fr:"Amateur"},Ace:{en:"Ace",it:"Asso",es:"As",de:"Ass",fr:"As"},Pro:{en:"Pro",it:"Pro",es:"Pro",de:"Profi",fr:"Pro"},Master:{en:"Master",it:"Maestro",es:"Maestro",de:"Meister",fr:"Matre"},Champion:{en:"Champion",it:"Campione",es:"Campen",de:"Champ",fr:"Champion"}},aA={Overgrow:{en:"Overgrow",it:"Erbaiuto",es:"Espesura",de:"Notdnger",fr:"Engrais"},Blaze:{en:"Blaze",it:"Aiutofuoco",es:"Mar Llamas",de:"Grobrand",fr:"Brasier"},Torrent:{en:"Torrent",it:"Acquaiuto",es:"Torrente",de:"Sturzbach",fr:"Torrent"},"Shield Dust":{en:"Shield Dust",it:"Polvoscudo",es:"Polvo Escudo",de:"Puderabwehr",fr:"cran Poudre"},"Shed Skin":{en:"Shed Skin",it:"Muta",es:"Mudar",de:"Hutung",fr:"Mue"},"Compound Eyes":{en:"Compound Eyes",it:"Insettocchi",es:"Ojo Compuesto",de:"Facettenauge",fr:"Oeil Compos"},Swarm:{en:"Swarm",it:"Aiutinsetto",es:"Enjambre",de:"Hexaplaga",fr:"Essaim"},"Keen Eye":{en:"Keen Eye",it:"Sguardofermo",es:"Vista Lince",de:"Adlerauge",fr:"Regard Vif"},"Run Away":{en:"Run Away",it:"Fugafacile",es:"Fuga",de:"Angsthase",fr:"Fuite"},Intimidate:{en:"Intimidate",it:"Prepotenza",es:"Intimidacin",de:"Bedroher",fr:"Intimidation"},Static:{en:"Static",it:"Statico",es:"Elec. Esttica",de:"Statik",fr:"Statik"},"Sand Veil":{en:"Sand Veil",it:"Sabbiavelo",es:"Velo Arena",de:"Sandschleier",fr:"Voile Sable"},"Poison Point":{en:"Poison Point",it:"Velenopunto",es:"Punto Txico",de:"Giftdorn",fr:"Point Poison"},"Cute Charm":{en:"Cute Charm",it:"Incantevole",es:"Gran Encanto",de:"Charmebolzen",fr:"Joli Sourire"},"Flash Fire":{en:"Flash Fire",it:"Fuocardore",es:"Absorbe Fuego",de:"Feuerfnger",fr:"Torche"},Pressure:{en:"Pressure",it:"Pressione",es:"Presin",de:"Erzwinger",fr:"Pression"},Levitate:{en:"Levitate",it:"Levitazione",es:"Levitacin",de:"Schwebe",fr:"Lvitation"},Synchronize:{en:"Synchronize",it:"Sincronismo",es:"Sincrona",de:"Synchro",fr:"Synchro"},Guts:{en:"Guts",it:"Dentistretti",es:"Agallas",de:"Adrenalin",fr:"Cran"},"Huge Power":{en:"Huge Power",it:"Macroforza",es:"Potencia",de:"Kraftkoloss",fr:"Coloforce"},Chlorophyll:{en:"Chlorophyll",it:"Clorofilla",es:"Clorofila",de:"Chlorophyll",fr:"Chlorophylle"},"Swift Swim":{en:"Swift Swim",it:"Nuotovelox",es:"Nado Rpido",de:"Wassertempo",fr:"Glissade"},"Solar Power":{en:"Solar Power",it:"Solarpotere",es:"Poder Solar",de:"Solarkraft",fr:"Force Soleil"},"Inner Focus":{en:"Inner Focus",it:"Fuocodentro",es:"Foco Interno",de:"Konzentrator",fr:"Attention"},Stench:{en:"Stench",it:"Tanfo",es:"Hedor",de:"Duftnote",fr:"Puanteur"},"Effect Spore":{en:"Effect Spore",it:"Spargispora",es:"Efec. Espora",de:"Sporenwirt",fr:"Pose Spore"},Damp:{en:"Damp",it:"Umidit",es:"Humedad",de:"Feuchtigkeit",fr:"Moiteur"},Limber:{en:"Limber",it:"Scioltezza",es:"Flexibilidad",de:"Flexibilitt",fr:"chauffement"},"Rock Head":{en:"Rock Head",it:"Testadura",es:"Cabeza Roca",de:"Steinhaupt",fr:"Tte de Roc"},Insomnia:{en:"Insomnia",it:"Insonnia",es:"Insomnio",de:"Insomnia",fr:"Insomnia"},Oblivious:{en:"Oblivious",it:"Indifferenza",es:"Despiste",de:"Dsigkeit",fr:"Bent"},"Magnet Pull":{en:"Magnet Pull",it:"Magnetismo",es:"Imn",de:"Magnetfalle",fr:"Magnpige"},"Early Bird":{en:"Early Bird",it:"Sveglialampo",es:"Madrugar",de:"Frhwecker",fr:"Matinal"},Hydration:{en:"Hydration",it:"Idratazione",es:"Hidratacin",de:"Hydration",fr:"Hydratation"},Gluttony:{en:"Gluttony",it:"Voracit",es:"Gula",de:"Vllerei",fr:"Gloutonnerie"},"Ice Body":{en:"Ice Body",it:"Corpogelo",es:"Glido",de:"Eishaut",fr:"Corps Gel"}},lA={Tackle:{en:"Tackle",it:"Azione",es:"Placaje",de:"Tackle",fr:"Charge"},Scratch:{en:"Scratch",it:"Graffio",es:"Araazo",de:"Kratzer",fr:"Griffe"},Growl:{en:"Growl",it:"Ruggito",es:"Gruido",de:"Heuler",fr:"Rugissement"},"Tail Whip":{en:"Tail Whip",it:"Colpocoda",es:"Ltigo",de:"Rutenschlag",fr:"Mimi-Queue"},Ember:{en:"Ember",it:"Braciere",es:"Ascuas",de:"Glut",fr:"Flammche"},"Water Gun":{en:"Water Gun",it:"Pistolacqua",es:"Pistola Agua",de:"Aquaknarre",fr:"Pistolet  O"},"Vine Whip":{en:"Vine Whip",it:"Frustata",es:"Ltigo Cepa",de:"Rankenhieb",fr:"Fouet Lianes"},"Leech Seed":{en:"Leech Seed",it:"Parassiseme",es:"Drenadoras",de:"Egelsamen",fr:"Vampigraine"},"Thunder Shock":{en:"Thunder Shock",it:"Tuonoshock",es:"Impactrueno",de:"Donnerschock",fr:"clair"},"Quick Attack":{en:"Quick Attack",it:"Attacco Rapido",es:"Ataque Rpido",de:"Ruckzuckhieb",fr:"Vive-Attaque"},Bite:{en:"Bite",it:"Morso",es:"Mordisco",de:"Biss",fr:"Morsure"},"Wing Attack":{en:"Wing Attack",it:"Attacco d'Ala",es:"Ataque Ala",de:"Flgelschlag",fr:"Cru-Ailes"},Gust:{en:"Gust",it:"Raffica",es:"Tornado",de:"Windsto",fr:"Tornade"},Peck:{en:"Peck",it:"Beccata",es:"Picotazo",de:"Schnabel",fr:"Picpic"},"Sand Attack":{en:"Sand Attack",it:"Turbosabbia",es:"Ataque Arena",de:"Sandwirbel",fr:"Jet de Sable"},"Double Kick":{en:"Double Kick",it:"Doppiocalcio",es:"Doble Patada",de:"Doppelkick",fr:"Double Pied"},"Razor Leaf":{en:"Razor Leaf",it:"Foglielama",es:"Hoja Afilada",de:"Rasierblatt",fr:"Tranch'Herbe"},Flamethrower:{en:"Flamethrower",it:"Lanciafiamme",es:"Lanzallamas",de:"Flammenwurf",fr:"Lance-Flammes"},"Hydro Pump":{en:"Hydro Pump",it:"Idropompa",es:"Hidrobomba",de:"Hydropumpe",fr:"Hydrocanon"},"Solar Beam":{en:"Solar Beam",it:"Solarraggio",es:"Rayo Solar",de:"Solarstrahl",fr:"Lance-Soleil"},Psychic:{en:"Psychic",it:"Psichico",es:"Psquico",de:"Psychokinese",fr:"Psyko"},Earthquake:{en:"Earthquake",it:"Terremoto",es:"Terremoto",de:"Erdbeben",fr:"Sisme"},Thunderbolt:{en:"Thunderbolt",it:"Fulmine",es:"Rayo",de:"Donnerblitz",fr:"Tonnerre"},"Ice Beam":{en:"Ice Beam",it:"Geloraggio",es:"Rayo Hielo",de:"Eisstrahl",fr:"Laser Glace"},"Hyper Beam":{en:"Hyper Beam",it:"Iperraggio",es:"Hiperrayo",de:"Hyperstrahl",fr:"Ultralaser"},Leer:{en:"Leer",it:"Fulmisguardo",es:"Malicioso",de:"Silberblick",fr:"Gros Yeux"},Pound:{en:"Pound",it:"Botta",es:"Destructor",de:"Pfund",fr:"cras'Face"},Supersonic:{en:"Supersonic",it:"Supersuono",es:"Supersnico",de:"Superschall",fr:"Ultrason"},Disable:{en:"Disable",it:"Inibitore",es:"Anulacin",de:"Aussetzer",fr:"Entrave"},Confusion:{en:"Confusion",it:"Confusione",es:"Confusin",de:"Konfusion",fr:"Choc Mental"},Hypnosis:{en:"Hypnosis",it:"Ipnosi",es:"Hipnosis",de:"Hypnose",fr:"Hypnose"},"String Shot":{en:"String Shot",it:"Millebave",es:"Disparo Demora",de:"Fadenschuss",fr:"Scrtion"},"Poison Sting":{en:"Poison Sting",it:"Velenospina",es:"Picotazo Ven",de:"Giftstachel",fr:"Dard-Venin"},Harden:{en:"Harden",it:"Rafforzatore",es:"Fortaleza",de:"Hrtner",fr:"Armure"},"Focus Energy":{en:"Focus Energy",it:"Focalenergia",es:"Foco Energa",de:"Energiefokus",fr:"Puissance"},Spark:{en:"Spark",it:"Scintilla",es:"Chispa",de:"Funkenflug",fr:"tincelle"},Crunch:{en:"Crunch",it:"Sgranocchio",es:"Triturar",de:"Knirscher",fr:"Mchouille"},Bubble:{en:"Bubble",it:"Bolla",es:"Burbuja",de:"Blubber",fr:"cume"},Withdraw:{en:"Withdraw",it:"Ritirata",es:"Refugio",de:"Panzerschutz",fr:"Repli"},"Sleep Powder":{en:"Sleep Powder",it:"Sonnifero",es:"Somnfero",de:"Schlafpuder",fr:"Poudre Dodo"},"Stun Spore":{en:"Stun Spore",it:"Paralizzante",es:"Paralizador",de:"Stachelspore",fr:"Para-Spore"},"Poison Powder":{en:"Poison Powder",it:"Velenpolvere",es:"Polvo Veneno",de:"Giftpuder",fr:"Poudre Toxik"},"Will-O-Wisp":{en:"Will-O-Wisp",it:"Fuocofatuo",es:"Fuego Fatuo",de:"Irrlicht",fr:"Feu Follet"},Protect:{en:"Protect",it:"Protezione",es:"Proteccin",de:"Schutzschild",fr:"Abri"},Surf:{en:"Surf",it:"Surf",es:"Surf",de:"Surfer",fr:"Surf"},Fly:{en:"Fly",it:"Volo",es:"Vuelo",de:"Fliegen",fr:"Vol"},Cut:{en:"Cut",it:"Taglio",es:"Corte",de:"Zerschneider",fr:"Coupe"}},Mf=(t,e)=>{var r;if(!t)return"";const n=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();return((r=iA[n])==null?void 0:r[e])||t},j_=(t,e)=>{var n;return t?((n=oA[t])==null?void 0:n[e])||t:"Standard"},ss=(t,e)=>{var n;return t?((n=aA[t])==null?void 0:n[e])||t:""},Bo=(t,e)=>{var n;return t?((n=lA[t])==null?void 0:n[e])||t:""},Mr=t=>{if(!t)return"bg-slate-500";switch(t.toLowerCase()){case"bug":return"bg-lime-600";case"dark":return"bg-slate-800";case"dragon":return"bg-violet-600";case"electric":return"bg-yellow-500";case"fairy":return"bg-pink-400";case"fighting":return"bg-orange-700";case"fire":return"bg-red-500";case"flying":return"bg-sky-400";case"ghost":return"bg-purple-700";case"grass":return"bg-green-500";case"ground":return"bg-amber-600";case"ice":return"bg-cyan-400";case"normal":return"bg-slate-400";case"poison":return"bg-fuchsia-600";case"psychic":return"bg-pink-600";case"rock":return"bg-stone-500";case"steel":return"bg-slate-500";case"water":return"bg-blue-500";default:return"bg-slate-500"}},jn={en:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Select a region to view the database.",appSubtitle:"Choose a tool to begin your adventure.",searchPlaceholder:"Search...",filters:"Filters",close:"Close",clear:"Clear",cancel:"Cancel",apply:"Apply",nameSearch:"Name Search",type:"Type",allTypes:"All Types",minStats:"Min Stats",noResults:"No results found.",entriesFound:"Entries found",about:"About",height:"Height",weight:"Weight",rank:"Rank",role:"Role",baseStats:"Base Stats",hp:"Base HP",abilities:"Abilities",primary:"Primary",secondary:"Secondary",hidden:"Hidden",moveset:"Moveset",consulting:"Consulting Archives...",power:"Power",target:"Target",dicePools:"Dice Pools",accuracy:"Accuracy",damage:"Damage",effect:"Effect",starter:"Starter",wild:"Wild",strength:"Strength",dexterity:"Dexterity",vitality:"Vitality",special:"Special",insight:"Insight",rankFilter:"Rank",onlyStarter:"Only Starter",home:"Home",characterSheet:"Character Sheet",pokemonSheet:"Pokmon Sheet",pokedex:"Pokdex",comingSoon:"Coming Soon",comingSoonDesc:"This feature is currently under development. Please check back later!",backToHome:"Back to Home",party:"Belt",pc:"Bill's PC",box:"Box",emptySlot:"Empty",addToParty:"Add to Belt",removeFromParty:"Remove",selectPokemon:"Select Pokmon",nickname:"Nickname",money:"Money",caught:"Caught",seen:"Seen",trainerSheet:"Trainer Sheet",playerName:"Player Name",sheet:{nature:"Nature",age:"Age",confidence:"Confidence",happiness:"Happiness",loyalty:"Loyalty",battles:"No of Battles",victories:"Victories",item:"Item",status:"Status",accessory:"Accessory",weakness:"Weakness",hp:"HP",will:"Will",fight:"Fight",survival:"Survival",social:"Social",brawl:"Brawl",channel:"Channel",clash:"Clash",evasion:"Evasion",alert:"Alert",athletic:"Athletic",stealth:"Stealth",allure:"Allure",etiquette:"Etiquette",intimidate:"Intimidate",perform:"Perform",tough:"Tough",cool:"Cool",beauty:"Beauty",cute:"Cute",clever:"Clever",quickRefs:"Quick References",initiative:"Initiative",def:"Def/S.Def",damageReception:"Damage Reception",damageInflicted:"Damage Inflicted",physical:"Physical",special:"Special",damageTaken:"Damage Taken",newHp:"New HP",statuses:{Neutral:"Neutral",Burn:"Burn",Freeze:"Freeze",Paralysis:"Paralysis",Poison:"Poison","Bad Poison":"Bad Poison",Sleep:"Sleep",Confused:"Confused",Infatuated:"Infatuated",Fainted:"Fainted"}},regions:{National:"All Data",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},it:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Seleziona una regione per vedere il database.",appSubtitle:"Scegli uno strumento per iniziare l'avventura.",searchPlaceholder:"Cerca...",filters:"Filtri",close:"Chiudi",clear:"Pulisci",cancel:"Annulla",apply:"Applica",nameSearch:"Cerca Nome",type:"Tipo",allTypes:"Tutti i Tipi",minStats:"Stat. Minime",noResults:"Nessun risultato trovato.",entriesFound:"Voci trovate",about:"Info",height:"Altezza",weight:"Peso",rank:"Rango",role:"Ruolo",baseStats:"Statistiche Base",hp:"PV Base",abilities:"Abilit",primary:"Primaria",secondary:"Secondaria",hidden:"Nascosta",moveset:"Mosse",consulting:"Consultando gli Archivi...",power:"Potenza",target:"Bersaglio",dicePools:"Dadi",accuracy:"Precisione",damage:"Danno",effect:"Effetto",starter:"Starter",wild:"Selvatico",strength:"Forza",dexterity:"Destrezza",vitality:"Vitalit",special:"Speciale",insight:"Intuito",rankFilter:"Rango",onlyStarter:"Solo Starter",home:"Home",characterSheet:"Scheda Personaggio",pokemonSheet:"Scheda Pokmon",pokedex:"Pokdex",comingSoon:"Prossimamente",comingSoonDesc:"Questa funzionalit  in fase di sviluppo. Torna pi tardi!",backToHome:"Torna alla Home",party:"Cintura",pc:"PC di Bill",box:"Box",emptySlot:"Vuoto",addToParty:"Aggiungi",removeFromParty:"Rimuovi",selectPokemon:"Seleziona Pokmon",nickname:"Soprannome",money:"Soldi",caught:"Catturati",seen:"Visti",trainerSheet:"Scheda Allenatore",playerName:"Nome Giocatore",sheet:{nature:"Natura",age:"Et",confidence:"Sicurezza",happiness:"Felicit",loyalty:"Lealt",battles:"N Battaglie",victories:"Vittorie",item:"Oggetto",status:"Stato",accessory:"Accessorio",weakness:"Debolezza",hp:"PV",will:"Volont",fight:"Lotta",survival:"Sopravvivenza",social:"Sociale",brawl:"Rissa",channel:"Incanalare",clash:"Scontro",evasion:"Evasione",alert:"Allerta",athletic:"Atletica",stealth:"Furtivit",allure:"Fascino",etiquette:"Etichetta",intimidate:"Intimidire",perform:"Esibirsi",tough:"Grinta",cool:"Classe",beauty:"Bellezza",cute:"Grazia",clever:"Acume",quickRefs:"Riferimenti Rapidi",initiative:"Iniziativa",def:"Dif/Dif.Sp",damageReception:"Ricezione Danni",damageInflicted:"Danni Inflitti",physical:"Fisico",special:"Speciale",damageTaken:"Danni Subiti",newHp:"Nuovi PV",statuses:{Neutral:"Neutro",Burn:"Scottatura",Freeze:"Congelamento",Paralysis:"Paralisi",Poison:"Veleno","Bad Poison":"Iperveleno",Sleep:"Sonno",Confused:"Confusione",Infatuated:"Infatuazione",Fainted:"Esausto"}},regions:{National:"Tutti i Dati",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},es:{title:"Pokrole Dex",appTitle:"Herramientas Pokrole",subtitle:"Selecciona una regin para ver la base de datos.",appSubtitle:"Elige una herramienta para comenzar tu aventura.",searchPlaceholder:"Buscar...",filters:"Filtros",close:"Cerrar",clear:"Limpiar",cancel:"Cancelar",apply:"Aplicar",nameSearch:"Buscar Nombre",type:"Tipo",allTypes:"Todos los Tipos",minStats:"Estad. Mnimas",noResults:"No se encontraron resultados.",entriesFound:"Entradas encontradas",about:"Info",height:"Altura",weight:"Peso",rank:"Rango",role:"Rol",baseStats:"Estadsticas Base",hp:"PS Base",abilities:"Habilidades",primary:"Primaria",secondary:"Secundaria",hidden:"Oculta",moveset:"Movimientos",consulting:"Consultando Archivos...",power:"Potencia",target:"Objetivo",dicePools:"Dados",accuracy:"Precisin",damage:"Dao",effect:"Efecto",starter:"Inicial",wild:"Salvaje",strength:"Fuerza",dexterity:"Destreza",vitality:"Vitalidad",special:"Especial",insight:"Intuicin",rankFilter:"Rango",onlyStarter:"Solo Inicial",home:"Inicio",characterSheet:"Hoja de Personaje",pokemonSheet:"Hoja de Pokmon",pokedex:"Pokdex",comingSoon:"Prximamente",comingSoonDesc:"Esta funcin est en desarrollo. Vuelve ms tarde!",backToHome:"Volver al Inicio",party:"Cinturn",pc:"PC de Bill",box:"Caja",emptySlot:"Vaco",addToParty:"Aadir",removeFromParty:"Quitar",selectPokemon:"Seleccionar Pokmon",nickname:"Apodo",money:"Dinero",caught:"Capturados",seen:"Vistos",trainerSheet:"Ficha de Entrenador",playerName:"Nombre Jugador",sheet:{nature:"Naturaleza",age:"Edad",confidence:"Confianza",happiness:"Felicidad",loyalty:"Lealtad",battles:"N Batallas",victories:"Victorias",item:"Objeto",status:"Estado",accessory:"Accesorio",weakness:"Debilidad",hp:"PS",will:"Voluntad",fight:"Pelea",survival:"Supervivencia",social:"Social",brawl:"Reyerta",channel:"Canalizar",clash:"Choque",evasion:"Evasin",alert:"Alerta",athletic:"Atletismo",stealth:"Sigilo",allure:"Seduccin",etiquette:"Etiqueta",intimidate:"Intimidar",perform:"Actuar",tough:"Dureza",cool:"Carisma",beauty:"Belleza",cute:"Dulzura",clever:"Ingenio",quickRefs:"Referencias Rpidas",initiative:"Iniciativa",def:"Def/Def.Esp",damageReception:"Recepcin de Dao",damageInflicted:"Dao Infligido",physical:"Fsico",special:"Especial",damageTaken:"Dao Recibido",newHp:"Nuevos PS",statuses:{Neutral:"Neutral",Burn:"Quemado",Freeze:"Congelado",Paralysis:"Parlisis",Poison:"Veneno","Bad Poison":"Gravemente Env.",Sleep:"Dormido",Confused:"Confuso",Infatuated:"Enamoramiento",Fainted:"Debilitado"}},regions:{National:"Todos los Datos",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},de:{title:"Pokrole Dex",appTitle:"Pokrole Tools",subtitle:"Whle eine Region, um die Datenbank anzuzeigen.",appSubtitle:"Whle ein Werkzeug, um dein Abenteuer zu beginnen.",searchPlaceholder:"Suchen...",filters:"Filter",close:"Schlieen",clear:"Leeren",cancel:"Abbrechen",apply:"Anwenden",nameSearch:"Namenssuche",type:"Typ",allTypes:"Alle Typen",minStats:"Min. Werte",noResults:"Keine Ergebnisse gefunden.",entriesFound:"Eintrge gefunden",about:"ber",height:"Gre",weight:"Gewicht",rank:"Rang",role:"Rolle",baseStats:"Basiswerte",hp:"Basis KP",abilities:"Fhigkeiten",primary:"Primr",secondary:"Sekundr",hidden:"Versteckt",moveset:"Attacken",consulting:"Archive werden durchsucht...",power:"Strke",target:"Ziel",dicePools:"Wrfelpools",accuracy:"Genauigkeit",damage:"Schaden",effect:"Effekt",starter:"Starter",wild:"Wild",strength:"Strke",dexterity:"Geschick",vitality:"Vitalitt",special:"Spezial",insight:"Einsicht",rankFilter:"Rang",onlyStarter:"Nur Starter",home:"Startseite",characterSheet:"Charakterbogen",pokemonSheet:"Pokmon-Bogen",pokedex:"Pokdex",comingSoon:"Demnchst",comingSoonDesc:"Diese Funktion wird derzeit entwickelt. Schau spter wieder vorbei!",backToHome:"Zurck zur Startseite",party:"Grtel",pc:"Bills PC",box:"Box",emptySlot:"Leer",addToParty:"Hinzufgen",removeFromParty:"Entfernen",selectPokemon:"Pokmon auswhlen",nickname:"Spitzname",money:"Geld",caught:"Gefangen",seen:"Gesehen",trainerSheet:"Trainerblatt",playerName:"Spielername",sheet:{nature:"Wesen",age:"Alter",confidence:"Selbstvertr.",happiness:"Freundschaft",loyalty:"Loyalitt",battles:"Kmpfe",victories:"Siege",item:"Item",status:"Status",accessory:"Accessoire",weakness:"Schwche",hp:"KP",will:"Wille",fight:"Kampf",survival:"berleben",social:"Sozial",brawl:"Handgemenge",channel:"Kanalisieren",clash:"Zusammensto",evasion:"Ausweichen",alert:"Wachsamkeit",athletic:"Athletik",stealth:"Heimlichkeit",allure:"Anziehung",etiquette:"Etikette",intimidate:"Einschchtern",perform:"Auftritt",tough:"Strke",cool:"Coolness",beauty:"Schnheit",cute:"Anmut",clever:"Klugheit",quickRefs:"Schnellreferenz",initiative:"Initiative",def:"Vert/Sp.Vert",damageReception:"Schadensempfang",damageInflicted:"Zugefgter Schaden",physical:"Physisch",special:"Spezial",damageTaken:"Erlittener Schaden",newHp:"Neue KP",statuses:{Neutral:"Neutral",Burn:"Verbrennung",Freeze:"Frost",Paralysis:"Paralyse",Poison:"Vergiftung","Bad Poison":"Schwer vergiftet",Sleep:"Schlaf",Confused:"Verwirrt",Infatuated:"Anziehung",Fainted:"Besiegt"}},regions:{National:"Alle Daten",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}},fr:{title:"Pokrole Dex",appTitle:"Outils Pokrole",subtitle:"Slectionnez une rgion pour voir la base de donnes.",appSubtitle:"Choisissez un outil pour commencer votre aventure.",searchPlaceholder:"Rechercher...",filters:"Filtres",close:"Fermer",clear:"Effacer",cancel:"Annuler",apply:"Appliquer",nameSearch:"Recherche par nom",type:"Type",allTypes:"Tous les Types",minStats:"Stats Min.",noResults:"Aucun rsultat trouv.",entriesFound:"Entres trouves",about:" propos",height:"Taille",weight:"Poids",rank:"Rang",role:"Rle",baseStats:"Stats de Base",hp:"PV de Base",abilities:"Talents",primary:"Primaire",secondary:"Secondaire",hidden:"Cach",moveset:"Capacits",consulting:"Consultation des archives...",power:"Puissance",target:"Cible",dicePools:"Ds",accuracy:"Prcision",damage:"Dgts",effect:"Effet",starter:"Starter",wild:"Sauvage",strength:"Force",dexterity:"Dextrit",vitality:"Vitalit",special:"Spcial",insight:"Intuition",rankFilter:"Rang",onlyStarter:"Seulement Starter",home:"Accueil",characterSheet:"Fiche Personnage",pokemonSheet:"Fiche Pokmon",pokedex:"Pokdex",comingSoon:"Bientt",comingSoonDesc:"Cette fonctionnalit est en cours de dveloppement. Revenez plus tard !",backToHome:"Retour  l'accueil",party:"Ceinture",pc:"PC de Lo",box:"Bote",emptySlot:"Vide",addToParty:"Ajouter",removeFromParty:"Retirer",selectPokemon:"Slectionner Pokmon",nickname:"Surnom",money:"Argent",caught:"Attraps",seen:"Vus",trainerSheet:"Fiche Dresseur",playerName:"Nom Joueur",sheet:{nature:"Nature",age:"ge",confidence:"Confiance",happiness:"Bonheur",loyalty:"Loyaut",battles:"Nb Combats",victories:"Victoires",item:"Objet",status:"Statut",accessory:"Accessoire",weakness:"Faiblesse",hp:"PV",will:"Volont",fight:"Combat",survival:"Survie",social:"Social",brawl:"Bagarre",channel:"Canaliser",clash:"Affrontement",evasion:"vasion",alert:"Vigilance",athletic:"Athltisme",stealth:"Discrtion",allure:"Charme",etiquette:"tiquette",intimidate:"Intimidation",perform:"Performance",tough:"Robuste",cool:"Sang-froid",beauty:"Beaut",cute:"Mignon",clever:"Intelligence",quickRefs:"Rf. Rapides",initiative:"Initiative",def:"Df/Df.Sp",damageReception:"Rception de Dgts",damageInflicted:"Dgts Infligs",physical:"Physique",special:"Spcial",damageTaken:"Dgts Subis",newHp:"Nouveaux PV",statuses:{Neutral:"Neutre",Burn:"Brlure",Freeze:"Gel",Paralysis:"Paralysie",Poison:"Poison","Bad Poison":"Gravement Empois.",Sleep:"Sommeil",Confused:"Confusion",Infatuated:"Attraction",Fainted:"K.O."}},regions:{National:"Toutes les donnes",Kanto:"Gen 1",Johto:"Gen 2",Hoenn:"Gen 3",Sinnoh:"Gen 4",Unova:"Gen 5",Kalos:"Gen 6",Alola:"Gen 7",Galar:"Gen 8",Paldea:"Gen 9"}}},uA="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ShuffleTokens",cA="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/BookSprites",dA="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/images/ItemSprites",Lf=t=>{const e=t.Image||`${t.Name}.png`;return`${uA}/${e}`},D_=t=>{const e=t.Image||`${t.Name}.png`;return`${cA}/${e}`},hA=t=>`${dA}/${t._id}.png`,fA=(t,e)=>{const n=[];for(let r=0;r<e;r++)n.push(l.jsx("div",{className:`w-3 h-3 rounded-full mr-1 ${r<t?"bg-slate-800 dark:bg-slate-200":"bg-slate-300 dark:bg-slate-700"}`},r));return l.jsx("div",{className:"flex items-center",children:n})},Ji=()=>({name:"New Trainer",age:10,image:null,money:1500,pokedex:{seen:0,caught:0},nature:"Hardy",confidence:2,attributes:{strength:{current:2,max:5},dexterity:{current:2,max:5},vitality:{current:2,max:5},special:{current:2,max:5},insight:{current:2,max:5}},skills:{fight:{brawl:0,channel:0,clash:0,evasion:0},survival:{alert:0,athletic:0,nature:0,stealth:0},social:{allure:0,etiquette:0,intimidate:0,perform:0}},hp:{current:4,max:4},will:{current:4,max:4}}),pA=async(t,e)=>{if(t)try{const n=JSON.parse(JSON.stringify(e)),r=n.pcBoxes.reduce((i,o,u)=>(i[u.toString()]=o,i),{}),s={party:n.party,pcBoxes:r,trainer:n.trainer};console.log("Dati inviati a Firebase:",s),await XN(v_(P_,"users",t),s,{merge:!0}),console.log("Dati salvati con successo!")}catch(n){throw console.error("Errore durante il salvataggio:",n),n}},Yg=async t=>{if(!t)return null;try{const e=v_(P_,"users",t),n=await QN(e);if(n.exists()){const r=n.data();let s;return r.pcBoxes&&!Array.isArray(r.pcBoxes)?s=Array.from({length:20},(i,o)=>r.pcBoxes[o.toString()]||Array(30).fill(null)):s=Array(20).fill(null).map(()=>Array(30).fill(null)),{party:r.party||Array(6).fill(null),pcBoxes:s,trainer:r.trainer||Ji()}}else return console.log("Nessun dato trovato per questo utente (nuovo utente?)."),null}catch(e){return console.error("Errore durante il caricamento:",e),null}},mA=({region:t})=>{const e={width:120,height:120,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};switch(t){case"National":return l.jsx(Wk,{...e});case"Kanto":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M2 17h20L19 9H5L2 17Z"}),l.jsx("path",{d:"M6 9V5h3v4"}),l.jsx("path",{d:"M15 9V4h3v5"}),l.jsx("path",{d:"M4 17v4"}),l.jsx("path",{d:"M20 17v4"}),l.jsx("path",{d:"M2 21h20"}),l.jsx("path",{d:"M9 13h6"})]});case"Johto":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2l-8 4h16l-8-4z"}),l.jsx("path",{d:"M4 6v4h16V6"}),l.jsx("path",{d:"M2 14l2-4h16l2 4H2z"}),l.jsx("path",{d:"M6 14v6h12v-6"}),l.jsx("path",{d:"M12 14v6"})]});case"Hoenn":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2c0 0-3 3-3 8v6c0 1.5 1 3 3 3s3-1.5 3-3v-6c0-5-3-8-3-8z"}),l.jsx("path",{d:"M9 16c-3 0-5 3-5 5h16c0-2-2-5-5-5"}),l.jsx("path",{d:"M12 6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})]});case"Sinnoh":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2L2 22h20L12 2z"}),l.jsx("path",{d:"M12 2l4 10-4 4-4-4 4-10z"}),l.jsx("path",{d:"M8 22l4-8 4 8"})]});case"Unova":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M4 21V9"}),l.jsx("path",{d:"M20 21V9"}),l.jsx("path",{d:"M4 9c8 6 8 6 16 0"}),l.jsx("path",{d:"M2 21h20"}),l.jsx("path",{d:"M7 12l2 2"}),l.jsx("path",{d:"M17 12l-2 2"})]});case"Kalos":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 2L4 22h16L12 2z"}),l.jsx("path",{d:"M12 2v20"}),l.jsx("path",{d:"M8 12h8"}),l.jsx("path",{d:"M6 17h12"}),l.jsx("path",{d:"M10 7h4"})]});case"Alola":return l.jsxs("svg",{...e,children:[l.jsx("circle",{cx:"18",cy:"6",r:"4"}),l.jsx("path",{d:"M12 22s-6-8-6-14c0-2 2-3 4-3"}),l.jsx("path",{d:"M12 22s6-8 6-14c0-2-2-3-4-3"}),l.jsx("path",{d:"M12 22v-8"})]});case"Galar":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M4 22V8l4-4 4 4 4-4 4 4v14H4z"}),l.jsx("path",{d:"M12 8v14"}),l.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),l.jsx("path",{d:"M12 4v4"})]});case"Paldea":return l.jsxs("svg",{...e,children:[l.jsx("path",{d:"M12 4l-8 6v12h16v-12z"}),l.jsx("circle",{cx:"12",cy:"13",r:"4"}),l.jsx("path",{d:"M12 9v4"}),l.jsx("path",{d:"M12 13l3 2"}),l.jsx("path",{d:"M2 22h20"})]});default:return l.jsx(Jk,{...e})}},qd=t=>l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[l.jsx("path",{d:"M5 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v18a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V3z"}),l.jsx("path",{d:"M5 9h14"}),l.jsx("circle",{cx:"9",cy:"5",r:"2",fill:"currentColor"}),l.jsx("path",{d:"M16 4h1"}),l.jsx("path",{d:"M16 6h1"}),l.jsx("rect",{x:"8",y:"12",width:"8",height:"6",rx:"1"}),l.jsx("path",{d:"M8 20h2"}),l.jsx("path",{d:"M14 20h2"})]}),Kd=()=>l.jsxs("svg",{viewBox:"0 0 24 24",className:"w-full h-full text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M2 12h7"}),l.jsx("path",{d:"M15 12h7"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"})]}),Ac={en:"",it:"",es:"",de:"",fr:""},gA={en:"English",it:"Italiano",es:"Espaol",de:"Deutsch",fr:"Franais"},V_=({currentLanguage:t,onChange:e})=>{const[n,r]=B.useState(!1),s=B.useRef(null);B.useEffect(()=>{const o=u=>{s.current&&!s.current.contains(u.target)&&r(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=o=>{e(o),r(!1)};return l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("button",{onClick:()=>r(!n),className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-2xl hover:scale-110 transition-transform shadow-md","aria-label":"Select Language",children:Ac[t]}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in",children:l.jsx("div",{className:"py-1",children:Object.keys(Ac).map(o=>l.jsxs("button",{onClick:()=>i(o),className:`w-full px-4 py-2 text-left flex items-center gap-3 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors ${t===o?"bg-slate-50 dark:bg-slate-700/50 font-bold":""}`,children:[l.jsx("span",{className:"text-xl",children:Ac[o]}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:gA[o]})]},o))})})]})},yA=({onNavigate:t,isDark:e,toggleTheme:n,language:r,setLanguage:s})=>{const i=jn[r],{user:o,signInWithGoogle:u,logout:c,error:d,clearError:p}=Nu();return l.jsxs("div",{className:"p-6 max-w-6xl mx-auto min-h-screen flex flex-col animate-fade-in",children:[d&&l.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] w-full max-w-lg px-4",children:l.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-xl shadow-2xl flex items-start gap-3 animate-bounce-in border-2 border-red-600",children:[l.jsx(Fk,{className:"shrink-0 mt-0.5",size:20}),l.jsx("div",{className:"flex-1 text-sm font-bold whitespace-pre-line leading-relaxed",children:d}),l.jsx("button",{onClick:p,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:l.jsx(ys,{size:20})})]})}),l.jsxs("header",{className:"mb-12 mt-4 flex flex-col md:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"text-center md:text-left",children:[l.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center justify-center md:justify-start gap-3",children:[l.jsx(qd,{className:"w-10 h-10 text-red-500"}),i.appTitle]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:i.appSubtitle})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[l.jsx(V_,{currentLanguage:r,onChange:s}),l.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:e?l.jsx(kv,{size:24}):l.jsx(yv,{size:24})}),o?l.jsxs("div",{className:"flex items-center gap-2 pl-2 bg-white dark:bg-slate-800 rounded-full pr-1 py-1 shadow-md border border-slate-200 dark:border-slate-700",children:[o.photoURL?l.jsx("img",{src:o.photoURL,alt:"User",className:"w-10 h-10 rounded-full border-2 border-green-500"}):l.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold text-lg",children:o.displayName?o.displayName[0].toUpperCase():"U"}),l.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 hidden sm:block px-2",children:o.displayName}),l.jsx("button",{onClick:()=>c(),className:"w-10 h-10 flex items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 hover:bg-red-500 hover:text-white transition-colors",title:"Logout",children:l.jsx(Xk,{size:18})})]}):l.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 px-5 py-3 rounded-full bg-slate-800 dark:bg-white text-white dark:text-slate-900 font-bold shadow-md hover:scale-105 transition-transform",children:[l.jsx(Yk,{size:20}),l.jsx("span",{children:"Login"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:[l.jsxs("button",{onClick:()=>t("character"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.characterSheet})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-blue-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(ab,{size:120,strokeWidth:1.5})})]}),l.jsxs("button",{onClick:()=>t("pokemon"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:i.pokemonSheet})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-amber-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(Gk,{size:120,strokeWidth:1.5})})]}),l.jsxs("button",{onClick:()=>t("items"),className:"group relative h-40 bg-white dark:bg-slate-800 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 border border-slate-100 dark:border-slate-700 hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:[i.sheet.item,"s"]})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-green-500 opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(hv,{size:120,strokeWidth:1.5})})]}),l.jsxs("button",{onClick:()=>t("pokedex"),className:"group relative h-40 bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden text-left p-6 text-white hover:scale-[1.02]",children:[l.jsx("div",{className:"relative z-10",children:l.jsx("h2",{className:"text-2xl font-bold mb-2",children:i.pokedex})}),l.jsx("div",{className:"absolute -right-6 -bottom-6 text-white opacity-20 group-hover:opacity-30 transition-opacity duration-300",children:l.jsx(qd,{className:"w-[120px] h-[120px]"})})]})]})]})},vA=({onSelect:t,onHome:e,isDark:n,toggleTheme:r,language:s,setLanguage:i})=>{const o=jn[s],u=[{id:"National",color:"bg-indigo-500 dark:bg-indigo-700",desc:o.regions.National,range:"All"},{id:"Kanto",color:"bg-green-600 dark:bg-green-800",desc:o.regions.Kanto,range:"001-151"},{id:"Johto",color:"bg-yellow-600 dark:bg-yellow-800",desc:o.regions.Johto,range:"152-251"},{id:"Hoenn",color:"bg-red-600 dark:bg-red-800",desc:o.regions.Hoenn,range:"252-386"},{id:"Sinnoh",color:"bg-cyan-600 dark:bg-cyan-800",desc:o.regions.Sinnoh,range:"387-493"},{id:"Unova",color:"bg-stone-600 dark:bg-stone-800",desc:o.regions.Unova,range:"494-649"},{id:"Kalos",color:"bg-blue-600 dark:bg-blue-800",desc:o.regions.Kalos,range:"650-721"},{id:"Alola",color:"bg-orange-500 dark:bg-orange-700",desc:o.regions.Alola,range:"722-809"},{id:"Galar",color:"bg-pink-600 dark:bg-pink-800",desc:o.regions.Galar,range:"810-905"},{id:"Paldea",color:"bg-purple-600 dark:bg-purple-800",desc:o.regions.Paldea,range:"906+"}];return l.jsxs("div",{className:"p-6 max-w-6xl mx-auto animate-fade-in",children:[l.jsxs("header",{className:"mb-10 mt-4 flex flex-col md:flex-row items-center md:items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white transition-colors mb-2 font-medium",children:[l.jsx(qk,{size:18})," ",o.backToHome]}),l.jsxs("h1",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight flex items-center gap-3",children:[l.jsx(qd,{className:"w-10 h-10 text-red-500"}),o.title]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 text-lg",children:o.subtitle})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(V_,{currentLanguage:s,onChange:i}),l.jsx("button",{onClick:r,className:"w-12 h-12 flex items-center justify-center rounded-full bg-slate-200 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:scale-110 transition-transform shadow-md","aria-label":"Toggle Dark Mode",children:n?l.jsx(kv,{size:24}):l.jsx(yv,{size:24})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(c=>l.jsxs("button",{onClick:()=>t(c.id),className:`${c.color} text-white p-6 rounded-3xl shadow-xl hover:scale-[1.02] hover:shadow-2xl transition-all duration-300 text-left relative overflow-hidden group h-40`,children:[l.jsx("div",{className:"absolute -right-6 -bottom-6 opacity-20 group-hover:opacity-30 transition-opacity",children:l.jsx(mA,{region:c.id})}),l.jsxs("h2",{className:"text-2xl font-bold relative z-10",children:[c.id," Dex"]}),l.jsxs("div",{className:"flex flex-col mt-1 relative z-10",children:[l.jsx("span",{className:"text-white/90 font-medium",children:c.desc}),l.jsx("span",{className:"text-white/60 text-sm",children:c.range})]})]},c.id))})]})},Lr=({type:t,language:e})=>t?l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold text-white bg-white/25 rounded-full backdrop-blur-sm mb-2 capitalize w-max shadow-sm",children:Mf(t,e)}):null,xA=({progress:t,total:e,status:n})=>{const r=e>0?Math.min(100,Math.round(t/e*100)):0;return l.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900/90 backdrop-blur-sm text-white p-8",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"flex justify-between mb-2 items-end",children:[l.jsx("span",{className:"font-bold text-lg",children:n}),l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:"block font-mono text-2xl font-bold text-red-400",children:[r,"%"]}),l.jsxs("span",{className:"block text-xs text-slate-400 font-mono mt-1",children:[t," / ",e," files"]})]})]}),l.jsx("div",{className:"h-4 w-full bg-slate-700 rounded-full overflow-hidden border border-slate-600",children:l.jsx("div",{className:"h-full bg-red-500 transition-all duration-200 ease-out shadow-[0_0_10px_rgba(239,68,68,0.5)]",style:{width:`${r}%`}})}),l.jsx("p",{className:"text-slate-400 mt-4 text-center text-sm animate-pulse",children:"Retrieving data from GitHub..."})]})})},_A=({region:t,onBack:e,onSelectPokemon:n,data:r,language:s})=>{const i=jn[s],[o,u]=B.useState(!1),[c,d]=B.useState({types:!0,ranks:!1,stats:!1}),[p,m]=B.useState(""),[x,I]=B.useState([]),[N,R]=B.useState([]),[D,S]=B.useState(!1),[k,T]=B.useState({strength:"",dexterity:"",vitality:"",special:"",insight:""}),[P,L]=B.useState({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}}),V=g=>{d(K=>({...K,[g]:!K[g]}))},w=()=>{m(""),I([]),R([]),S(!1),T({strength:"",dexterity:"",vitality:"",special:"",insight:""}),L({name:"",type:[],ranks:[],isStarter:!1,stats:{strength:"",dexterity:"",vitality:"",special:"",insight:""}})},v=()=>{L({name:p,type:x,ranks:N,isStarter:D,stats:{...k}})},b=(g,K)=>{T(ne=>({...ne,[g]:K}))},E=g=>{R(K=>K.includes(g)?K.filter(ne=>ne!==g):[...K,g])},_=g=>{I(K=>K.includes(g)?K.filter(ne=>ne!==g):[...K,g])},A=B.useMemo(()=>{let g=r;if(t!=="National"){const Ie={Kanto:[1,151],Johto:[152,251],Hoenn:[252,386],Sinnoh:[387,493],Unova:[494,649],Kalos:[650,721],Alola:[722,809],Galar:[810,905],Paldea:[906,2e3]}[t];Ie&&(g=g.filter(Ge=>{const W=Ge.Name.toLowerCase(),ee=W.includes("alolan"),oe=W.includes("galarian"),ve=W.includes("paldean"),me=W.includes("hisuian");return ee?t==="Alola":oe?t==="Galar":ve?t==="Paldea":me?t==="Sinnoh":Ge.Number>=Ie[0]&&Ge.Number<=Ie[1]}))}if(P.name.trim()){const ne=P.name.toLowerCase();g=g.filter(Ie=>Ie.Name.toLowerCase().includes(ne))}P.type.length>0&&(g=g.filter(ne=>P.type.includes(ne.Type1)||ne.Type2&&P.type.includes(ne.Type2))),P.ranks.length>0&&(g=g.filter(ne=>P.ranks.includes(ne.RecommendedRank))),P.isStarter&&(g=g.filter(ne=>ne.GoodStarter));const K=P.stats;return K.strength&&(g=g.filter(ne=>ne.Strength>=Number(K.strength))),K.dexterity&&(g=g.filter(ne=>ne.Dexterity>=Number(K.dexterity))),K.vitality&&(g=g.filter(ne=>ne.Vitality>=Number(K.vitality))),K.special&&(g=g.filter(ne=>ne.Special>=Number(K.special))),K.insight&&(g=g.filter(ne=>ne.Insight>=Number(K.insight))),g},[t,r,P]);return l.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen",children:[l.jsxs("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:l.jsx(yi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white",children:[t," Dex"]}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:[A.length," ",i.entriesFound]})]})]}),l.jsxs("button",{onClick:()=>u(!o),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${o?"bg-red-500 text-white":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"}`,children:[o?l.jsx(ys,{size:20}):l.jsx(bd,{size:20}),l.jsx("span",{className:"hidden md:inline",children:o?i.close:i.filters})]})]}),o&&l.jsxs("div",{className:"p-4 md:p-6 border-t border-slate-200 dark:border-slate-800 animate-fade-in bg-slate-50 dark:bg-slate-900/50 flex flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Rl,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:i.searchPlaceholder,value:p,onChange:g=>m(g.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),l.jsxs("button",{onClick:w,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg flex items-center justify-center gap-2 transition-colors font-medium whitespace-nowrap",children:[l.jsx(vv,{size:18})," ",i.clear]})]}),l.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[l.jsxs("button",{onClick:()=>V("types"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[l.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.type}),c.types?l.jsx(gc,{size:18,className:"text-slate-400"}):l.jsx(mc,{size:18,className:"text-slate-400"})]}),c.types&&l.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:l.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:nA.map(g=>{const K=x.includes(g);return l.jsx("button",{onClick:()=>_(g),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${K?`${Mr(g)} text-white font-semibold shadow-md border-transparent`:"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Mf(g,s)},g)})})})]}),l.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[l.jsxs("button",{onClick:()=>V("ranks"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[l.jsxs("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:[i.rank," & ",i.role]}),c.ranks?l.jsx(gc,{size:18,className:"text-slate-400"}):l.jsx(mc,{size:18,className:"text-slate-400"})]}),c.ranks&&l.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.rankFilter}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Kr.map(g=>{const K=N.includes(g);return l.jsx("button",{onClick:()=>E(g),className:`px-3 py-1.5 text-sm rounded-lg border transition-all ${K?"bg-red-500 border-red-500 text-white font-semibold shadow-md":"bg-slate-50 dark:bg-slate-900 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:j_(g,s)},g)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:i.role}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors w-max border border-transparent hover:border-slate-200 dark:hover:border-slate-700",children:[l.jsx("div",{className:`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-colors ${D?"bg-red-500 border-red-500":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 group-hover:border-red-400"}`,children:D&&l.jsx(Om,{size:16,className:"text-white"})}),l.jsx("input",{type:"checkbox",checked:D,onChange:()=>S(!D),className:"hidden"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium select-none",children:i.onlyStarter})]})]})]})})]}),l.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden bg-white dark:bg-slate-800/50",children:[l.jsxs("button",{onClick:()=>V("stats"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[l.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 uppercase text-xs",children:i.minStats}),c.stats?l.jsx(gc,{size:18,className:"text-slate-400"}):l.jsx(mc,{size:18,className:"text-slate-400"})]}),c.stats&&l.jsx("div",{className:"p-4 pt-0 border-t border-slate-100 dark:border-slate-700/50",children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mt-4",children:["strength","dexterity","vitality","special","insight"].map(g=>l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:i[g]}),l.jsx("input",{type:"number",min:"0",max:"10",placeholder:"0",value:k[g],onChange:K=>b(g,K.target.value),className:"w-full px-3 py-2 text-center rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]},g))})})]}),l.jsx("div",{className:"mt-2 flex justify-end",children:l.jsxs("button",{onClick:v,className:"w-full md:w-auto px-8 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg shadow-red-500/20 font-bold text-lg flex items-center justify-center gap-2 transition-all transform hover:scale-105",children:[l.jsx(Om,{size:24})," ",i.apply]})})]})]}),A.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[l.jsx(hu,{size:48,className:"mb-4"}),l.jsx("p",{className:"text-xl",children:i.noResults}),l.jsx("button",{onClick:w,className:"mt-4 text-red-500 hover:underline",children:i.clear})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20 mt-8",children:A.map(g=>l.jsxs("div",{onClick:()=>n(g),className:`relative h-40 rounded-3xl p-5 shadow-lg cursor-pointer transform hover:-translate-y-1 transition-all duration-300 overflow-hidden ${Mr(g.Type1)}`,children:[l.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:l.jsx(Kd,{})}),l.jsxs("div",{className:"flex justify-between h-full relative z-10",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:g.Name}),l.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[l.jsx(Lr,{type:g.Type1,language:s}),g.Type2&&l.jsx(Lr,{type:g.Type2,language:s})]})]}),l.jsxs("div",{className:"flex flex-col items-end justify-between",children:[l.jsxs("span",{className:"text-white/80 font-bold text-lg drop-shadow-sm",children:["#",g.Number.toString().padStart(3,"0")]}),l.jsx("img",{loading:"lazy",src:Lf(g),alt:g.Name,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg",onError:K=>{K.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})]})]})]},`${g.Number}-${g.Name}`))})]})},M_=({moveName:t,filePath:e,onClose:n,language:r,onRoll:s})=>{const i=jn[r],[o,u]=B.useState(null),[c,d]=B.useState(!0),[p,m]=B.useState(null);B.useEffect(()=>{e&&(async()=>{try{d(!0);const R=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(k=>encodeURIComponent(k)).join("/")}`,D=await fetch(R);if(!D.ok)throw new Error("Could not fetch move data");const S=await D.json();u(S)}catch{m("Failed to load move details.")}finally{d(!1)}})()},[e]),B.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const x=I=>{I.target===I.currentTarget&&n()};return e?l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:x,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up",children:[l.jsxs("div",{className:`p-6 ${o?Mr(o.Type):"bg-slate-500"} text-white relative transition-colors duration-300`,children:[l.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:l.jsx(ys,{size:20})}),o?l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-3xl font-extrabold tracking-tight pr-8",children:Bo(o.Name,r)}),"                 ",l.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold bg-white/25 rounded-full backdrop-blur-md uppercase tracking-wider",children:Mf(o.Type,r)}),o.Category&&l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold bg-white/25 rounded-full backdrop-blur-md uppercase tracking-wider",children:o.Category})]})]}):l.jsx("h2",{className:"text-2xl font-bold",children:Bo(t,r)})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:c?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[l.jsx($h,{className:"w-10 h-10 animate-spin mb-3 text-red-500"}),l.jsx("p",{children:i.consulting})]}):p||!o?l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[l.jsx(cv,{className:"w-12 h-12 mb-3 text-red-400"}),l.jsx("p",{children:p||"Move data not found."})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:l.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',o.Description,'"']})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 rounded-2xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 flex flex-col items-center justify-center text-center",children:[l.jsxs("span",{className:"text-xs font-bold text-red-400 uppercase mb-1 flex items-center gap-1",children:[l.jsx(rb,{size:14})," ",i.power]}),l.jsx("span",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:o.Power})]}),l.jsxs("div",{className:"p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 flex flex-col items-center justify-center text-center",children:[l.jsxs("span",{className:"text-xs font-bold text-blue-400 uppercase mb-1 flex items-center gap-1",children:[l.jsx(ib,{size:14})," ",i.target]}),l.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:o.Target})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[l.jsx(mn,{className:"w-4 h-4"})," ",i.dicePools,s&&l.jsx("span",{className:"text-[10px] bg-green-500 text-white px-2 py-0.5 rounded-full ml-auto",children:"Click to Roll"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("button",{disabled:!s||!o.Accuracy1,onClick:()=>{if(s&&o.Accuracy1){const I=o.Accuracy2?`${o.Accuracy1} + ${o.Accuracy2}`:o.Accuracy1;s(I,o)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[l.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.accuracy,s&&l.jsx(Fm,{size:14,className:"text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[l.jsx("span",{className:"capitalize",children:o.Accuracy1}),o.Accuracy2&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-300",children:"+"}),l.jsx("span",{className:"capitalize",children:o.Accuracy2})]})]})]}),l.jsxs("button",{disabled:!s||!o.Damage1,onClick:()=>{if(s&&o.Damage1){const I=o.Damage2?`${o.Damage1} + ${o.Damage2}`:o.Damage1;s(I)}},className:`flex items-center justify-between p-3 border rounded-lg shadow-sm w-full transition-all ${s?"hover:bg-red-50 dark:hover:bg-red-900/20 cursor-pointer active:scale-95 border-slate-300 dark:border-slate-600":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 cursor-default"}`,children:[l.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[i.damage,s&&l.jsx(Fm,{size:14,className:"text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-800 dark:text-white",children:[l.jsx("span",{className:"capitalize",children:o.Damage1||"None"}),o.Damage2&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-300",children:"+"}),l.jsx("span",{className:"capitalize",children:o.Damage2})]})]})]})]})]}),o.Effect&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[l.jsx(fu,{className:"w-4 h-4"})," ",i.effect]}),l.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-100 dark:border-yellow-900/30 rounded-xl text-slate-700 dark:text-slate-300 text-sm leading-relaxed",children:o.Effect})]})]})})]})}):null},L_=({abilityName:t,filePath:e,onClose:n,language:r})=>{const s=jn[r],[i,o]=B.useState(null),[u,c]=B.useState(!0),[d,p]=B.useState(null);B.useEffect(()=>{e&&(async()=>{try{c(!0);const R=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${e.split("/").map(k=>encodeURIComponent(k)).join("/")}`,D=await fetch(R);if(!D.ok)throw new Error("Could not fetch ability data");const S=await D.json();o(S)}catch{p("Failed to load ability details.")}finally{c(!1)}})()},[e]),B.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const m=I=>{I.target===I.currentTarget&&n()};if(!e)return null;const x=ss((i==null?void 0:i.Name)||t,r);return l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:m,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative animate-scale-up border border-slate-200 dark:border-slate-800",children:[l.jsxs("div",{className:"p-6 bg-indigo-600 dark:bg-indigo-800 text-white relative transition-colors duration-300",children:[l.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:l.jsx(ys,{size:20})}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(nb,{className:"text-indigo-200",size:28}),l.jsx("h2",{className:"text-3xl font-extrabold tracking-tight",children:x})]}),l.jsx("span",{className:"inline-block mt-2 text-xs font-bold text-indigo-100 uppercase tracking-wider opacity-80",children:s.abilities})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:u?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[l.jsx($h,{className:"w-10 h-10 animate-spin mb-3 text-indigo-500"}),l.jsx("p",{children:s.consulting})]}):d||!i?l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-500 text-center",children:[l.jsx(cv,{className:"w-12 h-12 mb-3 text-red-400"}),l.jsx("p",{children:d||"Ability data not found."})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2 flex items-center gap-2",children:[l.jsx(hu,{size:14})," ",s.about]}),l.jsxs("p",{className:"text-slate-700 dark:text-slate-300 italic leading-relaxed",children:['"',i.Description,'"']})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase flex items-center gap-2",children:[l.jsx(fu,{className:"w-4 h-4"})," ",s.effect]}),l.jsx("div",{className:"p-5 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-900/30 rounded-xl text-slate-800 dark:text-slate-200 text-sm leading-relaxed shadow-sm",children:i.Effect})]})]})})]})})},wA=({pokemon:t,onBack:e,moveMap:n,abilityMap:r,language:s})=>{var I,N;const i=jn[s],o=Mr(t.Type1),[u,c]=B.useState(null),[d,p]=B.useState(null);B.useEffect(()=>{window.scrollTo(0,0)},[]);const m=R=>{let D=n[R];if(!D){const S=R.replace(/[\s-]/g,""),k=Object.keys(n).find(T=>T.toLowerCase()===S.toLowerCase()||T.toLowerCase()===R.toLowerCase());k&&(D=n[k])}D?c({name:R,path:D}):(console.warn(`Move path not found for: ${R}`),c({name:R,path:""}))},x=R=>{if(!R)return;let D=r[R];if(!D){const S=R.replace(/[\s-]/g,""),k=Object.keys(r).find(T=>T.toLowerCase()===S.toLowerCase()||T.toLowerCase()===R.toLowerCase());k&&(D=r[k])}D?p({name:R,path:D}):console.warn(`Ability path not found for: ${R}`)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`min-h-screen ${o} transition-colors duration-500 overflow-x-hidden`,children:[l.jsxs("div",{className:"p-6 pt-8 pb-48 relative",children:[l.jsxs("div",{className:"flex justify-between items-center text-white max-w-4xl mx-auto z-50 relative",children:[l.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full transition-colors backdrop-blur-md",children:l.jsx(yi,{size:32})}),l.jsxs("span",{className:"font-bold text-2xl",children:["#",t.Number.toString().padStart(3,"0")]})]}),l.jsxs("div",{className:"max-w-4xl mx-auto mt-6 flex justify-between items-center px-4 relative z-30",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white tracking-tight drop-shadow-md",children:t.Name}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx(Lr,{type:t.Type1,language:s}),t.Type2&&l.jsx(Lr,{type:t.Type2,language:s})]})]}),l.jsx("div",{className:"text-white/90 font-semibold text-lg hidden md:block backdrop-blur-sm bg-white/10 px-4 py-2 rounded-lg",children:t.DexCategory})]}),l.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-12 z-40 pointer-events-none",children:l.jsx("img",{src:D_(t),alt:t.Name,className:"w-64 h-64 md:w-80 md:h-80 object-contain drop-shadow-2xl",onError:R=>{const D=R.target,S=Lf(t);D.src!==S?D.src=S:D.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png"}})}),l.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 pointer-events-none translate-y-1/4 translate-x-1/4 z-10",children:l.jsx("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-96 h-96 filter invert",alt:"bg"})})]}),l.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-t-[3rem] min-h-[calc(100vh-300px)] p-6 pt-16 md:px-12 pb-20 relative z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] transition-colors duration-300",children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-10",children:[l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(hu,{className:"w-5 h-5"})," ",i.about]}),l.jsxs("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-lg italic",children:['"',t.DexDescription||"No description available.",'"']}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.height}),l.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((I=t.Height)==null?void 0:I.Meters)||"?","m"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.weight}),l.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[((N=t.Weight)==null?void 0:N.Kilograms)||"?","kg"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.rank}),l.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.RecommendedRank||"Unknown"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:i.role}),l.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:t.GoodStarter?i.starter:i.wild})]})]})]}),l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(Ok,{className:"w-5 h-5"})," ",i.baseStats]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4",children:[l.jsxs("div",{className:"col-span-1 md:col-span-2 flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:i.hp}),l.jsxs("div",{className:"flex-1 flex items-center",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 mr-4 w-8",children:t.BaseHP}),l.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${Math.min(100,t.BaseHP/15*100)}%`}})})]})]}),[{label:i.strength,val:t.Strength,max:t.MaxStrength},{label:i.dexterity,val:t.Dexterity,max:t.MaxDexterity},{label:i.vitality,val:t.Vitality,max:t.MaxVitality},{label:i.special,val:t.Special,max:t.MaxSpecial},{label:i.insight,val:t.Insight,max:t.MaxInsight}].map(R=>l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400 w-24",children:R.label}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:[R.val,"/",R.max]}),fA(R.val,R.max)]})]},R.label))]})]}),l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(wv,{className:"w-5 h-5"})," ",i.abilities]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.Ability1&&l.jsxs("button",{onClick:()=>x(t.Ability1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[l.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.primary}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:ss(t.Ability1,s)})]}),t.Ability2&&l.jsxs("button",{onClick:()=>x(t.Ability2),className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-left",children:[l.jsx("span",{className:"text-xs text-slate-400 block uppercase font-bold",children:i.secondary}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:ss(t.Ability2,s)})]}),t.HiddenAbility&&l.jsxs("button",{onClick:()=>x(t.HiddenAbility),className:"px-4 py-2 bg-purple-50 dark:bg-purple-900/30 rounded-lg border border-purple-100 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors text-left",children:[l.jsx("span",{className:"text-xs text-purple-400 dark:text-purple-300 block uppercase font-bold",children:i.hidden}),l.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-200",children:ss(t.HiddenAbility,s)})]})]})]}),l.jsxs("section",{children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[l.jsx(fu,{className:"w-5 h-5"})," ",i.moveset]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-4 overflow-hidden border border-slate-100 dark:border-slate-700",children:t.Moves&&t.Moves.length>0?l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:t.Moves.map((R,D)=>{let S="text-slate-500 dark:text-slate-400",k="bg-white dark:bg-slate-800",T="hover:bg-slate-100 dark:hover:bg-slate-700";const P=R.Learned||"Standard",L=j_(P,s),V=Bo(R.Name,s);return P==="Starter"&&(S="text-green-600 dark:text-green-400",k="bg-green-50 dark:bg-green-900/20",T="hover:bg-green-100 dark:hover:bg-green-900/30"),(P==="Expert"||P==="Ace"||P==="Master")&&(S="text-orange-600 dark:text-orange-400",k="bg-orange-50 dark:bg-orange-900/20",T="hover:bg-orange-100 dark:hover:bg-orange-900/30"),l.jsxs("button",{onClick:()=>m(R.Name),className:`${k} ${T} p-3 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm flex flex-col text-left transition-all duration-200 active:scale-95`,children:[l.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${S} mb-1`,children:L}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm truncate w-full",children:V})]},D)})}):l.jsx("p",{className:"text-slate-400 text-center italic",children:"No moves data available."})})]})]})})]}),u&&l.jsx(M_,{moveName:u.name,filePath:u.path,onClose:()=>c(null),language:s}),d&&l.jsx(L_,{abilityName:d.name,filePath:d.path,onClose:()=>p(null),language:s})]})},kA=({trainer:t,setTrainer:e,language:n,onBack:r,onSave:s,natureMap:i,party:o,onManagePokemon:u})=>{const c=jn[n],{user:d}=Nu(),p="bg-slate-600",m=_=>{var g;const A=(g=_.target.files)==null?void 0:g[0];if(A){const K=new FileReader;K.onloadend=()=>{e({...t,image:K.result})},K.readAsDataURL(A)}},x=(_,A,g)=>{e({...t,attributes:{...t.attributes,[_]:{...t.attributes[_],[A]:g}}})},I=(_,A,g)=>{e({...t,skills:{...t.skills,[_]:{...t.skills[_],[A]:g}}})},N=(_,A,g)=>{e({...t,[_]:{...t[_],[A]:g}})},R=(_,A)=>{e({...t,pokedex:{...t.pokedex,[_]:Math.max(0,t.pokedex[_]+A)}})};B.useEffect(()=>{if(!t.nature||!i)return;const _=i[t.nature];if(_){const g=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${_.split("/").map(K=>encodeURIComponent(K)).join("/")}`;fetch(g).then(K=>K.json()).then(K=>{K.Confidence&&e(ne=>ne.confidence!==K.Confidence?{...ne,confidence:K.Confidence}:ne)}).catch(K=>console.error("Failed to fetch nature",K))}},[t.nature,i]);const D=B.useMemo(()=>i?Object.keys(i).sort():rA,[i]),S=_=>_&&_.includes("BookSprites")?_.replace("BookSprites","ShuffleTokens"):_,k=({label:_,current:A,max:g,onChangeCurrent:K})=>l.jsxs("div",{className:"bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center relative group",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsx("span",{className:"font-black uppercase tracking-widest text-sm text-slate-800",children:_})}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2 px-1",children:Array.from({length:g}).map((ne,Ie)=>l.jsx("div",{onClick:()=>K(Ie+1),className:`w-4 h-4 rounded-full border border-slate-300 cursor-pointer hover:bg-slate-400 transition-all duration-150 ${Ie<A?"bg-slate-900":"bg-slate-200"}`},Ie))})]}),T=({label:_,value:A,onChange:g})=>l.jsxs("div",{className:"flex items-center justify-between mb-1.5 group",children:[l.jsx("span",{className:"text-xs font-bold text-white uppercase group-hover:text-amber-200 transition-colors truncate mr-2",children:_}),l.jsx("div",{className:"flex gap-1 shrink-0",children:Array.from({length:5}).map((K,ne)=>l.jsx("button",{onClick:()=>g(ne+1===A?0:ne+1),className:`w-3.5 h-3.5 rounded-full border border-white/20 transition-all duration-150 hover:bg-white/20 ${ne<A?"bg-white scale-110 shadow-sm":"bg-black/20"}`},ne))})]}),P=({label:_,current:A,max:g,onChangeCurrent:K,Icon:ne,activeColor:Ie})=>l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-3 mb-3 border-4 border-slate-700 shadow-md flex items-center gap-4",children:[l.jsx("span",{className:"text-lg font-black text-white uppercase tracking-wider shrink-0",children:_}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.from({length:g}).map((Ge,W)=>l.jsx("button",{onClick:()=>{const ee=W+1;K(W===0&&A===1?0:ee)},className:"cursor-pointer hover:scale-110 transition-all duration-200",children:l.jsx(ne,{size:24,className:`drop-shadow-sm ${W<A?Ie:"text-slate-600 fill-slate-900"}`})},W))})]}),L=({label:_,value:A,Icon:g})=>l.jsxs("div",{className:"flex rounded-full border-4 border-slate-700 bg-white overflow-hidden h-9 shadow-sm",children:[l.jsxs("div",{className:"flex-1 flex items-center pl-3 font-black text-slate-700 uppercase text-[10px] tracking-wider whitespace-nowrap overflow-hidden",children:[_,":"]}),l.jsxs("div",{className:"w-20 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 bg-slate-100",children:[A,g&&l.jsx(g,{size:12,className:"ml-1 opacity-50"})]})]}),V=t.attributes.dexterity.current+t.skills.survival.alert,w=t.attributes.vitality.current,v=t.attributes.insight.current,b=t.attributes.dexterity.current+t.skills.fight.evasion,E=t.attributes.strength.current+t.skills.fight.clash;return l.jsxs("div",{className:`fixed inset-0 z-50 ${p} overflow-y-auto animate-fade-in custom-scrollbar`,children:[l.jsxs("div",{className:"sticky top-0 z-50 bg-slate-800/90 backdrop-blur-sm p-4 shadow-md flex justify-between items-center text-white",children:[l.jsxs("button",{onClick:r,className:"flex items-center gap-2 hover:bg-white/20 px-3 py-1 rounded-full transition-colors",children:[l.jsx(yi,{})," ",c.backToHome]}),l.jsx("h1",{className:"text-xl font-bold uppercase tracking-widest hidden md:block",children:c.trainerSheet}),l.jsxs("div",{className:"flex items-center gap-2",children:[d&&s&&l.jsx("button",{onClick:s,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Save to Cloud",children:l.jsx(xv,{size:20})}),(!d||!s)&&l.jsx("div",{className:"w-8"})]})]}),l.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-center bg-slate-800/20 p-6 rounded-3xl border-4 border-slate-800/30",children:[l.jsx("div",{className:"relative group",children:l.jsxs("div",{className:"w-32 h-32 rounded-full bg-slate-200 border-4 border-white shadow-xl flex items-center justify-center overflow-hidden relative",children:[t.image?l.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):l.jsx(Kk,{className:"text-slate-400 w-12 h-12"}),l.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"Upload"})}),l.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:m,accept:"image/*"})]})}),l.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[l.jsx("input",{type:"text",value:t.name,onChange:_=>e({...t,name:_.target.value}),className:"text-4xl md:text-5xl font-black text-white bg-transparent border-b-4 border-white/20 focus:border-white outline-none w-full mb-2 placeholder-white/50",placeholder:c.playerName}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-2",children:[l.jsxs("div",{className:"bg-black/20 text-white font-bold px-3 py-1 rounded-lg border border-white/10 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs uppercase opacity-70",children:c.sheet.age}),l.jsx("input",{type:"number",value:t.age??10,onChange:_=>e({...t,age:parseInt(_.target.value)||0}),className:"w-12 bg-transparent text-center outline-none"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("select",{value:t.nature,onChange:_=>e({...t,nature:_.target.value}),className:"bg-black/20 text-white font-bold px-3 py-1 rounded-lg border border-white/10 outline-none appearance-none cursor-pointer hover:bg-black/30",children:D.map(_=>l.jsx("option",{value:_,className:"text-slate-900",children:_},_))}),l.jsxs("div",{className:"bg-black/20 text-white font-bold px-3 py-1 rounded-lg border border-white/10 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs uppercase opacity-70",children:c.sheet.confidence}),l.jsx("input",{type:"number",value:t.confidence,onChange:_=>e({...t,confidence:parseInt(_.target.value)||0}),className:"w-12 bg-transparent text-center outline-none"})]})]}),l.jsx("div",{className:"h-6 w-px bg-white/40 hidden md:block"}),l.jsx("div",{className:"bg-black/20 rounded-lg p-2 border border-white/10",children:l.jsxs("div",{className:"flex items-center gap-4 px-2 py-1",children:[l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 uppercase tracking-wider",children:c.caught}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>R("caught",-1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(lo,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:t.pokedex.caught}),l.jsx("button",{onClick:()=>R("caught",1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(si,{size:14})})]})]}),l.jsx("div",{className:"w-px h-8 bg-white/20"}),l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-white/60 uppercase tracking-wider",children:c.seen}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>R("seen",-1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(lo,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:t.pokedex.seen}),l.jsx("button",{onClick:()=>R("seen",1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(si,{size:14})})]})]})]})})]})]})]}),o&&l.jsxs("div",{onClick:u,className:`bg-slate-800/20 p-4 rounded-3xl border-4 border-slate-800/30 mb-8 ${u?"cursor-pointer hover:bg-slate-800/30 transition-colors group":""}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-3 ml-2",children:[l.jsx("h3",{className:"text-white font-bold uppercase tracking-widest flex items-center gap-2 text-sm opacity-80",children:c.party}),u&&l.jsx("span",{className:"text-white/60 text-xs uppercase font-bold group-hover:text-white transition-colors",children:"Manage "})]}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-4",children:o.map((_,A)=>l.jsx("div",{className:`aspect-square rounded-2xl border-2 border-slate-700/50 flex items-center justify-center relative overflow-hidden group hover:border-slate-500 transition-colors ${_?Mr(_.type1):"bg-slate-800/40"}`,children:_?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:S(_.image),alt:_.nickname,className:"w-full h-full object-contain p-2 transition-transform duration-300 group-hover:scale-110 drop-shadow-md"}),l.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/60 p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("span",{className:"text-[10px] font-bold text-white truncate block",children:_.nickname})})]}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700/30"})},A))})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"bg-red-900/80 p-4 rounded-3xl border-4 border-red-800 shadow-lg",children:[l.jsx(k,{label:c.strength,current:t.attributes.strength.current,max:t.attributes.strength.max,onChangeCurrent:_=>x("strength","current",_)}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-red-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(Ed,{size:12})," ",c.sheet.fight]}),l.jsx(T,{label:c.sheet.brawl,value:t.skills.fight.brawl,onChange:_=>I("fight","brawl",_)}),l.jsx(T,{label:c.sheet.channel,value:t.skills.fight.channel,onChange:_=>I("fight","channel",_)}),l.jsx(T,{label:c.sheet.clash,value:t.skills.fight.clash,onChange:_=>I("fight","clash",_)}),l.jsx(T,{label:c.sheet.evasion,value:t.skills.fight.evasion,onChange:_=>I("fight","evasion",_)})]})]}),l.jsxs("div",{className:"bg-green-900/80 p-4 rounded-3xl border-4 border-green-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(k,{label:c.dexterity,current:t.attributes.dexterity.current,max:t.attributes.dexterity.max,onChangeCurrent:_=>x("dexterity","current",_)}),l.jsx(k,{label:c.vitality,current:t.attributes.vitality.current,max:t.attributes.vitality.max,onChangeCurrent:_=>x("vitality","current",_)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-green-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(mv,{size:12})," ",c.sheet.survival]}),l.jsx(T,{label:c.sheet.alert,value:t.skills.survival.alert,onChange:_=>I("survival","alert",_)}),l.jsx(T,{label:c.sheet.athletic,value:t.skills.survival.athletic,onChange:_=>I("survival","athletic",_)}),l.jsx(T,{label:c.sheet.nature,value:t.skills.survival.nature,onChange:_=>I("survival","nature",_)}),l.jsx(T,{label:c.sheet.stealth,value:t.skills.survival.stealth,onChange:_=>I("survival","stealth",_)})]})]}),l.jsxs("div",{className:"bg-purple-900/80 p-4 rounded-3xl border-4 border-purple-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(k,{label:c.special,current:t.attributes.special.current,max:t.attributes.special.max,onChangeCurrent:_=>x("special","current",_)}),l.jsx(k,{label:c.insight,current:t.attributes.insight.current,max:t.attributes.insight.max,onChangeCurrent:_=>x("insight","current",_)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-purple-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(gv,{size:12})," ",c.sheet.social]}),l.jsx(T,{label:c.sheet.allure,value:t.skills.social.allure,onChange:_=>I("social","allure",_)}),l.jsx(T,{label:c.sheet.etiquette,value:t.skills.social.etiquette,onChange:_=>I("social","etiquette",_)}),l.jsx(T,{label:c.sheet.intimidate,value:t.skills.social.intimidate,onChange:_=>I("social","intimidate",_)}),l.jsx(T,{label:c.sheet.perform,value:t.skills.social.perform,onChange:_=>I("social","perform",_)})]})]})]}),l.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-4",children:[l.jsxs("div",{children:[l.jsx(P,{label:c.sheet.hp,current:t.hp.current,max:t.hp.max,onChangeCurrent:_=>N("hp","current",_),Icon:pv,activeColor:"text-red-500 fill-red-500"}),l.jsx(P,{label:c.sheet.will,current:t.will.current,max:t.will.max,onChangeCurrent:_=>N("will","current",_),Icon:dv,activeColor:"text-blue-500 fill-blue-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(L,{label:c.sheet.initiative,value:V,Icon:mn}),l.jsx(L,{label:c.sheet.def,value:`${w}/${v}`,Icon:_v})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(L,{label:c.sheet.evasion,value:b,Icon:mn}),l.jsx(L,{label:c.sheet.clash,value:E,Icon:mn})]})]}),l.jsxs("div",{className:"bg-yellow-600/90 p-4 rounded-3xl border-4 border-yellow-700 shadow-lg",children:[l.jsxs("h3",{className:"text-yellow-100 font-bold uppercase text-lg mb-2 flex items-center gap-2",children:[l.jsx(fv,{className:"w-6 h-6 text-yellow-300"})," ",c.money]}),l.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 flex items-center justify-between",children:[l.jsx("span",{className:"text-3xl font-black text-white tracking-widest",children:""}),l.jsx("input",{type:"number",value:t.money,onChange:_=>e({...t,money:parseInt(_.target.value)||0}),className:"bg-transparent text-right text-4xl font-black text-white outline-none w-full"})]})]})]})]})]})]})},bA=({character:t,baseData:e,moveFileMap:n,abilityFileMap:r,onSave:s,onClose:i,language:o,natureMap:u})=>{const c=jn[o],[d,p]=B.useState(t),[m,x]=B.useState(!0),I=Mr(d.type1),[N,R]=B.useState({step:"setup",mode:"attribute",isOpen:!1,statName:"",statValue:0,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0,total:0}),[D,S]=B.useState(null),[k,T]=B.useState(null),[P,L]=B.useState(null),[V,w]=B.useState({isOpen:!1,damage:"",type:"physical"}),[v,b]=B.useState(null),[E,_]=B.useState(!1);B.useEffect(()=>{if(!d.nature||!u)return;const C=u[d.nature];if(C){const H=`https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/${C.split("/").map(Y=>encodeURIComponent(Y)).join("/")}`;fetch(H).then(Y=>Y.json()).then(Y=>{b(Y),!m&&Y.Confidence&&p(X=>({...X,confidence:Y.Confidence}))}).catch(Y=>console.error("Failed to fetch nature",Y))}else b(null)},[d.nature,u,m]);const A=()=>{s(d)},g=()=>{m||A(),x(!m)},K=C=>{if(!r)return;let U=r[C];if(!U){const H=C.replace(/[\s-]/g,""),Y=Object.keys(r).find(X=>X.toLowerCase()===H.toLowerCase()||X.toLowerCase()===C.toLowerCase());Y&&(U=r[Y])}U&&T({name:C,path:U})},ne=(C,U)=>{if(m)return;const H=d.moves||[],Y=H.includes(C),X=d.attributes.insight.current+2;if(Y)p(fe=>({...fe,moves:fe.moves.filter(Ee=>Ee!==C)}));else{if(H.length>=X){alert(`You can only learn ${X} moves (Insight + 2)!`);return}const fe=Kr.indexOf(d.rank);if(Kr.indexOf(U)>fe&&H.filter(Ue=>{const Nt=e==null?void 0:e.Moves.find(_s=>_s.Name===Ue);return Nt?Kr.indexOf(Nt.Learned)>fe:!1}).length>=1){alert("You can only learn one move from a higher rank!");return}p(Ne=>({...Ne,moves:[...Ne.moves,C]}))}},Ie=(C,U)=>{!m||U<=0||R({step:"setup",mode:"attribute",isOpen:!0,statName:C,statValue:U,selectedSkillName:null,selectedSkillValue:0,results:[],successes:0})},Ge=(C,U)=>{N.selectedSkillName===C?R(H=>({...H,selectedSkillName:null,selectedSkillValue:0})):R(H=>({...H,selectedSkillName:C,selectedSkillValue:U}))},W=()=>{const U=N.mode==="initiative"?1:N.statValue+N.selectedSkillValue;R(H=>({...H,step:"rolling",results:Array(U).fill(1)}))},ee=C=>{const U=parseInt(C);if(!isNaN(U)&&String(U)===C)return U;const H=C.toLowerCase().trim();if(d.attributes[H])return d.attributes[H].current;for(const Y of["fight","survival","social"])if(d.skills[Y][H])return d.skills[Y][H];return d.contest[H]!==void 0?d.contest[H]:0},oe=(C,U)=>{const H=C.split("+").map(fe=>fe.trim());let Y=H[0],X=H[1]||"";if(Y.includes("/")){const fe=Y.split("/").map(Ee=>Ee.trim());L({isOpen:!0,options:fe,modifier:X?`+ ${X}`:"",moveData:U}),S(null);return}ve(Y,X,U)},ve=(C,U,H)=>{const Y=ee(C),X=U?ee(U):0;let fe;if(H&&H.Damage1){const Ee=H.Damage2?`${H.Damage1} + ${H.Damage2}`:H.Damage1;fe={name:H.Name,type:H.Type,damagePool:Ee,power:H.Power}}R({step:"setup",mode:"move",isOpen:!0,statName:C,statValue:Y,selectedSkillName:U||null,selectedSkillValue:X,results:[],successes:0,activeMove:fe}),S(null),L(null)},me=()=>{if(!N.activeMove||!N.activeMove.damagePool)return;const U=N.activeMove.damagePool.split("+").map(_s=>_s.trim()),H=U[0],Y=ee(H);let X=0;U[1]&&(X=ee(U[1]));const fe=N.activeMove.power||0;let Ee=0;(d.type1===N.activeMove.type||d.type2&&d.type2===N.activeMove.type)&&(Ee=1);let Ne=0;N.successes>3&&(Ne=2);const Ue=X+fe+Ee+Ne,Nt=[];X>0&&Nt.push(`Base(${X})`),fe>0&&Nt.push(`Power(+${fe})`),Ee>0&&Nt.push("STAB(+1)"),Ne>0&&Nt.push("Crit(+2)");const rr=Nt.length>0?Nt.join(" "):"Bonus";R({step:"setup",mode:"move",isOpen:!0,statName:"Damage",statValue:Y,selectedSkillName:rr,selectedSkillValue:Ue,results:[],successes:0,activeMove:void 0})},_e=()=>{const C=d.attributes.dexterity.current,U=d.skills.survival.alert,H=C+U;R({step:"setup",mode:"initiative",isOpen:!0,statName:"Initiative",statValue:1,selectedSkillName:"Dexterity + Alert",selectedSkillValue:H,results:[],successes:0,total:0})},nt=()=>{w({isOpen:!0,damage:"",type:"physical"})},We=()=>{const C=parseInt(V.damage)||0,U=V.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current,H=Math.max(0,C-U),Y=d.hp.current,X=Math.max(0,Y-H);un("hp","current",X),w(fe=>({...fe,isOpen:!1}))},gt=()=>{R({step:"setup",mode:"attribute",isOpen:!0,statName:"Evasion",statValue:d.attributes.dexterity.current,selectedSkillName:"Evasion",selectedSkillValue:d.skills.fight.evasion,results:[],successes:0})},at=()=>{R({step:"setup",mode:"attribute",isOpen:!0,statName:"Clash",statValue:d.attributes.strength.current,selectedSkillName:"Clash",selectedSkillValue:d.skills.fight.clash,results:[],successes:0})};B.useEffect(()=>{let C,U;if(N.isOpen&&N.step==="rolling"){const H=N.mode==="initiative",Y=H?1:N.statValue+N.selectedSkillValue;C=setInterval(()=>{R(X=>({...X,results:Array(Y).fill(0).map(()=>Math.floor(Math.random()*6)+1)}))},80),U=setTimeout(()=>{clearInterval(C);const X=Array(Y).fill(0).map(()=>Math.floor(Math.random()*6)+1);if(H){const fe=X[0];R(Ee=>({...Ee,step:"result",results:X,total:fe+Ee.selectedSkillValue,successes:0}))}else{const fe=X.filter(Ee=>Ee>3).length;R(Ee=>({...Ee,step:"result",results:X,successes:fe}))}},2e3)}return()=>{clearInterval(C),clearTimeout(U)}},[N.isOpen,N.step,N.statValue,N.selectedSkillValue,N.mode]);const Xt=(C,U,H)=>{m||p(Y=>({...Y,attributes:{...Y.attributes,[C]:{...Y.attributes[C],[U]:H}}}))},rt=(C,U,H)=>{m||p(Y=>({...Y,skills:{...Y.skills,[C]:{...Y.skills[C],[U]:H}}}))},Dt=(C,U)=>{m&&C!=="status"||p(H=>({...H,[C]:U}))},Vt=(C,U)=>{p(H=>({...H,[C]:Math.max(0,(H[C]||0)+U)}))},un=(C,U,H)=>{p(Y=>({...Y,[C]:{...Y[C],[U]:H}}))},Mt=(C,U)=>{m||p(H=>({...H,contest:{...H.contest,[C]:U}}))},F=({label:C,current:U,max:H,onChangeCurrent:Y})=>{const X=m?"button":"div",fe=m?{onClick:()=>Ie(C,U),className:"w-full bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center hover:bg-slate-50 hover:border-blue-500 hover:scale-[1.02] active:scale-95 transition-all cursor-pointer group relative"}:{className:"bg-white rounded-2xl border-4 border-slate-700 p-3 mb-4 shadow-sm flex flex-col items-center justify-center"};return l.jsxs(X,{...fe,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:`font-black uppercase tracking-widest text-sm ${m?"text-slate-800 group-hover:text-blue-600":"text-slate-800"}`,children:C}),m&&l.jsx(mn,{size:14,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity absolute right-3"})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2 px-1",children:Array.from({length:H}).map((Ee,Ne)=>l.jsx("div",{onClick:Ue=>{m||(Ue.stopPropagation(),Y(Ne+1))},className:`w-4 h-4 rounded-full border border-slate-300 transition-all duration-150 ${Ne<U?"bg-slate-900":"bg-slate-200"} ${m?"":"cursor-pointer hover:bg-slate-400"}`,title:m?"":`${C}: ${Ne+1}`},Ne))})]})},O=({label:C,value:U,onChange:H})=>l.jsxs("div",{className:`bg-white/50 rounded-xl px-3 py-2 flex items-center justify-between mb-2 ${m?"opacity-90":"hover:bg-white/80 transition-colors"}`,children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:C}),l.jsx("div",{className:"flex gap-1.5",children:Array.from({length:5}).map((Y,X)=>l.jsx("button",{disabled:m,onClick:()=>H(X+1===U?0:X+1),className:`w-3 h-3 rounded-full border border-pink-400 transition-all duration-150 ${X<U?"bg-pink-500 scale-125 border-pink-500":"bg-white"} ${m?"cursor-default":"hover:bg-pink-200 cursor-pointer"}`,title:`${C}: ${X+1}`},X))})]}),Q=({label:C,value:U,onChange:H})=>l.jsxs("div",{className:"flex items-center justify-between mb-1.5 group",children:[l.jsx("span",{className:"text-xs font-bold text-white uppercase group-hover:text-amber-200 transition-colors truncate mr-2",children:C}),l.jsx("div",{className:"flex gap-1 shrink-0",children:Array.from({length:5}).map((Y,X)=>l.jsx("button",{disabled:m,onClick:()=>H(X+1===U?0:X+1),className:`w-3.5 h-3.5 rounded-full border border-white/20 transition-all duration-150 ${X<U?"bg-white scale-110 shadow-sm":"bg-black/20"} ${m?"cursor-default":"hover:bg-white/20"}`},X))})]}),ae=({label:C,value:U,onChange:H})=>l.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[l.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:C})}),l.jsx("input",{type:"text",value:U,readOnly:m,onChange:Y=>H(Y.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none ${m?"bg-slate-100 cursor-default":"bg-blue-50 focus:bg-white"}`})]}),he=({label:C,current:U,max:H,onChangeCurrent:Y,Icon:X,activeColor:fe})=>l.jsxs("div",{className:"bg-slate-800 rounded-2xl p-3 mb-3 border-4 border-slate-700 shadow-md flex items-center gap-4",children:[l.jsx("span",{className:"text-lg font-black text-white uppercase tracking-wider shrink-0",children:C}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Array.from({length:H}).map((Ee,Ne)=>l.jsx("button",{disabled:!m,onClick:()=>{const Ue=Ne+1;Y(Ne===0&&U===1?0:Ue)},className:`transition-all duration-200 ${m?"cursor-pointer hover:scale-110":"cursor-default opacity-80"}`,title:`${Ne+1}/${H}`,children:l.jsx(X,{size:24,className:`drop-shadow-sm ${Ne<U?fe:"text-slate-600 fill-slate-900"}`})},Ne))})]}),Ce=({label:C,value:U,onChange:H,isReadOnly:Y=!1,onAction:X,ActionIcon:fe=mn})=>l.jsxs("div",{className:"flex rounded-full border-4 border-slate-700 bg-white overflow-hidden h-9 shadow-sm",children:[l.jsxs("div",{className:"flex-1 flex items-center pl-3 font-black text-slate-700 uppercase text-[10px] tracking-wider whitespace-nowrap overflow-hidden",children:[C,":"]}),Y||m?l.jsxs("div",{onClick:()=>m&&X&&X(),className:`w-20 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 
                   ${m?"bg-slate-100":"bg-blue-100"}
                   ${m&&X?"cursor-pointer hover:bg-green-100 hover:text-green-800 transition-colors":""}
                   `,children:[U,m&&X&&l.jsx(fe,{size:12,className:"ml-1 opacity-50"})]}):l.jsx("input",{type:"number",value:U,onChange:Ee=>H&&H(parseInt(Ee.target.value)||0),className:"w-20 bg-blue-100 flex items-center justify-center font-bold text-slate-800 text-lg border-l-2 border-slate-200 text-center outline-none"})]}),Xe=d.attributes.dexterity.current+d.skills.survival.alert,Jt=d.attributes.vitality.current,cn=d.attributes.insight.current,Lt=d.attributes.dexterity.current+d.skills.fight.evasion,It=d.attributes.strength.current+d.skills.fight.clash;d.combat;const Ot=d.attributes.insight.current+2,Pe=B.useMemo(()=>{if(!e)return{currentRank:[],nextRank:[]};const C=Kr.indexOf(d.rank),U=e.Moves.filter(Y=>{const X=Kr.indexOf(Y.Learned);return X!==-1&&X<=C}),H=e.Moves.filter(Y=>Kr.indexOf(Y.Learned)===C+1);return{currentRank:U,nextRank:H}},[e,d.rank]),re=B.useMemo(()=>u?Object.keys(u).sort():[],[u]);return l.jsxs("div",{className:"fixed inset-0 z-50 bg-[#e74c3c] overflow-y-auto animate-fade-in custom-scrollbar",children:[l.jsxs("div",{className:"sticky top-0 z-50 bg-[#c0392b] p-4 shadow-md flex justify-between items-center text-white",children:[l.jsxs("button",{onClick:()=>{A(),i()},className:"flex items-center gap-2 hover:bg-white/20 px-3 py-1 rounded-full transition-colors",children:[l.jsx(yi,{})," ",c.close]}),l.jsx("h1",{className:"text-xl font-bold uppercase tracking-widest hidden md:block",children:c.pokemonSheet}),l.jsxs("button",{onClick:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg border transition-all ${m?"bg-slate-800 border-slate-600 hover:bg-slate-700 text-white":"bg-yellow-400 border-yellow-500 hover:bg-yellow-300 text-slate-900"}`,children:[m?l.jsx(Qk,{size:18}):l.jsx(ob,{size:18}),l.jsx("span",{className:"font-bold",children:m?"Game Mode":"Edit Mode"})]})]}),l.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 items-center bg-slate-800/20 p-6 rounded-3xl border-4 border-slate-800/30",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`w-32 h-32 rounded-full ${I} border-4 border-white shadow-xl flex items-center justify-center overflow-hidden bg-white`,children:l.jsx("img",{src:d.image,alt:d.nickname,className:"w-24 h-24 object-contain"})}),l.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-slate-800 text-white text-xs font-bold px-2 py-1 rounded-lg border-2 border-white",children:["#",d.dexId]})]}),l.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[l.jsx("input",{type:"text",value:d.nickname,readOnly:m,onChange:C=>Dt("nickname",C.target.value),className:`text-4xl md:text-5xl font-black text-white bg-transparent border-b-4 focus:border-white outline-none w-full mb-2 placeholder-white/50 ${m?"border-transparent cursor-default":"border-white/20"}`,placeholder:c.nickname}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-2",children:[l.jsx("span",{className:"text-xl text-white font-bold opacity-80",children:d.speciesName}),l.jsx("div",{className:"h-6 w-px bg-white/40 hidden md:block"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Lr,{type:d.type1,language:o}),d.type2&&l.jsx(Lr,{type:d.type2,language:o})]}),l.jsx("div",{className:"ml-0 md:ml-4 bg-black/20 rounded-lg p-2 border border-white/10",children:l.jsxs("div",{className:"flex items-center gap-4 px-2 py-1",children:[l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 uppercase tracking-wider",children:"Win"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>Vt("victories",-1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(lo,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:d.victories||0}),l.jsx("button",{onClick:()=>Vt("victories",1),className:"p-1 hover:text-yellow-400 text-white/40 transition-colors",children:l.jsx(si,{size:14})})]})]}),l.jsx("div",{className:"w-px h-8 bg-white/20"}),l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-white/60 uppercase tracking-wider",children:"Fight"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>Vt("battles",-1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(lo,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-xl text-white min-w-[24px] text-center",children:d.battles||0}),l.jsx("button",{onClick:()=>Vt("battles",1),className:"p-1 hover:text-white text-white/40 transition-colors",children:l.jsx(si,{size:14})})]})]})]})}),e&&l.jsxs("div",{className:"bg-indigo-900/80 p-3 rounded-2xl border-4 border-indigo-800 shadow-md",children:[l.jsxs("h3",{className:"text-indigo-100 font-bold uppercase text-xs mb-2 flex items-center gap-2",children:[l.jsx(wv,{className:"w-4 h-4 text-yellow-400"})," ",c.abilities]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.Ability1&&l.jsxs("button",{onClick:()=>K(e.Ability1),className:"flex-1 min-w-[100px] px-3 py-2 bg-indigo-100 hover:bg-white text-indigo-900 rounded-lg font-bold text-xs transition-colors shadow-sm border border-indigo-200 text-left flex flex-col",children:[l.jsx("span",{className:"text-[9px] uppercase opacity-60 tracking-wider",children:c.primary}),l.jsx("span",{className:"truncate",children:ss(e.Ability1,o)})]}),e.Ability2&&l.jsxs("button",{onClick:()=>K(e.Ability2),className:"flex-1 min-w-[100px] px-3 py-2 bg-indigo-100 hover:bg-white text-indigo-900 rounded-lg font-bold text-xs transition-colors shadow-sm border border-indigo-200 text-left flex flex-col",children:[l.jsx("span",{className:"text-[9px] uppercase opacity-60 tracking-wider",children:c.secondary}),l.jsx("span",{className:"truncate",children:ss(e.Ability2,o)})]}),e.HiddenAbility&&l.jsxs("button",{onClick:()=>K(e.HiddenAbility),className:"flex-1 min-w-[100px] px-3 py-2 bg-purple-100 hover:bg-white text-purple-900 rounded-lg font-bold text-xs transition-colors shadow-sm border border-purple-200 text-left flex flex-col",children:[l.jsx("span",{className:"text-[9px] uppercase opacity-60 tracking-wider",children:c.hidden}),l.jsx("span",{className:"truncate",children:ss(e.HiddenAbility,o)})]})]})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"bg-red-900/80 p-4 rounded-3xl border-4 border-red-800 shadow-lg",children:[l.jsx(F,{label:c.strength,current:d.attributes.strength.current,max:d.attributes.strength.max,onChangeCurrent:C=>Xt("strength","current",C)}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-red-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(Ed,{size:12})," ",c.sheet.fight]}),l.jsx(Q,{label:c.sheet.brawl,value:d.skills.fight.brawl,onChange:C=>rt("fight","brawl",C)}),l.jsx(Q,{label:c.sheet.channel,value:d.skills.fight.channel,onChange:C=>rt("fight","channel",C)}),l.jsx(Q,{label:c.sheet.clash,value:d.skills.fight.clash,onChange:C=>rt("fight","clash",C)}),l.jsx(Q,{label:c.sheet.evasion,value:d.skills.fight.evasion,onChange:C=>rt("fight","evasion",C)})]})]}),l.jsxs("div",{className:"bg-green-900/80 p-4 rounded-3xl border-4 border-green-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(F,{label:c.dexterity,current:d.attributes.dexterity.current,max:d.attributes.dexterity.max,onChangeCurrent:C=>Xt("dexterity","current",C)}),l.jsx(F,{label:c.vitality,current:d.attributes.vitality.current,max:d.attributes.vitality.max,onChangeCurrent:C=>Xt("vitality","current",C)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-green-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(mv,{size:12})," ",c.sheet.survival]}),l.jsx(Q,{label:c.sheet.alert,value:d.skills.survival.alert,onChange:C=>rt("survival","alert",C)}),l.jsx(Q,{label:c.sheet.athletic,value:d.skills.survival.athletic,onChange:C=>rt("survival","athletic",C)}),l.jsx(Q,{label:c.sheet.nature,value:d.skills.survival.nature,onChange:C=>rt("survival","nature",C)}),l.jsx(Q,{label:c.sheet.stealth,value:d.skills.survival.stealth,onChange:C=>rt("survival","stealth",C)})]})]}),l.jsxs("div",{className:"bg-purple-900/80 p-4 rounded-3xl border-4 border-purple-800 shadow-lg",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(F,{label:c.special,current:d.attributes.special.current,max:d.attributes.special.max,onChangeCurrent:C=>Xt("special","current",C)}),l.jsx(F,{label:c.insight,current:d.attributes.insight.current,max:d.attributes.insight.max,onChangeCurrent:C=>Xt("insight","current",C)})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mt-2",children:[l.jsxs("h4",{className:"text-purple-200 font-bold uppercase text-xs mb-2 flex items-center gap-1",children:[l.jsx(gv,{size:12})," ",c.sheet.social]}),l.jsx(Q,{label:c.sheet.allure,value:d.skills.social.allure,onChange:C=>rt("social","allure",C)}),l.jsx(Q,{label:c.sheet.etiquette,value:d.skills.social.etiquette,onChange:C=>rt("social","etiquette",C)}),l.jsx(Q,{label:c.sheet.intimidate,value:d.skills.social.intimidate,onChange:C=>rt("social","intimidate",C)}),l.jsx(Q,{label:c.sheet.perform,value:d.skills.social.perform,onChange:C=>rt("social","perform",C)})]})]})]}),l.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-4",children:[l.jsxs("div",{children:[l.jsx(he,{label:c.sheet.hp,current:d.hp.current,max:d.hp.max,onChangeCurrent:C=>un("hp","current",C),Icon:pv,activeColor:"text-red-500 fill-red-500"}),l.jsx(he,{label:c.sheet.will,current:d.will.current,max:d.will.max,onChangeCurrent:C=>un("will","current",C),Icon:dv,activeColor:"text-blue-500 fill-blue-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Ce,{label:c.sheet.initiative,value:Xe,isReadOnly:!0,onAction:()=>_e(),ActionIcon:mn}),l.jsx(Ce,{label:c.sheet.def,value:`${Jt}/${cn}`,isReadOnly:!0,onAction:nt,ActionIcon:_v})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Ce,{label:c.sheet.evasion,value:Lt,isReadOnly:!0,onAction:gt,ActionIcon:mn}),l.jsx(Ce,{label:c.sheet.clash,value:It,isReadOnly:!0,onAction:at,ActionIcon:mn})]})]}),l.jsxs("div",{className:"bg-slate-800 rounded-3xl border-4 border-slate-700 p-4 flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-white font-bold uppercase flex items-center gap-2",children:[l.jsx(fu,{className:"text-yellow-400"})," ",c.moveset]}),l.jsxs("span",{className:"text-xs font-mono text-slate-400",children:[d.moves.length,"/",Ot]})]}),l.jsx("div",{className:"space-y-2",children:Array.from({length:Ot}).map((C,U)=>{const H=d.moves[U];return H?l.jsxs("button",{onClick:()=>{var Y;if(m){if(n){const X=n[H]||((Y=Object.entries(n).find(([fe])=>fe.toLowerCase()===H.toLowerCase()))==null?void 0:Y[1]);X&&S({name:H,path:X})}}else ne(H,"")},className:"w-full bg-white rounded-xl p-3 flex justify-between items-center shadow-md hover:scale-[1.01] active:scale-95 transition-all text-left group",children:[l.jsx("span",{className:"font-bold text-slate-800",children:Bo(H,o)}),m?l.jsx(mn,{className:"text-slate-300 group-hover:text-blue-500 transition-colors",size:20}):l.jsx(lo,{className:"text-red-500",size:20})]},U):l.jsx("div",{className:"w-full bg-slate-700/50 rounded-xl p-3 flex justify-center items-center border-2 border-dashed border-slate-600",children:l.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:"Empty Slot"})},U)})}),!m&&e&&l.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4",children:[l.jsxs("h4",{className:"text-white/60 font-bold uppercase text-xs mb-3",children:["Learnable Moves (Current Rank: ",d.rank,")"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:Pe.currentRank.map(C=>{const U=d.moves.includes(C.Name);return l.jsx("button",{onClick:()=>ne(C.Name,C.Learned),disabled:U,className:`p-2 rounded-lg text-xs font-bold uppercase border transition-all ${U?"bg-green-500 border-green-500 text-white opacity-50 cursor-not-allowed":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:Bo(C.Name,o)},C.Name)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-slate-100 rounded-3xl p-4 border-4 border-slate-300",children:[l.jsxs("div",{className:`bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm ${m?"bg-slate-100":""}`,children:[l.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:c.sheet.nature})}),m?l.jsx("div",{className:"w-full px-2 py-1 text-slate-800 font-bold bg-slate-100 cursor-default min-h-[32px] flex items-center",children:d.nature||"-"}):l.jsxs("select",{value:d.nature,onChange:C=>Dt("nature",C.target.value),className:"w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none bg-blue-50 focus:bg-white",children:[l.jsx("option",{value:"",children:"- Select -"}),re.map(C=>l.jsx("option",{value:C,children:C},C))]})]}),l.jsx(ae,{label:c.sheet.confidence,value:d.confidence,onChange:C=>Dt("confidence",C)}),l.jsx(ae,{label:c.sheet.item,value:d.item,onChange:C=>Dt("item",C)}),l.jsxs("div",{className:"bg-white rounded-xl border-4 border-slate-700 overflow-hidden flex flex-col mb-3 shadow-sm",children:[l.jsx("div",{className:"bg-slate-700 px-2 py-0.5",children:l.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest",children:c.sheet.status})}),l.jsx("select",{value:d.status,onChange:C=>Dt("status",C.target.value),className:`w-full px-2 py-1 text-slate-800 font-bold outline-none appearance-none ${m?"bg-white cursor-pointer":"bg-blue-50"}`,children:sA.map(C=>l.jsx("option",{value:C,children:c.sheet.statuses[C]||C},C))})]})]}),l.jsxs("div",{className:"bg-pink-100 rounded-3xl p-4 border-4 border-pink-300 flex flex-col",children:[l.jsx("h4",{className:"text-pink-400 font-bold uppercase text-center text-xs mb-3 tracking-widest",children:"Contest"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(O,{label:c.sheet.cool,value:d.contest.cool,onChange:C=>Mt("cool",C)}),l.jsx(O,{label:c.sheet.beauty,value:d.contest.beauty,onChange:C=>Mt("beauty",C)}),l.jsx(O,{label:c.sheet.cute,value:d.contest.cute,onChange:C=>Mt("cute",C)}),l.jsx(O,{label:c.sheet.clever,value:d.contest.clever,onChange:C=>Mt("clever",C)}),l.jsx(O,{label:c.sheet.tough,value:d.contest.tough,onChange:C=>Mt("tough",C)})]})]})]})]})]}),k&&l.jsx(L_,{abilityName:k.name,filePath:k.path,onClose:()=>T(null),language:o}),D&&l.jsx(M_,{moveName:D.name,filePath:D.path,onClose:()=>S(null),language:o,onRoll:oe}),P&&l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4",children:"Choose Attribute"}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:P.options.map(C=>l.jsx("button",{onClick:()=>ve(C,P.modifier.replace("+","").trim(),P.moveData),className:"w-full py-4 bg-slate-100 dark:bg-slate-800 hover:bg-blue-500 dark:hover:bg-blue-600 hover:text-white rounded-xl font-bold text-lg transition-colors border-2 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-200",children:C},C))}),l.jsx("button",{onClick:()=>L(null),className:"mt-4 text-slate-400 font-bold",children:"Cancel"})]})}),V.isOpen&&l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>w(C=>({...C,isOpen:!1})),children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-6 max-w-sm w-full animate-scale-up text-center shadow-2xl",onClick:C=>C.stopPropagation(),children:[l.jsx("h3",{className:"text-2xl font-black text-slate-800 dark:text-white mb-6 uppercase tracking-tight",children:c.sheet.damageReception}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:c.sheet.damageInflicted}),l.jsx("input",{type:"number",autoFocus:!0,value:V.damage,onChange:C=>w(U=>({...U,damage:C.target.value})),className:"w-full text-center text-4xl font-black bg-slate-100 dark:bg-slate-800 rounded-xl py-4 text-slate-800 dark:text-white outline-none focus:ring-4 focus:ring-red-500 transition-all",placeholder:"0"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[l.jsxs("button",{onClick:()=>w(C=>({...C,type:"physical"})),className:`py-3 rounded-xl font-bold text-sm transition-all border-2 ${V.type==="physical"?"bg-orange-500 border-orange-500 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 hover:border-orange-300"}`,children:[c.sheet.physical,l.jsxs("span",{className:"block text-xs opacity-80 font-normal mt-1",children:["Def: ",d.attributes.vitality.current]})]}),l.jsxs("button",{onClick:()=>w(C=>({...C,type:"special"})),className:`py-3 rounded-xl font-bold text-sm transition-all border-2 ${V.type==="special"?"bg-purple-500 border-purple-500 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 hover:border-purple-300"}`,children:[c.sheet.special,l.jsxs("span",{className:"block text-xs opacity-80 font-normal mt-1",children:["S.Def: ",d.attributes.insight.current]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 mb-6 border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:c.sheet.damageTaken}),l.jsx("span",{className:"text-2xl font-black text-red-500",children:Math.max(0,(parseInt(V.damage)||0)-(V.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current))})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:c.sheet.newHp}),l.jsxs("span",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:[Math.max(0,d.hp.current-Math.max(0,(parseInt(V.damage)||0)-(V.type==="physical"?d.attributes.vitality.current:d.attributes.insight.current)))," / ",d.hp.max]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>w(C=>({...C,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",children:c.cancel}),l.jsx("button",{onClick:We,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors",children:c.apply})]})]})}),N.isOpen&&l.jsx("div",{className:"fixed inset-0 z-[110] bg-black/80 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in p-4",onClick:()=>{N.step==="result"&&R(C=>({...C,isOpen:!1}))},children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[3rem] p-8 md:p-12 w-full max-w-2xl text-center shadow-2xl relative overflow-hidden",onClick:C=>C.stopPropagation(),children:[l.jsx("button",{onClick:()=>R(C=>({...C,isOpen:!1})),className:"absolute top-6 right-6 p-2 bg-slate-100 dark:bg-slate-800 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-800 dark:text-white",children:l.jsx(ys,{size:24})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-4xl font-black text-slate-800 dark:text-white uppercase tracking-tighter mb-2",children:[N.statName," Check"]}),l.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 dark:bg-slate-800 px-4 py-2 rounded-full font-bold text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:N.statValue}),N.selectedSkillName&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"+"}),l.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[N.selectedSkillName," (",N.selectedSkillValue,")"]})]})]})]}),N.step==="setup"&&l.jsxs("div",{className:"animate-fade-in",children:[N.mode==="attribute"&&l.jsxs("div",{className:"mb-8",children:[l.jsx("p",{className:"text-slate-400 font-bold uppercase text-sm mb-4",children:"Add a Skill?"}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-h-48 overflow-y-auto custom-scrollbar p-2",children:Object.entries(d.skills).flatMap(([C,U])=>Object.entries(U).map(([H,Y])=>l.jsxs("button",{onClick:()=>Ge(H,Y),className:`px-4 py-2 rounded-lg font-bold border-2 transition-all capitalize ${N.selectedSkillName===H?"bg-purple-600 border-purple-600 text-white shadow-lg scale-105":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-purple-300 dark:hover:border-purple-500"}`,children:[H," (",Y,")"]},H)))})]}),l.jsxs("button",{onClick:W,className:"w-full py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-black text-2xl shadow-xl hover:scale-[1.02] transition-transform flex items-center justify-center gap-3",children:[l.jsx(mn,{size:32})," ROLL ",N.statValue+N.selectedSkillValue," DICE"]})]}),N.step==="rolling"&&l.jsx("div",{className:"flex flex-wrap justify-center gap-4 py-8",children:N.results.map((C,U)=>l.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-xl flex items-center justify-center text-white text-3xl font-black animate-pulse",children:C},U))}),N.step==="result"&&l.jsxs("div",{className:"animate-scale-up",children:[l.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:N.results.map((C,U)=>l.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center text-2xl font-black border-4 ${C>=4?"bg-green-500 border-green-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-800 border-slate-300 dark:border-slate-700 text-slate-400 dark:text-slate-500"}`,children:C},U))}),N.mode==="initiative"?l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-4 border-yellow-200 dark:border-yellow-700 rounded-2xl p-6",children:[l.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Total Initiative"}),l.jsx("span",{className:"text-6xl font-black text-yellow-500",children:N.total})]}):l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-4 border-green-200 dark:border-green-700 rounded-2xl p-6",children:[l.jsx("span",{className:"block text-slate-400 font-bold uppercase text-xs mb-1",children:"Successes"}),l.jsx("span",{className:"text-6xl font-black text-green-600",children:N.successes})]}),l.jsxs("div",{className:"flex gap-4 mt-6",children:[l.jsx("button",{onClick:()=>R(C=>({...C,isOpen:!1})),className:"flex-1 py-3 rounded-xl font-bold text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Done"}),N.mode==="move"&&N.activeMove&&N.activeMove.damagePool&&l.jsxs("button",{onClick:me,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold shadow-lg transition-colors flex items-center justify-center gap-2",children:[l.jsx(Ed,{size:20})," Roll Damage"]})]})]})]})})]})]})},EA=({onBack:t,allPokemon:e,language:n,natureMap:r,moveFileMap:s,abilityFileMap:i,party:o,setParty:u,pcBoxes:c,setPcBoxes:d,onSave:p,onLoad:m})=>{const x=jn[n],{user:I}=Nu(),[N,R]=B.useState(0),[D,S]=B.useState(!1),[k,T]=B.useState(null),[P,L]=B.useState(null),[V,w]=B.useState(null),[v,b]=B.useState(null),[E,_]=B.useState(null),A=B.useRef(null),g=B.useRef(!1),[K,ne]=B.useState(""),[Ie,Ge]=B.useState(""),W=(F,O)=>{const{source:Q,boxIndex:ae,slotIndex:he}=F,{source:Ce,boxIndex:Xe,slotIndex:Jt}=O;if(Q===Ce&&ae===Xe&&he===Jt)return;let cn=null;if(Q==="party"?cn=o[he]:cn=c[ae][he],!cn)return;let Lt=null;Ce==="party"?Lt=o[Jt]:Lt=c[Xe][Jt];const It=[...o],Ot=[...c],Pe=(re,C,U,H)=>{re==="party"?It[U]=H:(Ot[C]===c[C]&&(Ot[C]=[...c[C]]),Ot[C][U]=H)};Pe(Q,ae,he,null),Pe(Ce,Xe,Jt,cn),Lt&&Pe(Q,ae,he,Lt),u(It),d(Ot)},ee=(F,O,Q,ae)=>{b({source:O,boxIndex:Q,slotIndex:ae}),F.dataTransfer.effectAllowed="move"},oe=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},ve=(F,O,Q,ae)=>{F.preventDefault(),v&&(W(v,{source:O,boxIndex:Q,slotIndex:ae}),b(null))},me=(F,O,Q)=>{g.current=!1,A.current=setTimeout(()=>{(F==="party"?o[Q]:c[O][Q])&&(_({source:F,boxIndex:O,slotIndex:Q}),g.current=!0,navigator.vibrate&&navigator.vibrate(50))},2e3)},_e=()=>{A.current&&(clearTimeout(A.current),A.current=null)},nt=(F,O)=>{if(g.current){g.current=!1;return}if(E){W(E,{source:F===-1?"party":"pc",boxIndex:F,slotIndex:O}),_(null);return}const Q=F===-1?o[O]:c[F][O];Q===null?(T({boxIndex:F,slotIndex:O}),S(!0),ne(""),Ge("")):(w({boxIndex:F,slotIndex:O}),L(Q))},We=F=>{var O,Q,ae,he;return{id:crypto.randomUUID(),dexId:F.Number,nickname:F.Name,speciesName:F.Name,type1:F.Type1,type2:F.Type2,rank:F.RecommendedRank||"Starter",attributes:{strength:{current:F.Strength,max:F.MaxStrength},dexterity:{current:F.Dexterity,max:F.MaxDexterity},vitality:{current:F.Vitality,max:F.MaxVitality},special:{current:F.Special,max:F.MaxSpecial},insight:{current:F.Insight,max:F.MaxInsight}},skills:{fight:{brawl:0,channel:0,clash:0,evasion:0},survival:{alert:0,athletic:0,nature:0,stealth:0},social:{allure:0,etiquette:0,intimidate:0,perform:0}},hp:{current:F.BaseHP,max:F.BaseHP},will:{current:F.Insight+2,max:F.Insight+2},moves:[],nature:"",confidence:"",happiness:2,loyalty:2,battles:0,victories:0,item:"",status:"Neutral",accessory:"",contest:{tough:1,cool:1,beauty:1,cute:1,clever:1},combat:{accuracy:0,damage:0},size:((Q=(O=F.Height)==null?void 0:O.Meters)==null?void 0:Q.toString())||"0",weight:((he=(ae=F.Weight)==null?void 0:ae.Kilograms)==null?void 0:he.toString())||"0",image:D_(F)}},gt=F=>{if(k){const O=We(F),{boxIndex:Q,slotIndex:ae}=k;if(Q===-1){const he=[...o];he[ae]=O,u(he)}else{const he=[...c],Ce=[...he[Q]];Ce[ae]=O,he[Q]=Ce,d(he)}S(!1),T(null)}},at=(F,O,Q)=>{if(F.stopPropagation(),O===-1){const ae=[...o];ae[Q]=null,u(ae)}else{const ae=[...c],he=[...ae[O]];he[Q]=null,ae[O]=he,d(ae)}},Xt=F=>{if(V){const{boxIndex:O,slotIndex:Q}=V;if(O===-1){const ae=[...o];ae[Q]=F,u(ae)}else{const ae=[...c],he=[...ae[O]];he[Q]=F,ae[O]=he,d(ae)}}},rt=()=>R(F=>(F+1)%20),Dt=()=>R(F=>(F-1+20)%20),Vt=()=>{Ge(K)},un=F=>{F.key==="Enter"&&Vt()},Mt=e.filter(F=>Ie.trim()?F.Name.toLowerCase().includes(Ie.toLowerCase()):!0).sort((F,O)=>{if(!Ie.trim())return F.Number-O.Number;const Q=Ie.toLowerCase(),ae=F.Name.toLowerCase(),he=O.Name.toLowerCase();if(ae===Q&&he!==Q)return-1;if(he===Q&&ae!==Q)return 1;const Ce=ae.startsWith(Q),Xe=he.startsWith(Q);return Ce&&!Xe?-1:!Ce&&Xe?1:ae.length!==he.length?ae.length-he.length:ae.localeCompare(he)}).slice(0,50);return l.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen pb-32",children:[l.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:l.jsx(yi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:x.party})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[I&&l.jsxs("div",{className:"flex gap-2 mr-2",children:[l.jsx("button",{onClick:p,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Salva su Cloud",children:l.jsx(xv,{size:20})}),l.jsx("button",{onClick:m,className:"p-2 bg-slate-600 hover:bg-slate-700 text-white rounded-full shadow-md transition-colors flex items-center justify-center",title:"Ricarica da Cloud",children:l.jsx(Hk,{size:20})})]}),l.jsx("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-3 py-1.5 rounded-full shadow-sm border border-slate-200 dark:border-slate-700 opacity-80",children:I?l.jsx($k,{className:"text-green-500",size:16}):l.jsx(Bk,{className:"text-slate-400",size:16})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:o.map((F,O)=>l.jsx("div",{className:"relative",onDragOver:oe,onDrop:Q=>ve(Q,"party",-1,O),onTouchStart:()=>me("party",-1,O),onTouchEnd:_e,onTouchMove:_e,children:F?l.jsxs("div",{draggable:!0,onDragStart:Q=>ee(Q,"party",-1,O),onClick:()=>nt(-1,O),className:`relative h-40 rounded-3xl p-5 shadow-lg overflow-hidden ${Mr(F.type1)} group cursor-grab active:cursor-grabbing transform hover:scale-[1.02] transition-all ${(E==null?void 0:E.source)==="party"&&E.slotIndex===O?"ring-4 ring-yellow-400 scale-95 z-50":""}`,children:[l.jsx("div",{className:"absolute -right-6 -bottom-6 w-40 h-40 opacity-30 text-white pointer-events-none z-0",children:l.jsx(Kd,{})}),l.jsxs("div",{className:"flex justify-between h-full relative z-10 pointer-events-none",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-extrabold text-white text-xl tracking-wide drop-shadow-md truncate w-32",children:F.nickname}),F.nickname!==F.speciesName&&l.jsx("span",{className:"text-white/70 text-xs font-bold uppercase",children:F.speciesName}),l.jsxs("div",{className:"mt-2 flex flex-col items-start",children:[l.jsx(Lr,{type:F.type1,language:n}),F.type2&&l.jsx(Lr,{type:F.type2,language:n})]})]}),l.jsxs("div",{className:"flex flex-col items-end justify-between",children:[l.jsx("div",{className:"bg-black/20 px-2 py-1 rounded-lg",children:l.jsxs("span",{className:"text-white font-mono text-sm",children:["HP ",F.hp.current,"/",F.hp.max]})}),l.jsx("img",{loading:"lazy",src:F.image,alt:F.nickname,className:"w-24 h-24 object-contain absolute bottom-0 right-0 transform translate-x-3 translate-y-3 drop-shadow-lg"})]})]}),l.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity z-20 pointer-events-none",children:l.jsxs("div",{className:"bg-white/20 backdrop-blur-md px-4 py-2 rounded-full flex items-center gap-2",children:[l.jsx(eb,{className:"text-white",size:20}),l.jsx("span",{className:"text-white font-bold",children:"Edit Sheet"})]})}),l.jsx("button",{onClick:Q=>at(Q,-1,O),className:"absolute top-3 right-3 p-2 bg-black/20 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all duration-200 z-30 pointer-events-auto",title:x.removeFromParty,children:l.jsx(zm,{size:16})})]}):l.jsxs("div",{onClick:()=>nt(-1,O),className:`h-40 rounded-3xl border-4 border-dashed border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/30 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 hover:border-slate-400 dark:hover:border-slate-600 transition-all duration-200 group ${(E==null?void 0:E.source)==="party"&&E.slotIndex===O?"ring-4 ring-yellow-400":""}`,children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:l.jsx(si,{size:24})}),l.jsx("span",{className:"font-bold text-lg",children:x.emptySlot})]})},O))}),l.jsxs("div",{className:"mt-8 border-t-2 border-slate-200 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Zk,{className:"text-slate-500 dark:text-slate-400",size:32}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:x.pc})]}),l.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-2 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:Dt,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:l.jsx(zk,{})}),l.jsxs("div",{className:"flex flex-col items-center w-32",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:x.box}),l.jsx("div",{className:"relative",children:l.jsx("select",{value:N,onChange:F=>R(parseInt(F.target.value)),className:"appearance-none bg-transparent font-black text-xl text-center outline-none cursor-pointer text-slate-800 dark:text-white w-full z-10 relative",children:Array.from({length:20}).map((F,O)=>l.jsx("option",{value:O,className:"text-slate-800",children:O+1},O))})})]}),l.jsx("button",{onClick:rt,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:l.jsx(Uk,{})})]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-900/50 p-4 rounded-3xl border-4 border-slate-300 dark:border-slate-800",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:c[N].map((F,O)=>l.jsx("div",{className:"aspect-square relative group",onDragOver:oe,onDrop:Q=>ve(Q,"pc",N,O),onTouchStart:()=>me("pc",N,O),onTouchEnd:_e,onTouchMove:_e,children:F?l.jsxs("div",{draggable:!0,onDragStart:Q=>ee(Q,"pc",N,O),onClick:()=>nt(N,O),className:`w-full h-full rounded-xl shadow-md overflow-hidden ${Mr(F.type1)} cursor-grab active:cursor-grabbing transition-transform hover:scale-105 border-2 border-white/20 ${(E==null?void 0:E.source)==="pc"&&E.boxIndex===N&&E.slotIndex===O?"ring-4 ring-yellow-400 scale-95 z-50":""}`,children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none",children:l.jsx(Kd,{})}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 pointer-events-none",children:[l.jsx("img",{src:F.image,alt:F.nickname,className:"w-16 h-16 object-contain drop-shadow-md mb-1"}),l.jsx("span",{className:"text-[10px] font-bold text-white uppercase truncate w-full text-center bg-black/20 rounded px-1",children:F.nickname})]}),l.jsx("button",{onClick:Q=>at(Q,N,O),className:"absolute top-1 right-1 p-1 bg-black/40 hover:bg-red-600 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all z-10 pointer-events-auto",title:x.removeFromParty,children:l.jsx(zm,{size:12})})]}):l.jsx("div",{onClick:()=>nt(N,O),className:`w-full h-full rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-white/50 dark:bg-slate-800/50 flex flex-col items-center justify-center text-slate-400 hover:bg-white hover:border-slate-400 transition-colors cursor-pointer ${(E==null?void 0:E.source)==="pc"&&E.boxIndex===N&&E.slotIndex===O?"ring-4 ring-yellow-400":""}`,children:l.jsx(si,{size:20,className:"opacity-50"})})},O))})})]}),D&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl flex flex-col max-h-[80vh] animate-scale-up",children:[l.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:x.selectPokemon}),l.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ys,{size:24})})]}),l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900/50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Rl,{className:"absolute left-3 top-3 text-slate-400",size:20}),l.jsx("input",{type:"text",autoFocus:!0,placeholder:x.searchPlaceholder,value:K,onChange:F=>ne(F.target.value),onKeyDown:un,className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),l.jsx("button",{onClick:Vt,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition-colors shadow-lg",children:l.jsx(Rl,{size:24})})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[Mt.map(F=>l.jsxs("button",{onClick:()=>gt(F),className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-700 text-left",children:[l.jsx("img",{src:Lf(F),alt:F.Name,className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-slate-800 dark:text-white",children:F.Name}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["#",F.Number]})]})]},`${F.Number}-${F.Name}`)),Mt.length===0&&l.jsx("div",{className:"col-span-full text-center py-8 text-slate-400",children:x.noResults})]})})]})}),P&&l.jsx(bA,{character:P,baseData:e.find(F=>F.Number===P.dexId),moveFileMap:s,abilityFileMap:i,language:n,onSave:Xt,onClose:()=>{L(null),w(null)},natureMap:r})]})},SA=({items:t,onBack:e,language:n})=>{const r=jn[n],[s,i]=B.useState(""),[o,u]=B.useState(null),[c,d]=B.useState(!1),[p,m]=B.useState({}),x=["Name","Description","Image","_id"],I=["Name","Description","Effect","Cost","_id","Image","Type"],N=["Boost","Category","Cures","ForTypes","ForTipes","Pocket"],R=B.useMemo(()=>{const P=new Map;return t.forEach(L=>{Object.keys(L).forEach(V=>{if(x.includes(V))return;const w=L[V];if(w==null||w==="")return;if(!P.has(V)){let b="string";N.includes(V)?b="select":typeof w=="boolean"&&(b="boolean"),P.set(V,{type:b,options:new Set})}const v=P.get(V);v.type==="select"&&v.options.add(String(w))})}),Array.from(P.entries()).sort((L,V)=>L[0].localeCompare(V[0])).map(([L,V])=>({key:L,type:V.type,options:Array.from(V.options).sort()}))},[t]),D=B.useMemo(()=>t.filter(P=>{if(s&&!P.Name.toLowerCase().includes(s.toLowerCase()))return!1;for(const[L,V]of Object.entries(p)){if(V===""||V===!1||V===null)continue;const w=P[L];if(w==null)return!1;if(typeof V=="boolean"){if(w!==!0)return!1}else if(N.includes(L)){if(String(w)!==String(V))return!1}else{const v=String(w).toLowerCase(),b=String(V).toLowerCase();if(!v.includes(b))return!1}}return!0}),[t,s,p]),S=(P,L)=>{m(V=>({...V,[P]:L}))},k=()=>{i(""),m({})},T=Object.values(p).filter(P=>P!==""&&P!==!1&&P!==null).length;return l.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto min-h-screen pb-20",children:[l.jsx("header",{className:"sticky top-0 z-20 bg-[#f3f4f6]/95 dark:bg-slate-950/95 backdrop-blur-md rounded-b-xl shadow-sm border-b border-slate-200 dark:border-slate-800 transition-colors duration-300 -mx-4 px-4 pt-4 pb-4 mb-6",children:l.jsxs("div",{className:"flex flex-col gap-4 max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[l.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:l.jsx(yi,{className:"w-8 h-8 text-slate-700 dark:text-slate-200"})}),l.jsxs("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(hv,{className:"text-green-500"}),r.sheet.item,"s"]})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("div",{className:"relative w-full md:w-80",children:[l.jsx(Rl,{className:"absolute left-3 top-3 text-slate-400",size:20}),l.jsx("input",{type:"text",placeholder:r.searchPlaceholder,value:s,onChange:P=>i(P.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm"})]}),l.jsxs("button",{onClick:()=>d(!c),className:`p-3 rounded-xl border transition-all flex items-center gap-2 font-bold ${c||T>0?"bg-green-500 border-green-500 text-white shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50"}`,children:[c?l.jsx(ys,{size:20}):l.jsx(bd,{size:20}),l.jsx("span",{className:"hidden md:inline",children:r.filters}),T>0&&l.jsx("span",{className:"bg-white text-green-600 text-[10px] px-1.5 py-0.5 rounded-full min-w-[20px] text-center",children:T})]})]})]}),c&&l.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 shadow-lg animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-slate-100 dark:border-slate-800",children:[l.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 uppercase text-sm tracking-wider",children:"Advanced Filters"}),l.jsxs("button",{onClick:k,className:"text-xs font-bold text-red-500 hover:text-red-600 flex items-center gap-1 uppercase",children:[l.jsx(vv,{size:12})," ",r.clear]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar p-1",children:R.map(({key:P,type:L,options:V})=>l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate",title:P,children:P}),L==="select"?l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:p[P]||"",onChange:w=>S(P,w.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",children:[l.jsx("option",{value:"",children:"Any"}),V.map(w=>l.jsx("option",{value:w,children:w},w))]}),l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",children:l.jsx(bd,{size:12})})]}):L==="boolean"?l.jsxs("button",{onClick:()=>S(P,!p[P]),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-bold transition-all ${p[P]?"bg-green-500 border-green-500 text-white":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-400"}`,children:[p[P]?l.jsx(Lm,{size:16}):l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-slate-300"}),p[P]?"Yes":"No / Any"]}):l.jsx("input",{type:"text",placeholder:`Filter ${P}...`,value:p[P]||"",onChange:w=>S(P,w.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]},P))})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map((P,L)=>l.jsxs("div",{onClick:()=>u(o===P?null:P),className:`bg-white dark:bg-slate-800 rounded-2xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md ${o===P?"border-green-500 ring-2 ring-green-500/20":"border-slate-200 dark:border-slate-700 hover:border-green-300 dark:hover:border-green-700"}`,children:[l.jsxs("div",{className:"flex items-start gap-4 mb-2",children:[l.jsx("div",{className:"w-14 h-14 bg-slate-100 dark:bg-slate-900 rounded-xl p-1 border border-slate-200 dark:border-slate-700 flex items-center justify-center shrink-0",children:l.jsx("img",{src:hA(P),alt:P.Name,className:"w-full h-full object-contain",onError:V=>{V.target.src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",V.target.style.opacity="0.3"}})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight mb-1",children:P.Name}),P.Type&&l.jsxs("span",{className:"inline-flex text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-0.5 rounded-full items-center gap-1",children:[l.jsx(sb,{size:10})," ",P.Type]})]})]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 line-clamp-2 mt-2",children:P.Description}),o===P&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700 animate-fade-in space-y-3",children:[l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-200",children:P.Description}),P.Effect&&l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30",children:[l.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 uppercase block mb-1",children:"Effect"}),l.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200",children:P.Effect})]}),P.Cost!==void 0&&l.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-400 font-bold text-sm bg-yellow-50 dark:bg-yellow-900/10 px-3 py-2 rounded-lg w-max",children:[l.jsx(fv,{size:16}),l.jsxs("span",{children:[P.Cost," "]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg",children:Object.entries(P).map(([V,w])=>{if(I.includes(V)||w==null||w==="")return null;let v=w;return typeof w=="boolean"&&(v=w?l.jsx(Lm,{size:14,className:"text-green-500"}):l.jsx(lb,{size:14,className:"text-red-500"})),typeof w=="object"?null:l.jsxs("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-700/50 last:border-0 pb-1 last:pb-0",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:V}),l.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1",children:v})]},V)})})]})]},L))}),D.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[l.jsx(hu,{size:48,className:"mb-4"}),l.jsx("p",{className:"text-xl",children:r.noResults}),(s||T>0)&&l.jsxs("button",{onClick:k,className:"mt-4 text-green-500 font-bold hover:underline",children:[r.clear," Filters"]})]})]})},TA="https://api.github.com/repos/Pokerole-Software-Development/Pokerole-Data/git/trees/master?recursive=1",Xg="https://raw.githubusercontent.com/Pokerole-Software-Development/Pokerole-Data/master/";function IA(){return l.jsx(tA,{children:l.jsx(NA,{})})}function NA(){const{user:t}=Nu(),[e,n]=B.useState("home"),[r,s]=B.useState("regions"),[i,o]=B.useState("home"),[u,c]=B.useState("National"),[d,p]=B.useState(null),[m,x]=B.useState(0),[I,N]=B.useState([]),[R,D]=B.useState([]),[S,k]=B.useState(Array(6).fill(null)),[T,P]=B.useState(Array(20).fill(null).map(()=>Array(30).fill(null))),[L,V]=B.useState(Ji()),[w,v]=B.useState(!1),[b,E]=B.useState({}),[_,A]=B.useState({}),[g,K]=B.useState({}),[ne,Ie]=B.useState(!0),[Ge,W]=B.useState(0),[ee,oe]=B.useState(0),[ve,me]=B.useState(null),[_e,nt]=B.useState(()=>{if(typeof window<"u"){const O=localStorage.getItem("theme");return O==="dark"||!O&&window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[We,gt]=B.useState("en"),at=()=>{nt(O=>!O)};B.useEffect(()=>{const O=document.documentElement;_e?(O.classList.add("dark"),localStorage.setItem("theme","dark")):(O.classList.remove("dark"),localStorage.setItem("theme","light"))},[_e]),B.useEffect(()=>{(async()=>{try{const Q=await fetch(TA);if(!Q.ok)throw new Error("GitHub API request failed. Limit might be reached.");const ae=await Q.json(),he=[],Ce=[],Xe={},Jt={},cn={};ae.tree.forEach(re=>{if(re.type==="blob"){if(re.path.includes("v2.0/Pokedex")&&re.path.endsWith(".json")&&he.push(re),re.path.includes("v2.0/Items")&&re.path.endsWith(".json")&&Ce.push(re),re.path.includes("v2.0/Moves")&&re.path.endsWith(".json")){const C=re.path.split("/"),U=C[C.length-1].replace(".json","");Xe[U]=re.path}if(re.path.includes("v2.0/Abilities")&&re.path.endsWith(".json")){const C=re.path.split("/"),U=C[C.length-1].replace(".json","");Jt[U]=re.path}if(re.path.includes("v2.0/Natures")&&re.path.endsWith(".json")){const C=re.path.split("/"),U=C[C.length-1].replace(".json","");cn[U]=re.path}}});const Lt=he.length+Ce.length;oe(Lt),E(Xe),A(Jt),K(cn);const It=20,Ot=[];for(let re=0;re<he.length;re+=It){const U=he.slice(re,re+It).map(async X=>{try{const fe=X.path.split("/").map(Nt=>encodeURIComponent(Nt)).join("/"),Ee=`${Xg}${fe}`,Ne=await fetch(Ee);if(!Ne.ok)return null;const Ue=await Ne.json();if(Ue&&Ue.Name){const Nt=Ue.BaseHP!==void 0?Ue.BaseHP:Ue.HP,rr=typeof Ue.Number=="number"?Ue.Number:parseInt(Ue.Number||Ue.DexID||"0");return{...Ue,Number:rr,BaseHP:Nt,Image:Ue.Image||`${Ue.Name}.png`}}return null}catch{return null}}),Y=(await Promise.all(U)).filter(X=>X!==null);Ot.push(...Y),W(X=>Math.min(X+It,Lt))}const Pe=[];for(let re=0;re<Ce.length;re+=It){const U=Ce.slice(re,re+It).map(async Y=>{try{const X=Y.path.split("/").map(Ne=>encodeURIComponent(Ne)).join("/"),fe=`${Xg}${X}`,Ee=await fetch(fe);return Ee.ok?await Ee.json():null}catch{return null}}),H=await Promise.all(U);Pe.push(...H.filter(Y=>Y!==null)),W(Y=>Math.min(Y+It,Lt))}Ot.sort((re,C)=>re.Number-C.Number),Pe.sort((re,C)=>re.Name.localeCompare(C.Name)),N(Ot),D(Pe),Ie(!1)}catch(Q){console.error(Q),me("Failed to load data. Please check your connection or try again later."),Ie(!1)}})()},[]),B.useEffect(()=>{t?Yg(t.uid).then(O=>{const Q=Array(6).fill(null),ae=Array(20).fill(null).map(()=>Array(30).fill(null)),he=O!=null&&O.party&&O.party.length===6?O.party:Q,Ce=O!=null&&O.pcBoxes&&O.pcBoxes.length===20?O.pcBoxes:ae,Xe=(O==null?void 0:O.trainer)||Ji();k(he),P(Ce),V(Xe),v(!0)}):(k(Array(6).fill(null)),P(Array(20).fill(null).map(()=>Array(30).fill(null))),V(Ji()),v(!1))},[t]);const Xt=async()=>{if(t)try{await pA(t.uid,{party:S,pcBoxes:T,trainer:L}),alert("Salvataggio completato con successo!")}catch(O){console.error("Errore salvataggio:",O),alert("Errore durante il salvataggio. Controlla la console.")}},rt=async()=>{if(!t)return;const O=await Yg(t.uid);if(O){const Q=Array(6).fill(null),ae=Array(20).fill(null).map(()=>Array(30).fill(null)),he=O.party&&Array.isArray(O.party)&&O.party.length===6?O.party:Q,Ce=O.pcBoxes&&Array.isArray(O.pcBoxes)?O.pcBoxes:ae,Xe=O.trainer||Ji();k(he),P(Ce),V(Xe),alert("Dati ricaricati dal cloud!")}},Dt=O=>{c(O),s("list"),window.scrollTo(0,0)},Vt=O=>{x(window.scrollY),p(O),s("detail")},un=()=>{s("regions"),c("National"),x(0)},Mt=()=>{s("list"),p(null)};return B.useEffect(()=>{e==="pokedex"&&r==="list"&&setTimeout(()=>{window.scrollTo(0,m)},0)},[e,r,m]),ne&&(e==="pokedex"||e==="pokemon"||e==="items")?l.jsx(xA,{progress:Ge,total:ee,status:"Syncing Database (v2.0)..."}):ve&&(e==="pokedex"||e==="pokemon"||e==="items")?l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 text-center text-slate-600 dark:text-slate-300",children:[l.jsx($h,{className:"w-12 h-12 mb-4 text-red-500 animate-spin"}),l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Oops!"}),l.jsx("p",{children:ve}),l.jsxs("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-slate-800 dark:bg-slate-700 text-white rounded-lg hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[l.jsx(tb,{size:18})," Retry"]})]}):l.jsxs("div",{className:"min-h-screen bg-[#f3f4f6] dark:bg-slate-950 transition-colors duration-300",children:[e==="home"&&l.jsx(yA,{onNavigate:O=>{O==="pokemon"&&o("home"),n(O)},isDark:_e,toggleTheme:at,language:We,setLanguage:gt}),e==="character"&&l.jsx(kA,{trainer:L,setTrainer:V,onBack:()=>n("home"),language:We,onSave:Xt,natureMap:g,party:S,onManagePokemon:()=>{o("character"),n("pokemon")}}),e==="items"&&l.jsx(SA,{items:R,onBack:()=>n("home"),language:We}),e==="pokemon"&&l.jsx(EA,{onBack:()=>n(i),allPokemon:I,language:We,natureMap:g,moveFileMap:b,abilityFileMap:_,party:S,setParty:k,pcBoxes:T,setPcBoxes:P,onSave:Xt,onLoad:rt}),e==="pokedex"&&l.jsxs(l.Fragment,{children:[r==="regions"&&l.jsx(vA,{onSelect:Dt,onHome:()=>n("home"),isDark:_e,toggleTheme:at,language:We,setLanguage:gt}),(r==="list"||r==="detail")&&l.jsx("div",{className:r==="detail"?"hidden":"block",children:l.jsx(_A,{region:u,onBack:un,onSelectPokemon:Vt,data:I,language:We})}),r==="detail"&&d&&l.jsx(wA,{pokemon:d,onBack:Mt,moveMap:b,abilityMap:_,language:We})]})]})}const O_=document.getElementById("root");if(!O_)throw new Error("Could not find root element to mount to");const AA=Cc.createRoot(O_);AA.render(l.jsx(Ew.StrictMode,{children:l.jsx(IA,{})}));
